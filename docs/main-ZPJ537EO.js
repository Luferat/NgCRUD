var EP=Object.defineProperty,IP=Object.defineProperties;var wP=Object.getOwnPropertyDescriptors;var eT=Object.getOwnPropertySymbols,TP=Object.getPrototypeOf,DP=Object.prototype.hasOwnProperty,bP=Object.prototype.propertyIsEnumerable,CP=Reflect.get;var tT=(n,e,t)=>e in n?EP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,F=(n,e)=>{for(var t in e||={})DP.call(e,t)&&tT(n,t,e[t]);if(eT)for(var t of eT(e))bP.call(e,t)&&tT(n,t,e[t]);return n},me=(n,e)=>IP(n,wP(e));var kr=(n,e,t)=>CP(TP(n),t,e);var _=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{a(t.next(u))}catch(l){i(l)}},s=u=>{try{a(t.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((t=t.apply(n,e)).next())});var Bp;function sl(){return Bp}function Cn(n){let e=Bp;return Bp=n,e}var nT=Symbol("NotFound");function Bo(n){return n===nT||n?.name==="\u0275NotFound"}function $p(n,e){return Object.is(n,e)}var mt=null,al=!1,Hp=1,SP=null,Pt=Symbol("SIGNAL");function J(n){let e=mt;return mt=n,e}function ul(){return mt}var La={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Fa(n){if(al)throw new Error("");if(mt===null)return;mt.consumerOnSignalRead(n);let e=mt.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=mt.recomputing;if(r&&(t=e!==void 0?e.nextProducer:mt.producers,t!==void 0&&t.producer===n)){mt.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===mt&&(!r||RP(i,mt)))return;let o=$o(mt),s={producer:n,consumer:mt,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};mt.producersTail=s,e!==void 0?e.nextProducer=s:mt.producers=s,o&&sT(n,s)}function rT(){Hp++}function zp(n){if(!($o(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Hp)){if(!n.producerMustRecompute(n)&&!ja(n)){cl(n);return}n.producerRecomputeValue(n),cl(n)}}function qp(n){if(n.consumers===void 0)return;let e=al;al=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||AP(r)}}finally{al=e}}function Gp(){return mt?.consumerAllowSignalWrites!==!1}function AP(n){n.dirty=!0,qp(n),n.consumerMarkedDirty?.(n)}function cl(n){n.dirty=!1,n.lastCleanEpoch=Hp}function Va(n){return n&&iT(n),J(n)}function iT(n){n.producersTail=void 0,n.recomputing=!0}function ll(n,e){J(e),n&&oT(n)}function oT(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if($o(n))do t=Wp(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function ja(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(zp(t),r!==t.version))return!0}return!1}function Ua(n){if($o(n)){let e=n.producers;for(;e!==void 0;)e=Wp(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function sT(n,e){let t=n.consumersTail,r=$o(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)sT(i.producer,i)}function Wp(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!$o(e)){let o=e.producers;for(;o!==void 0;)o=Wp(o)}return t}function $o(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Kp(n){SP?.(n)}function RP(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function NP(){throw new Error}var aT=NP;function cT(n){aT(n)}function Qp(n){aT=n}var MP=null;function Yp(n,e){let t=Object.create(dl);t.value=n,e!==void 0&&(t.equal=e);let r=()=>uT(t);return r[Pt]=t,Kp(t),[r,s=>Ho(t,s),s=>Zp(t,s)]}function uT(n){return Fa(n),n.value}function Ho(n,e){Gp()||cT(n),n.equal(n.value,e)||(n.value=e,PP(n))}function Zp(n,e){Gp()||cT(n),Ho(n,e(n.value))}var dl=me(F({},La),{equal:$p,value:void 0,kind:"signal"});function PP(n){n.version++,rT(),qp(n),MP?.(n)}function te(n){return typeof n=="function"}function zo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var hl=zo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Si(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Pe=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(te(r))try{r()}catch(o){e=o instanceof hl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{lT(o)}catch(s){e=e??[],s instanceof hl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new hl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)lT(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Si(t,e)}remove(e){let{_finalizers:t}=this;t&&Si(t,e),e instanceof n&&e._removeParent(this)}};Pe.EMPTY=(()=>{let n=new Pe;return n.closed=!0,n})();var Jp=Pe.EMPTY;function fl(n){return n instanceof Pe||n&&"closed"in n&&te(n.remove)&&te(n.add)&&te(n.unsubscribe)}function lT(n){te(n)?n():n.unsubscribe()}var sn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var qo={setTimeout(n,e,...t){let{delegate:r}=qo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=qo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function pl(n){qo.setTimeout(()=>{let{onUnhandledError:e}=sn;if(e)e(n);else throw n})}function Ai(){}var dT=Xp("C",void 0,void 0);function hT(n){return Xp("E",void 0,n)}function fT(n){return Xp("N",n,void 0)}function Xp(n,e,t){return{kind:n,value:e,error:t}}var Ri=null;function Go(n){if(sn.useDeprecatedSynchronousErrorHandling){let e=!Ri;if(e&&(Ri={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ri;if(Ri=null,t)throw r}}else n()}function pT(n){sn.useDeprecatedSynchronousErrorHandling&&Ri&&(Ri.errorThrown=!0,Ri.error=n)}var Ni=class extends Pe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,fl(e)&&e.add(this)):this.destination=OP}static create(e,t,r){return new Wo(e,t,r)}next(e){this.isStopped?tg(fT(e),this):this._next(e)}error(e){this.isStopped?tg(hT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?tg(dT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},kP=Function.prototype.bind;function eg(n,e){return kP.call(n,e)}var ng=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){gl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){gl(r)}else gl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){gl(t)}}},Wo=class extends Ni{constructor(e,t,r){super();let i;if(te(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&sn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&eg(e.next,o),error:e.error&&eg(e.error,o),complete:e.complete&&eg(e.complete,o)}):i=e}this.destination=new ng(i)}};function gl(n){sn.useDeprecatedSynchronousErrorHandling?pT(n):pl(n)}function xP(n){throw n}function tg(n,e){let{onStoppedNotification:t}=sn;t&&qo.setTimeout(()=>t(n,e))}var OP={closed:!0,next:Ai,error:xP,complete:Ai};var Ko=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Vt(n){return n}function ml(...n){return rg(n)}function rg(n){return n.length===0?Vt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var q=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=FP(t)?t:new Wo(t,r,i);return Go(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=gT(r),new r((i,o)=>{let s=new Wo({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ko](){return this}pipe(...t){return rg(t)(this)}toPromise(t){return t=gT(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function gT(n){var e;return(e=n??sn.Promise)!==null&&e!==void 0?e:Promise}function LP(n){return n&&te(n.next)&&te(n.error)&&te(n.complete)}function FP(n){return n&&n instanceof Ni||LP(n)&&fl(n)}function ig(n){return te(n?.lift)}function ce(n){return e=>{if(ig(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(n,e,t,r,i){return new og(n,e,t,r,i)}var og=class extends Ni{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Qo(){return ce((n,e)=>{let t=null;n._refCount++;let r=ue(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Yo=class extends q{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ig(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Pe;let t=this.getSubject();e.add(this.source.subscribe(ue(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Pe.EMPTY)}return e}refCount(){return Qo()(this)}};var mT=zo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ke=(()=>{class n extends q{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new yl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new mT}next(t){Go(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Go(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Go(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Jp:(this.currentObservers=null,o.push(t),new Pe(()=>{this.currentObservers=null,Si(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new q;return t.source=this,t}}return n.create=(e,t)=>new yl(e,t),n})(),yl=class extends ke{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Jp}};var ut=class extends ke{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var sg={now(){return(sg.delegate||Date).now()},delegate:void 0};var vl=class extends Pe{constructor(e,t){super()}schedule(e,t=0){return this}};var Ba={setInterval(n,e,...t){let{delegate:r}=Ba;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Ba;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Zo=class extends vl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Ba.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Ba.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Si(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Jo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Jo.now=sg.now;var Xo=class extends Jo{constructor(e,t=Jo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var ag=new Xo(Zo);var _l=class extends Zo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var El=class extends Xo{};var cg=new El(_l);var kt=new q(n=>n.complete());function yT(n){return n&&te(n.schedule)}function vT(n){return n[n.length-1]}function _T(n){return te(vT(n))?n.pop():void 0}function xr(n){return yT(vT(n))?n.pop():void 0}function Il(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function IT(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function ET(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Mi(n){return this instanceof Mi?(this.v=n,this):new Mi(n)}function wT(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(S){return Promise.resolve(S).then(y,p)}}function a(y,S){r[y]&&(i[y]=function(P){return new Promise(function(M,L){o.push([y,P,M,L])>1||u(y,P)})},S&&(i[y]=S(i[y])))}function u(y,S){try{l(r[y](S))}catch(P){m(o[0][3],P)}}function l(y){y.value instanceof Mi?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,S){y(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function TT(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof ET=="function"?ET(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var wl=n=>n&&typeof n.length=="number"&&typeof n!="function";function Tl(n){return te(n?.then)}function Dl(n){return te(n[Ko])}function bl(n){return Symbol.asyncIterator&&te(n?.[Symbol.asyncIterator])}function Cl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function VP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Sl=VP();function Al(n){return te(n?.[Sl])}function Rl(n){return wT(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Mi(t.read());if(i)return yield Mi(void 0);yield yield Mi(r)}}finally{t.releaseLock()}})}function Nl(n){return te(n?.getReader)}function Xe(n){if(n instanceof q)return n;if(n!=null){if(Dl(n))return jP(n);if(wl(n))return UP(n);if(Tl(n))return BP(n);if(bl(n))return DT(n);if(Al(n))return $P(n);if(Nl(n))return HP(n)}throw Cl(n)}function jP(n){return new q(e=>{let t=n[Ko]();if(te(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function UP(n){return new q(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function BP(n){return new q(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,pl)})}function $P(n){return new q(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function DT(n){return new q(e=>{zP(n,e).catch(t=>e.error(t))})}function HP(n){return DT(Rl(n))}function zP(n,e){var t,r,i,o;return IT(this,void 0,void 0,function*(){try{for(t=TT(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function xt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Or(n,e=0){return ce((t,r)=>{t.subscribe(ue(r,i=>xt(r,n,()=>r.next(i),e),()=>xt(r,n,()=>r.complete(),e),i=>xt(r,n,()=>r.error(i),e)))})}function Lr(n,e=0){return ce((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function bT(n,e){return Xe(n).pipe(Lr(e),Or(e))}function CT(n,e){return Xe(n).pipe(Lr(e),Or(e))}function ST(n,e){return new q(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function AT(n,e){return new q(t=>{let r;return xt(t,e,()=>{r=n[Sl](),xt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>te(r?.return)&&r.return()})}function Ml(n,e){if(!n)throw new Error("Iterable cannot be null");return new q(t=>{xt(t,e,()=>{let r=n[Symbol.asyncIterator]();xt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function RT(n,e){return Ml(Rl(n),e)}function NT(n,e){if(n!=null){if(Dl(n))return bT(n,e);if(wl(n))return ST(n,e);if(Tl(n))return CT(n,e);if(bl(n))return Ml(n,e);if(Al(n))return AT(n,e);if(Nl(n))return RT(n,e)}throw Cl(n)}function Ie(n,e){return e?NT(n,e):Xe(n)}function G(...n){let e=xr(n);return Ie(n,e)}function es(n,e){let t=te(n)?n:()=>n,r=i=>i.error(t());return new q(e?i=>e.schedule(r,0,i):r)}function ug(n){return!!n&&(n instanceof q||te(n.lift)&&te(n.subscribe))}var er=zo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function K(n,e){return ce((t,r)=>{let i=0;t.subscribe(ue(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:qP}=Array;function GP(n,e){return qP(e)?n(...e):n(e)}function MT(n){return K(e=>GP(n,e))}var{isArray:WP}=Array,{getPrototypeOf:KP,prototype:QP,keys:YP}=Object;function PT(n){if(n.length===1){let e=n[0];if(WP(e))return{args:e,keys:null};if(ZP(e)){let t=YP(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function ZP(n){return n&&typeof n=="object"&&KP(n)===QP}function kT(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function $a(...n){let e=xr(n),t=_T(n),{args:r,keys:i}=PT(n);if(r.length===0)return Ie([],e);let o=new q(JP(r,e,i?s=>kT(i,s):Vt));return t?o.pipe(MT(t)):o}function JP(n,e,t=Vt){return r=>{xT(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)xT(e,()=>{let l=Ie(n[u],e),h=!1;l.subscribe(ue(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function xT(n,e,t){n?xt(t,n,e):e()}function OT(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=P=>l<r?S(P):u.push(P),S=P=>{o&&e.next(P),l++;let M=!1;Xe(t(P,h++)).subscribe(ue(e,L=>{i?.(L),o?y(L):e.next(L)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;u.length&&l<r;){let L=u.shift();s?xt(e,s,()=>S(L)):S(L)}m()}catch(L){e.error(L)}}))};return n.subscribe(ue(e,y,()=>{p=!0,m()})),()=>{a?.()}}function Fe(n,e,t=1/0){return te(e)?Fe((r,i)=>K((o,s)=>e(r,o,i,s))(Xe(n(r,i))),t):(typeof e=="number"&&(t=e),ce((r,i)=>OT(r,i,n,t)))}function ts(n=1/0){return Fe(Vt,n)}function LT(){return ts(1)}function ns(...n){return LT()(Ie(n,xr(n)))}function Pi(n){return new q(e=>{Xe(n()).subscribe(e)})}var tr=new q(Ai);function et(n,e){return ce((t,r)=>{let i=0;t.subscribe(ue(r,o=>n.call(e,o,i++)&&r.next(o)))})}function nr(n){return ce((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ue(t,void 0,void 0,s=>{o=Xe(n(s,nr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function FT(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(ue(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Fr(n,e){return te(e)?Fe(n,e,1):Fe(n,1)}function Vr(n){return ce((e,t)=>{let r=!1;e.subscribe(ue(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function St(n){return n<=0?()=>kt:ce((e,t)=>{let r=0;e.subscribe(ue(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Pl(n=XP){return ce((e,t)=>{let r=!1;e.subscribe(ue(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function XP(){return new er}function Ha(n){return ce((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function rr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?et((i,o)=>n(i,o,r)):Vt,St(1),t?Vr(e):Pl(()=>new er))}function rs(n){return n<=0?()=>kt:ce((e,t)=>{let r=[];e.subscribe(ue(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function lg(n,e){let t=arguments.length>=2;return r=>r.pipe(n?et((i,o)=>n(i,o,r)):Vt,rs(1),t?Vr(e):Pl(()=>new er))}function kl(n,e){return ce(FT(n,e,arguments.length>=2,!0))}function xl(...n){let e=xr(n);return ce((t,r)=>{(e?ns(n,t,e):ns(n,t)).subscribe(r)})}function Se(n,e){return ce((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ue(r,u=>{i?.unsubscribe();let l=0,h=o++;Xe(n(u,h)).subscribe(i=ue(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Ol(n){return ce((e,t)=>{Xe(n).subscribe(ue(t,()=>t.complete(),Ai)),!t.closed&&e.subscribe(t)})}function tt(n,e,t){let r=te(n)||e||t?{next:n,error:e,complete:t}:n;return r?ce((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ue(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Vt}function VT(n){let e=J(null);try{return n()}finally{J(e)}}var xi=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Tg=new xi("20.3.1");var Ul="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",U=class extends Error{code;constructor(e,t){super($r(e,t)),this.code=e}};function ek(n){return`NG0${Math.abs(n)}`}function $r(n,e){return`${ek(n)}${e?": "+e:""}`}var Wa=globalThis;function ye(n){for(let e in n)if(n[e]===ye)return e;throw Error("")}function jr(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(jr).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Dg(n,e){return n?e?`${n} ${e}`:n:e||""}var tk=ye({__forward_ref__:ye});function Bl(n){return n.__forward_ref__=Bl,n.toString=function(){return jr(this())},n}function Ot(n){return bg(n)?n():n}function bg(n){return typeof n=="function"&&n.hasOwnProperty(tk)&&n.__forward_ref__===Bl}function j(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function sr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ka(n){return nk(n,$l)}function Cg(n){return Ka(n)!==null}function nk(n,e){return n.hasOwnProperty(e)&&n[e]||null}function rk(n){let e=n?.[$l]??null;return e||null}function hg(n){return n&&n.hasOwnProperty(Fl)?n[Fl]:null}var $l=ye({\u0275prov:ye}),Fl=ye({\u0275inj:ye}),B=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=j({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Sg(n){return n&&!!n.\u0275providers}var Ag=ye({\u0275cmp:ye}),Rg=ye({\u0275dir:ye}),Ng=ye({\u0275pipe:ye}),Mg=ye({\u0275mod:ye}),qa=ye({\u0275fac:ye}),Fi=ye({__NG_ELEMENT_ID__:ye}),UT=ye({__NG_ENV_ID__:ye});function Qa(n){return typeof n=="string"?n:n==null?"":String(n)}function $T(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Qa(n)}var HT=ye({ngErrorCode:ye}),ik=ye({ngErrorMessage:ye}),ok=ye({ngTokenPath:ye});function Pg(n,e){return zT("",-200,e)}function Hl(n,e){throw new U(-201,!1)}function zT(n,e,t){let r=new U(e,n);return r[HT]=e,r[ik]=n,t&&(r[ok]=t),r}function sk(n){return n[HT]}var fg;function qT(){return fg}function At(n){let e=fg;return fg=n,e}function kg(n,e,t){let r=Ka(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Hl(n,"Injector")}var ak={},ki=ak,pg="__NG_DI_FLAG__",gg=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Oi(t)||0;try{return this.injector.get(e,r&8?null:ki,r)}catch(i){if(Bo(i))return i;throw i}}};function ck(n,e=0){let t=sl();if(t===void 0)throw new U(-203,!1);if(t===null)return kg(n,void 0,e);{let r=uk(e),i=t.retrieve(n,r);if(Bo(i)){if(r.optional)return null;throw i}return i}}function $(n,e=0){return(qT()||ck)(Ot(n),e)}function R(n,e){return $(n,Oi(e))}function Oi(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function uk(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function mg(n){let e=[];for(let t=0;t<n.length;t++){let r=Ot(n[t]);if(Array.isArray(r)){if(r.length===0)throw new U(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=lk(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push($(i,o))}else e.push($(r))}return e}function GT(n,e){return n[pg]=e,n.prototype[pg]=e,n}function lk(n){return n[pg]}function Ur(n,e){let t=n.hasOwnProperty(qa);return t?n[qa]:null}function zl(n,e){n.forEach(t=>Array.isArray(t)?zl(t,e):e(t))}function xg(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ya(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}var Vi={},an=[],ar=new B(""),Og=new B("",-1),Lg=new B(""),Ga=class{get(e,t=ki){if(t===ki){let i=zT("",-201);throw i.name="\u0275NotFound",i}return t}};function Fg(n){return n[Mg]||null}function cr(n){return n[Ag]||null}function Vg(n){return n[Rg]||null}function WT(n){return n[Ng]||null}function yt(n){return{\u0275providers:n}}function KT(n){return yt([{provide:ar,multi:!0,useValue:n}])}function QT(...n){return{\u0275providers:jg(!0,n),\u0275fromNgModule:!0}}function jg(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return zl(e,s=>{let a=s;Vl(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&YT(i,o),t}function YT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Ug(i,o=>{e(o,r)})}}function Vl(n,e,t,r){if(n=Ot(n),!n)return!1;let i=null,o=hg(n),s=!o&&cr(n);if(!o&&!s){let u=n.ngModule;if(o=hg(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Vl(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{zl(o.imports,h=>{Vl(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&YT(l,e)}if(!a){let l=Ur(i)||(()=>new i);e({provide:i,useFactory:l,deps:an},i),e({provide:Lg,useValue:i,multi:!0},i),e({provide:ar,useValue:()=>$(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;Ug(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Ug(n,e){for(let t of n)Sg(t)&&(t=t.\u0275providers),Array.isArray(t)?Ug(t,e):e(t)}var dk=ye({provide:String,useValue:ye});function ZT(n){return n!==null&&typeof n=="object"&&dk in n}function hk(n){return!!(n&&n.useExisting)}function fk(n){return!!(n&&n.useFactory)}function jl(n){return typeof n=="function"}var Za=new B(""),Ll={},BT={},dg;function Ja(){return dg===void 0&&(dg=new Ga),dg}var Ve=class{},Li=class extends Ve{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,vg(e,s=>this.processProvider(s)),this.records.set(Og,is(void 0,this)),i.has("environment")&&this.records.set(Ve,is(void 0,this));let o=this.records.get(Za);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Lg,an,{self:!0}))}retrieve(e,t){let r=Oi(t)||0;try{return this.get(e,ki,r)}catch(i){if(Bo(i))return i;throw i}}destroy(){za(this),this._destroyed=!0;let e=J(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),J(e)}}onDestroy(e){return za(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){za(this);let t=Cn(this),r=At(void 0),i;try{return e()}finally{Cn(t),At(r)}}get(e,t=ki,r){if(za(this),e.hasOwnProperty(UT))return e[UT](this);let i=Oi(r),o,s=Cn(this),a=At(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=vk(e)&&Ka(e);h&&this.injectableDefInScope(h)?l=is(yg(e),Ll):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?Ja():this.parent;return t=i&8&&t===ki?null:t,u.get(e,t)}catch(u){let l=sk(u);throw l===-200||l===-201?new U(l,null):u}finally{At(a),Cn(s)}}resolveInjectorInitializers(){let e=J(null),t=Cn(this),r=At(void 0),i;try{let o=this.get(ar,an,{self:!0});for(let s of o)s()}finally{Cn(t),At(r),J(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(jr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ot(e);let t=jl(e)?e:Ot(e&&e.provide),r=gk(e);if(!jl(e)&&e.multi===!0){let i=this.records.get(t);i||(i=is(void 0,Ll,!0),i.factory=()=>mg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=J(null);try{if(t.value===BT)throw Pg(jr(e));return t.value===Ll&&(t.value=BT,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&yk(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{J(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ot(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function yg(n){let e=Ka(n),t=e!==null?e.factory:Ur(n);if(t!==null)return t;if(n instanceof B)throw new U(204,!1);if(n instanceof Function)return pk(n);throw new U(204,!1)}function pk(n){if(n.length>0)throw new U(204,!1);let t=rk(n);return t!==null?()=>t.factory(n):()=>new n}function gk(n){if(ZT(n))return is(void 0,n.useValue);{let e=JT(n);return is(e,Ll)}}function JT(n,e,t){let r;if(jl(n)){let i=Ot(n);return Ur(i)||yg(i)}else if(ZT(n))r=()=>Ot(n.useValue);else if(fk(n))r=()=>n.useFactory(...mg(n.deps||[]));else if(hk(n))r=(i,o)=>$(Ot(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Ot(n&&(n.useClass||n.provide));if(mk(n))r=()=>new i(...mg(n.deps));else return Ur(i)||yg(i)}return r}function za(n){if(n.destroyed)throw new U(205,!1)}function is(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function mk(n){return!!n.deps}function yk(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function vk(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function vg(n,e){for(let t of n)Array.isArray(t)?vg(t,e):t&&Sg(t)?vg(t.\u0275providers,e):e(t)}function $e(n,e){let t;n instanceof Li?(za(n),t=n):t=new gg(n);let r,i=Cn(t),o=At(void 0);try{return e()}finally{Cn(i),At(o)}}function XT(){return qT()!==void 0||sl()!=null}var un=0,Y=1,X=2,nt=3,Qt=4,Yt=5,os=6,ss=7,je=8,as=9,Sn=10,Ue=11,cs=12,Bg=13,ji=14,jt=15,Ui=16,Bi=17,$i=18,Xa=19,$g=20,ir=21,ql=22,ec=23,Ut=24,Hi=25,lt=26,Qe=27,eD=1,Hg=6,Hr=7,tc=8,nc=9,Ye=10;function An(n){return Array.isArray(n)&&typeof n[eD]=="object"}function ln(n){return Array.isArray(n)&&n[eD]===!0}function zg(n){return(n.flags&4)!==0}function zr(n){return n.componentOffset>-1}function Gl(n){return(n.flags&1)===1}function zi(n){return!!n.template}function us(n){return(n[X]&512)!==0}function qi(n){return(n[X]&256)===256}var tD="svg",nD="math";function Zt(n){for(;Array.isArray(n);)n=n[un];return n}function rD(n,e){return Zt(e[n])}function dn(n,e){return Zt(e[n.index])}function rc(n,e){return n.data[e]}function iD(n,e){return n[e]}function qg(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Jt(n,e){let t=e[n];return An(t)?t:t[un]}function Wl(n){return(n[X]&128)===128}function oD(n){return ln(n[nt])}function Rn(n,e){return e==null?null:n[e]}function Gg(n){n[Bi]=0}function Wg(n){n[X]&1024||(n[X]|=1024,Wl(n)&&ls(n))}function sD(n,e){for(;n>0;)e=e[ji],n--;return e}function ic(n){return!!(n[X]&9216||n[Ut]?.dirty)}function Kl(n){n[Sn].changeDetectionScheduler?.notify(8),n[X]&64&&(n[X]|=1024),ic(n)&&ls(n)}function ls(n){n[Sn].changeDetectionScheduler?.notify(0);let e=Br(n);for(;e!==null&&!(e[X]&8192||(e[X]|=8192,!Wl(e)));)e=Br(e)}function Kg(n,e){if(qi(n))throw new U(911,!1);n[ir]===null&&(n[ir]=[]),n[ir].push(e)}function aD(n,e){if(n[ir]===null)return;let t=n[ir].indexOf(e);t!==-1&&n[ir].splice(t,1)}function Br(n){let e=n[nt];return ln(e)?e[nt]:e}function cD(n){return n[ss]??=[]}function uD(n){return n.cleanup??=[]}var ae={lFrame:ID(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var _g=!1;function lD(){return ae.lFrame.elementDepthCount}function dD(){ae.lFrame.elementDepthCount++}function Qg(){ae.lFrame.elementDepthCount--}function hD(){return ae.bindingsEnabled}function fD(){return ae.skipHydrationRootTNode!==null}function Yg(n){return ae.skipHydrationRootTNode===n}function Zg(){ae.skipHydrationRootTNode=null}function fe(){return ae.lFrame.lView}function Xt(){return ae.lFrame.tView}function Gi(n){return ae.lFrame.contextLView=n,n[je]}function Wi(n){return ae.lFrame.contextLView=null,n}function Lt(){let n=Jg();for(;n!==null&&n.type===64;)n=n.parent;return n}function Jg(){return ae.lFrame.currentTNode}function pD(){let n=ae.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ds(n,e){let t=ae.lFrame;t.currentTNode=n,t.isParent=e}function Xg(){return ae.lFrame.isParent}function gD(){ae.lFrame.isParent=!1}function em(){return _g}function tm(n){let e=_g;return _g=n,e}function nm(){let n=ae.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function mD(n){return ae.lFrame.bindingIndex=n}function Ki(){return ae.lFrame.bindingIndex++}function yD(){return ae.lFrame.inI18n}function vD(n,e){let t=ae.lFrame;t.bindingIndex=t.bindingRootIndex=n,Ql(e)}function _D(){return ae.lFrame.currentDirectiveIndex}function Ql(n){ae.lFrame.currentDirectiveIndex=n}function rm(n){ae.lFrame.currentQueryIndex=n}function _k(n){let e=n[Y];return e.type===2?e.declTNode:e.type===1?n[Yt]:null}function im(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=_k(o),i===null||(o=o[ji],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ae.lFrame=ED();return r.currentTNode=e,r.lView=n,!0}function Yl(n){let e=ED(),t=n[Y];ae.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function ED(){let n=ae.lFrame,e=n===null?null:n.child;return e===null?ID(n):e}function ID(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function wD(){let n=ae.lFrame;return ae.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var om=wD;function Zl(){let n=wD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function TD(n){return(ae.lFrame.contextLView=sD(n,ae.lFrame.contextLView))[je]}function oc(){return ae.lFrame.selectedIndex}function qr(n){ae.lFrame.selectedIndex=n}function Jl(){let n=ae.lFrame;return rc(n.tView,n.selectedIndex)}function DD(){return ae.lFrame.currentNamespace}var bD=!0;function Xl(){return bD}function ed(n){bD=n}function Eg(n,e=null,t=null,r){let i=sm(n,e,t,r);return i.resolveInjectorInitializers(),i}function sm(n,e=null,t=null,r,i=new Set){let o=[t||an,QT(n)];return r=r||(typeof n=="object"?void 0:jr(n)),new Li(o,e||Ja(),r||null,i)}var Ne=class n{static THROW_IF_NOT_FOUND=ki;static NULL=new Ga;static create(e,t){if(Array.isArray(e))return Eg({name:""},t,e,"");{let r=e.name??"";return Eg({name:r},e.parent,e.providers,r)}}static \u0275prov=j({token:n,providedIn:"any",factory:()=>$(Og)});static __NG_ELEMENT_ID__=-1},Be=new B(""),ur=(()=>{class n{static __NG_ELEMENT_ID__=Ek;static __NG_ENV_ID__=t=>t}return n})(),Ig=class extends ur{_lView;constructor(e){super(),this._lView=e}get destroyed(){return qi(this._lView)}onDestroy(e){let t=this._lView;return Kg(t,e),()=>aD(t,e)}};function Ek(){return new Ig(fe())}var cn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},vt=new B("",{providedIn:"root",factory:()=>{let n=R(Ve),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(cn),e.handleError(t))}}}),CD={provide:ar,useValue:()=>void R(cn),multi:!0},Ik=new B("",{providedIn:"root",factory:()=>{let n=R(Be).defaultView;if(!n)return;let e=R(vt),t=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),R(ur).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function am(){return yt([KT(()=>void R(Ik))])}function Qi(n,e){let[t,r,i]=Yp(n,e?.equal),o=t,s=o[Pt];return o.set=r,o.update=i,o.asReadonly=SD.bind(o),o}function SD(){let n=this[Pt];if(n.readonlyFn===void 0){let e=()=>this();e[Pt]=n,n.readonlyFn=e}return n.readonlyFn}var or=class{},sc=new B("",{providedIn:"root",factory:()=>!1});var cm=new B(""),um=new B("");var td=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=wk}return n})();function wk(){return new td(fe(),Lt())}var Nn=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new ut(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new q(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=j({token:n,providedIn:"root",factory:()=>new n})}return n})(),hs=(()=>{class n{internalPendingTasks=R(Nn);scheduler=R(or);errorHandler=R(vt);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=j({token:n,providedIn:"root",factory:()=>new n})}return n})();function ac(...n){}var lm=(()=>{class n{static \u0275prov=j({token:n,providedIn:"root",factory:()=>new wg})}return n})(),wg=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function ms(n){return{toString:n}.toString()}var nd="__parameters__";function Mk(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function Pk(n,e,t){return ms(()=>{let r=Mk(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(nd)?u[nd]:Object.defineProperty(u,nd,{value:[]})[nd];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Bt=GT(Pk("Optional"),8);function kk(n){return typeof n=="function"}var ad=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function tb(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var ys=(()=>{let n=()=>nb;return n.ngInherit=!0,n})();function nb(n){return n.type.prototype.ngOnChanges&&(n.setInput=Ok),xk}function xk(){let n=ib(this),e=n?.current;if(e){let t=n.previous;if(t===Vi)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Ok(n,e,t,r,i){let o=this.declaredInputs[r],s=ib(n)||Lk(n,{previous:Vi,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new ad(l&&l.currentValue,t,u===Vi),tb(n,e,i,t)}var rb="__ngSimpleChanges__";function ib(n){return n[rb]||null}function Lk(n,e){return n[rb]=e}var AD=[];var Ee=function(n,e=null,t){for(let r=0;r<AD.length;r++){let i=AD[r];i(n,e,t)}};function Fk(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=nb(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Vk(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function id(n,e,t){ob(n,e,3,t)}function od(n,e,t,r){(n[X]&3)===t&&ob(n,e,t,r)}function dm(n,e){let t=n[X];(t&3)===e&&(t&=16383,t+=1,n[X]=t)}function ob(n,e,t,r){let i=r!==void 0?n[Bi]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Bi]+=65536),(a<o||o==-1)&&(jk(n,t,e,u),n[Bi]=(n[Bi]&4294901760)+u+2),u++}function RD(n,e){Ee(4,n,e);let t=J(null);try{e.call(n)}finally{J(t),Ee(5,n,e)}}function jk(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[X]>>14<n[Bi]>>16&&(n[X]&3)===e&&(n[X]+=16384,RD(a,o)):RD(a,o)}var ps=-1,lc=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function Uk(n){return(n.flags&8)!==0}function Bk(n){return(n.flags&16)!==0}function $k(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];Hk(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function sb(n){return n===3||n===4||n===6}function Hk(n){return n.charCodeAt(0)===64}function bd(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?ND(n,t,i,null,e[++r]):ND(n,t,i,null,null))}}return n}function ND(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function ab(n){return n!==ps}function cd(n){return n&32767}function zk(n){return n>>16}function ud(n,e){let t=zk(n),r=e;for(;t>0;)r=r[ji],t--;return r}var ym=!0;function ld(n){let e=ym;return ym=n,e}var qk=256,cb=qk-1,ub=5,Gk=0,Mn={};function Wk(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Fi)&&(r=t[Fi]),r==null&&(r=t[Fi]=Gk++);let i=r&cb,o=1<<i;e.data[n+(i>>ub)]|=o}function lb(n,e){let t=db(n,e);if(t!==-1)return t;let r=e[Y];r.firstCreatePass&&(n.injectorIndex=e.length,hm(r.data,n),hm(e,null),hm(r.blueprint,null));let i=Vm(n,e),o=n.injectorIndex;if(ab(i)){let s=cd(i),a=ud(i,e),u=a[Y].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function hm(n,e){n.push(0,0,0,0,0,0,0,0,e)}function db(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Vm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=mb(i),r===null)return ps;if(t++,i=i[ji],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ps}function Kk(n,e,t){Wk(n,e,t)}function Qk(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(sb(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function hb(n,e,t){if(t&8||n!==void 0)return n;Hl(e,"NodeInjector")}function fb(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[as],o=At(void 0);try{return i?i.get(e,r,t&8):kg(e,r,t&8)}finally{At(o)}}return hb(r,e,t)}function pb(n,e,t,r=0,i){if(n!==null){if(e[X]&2048&&!(r&2)){let s=ex(n,e,t,r,Mn);if(s!==Mn)return s}let o=gb(n,e,t,r,Mn);if(o!==Mn)return o}return fb(e,t,r,i)}function gb(n,e,t,r,i){let o=Jk(t);if(typeof o=="function"){if(!im(e,n,r))return r&1?hb(i,t,r):fb(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Hl(t);else return s}finally{om()}}else if(typeof o=="number"){let s=null,a=db(n,e),u=ps,l=r&1?e[jt][Yt]:null;for((a===-1||r&4)&&(u=a===-1?Vm(n,e):e[a+8],u===ps||!PD(r,!1)?a=-1:(s=e[Y],a=cd(u),e=ud(u,e)));a!==-1;){let h=e[Y];if(MD(o,a,h.data)){let p=Yk(a,e,t,s,r,l);if(p!==Mn)return p}u=e[a+8],u!==ps&&PD(r,e[Y].data[a+8]===l)&&MD(o,a,e)?(s=h,a=cd(u),e=ud(u,e)):a=-1}}return i}function Yk(n,e,t,r,i,o){let s=e[Y],a=s.data[n+8],u=r==null?zr(a)&&ym:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=Zk(a,s,t,u,l);return h!==null?vm(e,s,h,a,i):Mn}function Zk(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let S=s[y];if(y<u&&t===S||y>=u&&S.type===t)return y}if(i){let y=s[u];if(y&&zi(y)&&y.type===t)return u}return null}function vm(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof lc){let a=o;if(a.resolving){let y=$T(s[t]);throw Pg(y)}let u=ld(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],h,p=a.injectImpl?At(a.injectImpl):null,m=im(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&Fk(t,s[t],e)}finally{p!==null&&At(p),ld(u),a.resolving=!1,om()}}return o}function Jk(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Fi)?n[Fi]:void 0;return typeof e=="number"?e>=0?e&cb:Xk:e}function MD(n,e,t){let r=1<<n;return!!(t[e+(n>>ub)]&r)}function PD(n,e){return!(n&2)&&!(n&1&&e)}var Yi=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return pb(this._tNode,this._lView,e,Oi(r),t)}};function Xk(){return new Yi(Lt(),fe())}function Cd(n){return ms(()=>{let e=n.prototype.constructor,t=e[qa]||_m(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[qa]||_m(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function _m(n){return bg(n)?()=>{let e=_m(Ot(n));return e&&e()}:Ur(n)}function ex(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[X]&2048&&!us(s);){let a=gb(o,s,t,r|2,Mn);if(a!==Mn)return a;let u=o.parent;if(!u){let l=s[$g];if(l){let h=l.get(t,Mn,r);if(h!==Mn)return h}u=mb(s),s=s[ji]}o=u}return i}function mb(n){let e=n[Y],t=e.type;return t===2?e.declTNode:t===1?n[Yt]:null}function gc(n){return Qk(Lt(),n)}function tx(){return jm(Lt(),fe())}function jm(n,e){return new to(dn(n,e))}var to=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=tx}return n})();function yb(n){return(n.flags&128)===128}var Um=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(Um||{}),vb=new Map,nx=0;function rx(){return nx++}function ix(n){vb.set(n[Xa],n)}function Em(n){vb.delete(n[Xa])}var kD="__ngContext__";function gs(n,e){An(e)?(n[kD]=e[Xa],ix(e)):n[kD]=e}function _b(n){return Ib(n[cs])}function Eb(n){return Ib(n[Qt])}function Ib(n){for(;n!==null&&!ln(n);)n=n[Qt];return n}var Im;function Bm(n){Im=n}function wb(){if(Im!==void 0)return Im;if(typeof document<"u")return document;throw new U(210,!1)}var Sd=new B("",{providedIn:"root",factory:()=>ox}),ox="ng",Ad=new B(""),Gr=new B("",{providedIn:"platform",factory:()=>"unknown"});var Rd=new B("",{providedIn:"root",factory:()=>wb().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var sx="h",ax="b";var Tb="r";var Db="di";var bb=!1,Cb=new B("",{providedIn:"root",factory:()=>bb});var $m=new B("");var cx=(n,e,t,r)=>{};function ux(n,e,t,r){cx(n,e,t,r)}function Hm(n){return(n.flags&32)===32}var lx=()=>null;function Sb(n,e,t=!1){return lx(n,e,t)}function Ab(n,e){let t=n.contentQueries;if(t!==null){let r=J(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];rm(o),a.contentQueries(2,e[s],s)}}}finally{J(r)}}}function wm(n,e,t){rm(0);let r=J(null);try{e(n,t)}finally{J(r)}}function Rb(n,e,t){if(zg(e)){let r=J(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{J(r)}}}var lr=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(lr||{});var rd;function dx(){if(rd===void 0&&(rd=null,Wa.trustedTypes))try{rd=Wa.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return rd}function xD(n){return dx()?.createScriptURL(n)||n}var dd=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ul})`}};function Nd(n){return n instanceof dd?n.changingThisBreaksApplicationSecurity:n}function zm(n,e){let t=Nb(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Ul})`)}return t===e}function Nb(n){return n instanceof dd&&n.getTypeName()||null}var hx=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Mb(n){return n=String(n),n.match(hx)?n:"unsafe:"+n}var Md=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Md||{});function no(n){let e=kb();return e?e.sanitize(Md.URL,n)||"":zm(n,"URL")?Nd(n):Mb(Qa(n))}function Pb(n){let e=kb();if(e)return xD(e.sanitize(Md.RESOURCE_URL,n)||"");if(zm(n,"ResourceURL"))return xD(Nd(n));throw new U(904,!1)}function fx(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?Pb:no}function qm(n,e,t){return fx(e,t)(n)}function kb(){let n=fe();return n&&n[Sn].sanitizer}function xb(n){return n instanceof Function?n():n}function px(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var Ob="ng-template";function gx(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&px(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Gm(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Gm(n){return n.type===4&&n.value!==Ob}function mx(n,e,t){let r=n.type===4&&!t?Ob:n.value;return e===r}function yx(n,e,t){let r=4,i=n.attrs,o=i!==null?Ex(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!hn(r)&&!hn(u))return!1;if(s&&hn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!mx(n,u,t)||u===""&&e.length===1){if(hn(r))return!1;s=!0}}else if(r&8){if(i===null||!gx(n,i,u,t)){if(hn(r))return!1;s=!0}}else{let l=e[++a],h=vx(u,i,Gm(n),t);if(h===-1){if(hn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(hn(r))return!1;s=!0}}}}return hn(r)||s}function hn(n){return(n&1)===0}function vx(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Ix(e,n)}function _x(n,e,t=!1){for(let r=0;r<e.length;r++)if(yx(n,e[r],t))return!0;return!1}function Ex(n){for(let e=0;e<n.length;e++){let t=n[e];if(sb(t))return e}return n.length}function Ix(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function OD(n,e){return n?":not("+e.trim()+")":e}function wx(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!hn(s)&&(e+=OD(o,i),i=""),r=s,o=o||!hn(r);t++}return i!==""&&(e+=OD(o,i)),e}function Tx(n){return n.map(wx).join(",")}function Dx(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!hn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Wr={};function bx(n,e){return n.createText(e)}function Cx(n,e,t){n.setValue(e,t)}function Lb(n,e,t){return n.createElement(e,t)}function hd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Fb(n,e,t){n.appendChild(e,t)}function LD(n,e,t,r,i){r!==null?hd(n,e,t,r,i):Fb(n,e,t)}function Vb(n,e,t){n.removeChild(null,e,t)}function Sx(n,e,t){n.setAttribute(e,"style",t)}function Ax(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function jb(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&$k(n,e,r),i!==null&&Ax(n,e,i),o!==null&&Sx(n,e,o)}function Wm(n,e,t,r,i,o,s,a,u,l,h){let p=Qe+r,m=p+i,y=Rx(p,m),S=typeof l=="function"?l():l;return y[Y]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function Rx(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Wr);return t}function Nx(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Wm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Km(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[un]=i,p[X]=r|4|128|8|64|1024,(l!==null||n&&n[X]&2048)&&(p[X]|=2048),Gg(p),p[nt]=p[ji]=n,p[je]=t,p[Sn]=s||n&&n[Sn],p[Ue]=a||n&&n[Ue],p[as]=u||n&&n[as]||null,p[Yt]=o,p[Xa]=rx(),p[os]=h,p[$g]=l,p[jt]=e.type==2?n[jt]:p,p}function Mx(n,e,t){let r=dn(e,n),i=Nx(t),o=n[Sn].rendererFactory,s=Qm(n,Km(n,i,null,Ub(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function Ub(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function Bb(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Qm(n,e){return n[cs]?n[Bg][Qt]=e:n[cs]=e,n[Bg]=e,e}function _t(n=1){$b(Xt(),fe(),oc()+n,!1)}function $b(n,e,t,r){if(!r)if((e[X]&3)===3){let o=n.preOrderCheckHooks;o!==null&&id(e,o,t)}else{let o=n.preOrderHooks;o!==null&&od(e,o,0,t)}qr(t)}var Pd=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Pd||{});function Tm(n,e,t,r){let i=J(null);try{let[o,s,a]=n.inputs[t],u=null;(s&Pd.SignalBased)!==0&&(u=e[o][Pt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):tb(e,u,o,r)}finally{J(i)}}var Kr=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Kr||{}),Px;function Ym(n,e){return Px(n,e)}var kd=new Set;function fs(n,e,t,r,i,o){if(r!=null){let s,a=!1;ln(r)?s=r:An(r)&&(a=!0,r=r[un]);let u=Zt(r);n===0&&t!==null?i==null?Fb(e,t,u):hd(e,t,u,i||null,!0):n===1&&t!==null?hd(e,t,u,i||null,!0):n===2?FD(o,()=>{Vb(e,u,a)}):n===3&&FD(o,()=>{e.destroyNode(u)}),s!=null&&qx(e,n,s,t,i)}}function kx(n,e){Hb(n,e),e[un]=null,e[Yt]=null}function xx(n,e,t,r,i,o){r[un]=i,r[Yt]=e,Od(n,r,t,1,i,o)}function Hb(n,e){e[Sn].changeDetectionScheduler?.notify(9),Od(n,e,e[Ue],2,null,null)}function Ox(n){let e=n[cs];if(!e)return fm(n[Y],n);for(;e;){let t=null;if(An(e))t=e[cs];else{let r=e[Ye];r&&(t=r)}if(!t){for(;e&&!e[Qt]&&e!==n;)An(e)&&fm(e[Y],e),e=e[nt];e===null&&(e=n),An(e)&&fm(e[Y],e),t=e&&e[Qt]}e=t}}function Zm(n,e){let t=n[nc],r=t.indexOf(e);t.splice(r,1)}function xd(n,e){if(qi(e))return;let t=e[Ue];t.destroyNode&&Od(n,e,t,3,null,null),Ox(e)}function fm(n,e){if(qi(e))return;let t=J(null);try{e[X]&=-129,e[X]|=256,e[Ut]&&Ua(e[Ut]),Vx(n,e),Fx(n,e),e[Y].type===1&&e[Ue].destroy();let r=e[Ui];if(r!==null&&ln(e[nt])){r!==e[nt]&&Zm(r,e);let i=e[$i];i!==null&&i.detachView(n)}Em(e)}finally{J(t)}}function FD(n,e){if(n&&n[lt]&&n[lt].leave)if(n[lt].skipLeaveAnimations)n[lt].skipLeaveAnimations=!1;else{let t=n[lt].leave,r=[];for(let i=0;i<t.length;i++){let o=t[i];r.push(o())}n[lt].running=Promise.allSettled(r),n[lt].leave=void 0}Lx(n,e)}function Lx(n,e){if(n&&n[lt]&&n[lt].running){n[lt].running.then(()=>{n[lt]&&n[lt].running&&(n[lt].running=void 0),kd.delete(n),e()});return}e()}function Fx(n,e){let t=n.cleanup,r=e[ss];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[ss]=null);let i=e[ir];if(i!==null){e[ir]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[ec];if(o!==null){e[ec]=null;for(let s of o)s.destroy()}}function Vx(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof lc)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Ee(4,a,u);try{u.call(a)}finally{Ee(5,a,u)}}else{Ee(4,i,o);try{o.call(i)}finally{Ee(5,i,o)}}}}}function jx(n,e,t){return Ux(n,e.parent,t)}function Ux(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[un];if(zr(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===lr.None||i===lr.Emulated)return null}return dn(r,t)}function Bx(n,e,t){return Hx(n,e,t)}function $x(n,e,t){return n.type&40?dn(n,t):null}var Hx=$x,VD;function Jm(n,e,t,r){let i=jx(n,r,e),o=e[Ue],s=r.parent||e[Yt],a=Bx(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)LD(o,i,t[u],a,!1);else LD(o,i,t,a,!1);VD!==void 0&&VD(o,r,e,t,i)}function cc(n,e){if(e!==null){let t=e.type;if(t&3)return dn(e,n);if(t&4)return Dm(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return cc(n,r);{let i=n[e.index];return ln(i)?Dm(-1,i):Zt(i)}}else{if(t&128)return cc(n,e.next);if(t&32)return Ym(e,n)()||Zt(n[e.index]);{let r=zb(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Br(n[jt]);return cc(i,r)}else return cc(n,e.next)}}}return null}function zb(n,e){if(e!==null){let r=n[jt][Yt],i=e.projection;return r.projection[i]}return null}function Dm(n,e){let t=Ye+n+1;if(t<e.length){let r=e[t],i=r[Y].firstChild;if(i!==null)return cc(r,i)}return e[Hr]}function Xm(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&gs(Zt(a),r),t.flags|=2),!Hm(t))if(u&8)Xm(n,e,t.child,r,i,o,!1),fs(e,n,i,a,o,r);else if(u&32){let l=Ym(t,r),h;for(;h=l();)fs(e,n,i,h,o,r);fs(e,n,i,a,o,r)}else u&16?zx(n,e,r,t,i,o):fs(e,n,i,a,o,r);t=s?t.projectionNext:t.next}}function Od(n,e,t,r,i,o){Xm(t,r,n.firstChild,e,i,o,!1)}function zx(n,e,t,r,i,o){let s=t[jt],u=s[Yt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];fs(e,n,i,h,o,t)}else{let l=u,h=s[nt];yb(r)&&(l.flags|=128),Xm(n,e,l,h,i,o,!0)}}function qx(n,e,t,r,i){let o=t[Hr],s=Zt(t);o!==s&&fs(e,n,r,o,i);for(let a=Ye;a<t.length;a++){let u=t[a];Od(u[Y],u,n,e,r,o)}}function qb(n,e,t,r,i){let o=oc(),s=r&2;try{qr(-1),s&&e.length>Qe&&$b(n,e,Qe,!1),Ee(s?2:0,i,t),t(r,i)}finally{qr(o),Ee(s?3:1,i,t)}}function Gb(n,e,t){Jx(n,e,t),(t.flags&64)===64&&Xx(n,e,t)}function ey(n,e,t=dn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function Gx(n,e,t,r){let o=r.get(Cb,bb)||t===lr.ShadowDom,s=n.selectRootElement(e,o);return Wx(s),s}function Wx(n){Kx(n)}var Kx=()=>null;function Qx(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Yx(n,e,t,r,i,o){let s=e[Y];if(ty(n,s,e,t,r)){zr(n)&&Zx(e,n.index);return}n.type&3&&(t=Qx(t)),Wb(n,e,t,r,i,o)}function Wb(n,e,t,r,i,o){if(n.type&3){let s=dn(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function Zx(n,e){let t=Jt(e,n);t[X]&16||(t[X]|=64)}function Jx(n,e,t){let r=t.directiveStart,i=t.directiveEnd;zr(t)&&Mx(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||lb(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=vm(e,n,s,t);if(gs(u,e),o!==null&&iO(e,s-r,u,a,t,o),zi(a)){let l=Jt(t.index,e);l[je]=vm(e,n,s,t)}}}function Xx(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=_D();try{qr(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Ql(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&eO(u,l)}}finally{qr(-1),Ql(s)}}function eO(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function tO(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];_x(e,o.selectors,!1)&&(r??=[],zi(o)?r.unshift(o):r.push(o))}return r}function nO(n,e,t,r,i,o){let s=dn(n,e);rO(e[Ue],s,o,n.value,t,r,i)}function rO(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Qa(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function iO(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Tm(r,t,u,l)}}function Kb(n,e,t,r,i){let o=Qe+t,s=e[Y],a=i(s,e,n,r,t);e[o]=a,ds(n,!0);let u=n.type===2;return u?(jb(e[Ue],a,n),(lD()===0||Gl(n))&&gs(a,e),dD()):gs(a,e),Xl()&&(!u||!Hm(n))&&Jm(s,e,a,n),n}function Qb(n){let e=n;return Xg()?gD():(e=e.parent,ds(e,!1)),e}function oO(n,e){let t=n[as];if(!t)return;let r;try{r=t.get(vt,null)}catch{r=null}r?.(e)}function ty(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Tm(p,t[l],h,i),a=!0}if(o)for(let u of o){let l=t[u],h=e.data[u];Tm(h,l,r,i),a=!0}return a}function sO(n,e){let t=Jt(e,n),r=t[Y];aO(r,t);let i=t[un];i!==null&&t[os]===null&&(t[os]=Sb(i,t[as])),Ee(18),ny(r,t,t[je]),Ee(19,t[je])}function aO(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function ny(n,e,t){Yl(e);try{let r=n.viewQuery;r!==null&&wm(1,r,t);let i=n.template;i!==null&&qb(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[$i]?.finishViewCreation(n),n.staticContentQueries&&Ab(n,e),n.staticViewQueries&&wm(2,n.viewQuery,t);let o=n.components;o!==null&&cO(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[X]&=-5,Zl()}}function cO(n,e){for(let t=0;t<e.length;t++)sO(n,e[t])}function ry(n,e,t,r){let i=J(null);try{let o=e.tView,a=n[X]&4096?4096:16,u=Km(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Ui]=l;let h=n[$i];return h!==null&&(u[$i]=h.createEmbeddedView(o)),ny(o,u,t),u}finally{J(i)}}function dc(n,e){return!e||e.firstChild===null||yb(n)}function hc(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Zt(o)),ln(o)&&Yb(o,r);let s=t.type;if(s&8)hc(n,e,t.child,r);else if(s&32){let a=Ym(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=zb(e,t);if(Array.isArray(a))r.push(...a);else{let u=Br(e[jt]);hc(u[Y],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function Yb(n,e){for(let t=Ye;t<n.length;t++){let r=n[t],i=r[Y].firstChild;i!==null&&hc(r[Y],r,i,e)}n[Hr]!==n[un]&&e.push(n[Hr])}function Zb(n){if(n[Hi]!==null){for(let e of n[Hi])e.impl.addSequence(e);n[Hi].length=0}}var Jb=[];function uO(n){return n[Ut]??lO(n)}function lO(n){let e=Jb.pop()??Object.create(hO);return e.lView=n,e}function dO(n){n.lView[Ut]!==n&&(n.lView=null,Jb.push(n))}var hO=me(F({},La),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{ls(n.lView)},consumerOnSignalRead(){this.lView[Ut]=this}});function fO(n){let e=n[Ut]??Object.create(pO);return e.lView=n,e}var pO=me(F({},La),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Br(n.lView);for(;e&&!Xb(e[Y]);)e=Br(e);e&&Wg(e)},consumerOnSignalRead(){this.lView[Ut]=this}});function Xb(n){return n.type!==2}function eC(n){if(n[ec]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[ec])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[X]&8192)}}var gO=100;function tC(n,e=0){let r=n[Sn].rendererFactory,i=!1;i||r.begin?.();try{mO(n,e)}finally{i||r.end?.()}}function mO(n,e){let t=em();try{tm(!0),bm(n,e);let r=0;for(;ic(n);){if(r===gO)throw new U(103,!1);r++,bm(n,1)}}finally{tm(t)}}function yO(n,e,t,r){if(qi(e))return;let i=e[X],o=!1,s=!1;Yl(e);let a=!0,u=null,l=null;o||(Xb(n)?(l=uO(e),u=Va(l)):ul()===null?(a=!1,l=fO(e),u=Va(l)):e[Ut]&&(Ua(e[Ut]),e[Ut]=null));try{Gg(e),mD(n.bindingStartIndex),t!==null&&qb(n,e,t,2,r),vO(e);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&id(e,y,null)}else{let y=n.preOrderHooks;y!==null&&od(e,y,0,null),dm(e,0)}if(s||_O(e),eC(e),nC(e,0),n.contentQueries!==null&&Ab(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&id(e,y)}else{let y=n.contentHooks;y!==null&&od(e,y,1),dm(e,1)}IO(n,e);let p=n.components;p!==null&&iC(e,p,0);let m=n.viewQuery;if(m!==null&&wm(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&id(e,y)}else{let y=n.viewHooks;y!==null&&od(e,y,2),dm(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[ql]){for(let y of e[ql])y();e[ql]=null}o||(Zb(e),e[X]&=-73)}catch(h){throw o||ls(e),h}finally{l!==null&&(ll(l,u),a&&dO(l)),Zl()}}function vO(n){let e=n[lt];if(e?.enter){for(let t of e.enter)t();e.enter=void 0}}function nC(n,e){for(let t=_b(n);t!==null;t=Eb(t))for(let r=Ye;r<t.length;r++){let i=t[r];rC(i,e)}}function _O(n){for(let e=_b(n);e!==null;e=Eb(e)){if(!(e[X]&2))continue;let t=e[nc];for(let r=0;r<t.length;r++){let i=t[r];Wg(i)}}}function EO(n,e,t){Ee(18);let r=Jt(e,n);rC(r,t),Ee(19,r[je])}function rC(n,e){Wl(n)&&bm(n,e)}function bm(n,e){let r=n[Y],i=n[X],o=n[Ut],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&ja(o)),s||=!1,o&&(o.dirty=!1),n[X]&=-9217,s)yO(r,n,r.template,n[je]);else if(i&8192){let a=J(null);try{eC(n),nC(n,1);let u=r.components;u!==null&&iC(n,u,1),Zb(n)}finally{J(a)}}}function iC(n,e,t){for(let r=0;r<e.length;r++)EO(n,e[r],t)}function IO(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)qr(~i);else{let o=i,s=t[++r],a=t[++r];vD(s,o);let u=e[o];Ee(24,u),a(2,u),Ee(25,u)}}}finally{qr(-1)}}function iy(n,e){let t=em()?64:1088;for(n[Sn].changeDetectionScheduler?.notify(e);n;){n[X]|=t;let r=Br(n);if(us(n)&&!r)return n;n=r}return null}function oC(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function sC(n,e){let t=Ye+e;if(t<n.length)return n[t]}function Ld(n,e,t,r=!0){let i=e[Y];if(wO(i,e,n,t),r){let s=Dm(t,n),a=e[Ue],u=a.parentNode(n[Hr]);u!==null&&xx(i,n[Yt],a,e,u,s)}let o=e[os];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function aC(n,e){let t=fc(n,e);return t!==void 0&&xd(t[Y],t),t}function fc(n,e){if(n.length<=Ye)return;let t=Ye+e,r=n[t];if(r){let i=r[Ui];i!==null&&i!==n&&Zm(i,r),e>0&&(n[t-1][Qt]=r[Qt]);let o=Ya(n,Ye+e);kx(r[Y],r);let s=o[$i];s!==null&&s.detachView(o[Y]),r[nt]=null,r[Qt]=null,r[X]&=-129}return r}function wO(n,e,t,r){let i=Ye+r,o=t.length;r>0&&(t[i-1][Qt]=e),r<o-Ye?(e[Qt]=t[i],xg(t,Ye+r,e)):(t.push(e),e[Qt]=null),e[nt]=t;let s=e[Ui];s!==null&&t!==s&&cC(s,e);let a=e[$i];a!==null&&a.insertView(n),Kl(e),e[X]|=128}function cC(n,e){let t=n[nc],r=e[nt];if(An(r))n[X]|=2;else{let i=r[nt][jt];e[jt]!==i&&(n[X]|=2)}t===null?n[nc]=[e]:t.push(e)}var Zi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Y];return hc(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[je]}set context(e){this._lView[je]=e}get destroyed(){return qi(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[nt];if(ln(e)){let t=e[tc],r=t?t.indexOf(this):-1;r>-1&&(fc(e,r),Ya(t,r))}this._attachedToViewContainer=!1}xd(this._lView[Y],this._lView)}onDestroy(e){Kg(this._lView,e)}markForCheck(){iy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[X]&=-129}reattach(){Kl(this._lView),this._lView[X]|=128}detectChanges(){this._lView[X]|=1024,tC(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new U(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=us(this._lView),t=this._lView[Ui];t!==null&&!e&&Zm(t,this._lView),Hb(this._lView[Y],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new U(902,!1);this._appRef=e;let t=us(this._lView),r=this._lView[Ui];r!==null&&!t&&cC(r,this._lView),Kl(this._lView)}};function Fd(n,e,t,r,i){let o=n.data[e];if(o===null)o=TO(n,e,t,r,i),yD()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=pD();o.injectorIndex=s===null?-1:s.injectorIndex}return ds(o,!0),o}function TO(n,e,t,r,i){let o=Jg(),s=Xg(),a=s?o:o&&o.parent,u=n.data[e]=bO(n,a,t,e,r,i);return DO(n,u,o,s),u}function DO(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function bO(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return fD()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var bW=new RegExp(`^(\\d+)*(${ax}|${sx})*(.*)`);function CO(n){let e=n[Hg]??[],r=n[nt][Ue],i=[];for(let o of e)o.data[Db]!==void 0?i.push(o):SO(o,r);n[Hg]=i}function SO(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[Tb];for(;t<i;){let o=r.nextSibling;Vb(e,r,!1),r=o,t++}}}var AO=()=>null,RO=()=>null;function Cm(n,e){return AO(n,e)}function uC(n,e,t){return RO(n,e,t)}var lC=class{},Vd=class{},Sm=class{resolveComponentFactory(e){throw new U(917,!1)}},mc=class{static NULL=new Sm},Ji=class{},vs=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>NO()}return n})();function NO(){let n=fe(),e=Lt(),t=Jt(e.index,n);return(An(t)?t:n)[Ue]}var dC=(()=>{class n{static \u0275prov=j({token:n,providedIn:"root",factory:()=>null})}return n})();var sd={},Am=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,sd,r);return i!==sd||t===sd?i:this.parentInjector.get(e,t,r)}};function fd(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Dg(i,a);else if(o==2){let u=a,l=e[++s];r=Dg(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Ze(n,e=0){let t=fe();if(t===null)return $(n,e);let r=Lt();return pb(r,t,Ot(n),e)}function oy(){let n="invalid";throw new Error(n)}function MO(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}xO(n,e,t,a,o,u,l)}o!==null&&r!==null&&PO(t,r,o)}function PO(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new U(-301,!1);r.push(e[i],o)}}function kO(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function xO(n,e,t,r,i,o,s){let a=r.length,u=!1;for(let m=0;m<a;m++){let y=r[m];!u&&zi(y)&&(u=!0,kO(n,t,m)),Kk(lb(t,e),n,y.type)}UO(t,n.data.length,a);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=Bb(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(t.mergedAttrs=bd(t.mergedAttrs,y.hostAttrs),LO(n,t,e,p,y),jO(p,y,i),s!==null&&s.has(y)){let[P,M]=s.get(y);t.directiveToIndex.set(y.type,[p,P+t.directiveStart,M+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let S=y.type.prototype;!l&&(S.ngOnChanges||S.ngOnInit||S.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(S.ngOnChanges||S.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}OO(n,t,o)}function OO(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))jD(0,e,i,r),jD(1,e,i,r),BD(e,r,!1);else{let o=t.get(i);UD(0,e,o,r),UD(1,e,o,r),BD(e,r,!0)}}}function jD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),hC(e,o)}}function UD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),hC(e,s)}}function hC(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function BD(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Gm(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function LO(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Ur(i.type,!0)),s=new lc(o,zi(i),Ze,null);n.blueprint[r]=s,t[r]=s,FO(n,e,r,Bb(n,t,i.hostVars,Wr),i)}function FO(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;VO(s)!=a&&s.push(a),s.push(t,r,o)}}function VO(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function jO(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;zi(e)&&(t[""]=n)}}function UO(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function fC(n,e,t,r,i,o,s,a){let u=e[Y],l=u.consts,h=Rn(l,s),p=Fd(u,n,t,r,h);return o&&MO(u,e,p,Rn(l,a),i),p.mergedAttrs=bd(p.mergedAttrs,p.attrs),p.attrs!==null&&fd(p,p.attrs,!1),p.mergedAttrs!==null&&fd(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function pC(n,e){Vk(n,e),zg(e)&&n.queries.elementEnd(e)}function BO(n,e,t,r,i,o){let s=e.consts,a=Rn(s,i),u=Fd(e,n,t,r,a);if(u.mergedAttrs=bd(u.mergedAttrs,u.attrs),o!=null){let l=Rn(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&fd(u,u.attrs,!1),u.mergedAttrs!==null&&fd(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function gC(n,e,t){return n[e]=t}function Pn(n,e,t){if(t===Wr)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function $O(n,e,t,r){let i=Pn(n,e,t);return Pn(n,e+1,r)||i}function HO(n,e,t,r,i){let o=$O(n,e,t,r);return Pn(n,e+2,i)||o}function pm(n,e,t){return function r(i){let o=zr(n)?Jt(n.index,e):e;iy(o,5);let s=e[je],a=$D(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)a=$D(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function $D(n,e,t,r){let i=J(null);try{return Ee(6,e,t),t(r)!==!1}catch(o){return oO(n,o),!1}finally{Ee(7,e,t),J(i)}}function zO(n,e,t,r,i,o,s,a){let u=Gl(n),l=!1,h=null;if(!r&&u&&(h=GO(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=dn(n,t),m=r?r(p):p;ux(t,m,o,a);let y=i.listen(m,o,a);if(!qO(o)){let S=r?P=>r(Zt(P[n.index])):n.index;mC(S,e,t,o,a,y,!1)}}return l}function qO(n){return n.startsWith("animation")||n.startsWith("transition")}function GO(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[ss],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function mC(n,e,t,r,i,o,s){let a=e.firstCreatePass?uD(e):null,u=cD(t),l=u.length;u.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function HD(n,e,t,r,i,o){let s=e[t],a=e[Y],l=a.data[t].outputs[r],p=s[l].subscribe(o);mC(n.index,a,e,i,o,p,!0)}var Rm=Symbol("BINDING");var pd=class extends mc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=cr(e);return new Xi(t,this.ngModule)}};function WO(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Pd.SignalBased)!==0};return i&&(o.transform=i),o})}function KO(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function QO(n,e,t){let r=e instanceof Ve?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Am(t,r):t}function YO(n){let e=n.get(Ji,null);if(e===null)throw new U(407,!1);let t=n.get(dC,null),r=n.get(or,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function ZO(n,e){let t=yC(n);return Lb(e,t,t==="svg"?tD:t==="math"?nD:null)}function yC(n){return(n.selectors[0][0]||"div").toLowerCase()}var Xi=class extends Vd{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=WO(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=KO(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=Tx(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){Ee(22);let a=J(null);try{let u=this.componentDef,l=JO(r,u,s,o),h=QO(u,i||this.ngModule,e),p=YO(h),m=p.rendererFactory.createRenderer(null,u),y=r?Gx(m,r,u.encapsulation,h):ZO(u,m),S=s?.some(zD)||o?.some(L=>typeof L!="function"&&L.bindings.some(zD)),P=Km(null,l,null,512|Ub(u),null,null,p,m,h,null,Sb(y,h,!0));P[Qe]=y,Yl(P);let M=null;try{let L=fC(Qe,P,2,"#host",()=>l.directiveRegistry,!0,0);y&&(jb(m,y,L),gs(y,P)),Gb(l,P,L),Rb(l,L,P),pC(l,L),t!==void 0&&e1(L,this.ngContentSelectors,t),M=Jt(L.index,P),P[je]=M[je],ny(l,P,null)}catch(L){throw M!==null&&Em(M),Em(P),L}finally{Ee(23),Zl()}return new gd(this.componentType,P,!!S)}finally{J(a)}}};function JO(n,e,t,r){let i=n?["ng-version","20.3.1"]:Dx(e.selectors[0]),o=null,s=null,a=0;if(t)for(let h of t)a+=h[Rm].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){a+=m[Rm].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=Vg(p);u.push(m)}return Wm(0,null,XO(o,s),1,a,u,null,null,null,[i],null)}function XO(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function zD(n){let e=n[Rm].kind;return e==="input"||e==="twoWay"}var gd=class extends lC{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=rc(t[Y],Qe),this.location=jm(this._tNode,t),this.instance=Jt(this._tNode.index,t)[je],this.hostView=this.changeDetectorRef=new Zi(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=ty(r,i[Y],i,e,t);this.previousInputValues.set(e,t);let s=Jt(r.index,i);iy(s,1)}get injector(){return new Yi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function e1(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var yc=(()=>{class n{static __NG_ELEMENT_ID__=t1}return n})();function t1(){let n=Lt();return r1(n,fe())}var n1=yc,vC=class extends n1{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return jm(this._hostTNode,this._hostLView)}get injector(){return new Yi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Vm(this._hostTNode,this._hostLView);if(ab(e)){let t=ud(e,this._hostLView),r=cd(e),i=t[Y].data[r+8];return new Yi(i,t)}else return new Yi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=qD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ye}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Cm(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,dc(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let u=e&&!kk(e),l;if(u)l=t;else{let M=t||{};l=M.index,r=M.injector,i=M.projectableNodes,o=M.environmentInjector||M.ngModuleRef,s=M.directives,a=M.bindings}let h=u?e:new Xi(cr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let L=(u?p:this.parentInjector).get(Ve,null);L&&(o=L)}let m=cr(h.componentType??{}),y=Cm(this._lContainer,m?.id??null),S=y?.firstChild??null,P=h.create(p,i,S,o,s,a);return this.insertImpl(P.hostView,l,dc(this._hostTNode,y)),P}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(oD(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[nt],l=new vC(u,u[Yt],u[nt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Ld(s,i,o,r),e.attachToViewContainerRef(),xg(gm(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=qD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=fc(this._lContainer,t);r&&(Ya(gm(this._lContainer),t),xd(r[Y],r))}detach(e){let t=this._adjustIndex(e,-1),r=fc(this._lContainer,t);return r&&Ya(gm(this._lContainer),t)!=null?new Zi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function qD(n){return n[tc]}function gm(n){return n[tc]||(n[tc]=[])}function r1(n,e){let t,r=e[n.index];return ln(r)?t=r:(t=oC(r,e,null,n),e[n.index]=t,Qm(e,t)),o1(t,e,n,r),new vC(t,n,e)}function i1(n,e){let t=n[Ue],r=t.createComment(""),i=dn(e,n),o=t.parentNode(i);return hd(t,o,r,t.nextSibling(i),!1),r}var o1=c1,s1=()=>!1;function a1(n,e,t){return s1(n,e,t)}function c1(n,e,t,r){if(n[Hr])return;let i;t.type&8?i=Zt(r):i=i1(e,t),n[Hr]=i}var GD=new Set;function fn(n){GD.has(n)||(GD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var eo=class{},jd=class{};var md=class extends eo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new pd(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=Fg(e);this._bootstrapComponents=xb(o.bootstrap),this._r3Injector=sm(e,t,[{provide:eo,useValue:this},{provide:mc,useValue:this.componentFactoryResolver},...r],jr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},yd=class extends jd{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new md(this.moduleType,e,[])}};var pc=class extends eo{injector;componentFactoryResolver=new pd(this);instance=null;constructor(e){super();let t=new Li([...e.providers,{provide:eo,useValue:this},{provide:mc,useValue:this.componentFactoryResolver}],e.parent||Ja(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function _s(n,e,t=null){return new pc({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var u1=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=jg(!1,t.type),i=r.length>0?_s([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=j({token:n,providedIn:"environment",factory:()=>new n($(Ve))})}return n})();function $t(n){return ms(()=>{let e=_C(n),t=me(F({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Um.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(u1).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||lr.Emulated,styles:n.styles||an,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&fn("NgStandalone"),EC(t);let r=n.dependencies;return t.directiveDefs=WD(r,l1),t.pipeDefs=WD(r,WT),t.id=f1(t),t})}function l1(n){return cr(n)||Vg(n)}function Qr(n){return ms(()=>({type:n.type,bootstrap:n.bootstrap||an,declarations:n.declarations||an,imports:n.imports||an,exports:n.exports||an,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function d1(n,e){if(n==null)return Vi;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Pd.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function h1(n){if(n==null)return Vi;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function ro(n){return ms(()=>{let e=_C(n);return EC(e),e})}function sy(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function _C(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Vi,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||an,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:d1(n.inputs,e),outputs:h1(n.outputs),debugInfo:null}}function EC(n){n.features?.forEach(e=>e(n))}function WD(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function f1(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function p1(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=bd(n.mergedAttrs,n.attrs);let h=n.tView=Wm(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),ds(n,!1);let u=g1(t,e,n,r);Xl()&&Jm(t,e,u,n),gs(u,e);let l=oC(u,e,u,n);e[r+Qe]=l,Qm(e,l),a1(l,n,e)}function vd(n,e,t,r,i,o,s,a,u,l,h){let p=t+Qe,m;if(e.firstCreatePass){if(m=Fd(e,p,4,s||null,a||null),l!=null){let y=Rn(e.consts,l);m.localNames=[];for(let S=0;S<y.length;S+=2)m.localNames.push(y[S],-1)}}else m=e.data[p];return p1(m,n,e,t,r,i,o,u),l!=null&&ey(n,m,h),m}var g1=m1;function m1(n,e,t,r){return ed(!0),e[Ue].createComment("")}var Ud=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Ud||{}),io=new B(""),IC=!1,Nm=class extends ke{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,XT()&&(this.destroyRef=R(ur,{optional:!0})??void 0,this.pendingTasks=R(Nn,{optional:!0})??void 0)}emit(e){let t=J(null);try{super.next(e)}finally{J(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Pe&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Rt=Nm;function wC(n){let e,t;function r(){n=ac;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function KD(n){return queueMicrotask(()=>n()),()=>{n=ac}}var ay="isAngularZone",_d=ay+"_ID",y1=0,de=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Rt(!1);onMicrotaskEmpty=new Rt(!1);onStable=new Rt(!1);onError=new Rt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=IC}=e;if(typeof Zone>"u")throw new U(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,E1(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ay)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new U(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new U(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,v1,ac,ac);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},v1={};function cy(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function _1(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){wC(()=>{n.callbackScheduled=!1,Mm(n),n.isCheckStableRunning=!0,cy(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Mm(n)}function E1(n){let e=()=>{_1(n)},t=y1++;n._inner=n._inner.fork({name:"angular",properties:{[ay]:!0,[_d]:t,[_d+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(I1(u))return r.invokeTask(o,s,a,u);try{return QD(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),YD(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return QD(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!w1(u)&&e(),YD(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Mm(n),cy(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Mm(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function QD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function YD(n){n._nesting--,cy(n)}var Ed=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Rt;onMicrotaskEmpty=new Rt;onStable=new Rt;onError=new Rt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function I1(n){return TC(n,"__ignore_ng_zone__")}function w1(n){return TC(n,"__scheduler_tick__")}function TC(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var uy=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=j({token:n,providedIn:"root",factory:()=>new n})}return n})(),DC=[0,1,2,3],bC=(()=>{class n{ngZone=R(de);scheduler=R(or);errorHandler=R(cn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){R(io,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Ee(16),this.executing=!0;for(let r of DC)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Ee(17)}register(t){let{view:r}=t;r!==void 0?((r[Hi]??=[]).push(t),ls(r),r[X]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Ud.AFTER_NEXT_RENDER,t):t()}static \u0275prov=j({token:n,providedIn:"root",factory:()=>new n})}return n})(),Id=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Hi];e&&(this.view[Hi]=e.filter(t=>t!==this))}};function ly(n,e){let t=e?.injector??R(Ne);return fn("NgAfterNextRender"),D1(n,t,e,!0)}function T1(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function D1(n,e,t,r){let i=e.get(uy);i.impl??=e.get(bC);let o=e.get(io,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(ur):null,a=e.get(td,null,{optional:!0}),u=new Id(i.impl,T1(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var dy=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var hy=new B("");function oo(n){return!!n&&typeof n.then=="function"}function Bd(n){return!!n&&typeof n.subscribe=="function"}var fy=new B("");function Es(n){return yt([{provide:fy,multi:!0,useValue:n}])}var py=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=R(fy,{optional:!0})??[];injector=R(Ne);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=$e(this.injector,i);if(oo(o))t.push(o);else if(Bd(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vc=new B("");function CC(){Qp(()=>{let n="";throw new U(600,n)})}function SC(n){return n.isBoundToModule}var b1=10;var kn=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=R(vt);afterRenderManager=R(uy);zonelessEnabled=R(sc);rootEffectScheduler=R(lm);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ke;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=R(Nn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(K(t=>!t))}constructor(){R(io,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=R(Ve);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Ne.NULL){return this._injector.get(de).run(()=>{Ee(10);let s=t instanceof Vd;if(!this._injector.get(py).done){let S="";throw new U(405,S)}let u;s?u=t:u=this._injector.get(mc).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=SC(u)?void 0:this._injector.get(eo),h=r||u.selector,p=u.create(i,[],h,l),m=p.location.nativeElement,y=p.injector.get(hy,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),uc(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),Ee(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ee(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Ud.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new U(101,!1);let t=J(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,J(t),this.afterTick.next(),Ee(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ji,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<b1;)Ee(14),this.synchronizeOnce(),Ee(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!ic(i))continue;let o=r&&!this.zonelessEnabled?0:1;tC(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>ic(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;uc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(vc,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>uc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new U(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function uc(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function $d(n,e,t,r){let i=fe(),o=Ki();if(Pn(i,o,e)){let s=Xt(),a=Jl();nO(a,i,n,e,t,r)}return $d}var PW=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var Pm=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e,!0))}};function mm(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function C1(n,e,t){let r,i,o=0,s=n.length-1,a=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=n.at(o),h=e[o],p=mm(o,l,o,h,t);if(p!==0){p<0&&n.updateValue(o,h),o++;continue}let m=n.at(s),y=e[u],S=mm(s,m,u,y,t);if(S!==0){S<0&&n.updateValue(s,y),s--,u--;continue}let P=t(o,l),M=t(s,m),L=t(o,h);if(Object.is(L,M)){let z=t(u,y);Object.is(z,P)?(n.swap(o,s),n.updateValue(s,y),u--,s--):n.move(s,o),n.updateValue(o,h),o++;continue}if(r??=new wd,i??=JD(n,o,s,t),km(n,r,o,L))n.updateValue(o,h),o++,s++;else if(i.has(L))r.set(P,n.detach(o)),s--;else{let z=n.create(o,e[o]);n.attach(o,z),o++,s++}}for(;o<=u;)ZD(n,r,t,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let h=n.at(o),p=l.value,m=mm(o,h,o,p,t);if(m!==0)m<0&&n.updateValue(o,p),o++,l=u.next();else{r??=new wd,i??=JD(n,o,s,t);let y=t(o,p);if(km(n,r,o,y))n.updateValue(o,p),o++,s++,l=u.next();else if(!i.has(y))n.attach(o,n.create(o,p)),o++,s++,l=u.next();else{let S=t(o,h);r.set(S,n.detach(o)),s--}}}for(;!l.done;)ZD(n,r,t,n.length,l.value),l=u.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(u=>{n.destroy(u)})}function km(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function ZD(n,e,t,r,i){if(km(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function JD(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var wd=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function dr(n,e,t,r,i,o,s,a){fn("NgControlFlow");let u=fe(),l=Xt(),h=Rn(l.consts,o);return vd(u,l,n,e,t,r,i,h,256,s,a),Is}function Is(n,e,t,r,i,o,s,a){fn("NgControlFlow");let u=fe(),l=Xt(),h=Rn(l.consts,o);return vd(u,l,n,e,t,r,i,h,512,s,a),Is}function hr(n,e){fn("NgControlFlow");let t=fe(),r=Ki(),i=t[r]!==Wr?t[r]:-1,o=i!==-1?Td(t,Qe+i):void 0,s=0;if(Pn(t,r,n)){let a=J(null);try{if(o!==void 0&&aC(o,s),n!==-1){let u=Qe+n,l=Td(t,u),h=Fm(t[Y],u),p=uC(l,h,t),m=ry(t,h,e,{dehydratedView:p});Ld(l,m,s,dc(h,p))}}finally{J(a)}}else if(o!==void 0){let a=sC(o,s);a!==void 0&&(a[je]=e)}}var xm=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Ye}};var Om=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function gy(n,e,t,r,i,o,s,a,u,l,h,p,m){fn("NgControlFlow");let y=fe(),S=Xt(),P=u!==void 0,M=fe(),L=a?s.bind(M[jt][je]):s,z=new Om(P,L);M[Qe+n]=z,vd(y,S,n+1,e,t,r,i,Rn(S.consts,o),256),P&&vd(y,S,n+2,u,l,h,p,Rn(S.consts,m),512)}var Lm=class extends Pm{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-Ye}at(e){return this.getLView(e)[je].$implicit}attach(e,t){let r=t[os];this.needsIndexUpdate||=e!==this.length,Ld(this.lContainer,t,e,dc(this.templateTNode,r))}detach(e,t){return this.needsIndexUpdate||=e!==this.length-1,t&&S1(this.lContainer,e),A1(this.lContainer,e)}create(e,t){let r=Cm(this.lContainer,this.templateTNode.tView.ssrId),i=ry(this.hostLView,this.templateTNode,new xm(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){xd(e[Y],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[je].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[je].$index=e}getLView(e){return R1(this.lContainer,e)}};function my(n){let e=J(null),t=oc();try{let r=fe(),i=r[Y],o=r[t],s=t+1,a=Td(r,s);if(o.liveCollection===void 0){let l=Fm(i,s);o.liveCollection=new Lm(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(C1(u,n,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=Ki(),h=u.length===0;if(Pn(r,l,h)){let p=t+2,m=Td(r,p);if(h){let y=Fm(i,p),S=uC(m,y,r),P=ry(r,y,void 0,{dehydratedView:S});Ld(m,P,0,dc(y,S))}else i.firstUpdatePass&&CO(m),aC(m,0)}}}finally{J(e)}}function Td(n,e){return n[e]}function S1(n,e){if(n.length<=Ye)return;let t=Ye+e,r=n[t];r&&r[lt]&&(r[lt].skipLeaveAnimations=!0)}function A1(n,e){return fc(n,e)}function R1(n,e){return sC(n,e)}function Fm(n,e){return rc(n,e)}function so(n,e,t){let r=fe(),i=Ki();if(Pn(r,i,e)){let o=Xt(),s=Jl();Yx(s,r,n,e,r[Ue],t)}return so}function XD(n,e,t,r,i){ty(e,n,t,i?"class":"style",r)}function we(n,e,t,r){let i=fe(),o=i[Y],s=n+Qe,a=o.firstCreatePass?fC(s,i,2,e,tO,hD(),t,r):o.data[s];if(Kb(a,i,n,e,AC),Gl(a)){let u=i[Y];Gb(u,i,a),Rb(u,a,i)}return r!=null&&ey(i,a),we}function Te(){let n=Xt(),e=Lt(),t=Qb(e);return n.firstCreatePass&&pC(n,t),Yg(t)&&Zg(),Qg(),t.classesWithoutHost!=null&&Uk(t)&&XD(n,t,fe(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&Bk(t)&&XD(n,t,fe(),t.stylesWithoutHost,!1),Te}function rt(n,e,t,r){return we(n,e,t,r),Te(),rt}function dt(n,e,t,r){let i=fe(),o=i[Y],s=n+Qe,a=o.firstCreatePass?BO(s,o,2,e,t,r):o.data[s];return Kb(a,i,n,e,AC),r!=null&&ey(i,a),dt}function Et(){let n=Lt(),e=Qb(n);return Yg(e)&&Zg(),Qg(),Et}function _c(n,e,t,r){return dt(n,e,t,r),Et(),_c}var AC=(n,e,t,r,i)=>(ed(!0),Lb(e[Ue],r,DD()));function ws(){return fe()}function Hd(n,e,t){let r=fe(),i=Ki();if(Pn(r,i,e)){let o=Xt(),s=Jl();Wb(s,r,n,e,r[Ue],t)}return Hd}var Ec="en-US";var N1=Ec;function RC(n){typeof n=="string"&&(N1=n.toLowerCase().replace(/_/g,"-"))}function fr(n,e,t){let r=fe(),i=Xt(),o=Lt();return M1(i,r,r[Ue],o,n,e,t),fr}function M1(n,e,t,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=pm(r,e,o),zO(r,n,e,s,t,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],y=h[p+1];u??=pm(r,e,o),HD(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=pm(r,e,o),HD(r,e,p,i,i,u)}}function Yr(n=1){return TD(n)}function pe(n,e=""){let t=fe(),r=Xt(),i=n+Qe,o=r.firstCreatePass?Fd(r,i,1,e,null):r.data[i],s=P1(r,t,o,e,n);t[i]=s,Xl()&&Jm(r,t,s,o),ds(o,!1)}var P1=(n,e,t,r,i)=>(ed(!0),bx(e[Ue],r));function k1(n,e,t,r=""){return Pn(n,Ki(),t)?e+Qa(t)+r:Wr}function ao(n){return Ic("",n),ao}function Ic(n,e,t){let r=fe(),i=k1(r,n,e,t);return i!==Wr&&x1(r,oc(),i),Ic}function x1(n,e,t){let r=rD(e,n);Cx(n[Ue],r,t)}function yy(n,e,t,r,i,o){return L1(fe(),nm(),n,e,t,r,i,o)}function NC(n,e){let t=n[e];return t===Wr?void 0:t}function O1(n,e,t,r,i,o){let s=e+t;return Pn(n,s,i)?gC(n,s+1,o?r.call(o,i):r(i)):NC(n,s+1)}function L1(n,e,t,r,i,o,s,a){let u=e+t;return HO(n,u,i,o,s)?gC(n,u+3,a?r.call(a,i,o,s):r(i,o,s)):NC(n,u+3)}function Ts(n,e){let t=Xt(),r,i=n+Qe;t.firstCreatePass?(r=F1(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Ur(r.type,!0)),s,a=At(Ze);try{let u=ld(!1),l=o();return ld(u),qg(t,fe(),i,l),l}finally{At(a)}}function F1(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Ds(n,e,t){let r=n+Qe,i=fe(),o=iD(i,r);return V1(i,r)?O1(i,nm(),e,o.transform,t,o):o.transform(t)}function V1(n,e){return n[Y].data[e].pure}var Dd=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},vy=(()=>{class n{compileModuleSync(t){return new yd(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Fg(t),o=xb(i.declarations).reduce((s,a)=>{let u=cr(a);return u&&s.push(new Xi(u)),s},[]);return new Dd(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var j1=(()=>{class n{zone=R(de);changeDetectionScheduler=R(or);applicationRef=R(kn);applicationErrorHandler=R(vt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),MC=new B("",{factory:()=>!1});function _y({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new de(me(F({},Iy()),{scheduleInRootZone:t})),[{provide:de,useFactory:n},{provide:ar,multi:!0,useFactory:()=>{let r=R(j1,{optional:!0});return()=>r.initialize()}},{provide:ar,multi:!0,useFactory:()=>{let r=R(U1);return()=>{r.initialize()}}},e===!0?{provide:cm,useValue:!0}:[],{provide:um,useValue:t??IC},{provide:vt,useFactory:()=>{let r=R(de),i=R(Ve),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(cn),o.handleError(s))})}}}]}function Ey(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=_y({ngZoneFactory:()=>{let i=Iy(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&fn("NgZone_CoalesceEvent"),new de(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return yt([{provide:MC,useValue:!0},{provide:sc,useValue:!1},r])}function Iy(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var U1=(()=>{class n{subscription=new Pe;initialized=!1;zone=R(de);pendingTasks=R(Nn);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{de.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{de.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var PC=(()=>{class n{applicationErrorHandler=R(vt);appRef=R(kn);taskService=R(Nn);ngZone=R(de);zonelessEnabled=R(sc);tracing=R(io,{optional:!0});disableScheduling=R(cm,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Pe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(_d):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(R(um,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ed||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?KD:wC;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(_d+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,KD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function B1(){return typeof $localize<"u"&&$localize.locale||Ec}var zd=new B("",{providedIn:"root",factory:()=>R(zd,{optional:!0,skipSelf:!0})||B1()});function en(n){return VT(n)}var kC=class{[Pt];constructor(e){this[Pt]=e}destroy(){this[Pt].destroy()}};var LC=Symbol("InputSignalNode#UNSET"),oL=me(F({},dl),{transformFn:void 0,applyValueToInputSignal(n,e){Ho(n,e)}});function FC(n,e){let t=Object.create(oL);t.value=n,t.transformFn=e?.transform;function r(){if(Fa(t),t.value===LC){let i=null;throw new U(-950,i)}return t.value}return r[Pt]=t,r}var Gd=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>gc(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},sL=new B("");sL.__NG_ELEMENT_ID__=n=>{let e=Lt();if(e===null)throw new U(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new U(204,!1)};function xC(n,e){return FC(n,e)}function aL(n){return FC(LC,n)}var VC=(xC.required=aL,xC);var wy=new B(""),cL=new B("");function wc(n){return!n.moduleRef}function uL(n){let e=wc(n)?n.r3Injector:n.moduleRef.injector,t=e.get(de);return t.run(()=>{wc(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(vt),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),wc(n)){let o=()=>e.destroy(),s=n.platformInjector.get(wy);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(wy);s.add(o),n.moduleRef.onDestroy(()=>{uc(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return dL(r,t,()=>{let o=e.get(Nn),s=o.add(),a=e.get(py);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(zd,Ec);if(RC(u||Ec),!e.get(cL,!0))return wc(n)?e.get(kn):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(wc(n)){let h=e.get(kn);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return lL?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var lL;function dL(n,e,t){try{let r=t();return oo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var qd=null;function hL(n=[],e){return Ne.create({name:e,providers:[{provide:Za,useValue:"platform"},{provide:wy,useValue:new Set([()=>qd=null])},...n]})}function fL(n=[]){if(qd)return qd;let e=hL(n);return qd=e,CC(),pL(e),e}function pL(n){let e=n.get(Ad,null);$e(n,()=>{e?.forEach(t=>t())})}function Dc(){return!1}var bs=(()=>{class n{static __NG_ELEMENT_ID__=gL}return n})();function gL(n){return mL(Lt(),fe(),(n&16)===16)}function mL(n,e,t){if(zr(n)&&!t){let r=Jt(n.index,e);return new Zi(r,r)}else if(n.type&175){let r=e[jt];return new Zi(r,e)}return null}function jC(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;Ee(8);try{let o=i?.injector??fL(r),s=[_y({}),{provide:or,useExisting:PC},CD,...t||[]],a=new pc({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return uL({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Ee(9)}}function bc(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function UC(n){let e=cr(n);if(!e)return null;let t=new Xi(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var HC=null;function pr(){return HC}function Ty(n){HC??=n}var Cc=class{},Sc=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>R(zC),providedIn:"platform"})}return n})(),Dy=new B(""),zC=(()=>{class n extends Sc{_location;_history;_doc=R(Be);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return pr().getBaseHref(this._doc)}onPopState(t){let r=pr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=pr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Wd(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function BC(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function pn(n){return n&&n[0]!=="?"?`?${n}`:n}var gn=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>R(Qd),providedIn:"root"})}return n})(),Kd=new B(""),Qd=(()=>{class n extends gn{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??R(Be).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Wd(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+pn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+pn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+pn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)($(Sc),$(Kd,8))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Zr=(()=>{class n{_subject=new ke;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=_L(BC($C(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+pn(r))}normalize(t){return n.stripTrailingSlash(vL(this._basePath,$C(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+pn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+pn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=pn;static joinWithSlash=Wd;static stripTrailingSlash=BC;static \u0275fac=function(r){return new(r||n)($(gn))};static \u0275prov=j({token:n,factory:()=>yL(),providedIn:"root"})}return n})();function yL(){return new Zr($(gn))}function vL(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function $C(n){return n.replace(/\/index.html$/,"")}function _L(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Ay=(()=>{class n extends gn{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Wd(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+pn(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+pn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)($(Sc),$(Kd,8))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})();var by=/\s+/,qC=[],Ry=(()=>{class n{_ngEl;_renderer;initialClasses=qC;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(by):qC}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(by):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(by).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(Ze(to),Ze(vs))};static \u0275dir=ro({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();function EL(n,e){return new U(2100,!1)}var Cy=class{createSubscription(e,t,r){return en(()=>e.subscribe({next:t,error:r}))}dispose(e){en(()=>e.unsubscribe())}},Sy=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},IL=new Sy,wL=new Cy,Ac=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=R(vt);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(oo(t))return IL;if(Bd(t))return wL;throw EL(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(Ze(bs,16))};static \u0275pipe=sy({name:"async",type:n,pure:!1})}return n})();var Jr=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Qr({type:n});static \u0275inj=sr({})}return n})();function Ny(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Rc=class{};var GC="browser";var WC=(()=>{class n{static \u0275prov=j({token:n,providedIn:"root",factory:()=>new My(R(Be),window)})}return n})(),My=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(me(F({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=DL(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn($r(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(me(F({},t),{left:i-s[0],top:o-s[1]}))}};function DL(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Jd=new B(""),Ly=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new U(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)($(Jd),$(de))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),Nc=class{_doc;constructor(e){this._doc=e}manager},Py="ng-app-id";function KC(n){for(let e of n)e.remove()}function QC(n,e){let t=e.createElement("style");return t.textContent=n,t}function bL(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Py}="${e}"],link[${Py}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Py),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function xy(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Fy=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,bL(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,QC);r?.forEach(i=>this.addUsage(i,this.external,xy))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(KC(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])KC(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,QC(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,xy(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)($(Be),$(Sd),$(Rd,8),$(Gr))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),ky={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Vy=/%COMP%/g;var ZC="%COMP%",CL=`_nghost-${ZC}`,SL=`_ngcontent-${ZC}`,AL=!0,RL=new B("",{providedIn:"root",factory:()=>AL});function NL(n){return SL.replace(Vy,n)}function ML(n){return CL.replace(Vy,n)}function JC(n,e){return e.map(t=>t.replace(Vy,n))}var jy=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u,l=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new Mc(t,s,u,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Zd?i.applyToHost(t):i instanceof Pc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case lr.Emulated:o=new Zd(u,l,r,this.appId,h,s,a,p,m);break;case lr.ShadowDom:return new Oy(u,l,t,r,s,a,this.nonce,p,m);default:o=new Pc(u,l,r,h,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)($(Ly),$(Fy),$(Sd),$(RL),$(Be),$(Gr),$(de),$(Rd),$(io,8))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),Mc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(ky[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(YC(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(YC(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new U(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=ky[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=ky[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Kr.DashCase|Kr.Important)?e.style.setProperty(t,r,i&Kr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Kr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=pr().getGlobalEventTarget(this.doc,e),!e))throw new U(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function YC(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Oy=class extends Mc{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=JC(i.id,h);for(let m of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=m,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let m of p){let y=xy(m,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Pc=class extends Mc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?JC(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&kd.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Zd=class extends Pc{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,a,u,l,h),this.contentAttr=NL(h),this.hostAttr=ML(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Xd=class n extends Cc{supportsDOMEvents=!0;static makeCurrent(){Ty(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=PL();return t==null?null:kL(t)}resetBaseElement(){kc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ny(document.cookie,e)}},kc=null;function PL(){return kc=kc||document.head.querySelector("base"),kc?kc.getAttribute("href"):null}function kL(n){return new URL(n,document.baseURI).pathname}var xL=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),eS=(()=>{class n extends Nc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)($(Be))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),XC=["alt","control","meta","shift"],OL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},LL={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},tS=(()=>{class n extends Nc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>pr().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),XC.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=OL[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),XC.forEach(s=>{if(s!==i){let a=LL[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)($(Be))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})();function Uy(n,e,t){let r=F({rootComponent:n,platformRef:t?.platformRef},FL(e));return jC(r)}function FL(n){return{appProviders:[...$L,...n?.providers??[]],platformProviders:BL}}function VL(){Xd.makeCurrent()}function jL(){return new cn}function UL(){return Bm(document),document}var BL=[{provide:Gr,useValue:GC},{provide:Ad,useValue:VL,multi:!0},{provide:Be,useFactory:UL}];var $L=[{provide:Za,useValue:"root"},{provide:cn,useFactory:jL},{provide:Jd,useClass:eS,multi:!0,deps:[Be]},{provide:Jd,useClass:tS,multi:!0,deps:[Be]},jy,Fy,Ly,{provide:Ji,useExisting:jy},{provide:Rc,useClass:xL},[]];var nS=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)($(Be))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var re="primary",Gc=Symbol("RouteTitle"),qy=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function lo(n){return new qy(n)}function lS(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function zL(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!xn(n[t],e[t]))return!1;return!0}function xn(n,e){let t=n?Gy(n):void 0,r=e?Gy(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!dS(n[i],e[i]))return!1;return!0}function Gy(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function dS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function hS(n){return n.length>0?n[n.length-1]:null}function gr(n){return ug(n)?n:oo(n)?Ie(Promise.resolve(n)):G(n)}var qL={exact:pS,subset:gS},fS={exact:GL,subset:WL,ignored:()=>!0};function rS(n,e,t){return qL[t.paths](n.root,e.root,t.matrixParams)&&fS[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function GL(n,e){return xn(n,e)}function pS(n,e,t){if(!co(n.segments,e.segments)||!nh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!pS(n.children[r],e.children[r],t))return!1;return!0}function WL(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>dS(n[t],e[t]))}function gS(n,e,t){return mS(n,e,e.segments,t)}function mS(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!co(i,t)||e.hasChildren()||!nh(i,t,r))}else if(n.segments.length===t.length){if(!co(n.segments,t)||!nh(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!gS(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!co(n.segments,i)||!nh(n.segments,i,r)||!n.children[re]?!1:mS(n.children[re],e,o,r)}}function nh(n,e,t){return e.every((r,i)=>fS[t](n[i].parameters,r.parameters))}var Ln=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ge([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=lo(this.queryParams),this._queryParamMap}toString(){return YL.serialize(this)}},ge=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return rh(this)}},Xr=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=lo(this.parameters),this._parameterMap}toString(){return vS(this)}};function KL(n,e){return co(n,e)&&n.every((t,r)=>xn(t.parameters,e[r].parameters))}function co(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function QL(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===re&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==re&&(t=t.concat(e(i,r)))}),t}var ho=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>new ei,providedIn:"root"})}return n})(),ei=class{parse(e){let t=new Ky(e);return new Ln(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${xc(e.root,!0)}`,r=XL(e.queryParams),i=typeof e.fragment=="string"?`#${ZL(e.fragment)}`:"";return`${t}${r}${i}`}},YL=new ei;function rh(n){return n.segments.map(e=>vS(e)).join("/")}function xc(n,e){if(!n.hasChildren())return rh(n);if(e){let t=n.children[re]?xc(n.children[re],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==re&&r.push(`${i}:${xc(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=QL(n,(r,i)=>i===re?[xc(n.children[re],!1)]:[`${i}:${xc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[re]!=null?`${rh(n)}/${t[0]}`:`${rh(n)}/(${t.join("//")})`}}function yS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function eh(n){return yS(n).replace(/%3B/gi,";")}function ZL(n){return encodeURI(n)}function Wy(n){return yS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ih(n){return decodeURIComponent(n)}function iS(n){return ih(n.replace(/\+/g,"%20"))}function vS(n){return`${Wy(n.path)}${JL(n.parameters)}`}function JL(n){return Object.entries(n).map(([e,t])=>`;${Wy(e)}=${Wy(t)}`).join("")}function XL(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${eh(t)}=${eh(i)}`).join("&"):`${eh(t)}=${eh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var eF=/^[^\/()?;#]+/;function By(n){let e=n.match(eF);return e?e[0]:""}var tF=/^[^\/()?;=#]+/;function nF(n){let e=n.match(tF);return e?e[0]:""}var rF=/^[^=?&#]+/;function iF(n){let e=n.match(rF);return e?e[0]:""}var oF=/^[^&#]+/;function sF(n){let e=n.match(oF);return e?e[0]:""}var Ky=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ge([],{}):new ge([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[re]=new ge(e,t)),r}parseSegment(){let e=By(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new U(4009,!1);return this.capture(e),new Xr(ih(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=nF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=By(this.remaining);i&&(r=i,this.capture(r))}e[ih(t)]=ih(r)}parseQueryParam(e){let t=iF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=sF(this.remaining);s&&(r=s,this.capture(r))}let i=iS(t),o=iS(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=By(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new U(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=re);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[re]:new ge([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new U(4011,!1)}};function _S(n){return n.segments.length>0?new ge([],{[re]:n}):n}function ES(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=ES(i);if(r===re&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new ge(n.segments,e);return aF(t)}function aF(n){if(n.numberOfChildren===1&&n.children[re]){let e=n.children[re];return new ge(n.segments.concat(e.segments),e.children)}return n}function ti(n){return n instanceof Ln}function IS(n,e,t=null,r=null){let i=wS(n);return TS(i,e,t,r)}function wS(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new ge(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=_S(r);return e??i}function TS(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return $y(i,i,i,t,r);let o=cF(e);if(o.toRoot())return $y(i,i,new ge([],{}),t,r);let s=uF(o,i,n),a=s.processChildren?Lc(s.segmentGroup,s.index,o.commands):bS(s.segmentGroup,s.index,o.commands);return $y(i,s.segmentGroup,a,t,r)}function oh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Vc(n){return typeof n=="object"&&n!=null&&n.outlets}function $y(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=DS(n,e,t);let a=_S(ES(s));return new Ln(a,o,i)}function DS(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=DS(o,e,t)}),new ge(n.segments,r)}var sh=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&oh(r[0]))throw new U(4003,!1);let i=r.find(Vc);if(i&&i!==hS(r))throw new U(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function cF(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new sh(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new sh(t,e,r)}var As=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function uF(n,e,t){if(n.isAbsolute)return new As(e,!0,0);if(!t)return new As(e,!1,NaN);if(t.parent===null)return new As(t,!0,0);let r=oh(n.commands[0])?0:1,i=t.segments.length-1+r;return lF(t,i,n.numberOfDoubleDots)}function lF(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new U(4005,!1);i=r.segments.length}return new As(r,!1,i-o)}function dF(n){return Vc(n[0])?n[0].outlets:{[re]:n}}function bS(n,e,t){if(n??=new ge([],{}),n.segments.length===0&&n.hasChildren())return Lc(n,e,t);let r=hF(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new ge(n.segments.slice(0,r.pathIndex),{});return o.children[re]=new ge(n.segments.slice(r.pathIndex),n.children),Lc(o,0,i)}else return r.match&&i.length===0?new ge(n.segments,{}):r.match&&!n.hasChildren()?Qy(n,e,t):r.match?Lc(n,0,i):Qy(n,e,t)}function Lc(n,e,t){if(t.length===0)return new ge(n.segments,{});{let r=dF(t),i={};if(Object.keys(r).some(o=>o!==re)&&n.children[re]&&n.numberOfChildren===1&&n.children[re].segments.length===0){let o=Lc(n.children[re],e,t);return new ge(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=bS(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ge(n.segments,i)}}function hF(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Vc(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!sS(u,l,s))return o;r+=2}else{if(!sS(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Qy(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Vc(o)){let u=fF(o.outlets);return new ge(r,u)}if(i===0&&oh(t[0])){let u=n.segments[e];r.push(new Xr(u.path,oS(t[0]))),i++;continue}let s=Vc(o)?o.outlets[re]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&oh(a)?(r.push(new Xr(s,oS(a))),i+=2):(r.push(new Xr(s,{})),i++)}return new ge(r,{})}function fF(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Qy(new ge([],{}),0,r))}),e}function oS(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function sS(n,e,t){return n==t.path&&xn(e,t.parameters)}var Rs="imperative",Je=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Je||{}),zt=class{id;url;constructor(e,t){this.id=e,this.url=t}},ni=class extends zt{type=Je.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},tn=class extends zt{urlAfterRedirects;type=Je.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Nt=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Nt||{}),Ms=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Ms||{}),On=class extends zt{reason;code;type=Je.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Fn=class extends zt{reason;code;type=Je.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Ps=class extends zt{error;target;type=Je.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},jc=class extends zt{urlAfterRedirects;state;type=Je.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ah=class extends zt{urlAfterRedirects;state;type=Je.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ch=class extends zt{urlAfterRedirects;state;shouldActivate;type=Je.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},uh=class extends zt{urlAfterRedirects;state;type=Je.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lh=class extends zt{urlAfterRedirects;state;type=Je.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dh=class{route;type=Je.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},hh=class{route;type=Je.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},fh=class{snapshot;type=Je.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ph=class{snapshot;type=Je.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gh=class{snapshot;type=Je.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},mh=class{snapshot;type=Je.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ks=class{routerEvent;position;anchor;type=Je.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Uc=class{},xs=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function pF(n){return!(n instanceof Uc)&&!(n instanceof xs)}function gF(n,e){return n.providers&&!n._injector&&(n._injector=_s(n.providers,e,`Route: ${n.path}`)),n._injector??e}function mn(n){return n.outlet||re}function mF(n,e){let t=n.filter(r=>mn(r)===e);return t.push(...n.filter(r=>mn(r)!==e)),t}function Fs(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var yh=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Fs(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new fo(this.rootInjector)}},fo=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new yh(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)($(Ve))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vh=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Yy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Yy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Zy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Zy(e,this._root).map(t=>t.value)}};function Yy(n,e){if(n===e.value)return e;for(let t of e.children){let r=Yy(n,t);if(r)return r}return null}function Zy(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Zy(n,t);if(r.length)return r.unshift(e),r}return[]}var Ht=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ss(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Bc=class extends vh{snapshot;constructor(e,t){super(e),this.snapshot=t,ov(this,e)}toString(){return this.snapshot.toString()}};function CS(n){let e=yF(n),t=new ut([new Xr("",{})]),r=new ut({}),i=new ut({}),o=new ut({}),s=new ut(""),a=new Vn(t,r,o,s,i,re,n,e.root);return a.snapshot=e.root,new Bc(new Ht(a,[]),e)}function yF(n){let e={},t={},r={},o=new uo([],e,r,"",t,re,n,null,{});return new $c("",new Ht(o,[]))}var Vn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(K(l=>l[Gc]))??G(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(K(e=>lo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(K(e=>lo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function _h(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),n.params),data:F(F({},e.data),n.data),resolve:F(F(F(F({},n.data),e.data),i?.data),n._resolvedData)}:r={params:F({},n.params),data:F({},n.data),resolve:F(F({},n.data),n._resolvedData??{})},i&&AS(i)&&(r.resolve[Gc]=i.title),r}var uo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Gc]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=lo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=lo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},$c=class extends vh{url;constructor(e,t){super(t),this.url=e,ov(this,t)}toString(){return SS(this._root)}};function ov(n,e){e.value._routerState=n,e.children.forEach(t=>ov(n,t))}function SS(n){let e=n.children.length>0?` { ${n.children.map(SS).join(", ")} } `:"";return`${n.value}${e}`}function Hy(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,xn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),xn(e.params,t.params)||n.paramsSubject.next(t.params),zL(e.url,t.url)||n.urlSubject.next(t.url),xn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Jy(n,e){let t=xn(n.params,e.params)&&KL(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Jy(n.parent,e.parent))}function AS(n){return typeof n.title=="string"||n.title===null}var RS=new B(""),Wc=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=re;activateEvents=new Rt;deactivateEvents=new Rt;attachEvents=new Rt;detachEvents=new Rt;routerOutletData=VC(void 0);parentContexts=R(fo);location=R(yc);changeDetector=R(bs);inputBinder=R(Kc,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new U(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new U(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new U(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new U(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Xy(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ro({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ys]})}return n})(),Xy=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Vn?this.route:e===fo?this.childContexts:e===RS?this.outletData:this.parent.get(e,t)}},Kc=new B(""),sv=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=$a([r.queryParams,r.params,r.data]).pipe(Se(([o,s,a],u)=>(a=F(F(F({},o),s),a),u===0?G(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=UC(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),av=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=$t({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&rt(0,"router-outlet")},dependencies:[Wc],encapsulation:2})}return n})();function cv(n){let e=n.children&&n.children.map(cv),t=e?me(F({},n),{children:e}):F({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==re&&(t.component=av),t}function vF(n,e,t){let r=Hc(n,e._root,t?t._root:void 0);return new Bc(r,e)}function Hc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=_F(n,e,t);return new Ht(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Hc(n,a)),s}}let r=EF(e.value),i=e.children.map(o=>Hc(n,o));return new Ht(r,i)}}function _F(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Hc(n,r,i);return Hc(n,r)})}function EF(n){return new Vn(new ut(n.url),new ut(n.params),new ut(n.queryParams),new ut(n.fragment),new ut(n.data),n.outlet,n.component,n)}var Os=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},NS="ngNavigationCancelingError";function Eh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=ti(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=MS(!1,Nt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function MS(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[NS]=!0,t.cancellationCode=e,t}function IF(n){return PS(n)&&ti(n.url)}function PS(n){return!!n&&n[NS]}var wF=(n,e,t,r)=>K(i=>(new ev(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),ev=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Hy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ss(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ss(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ss(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ss(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new mh(o.value.snapshot))}),e.children.length&&this.forwardEvent(new ph(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Hy(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Hy(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Ih=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ns=class{component;route;constructor(e,t){this.component=e,this.route=t}};function TF(n,e,t){let r=n._root,i=e?e._root:null;return Oc(r,i,t,[r.value])}function DF(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Vs(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Cg(n)?n:e.get(n):r}function Oc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ss(e);return n.children.forEach(s=>{bF(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Fc(a,t.getContext(s),i)),i}function bF(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=CF(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Ih(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Oc(n,e,a?a.children:null,r,i):Oc(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ns(a.outlet.component,s))}else s&&Fc(e,a,i),i.canActivateChecks.push(new Ih(r)),o.component?Oc(n,null,a?a.children:null,r,i):Oc(n,null,t,r,i);return i}function CF(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!co(n.url,e.url);case"pathParamsOrQueryParamsChange":return!co(n.url,e.url)||!xn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Jy(n,e)||!xn(n.queryParams,e.queryParams);case"paramsChange":default:return!Jy(n,e)}}function Fc(n,e,t){let r=Ss(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Fc(s,e.children.getContext(o),t):Fc(s,null,t):Fc(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ns(e.outlet.component,i)):t.canDeactivateChecks.push(new Ns(null,i)):t.canDeactivateChecks.push(new Ns(null,i))}function Qc(n){return typeof n=="function"}function SF(n){return typeof n=="boolean"}function AF(n){return n&&Qc(n.canLoad)}function RF(n){return n&&Qc(n.canActivate)}function NF(n){return n&&Qc(n.canActivateChild)}function MF(n){return n&&Qc(n.canDeactivate)}function PF(n){return n&&Qc(n.canMatch)}function kS(n){return n instanceof er||n?.name==="EmptyError"}var th=Symbol("INITIAL_VALUE");function Ls(){return Se(n=>$a(n.map(e=>e.pipe(St(1),xl(th)))).pipe(K(e=>{for(let t of e)if(t!==!0){if(t===th)return th;if(t===!1||kF(t))return t}return!0}),et(e=>e!==th),St(1)))}function kF(n){return ti(n)||n instanceof Os}function xF(n,e){return Fe(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?G(me(F({},t),{guardsResult:!0})):OF(s,r,i,n).pipe(Fe(a=>a&&SF(a)?LF(r,o,n,e):G(a)),K(a=>me(F({},t),{guardsResult:a})))})}function OF(n,e,t,r){return Ie(n).pipe(Fe(i=>BF(i.component,i.route,t,e,r)),rr(i=>i!==!0,!0))}function LF(n,e,t,r){return Ie(e).pipe(Fr(i=>ns(VF(i.route.parent,r),FF(i.route,r),UF(n,i.path,t),jF(n,i.route,t))),rr(i=>i!==!0,!0))}function FF(n,e){return n!==null&&e&&e(new gh(n)),G(!0)}function VF(n,e){return n!==null&&e&&e(new fh(n)),G(!0)}function jF(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return G(!0);let i=r.map(o=>Pi(()=>{let s=Fs(e)??t,a=Vs(o,s),u=RF(a)?a.canActivate(e,n):$e(s,()=>a(e,n));return gr(u).pipe(rr())}));return G(i).pipe(Ls())}function UF(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>DF(s)).filter(s=>s!==null).map(s=>Pi(()=>{let a=s.guards.map(u=>{let l=Fs(s.node)??t,h=Vs(u,l),p=NF(h)?h.canActivateChild(r,n):$e(l,()=>h(r,n));return gr(p).pipe(rr())});return G(a).pipe(Ls())}));return G(o).pipe(Ls())}function BF(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return G(!0);let s=o.map(a=>{let u=Fs(e)??i,l=Vs(a,u),h=MF(l)?l.canDeactivate(n,e,t,r):$e(u,()=>l(n,e,t,r));return gr(h).pipe(rr())});return G(s).pipe(Ls())}function $F(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return G(!0);let o=i.map(s=>{let a=Vs(s,n),u=AF(a)?a.canLoad(e,t):$e(n,()=>a(e,t));return gr(u)});return G(o).pipe(Ls(),xS(r))}function xS(n){return ml(tt(e=>{if(typeof e!="boolean")throw Eh(n,e)}),K(e=>e===!0))}function HF(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return G(!0);let o=i.map(s=>{let a=Vs(s,n),u=PF(a)?a.canMatch(e,t):$e(n,()=>a(e,t));return gr(u)});return G(o).pipe(Ls(),xS(r))}var zc=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},qc=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Cs(n){return es(new zc(n))}function zF(n){return es(new U(4e3,!1))}function qF(n){return es(MS(!1,Nt.GuardRejected))}var tv=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return G(r);if(i.numberOfChildren>1||!i.children[re])return zF(`${e.redirectTo}`);i=i.children[re]}}applyRedirectCommands(e,t,r,i,o){return GF(t,i,o).pipe(K(s=>{if(s instanceof Ln)throw new qc(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new qc(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Ln(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new ge(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new U(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function GF(n,e,t){if(typeof n=="string")return G(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return gr($e(t,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var nv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function WF(n,e,t,r,i){let o=OS(n,e,t);return o.matched?(r=gF(e,r),HF(r,e,t,i).pipe(K(s=>s===!0?o:F({},nv)))):G(o)}function OS(n,e,t){if(e.path==="**")return KF(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?F({},nv):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||lS)(t,n,e);if(!i)return F({},nv);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?F(F({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function KF(n){return{matched:!0,parameters:n.length>0?hS(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function aS(n,e,t,r){return t.length>0&&ZF(n,t,r)?{segmentGroup:new ge(e,YF(r,new ge(t,n.children))),slicedSegments:[]}:t.length===0&&JF(n,t,r)?{segmentGroup:new ge(n.segments,QF(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ge(n.segments,n.children),slicedSegments:t}}function QF(n,e,t,r){let i={};for(let o of t)if(Th(n,e,o)&&!r[mn(o)]){let s=new ge([],{});i[mn(o)]=s}return F(F({},r),i)}function YF(n,e){let t={};t[re]=e;for(let r of n)if(r.path===""&&mn(r)!==re){let i=new ge([],{});t[mn(r)]=i}return t}function ZF(n,e,t){return t.some(r=>Th(n,e,r)&&mn(r)!==re)}function JF(n,e,t){return t.some(r=>Th(n,e,r))}function Th(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function XF(n,e,t){return e.length===0&&!n.children[t]}var rv=class{};function eV(n,e,t,r,i,o,s="emptyOnly"){return new iv(n,e,t,r,i,s,o).recognize()}var tV=31,iv=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new tv(this.urlSerializer,this.urlTree)}noMatchError(e){return new U(4002,`'${e.segmentGroup}'`)}recognize(){let e=aS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(K(({children:t,rootSnapshot:r})=>{let i=new Ht(r,t),o=new $c("",i),s=IS(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new uo([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),re,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,re,t).pipe(K(r=>({children:r,rootSnapshot:t})),nr(r=>{if(r instanceof qc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof zc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(K(s=>s instanceof Ht?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ie(o).pipe(Fr(s=>{let a=r.children[s],u=mF(t,s);return this.processSegmentGroup(e,u,a,s,i)}),kl((s,a)=>(s.push(...a),s)),Vr(null),lg(),Fe(s=>{if(s===null)return Cs(r);let a=LS(s);return nV(a),G(a)}))}processSegment(e,t,r,i,o,s,a){return Ie(t).pipe(Fr(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(nr(l=>{if(l instanceof zc)return G(null);throw l}))),rr(u=>!!u),nr(u=>{if(kS(u))return XF(r,i,o)?G(new rv):Cs(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return mn(r)!==s&&(s===re||!Th(i,o,r))?Cs(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):Cs(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=OS(t,i,o);if(!u)return Cs(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>tV&&(this.allowRedirects=!1));let y=new uo(o,l,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,cS(i),mn(i),i.component??i._loadedComponent??null,i,uS(i)),S=_h(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(S.params),y.data=Object.freeze(S.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(Se(M=>this.applyRedirects.lineralizeSegments(i,M)),Fe(M=>this.processSegment(e,r,t,M.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=WF(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Se(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Se(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,S=new uo(m,p,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,cS(r),mn(r),r.component??r._loadedComponent??null,r,uS(r)),P=_h(S,s,this.paramsInheritanceStrategy);S.params=Object.freeze(P.params),S.data=Object.freeze(P.data);let{segmentGroup:M,slicedSegments:L}=aS(t,m,y,l);if(L.length===0&&M.hasChildren())return this.processChildren(h,l,M,S).pipe(K(Z=>new Ht(S,Z)));if(l.length===0&&L.length===0)return G(new Ht(S,[]));let z=mn(r)===o;return this.processSegment(h,l,M,L,z?re:o,!0,S).pipe(K(Z=>new Ht(S,Z instanceof Ht?[Z]:[])))}))):Cs(t)))}getChildConfig(e,t,r){return t.children?G({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?G({routes:t._loadedRoutes,injector:t._loadedInjector}):$F(e,t,r,this.urlSerializer).pipe(Fe(i=>i?this.configLoader.loadChildren(e,t).pipe(tt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):qF(t))):G({routes:[],injector:e})}};function nV(n){n.sort((e,t)=>e.value.outlet===re?-1:t.value.outlet===re?1:e.value.outlet.localeCompare(t.value.outlet))}function rV(n){let e=n.value.routeConfig;return e&&e.path===""}function LS(n){let e=[],t=new Set;for(let r of n){if(!rV(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=LS(r.children);e.push(new Ht(r.value,i))}return e.filter(r=>!t.has(r))}function cS(n){return n.data||{}}function uS(n){return n.resolve||{}}function iV(n,e,t,r,i,o){return Fe(s=>eV(n,e,t,r,s.extractedUrl,i,o).pipe(K(({state:a,tree:u})=>me(F({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function oV(n,e){return Fe(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return G(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of FS(u))s.add(l);let a=0;return Ie(s).pipe(Fr(u=>o.has(u)?sV(u,r,n,e):(u.data=_h(u,u.parent,n).resolve,G(void 0))),tt(()=>a++),rs(1),Fe(u=>a===s.size?G(t):kt))})}function FS(n){let e=n.children.map(t=>FS(t)).flat();return[n,...e]}function sV(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!AS(i)&&(o[Gc]=i.title),Pi(()=>(n.data=_h(n,n.parent,t).resolve,aV(o,n,e,r).pipe(K(s=>(n._resolvedData=s,n.data=F(F({},n.data),s),null)))))}function aV(n,e,t,r){let i=Gy(n);if(i.length===0)return G({});let o={};return Ie(i).pipe(Fe(s=>cV(n[s],e,t,r).pipe(rr(),tt(a=>{if(a instanceof Os)throw Eh(new ei,a);o[s]=a}))),rs(1),K(()=>o),nr(s=>kS(s)?kt:es(s)))}function cV(n,e,t,r){let i=Fs(e)??r,o=Vs(n,i),s=o.resolve?o.resolve(e,t):$e(i,()=>o(e,t));return gr(s)}function zy(n){return Se(e=>{let t=n(e);return t?Ie(t).pipe(K(()=>e)):G(e)})}var uv=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===re);return r}getResolvedTitleForRoute(t){return t.data[Gc]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>R(VS),providedIn:"root"})}return n})(),VS=(()=>{class n extends uv{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)($(nS))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ri=new B("",{providedIn:"root",factory:()=>({})}),po=new B(""),Dh=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=R(vy);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return G(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=gr($e(t,()=>r.loadComponent())).pipe(K(US),Se(BS),tt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Ha(()=>{this.componentLoaders.delete(r)})),o=new Yo(i,()=>new ke).pipe(Qo());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return G({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=jS(r,this.compiler,t,this.onLoadEndListener).pipe(Ha(()=>{this.childrenLoaders.delete(r)})),s=new Yo(o,()=>new ke).pipe(Qo());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jS(n,e,t,r){return gr($e(t,()=>n.loadChildren())).pipe(K(US),Se(BS),Fe(i=>i instanceof jd||Array.isArray(i)?G(i):Ie(e.compileModuleAsync(i))),K(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(po,[],{optional:!0,self:!0}).flat()),{routes:s.map(cv),injector:o}}))}function uV(n){return n&&typeof n=="object"&&"default"in n}function US(n){return uV(n)?n.default:n}function BS(n){return G(n)}var bh=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>R(lV),providedIn:"root"})}return n})(),lV=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lv=new B(""),dv=new B("");function $S(n,e,t){let r=n.get(dv),i=n.get(Be);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),dV(n)));a.ready.catch(l=>{});let{onViewTransitionCreated:u}=r;return u&&$e(n,()=>u({transition:a,from:e,to:t})),s}function dV(n){return new Promise(e=>{ly({read:()=>setTimeout(e)},{injector:n})})}var hv=new B(""),Ch=(()=>{class n{currentNavigation=Qi(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new ke;transitionAbortWithErrorSubject=new ke;configLoader=R(Dh);environmentInjector=R(Ve);destroyRef=R(ur);urlSerializer=R(ho);rootContexts=R(fo);location=R(Zr);inputBindingEnabled=R(Kc,{optional:!0})!==null;titleStrategy=R(uv);options=R(ri,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=R(bh);createViewTransition=R(lv,{optional:!0});navigationErrorHandler=R(hv,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>G(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new dh(i)),r=i=>this.events.next(new hh(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;en(()=>{this.transitions?.next(me(F({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new ut(null),this.transitions.pipe(et(r=>r!==null),Se(r=>{let i=!1;return G(r).pipe(Se(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Nt.SupersededByNewNavigation),kt;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?me(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new Fn(o.id,this.urlSerializer.serialize(o.rawUrl),"",Ms.IgnoredSameUrlNavigation)),o.resolve(!1),kt;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return G(o).pipe(Se(u=>(this.events.next(new ni(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?kt:Promise.resolve(u))),iV(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),tt(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=u.urlAfterRedirects,h));let l=new jc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:m}=o,y=new ni(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let S=CS(this.rootComponentType).snapshot;return this.currentTransition=r=me(F({},o),{targetSnapshot:S,urlAfterRedirects:l,extras:me(F({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(P=>(P.finalUrl=l,P)),G(r)}else return this.events.next(new Fn(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Ms.IgnoredByUrlHandlingStrategy)),o.resolve(!1),kt}),tt(o=>{let s=new ah(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),K(o=>(this.currentTransition=r=me(F({},o),{guards:TF(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),xF(this.environmentInjector,o=>this.events.next(o)),tt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Eh(this.urlSerializer,o.guardsResult);let s=new ch(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),et(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Nt.GuardRejected),!1)),zy(o=>{if(o.guards.canActivateChecks.length!==0)return G(o).pipe(tt(s=>{let a=new uh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Se(s=>{let a=!1;return G(s).pipe(oV(this.paramsInheritanceStrategy,this.environmentInjector),tt({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Nt.NoDataFromResolver)}}))}),tt(s=>{let a=new lh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),zy(o=>{let s=a=>{let u=[];if(a.routeConfig?.loadComponent){let l=Fs(a)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(tt(h=>{a.component=h}),K(()=>{})))}for(let l of a.children)u.push(...s(l));return u};return $a(s(o.targetSnapshot.root)).pipe(Vr(null),St(1))}),zy(()=>this.afterPreactivation()),Se(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Ie(a).pipe(K(()=>r)):G(r)}),K(o=>{let s=vF(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=me(F({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),tt(()=>{this.events.next(new Uc)}),wF(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),St(1),Ol(new q(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(et(()=>!i&&!r.targetRouterState),tt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Nt.Aborted)}))),tt({next:o=>{i=!0,this.lastSuccessfulNavigation=en(this.currentNavigation),this.events.next(new tn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Ol(this.transitionAbortWithErrorSubject.pipe(tt(o=>{throw o}))),Ha(()=>{i||this.cancelNavigationTransition(r,"",Nt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),nr(o=>{if(this.destroyed)return r.resolve(!1),kt;if(i=!0,PS(o))this.events.next(new On(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),IF(o)?this.events.next(new xs(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Ps(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=$e(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Os){let{message:u,cancellationCode:l}=Eh(this.urlSerializer,a);this.events.next(new On(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new xs(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return kt}))}))}cancelNavigationTransition(t,r,i){let o=new On(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=en(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hV(n){return n!==Rs}var HS=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>R(fV),providedIn:"root"})}return n})(),wh=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},fV=(()=>{class n extends wh{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Cd(n)))(i||n)}})();static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zS=(()=>{class n{urlSerializer=R(ho);options=R(ri,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=R(Zr);urlHandlingStrategy=R(bh);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Ln;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Ln?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=CS(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>R(pV),providedIn:"root"})}return n})(),pV=(()=>{class n extends zS{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof ni?this.updateStateMemento():t instanceof Fn?this.commitTransition(r):t instanceof jc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Uc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof On&&t.code!==Nt.SupersededByNewNavigation&&t.code!==Nt.Redirect?this.restoreHistory(r):t instanceof Ps?this.restoreHistory(r,!0):t instanceof tn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=F(F({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=F(F({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Cd(n)))(i||n)}})();static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Sh(n,e){n.events.pipe(et(t=>t instanceof tn||t instanceof On||t instanceof Ps||t instanceof Fn),K(t=>t instanceof tn||t instanceof Fn?0:(t instanceof On?t.code===Nt.Redirect||t.code===Nt.SupersededByNewNavigation:!1)?2:1),et(t=>t!==2),St(1)).subscribe(()=>{e()})}var gV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},jn=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=R(dy);stateManager=R(zS);options=R(ri,{optional:!0})||{};pendingTasks=R(Nn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=R(Ch);urlSerializer=R(ho);location=R(Zr);urlHandlingStrategy=R(bh);injector=R(Ve);_events=new ke;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=R(HS);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=R(po,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!R(Kc,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Pe;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=en(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof On&&r.code!==Nt.Redirect&&r.code!==Nt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof tn)this.navigated=!0;else if(r instanceof xs){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=F({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||hV(i.source)},s);this.scheduleNavigation(a,Rs,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}pF(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Rs,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=F({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(vt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return en(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(cv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=F(F({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=wS(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return TS(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=ti(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Rs,null,r)}navigate(t,r={skipLocationChange:!1}){return yV(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=F({},gV):r===!1?i=F({},mV):i=r,ti(t))return rS(this.currentUrlTree,t,i);let o=this.parseUrl(t);return rS(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return Sh(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yV(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new U(4008,!1)}var Ah=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Qi(null);get href(){return en(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ke;applicationErrorHandler=R(vt);options=R(ri,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(R(new Gd("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof tn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(ti(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:ti(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(Ze(jn),Ze(Vn),gc("tabindex"),Ze(vs),Ze(to),Ze(gn))};static \u0275dir=ro({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&fr("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&$d("href",i.reactiveHref(),qm)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",bc],skipLocationChange:[2,"skipLocationChange","skipLocationChange",bc],replaceUrl:[2,"replaceUrl","replaceUrl",bc],routerLink:"routerLink"},features:[ys]})}return n})();var Yc=class{};var qS=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(et(t=>t instanceof tn),Fr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=_s(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ie(i).pipe(ts())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=G(null);let o=i.pipe(Fe(s=>s===null?G(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(t,r);return Ie([o,s]).pipe(ts())}else return o})}static \u0275fac=function(r){return new(r||n)($(jn),$(Ve),$(Yc),$(Dh))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),GS=new B(""),vV=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Rs;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ni?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof tn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Fn&&t.code===Ms.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ks&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>_(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new ks(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){oy()};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})();function pv(n,...e){return yt([{provide:po,multi:!0,useValue:n},[],{provide:Vn,useFactory:WS,deps:[jn]},{provide:vc,multi:!0,useFactory:KS},e.map(t=>t.\u0275providers)])}function WS(n){return n.routerState.root}function Zc(n,e){return{\u0275kind:n,\u0275providers:e}}function KS(){let n=R(Ne);return e=>{let t=n.get(kn);if(e!==t.components[0])return;let r=n.get(jn),i=n.get(QS);n.get(gv)===1&&r.initialNavigation(),n.get(JS,null,{optional:!0})?.setUpPreloading(),n.get(GS,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var QS=new B("",{factory:()=>new ke}),gv=new B("",{providedIn:"root",factory:()=>1});function YS(){let n=[{provide:$m,useValue:!0},{provide:gv,useValue:0},Es(()=>{let e=R(Ne);return e.get(Dy,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(jn),o=e.get(QS);Sh(i,()=>{r(!0)}),e.get(Ch).afterPreactivation=()=>(r(!0),o.closed?G(void 0):o),i.initialNavigation()}))})];return Zc(2,n)}function ZS(){let n=[Es(()=>{R(jn).setUpLocationChangeListener()}),{provide:gv,useValue:2}];return Zc(3,n)}var JS=new B("");function XS(n){return Zc(0,[{provide:JS,useExisting:qS},{provide:Yc,useExisting:n}])}function eA(){return Zc(8,[sv,{provide:Kc,useExisting:sv}])}function tA(n){fn("NgRouterViewTransitions");let e=[{provide:lv,useValue:$S},{provide:dv,useValue:F({skipNextTransition:!!n?.skipInitialTransition},n)}];return Zc(9,e)}var nA=[Zr,{provide:ho,useClass:ei},jn,fo,{provide:Vn,useFactory:WS,deps:[jn]},Dh,[]],mv=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[nA,[],{provide:po,multi:!0,useValue:t},[],r?.errorHandler?{provide:hv,useValue:r.errorHandler}:[],{provide:ri,useValue:r||{}},r?.useHash?EV():IV(),_V(),r?.preloadingStrategy?XS(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?wV(r):[],r?.bindToComponentInputs?eA().\u0275providers:[],r?.enableViewTransitions?tA().\u0275providers:[],TV()]}}static forChild(t){return{ngModule:n,providers:[{provide:po,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Qr({type:n});static \u0275inj=sr({})}return n})();function _V(){return{provide:GS,useFactory:()=>{let n=R(WC),e=R(de),t=R(ri),r=R(Ch),i=R(ho);return t.scrollOffset&&n.setOffset(t.scrollOffset),new vV(i,r,n,e,t)}}}function EV(){return{provide:gn,useClass:Ay}}function IV(){return{provide:gn,useClass:Qd}}function wV(n){return[n.initialNavigation==="disabled"?ZS().\u0275providers:[],n.initialNavigation==="enabledBlocking"?YS().\u0275providers:[]]}var fv=new B("");function TV(){return[{provide:fv,useFactory:KS},{provide:vc,multi:!0,useExisting:fv}]}var rA=()=>{};var sA=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},bV=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Rh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(t[h],t[p],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(sA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):bV(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new vv;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},vv=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},CV=function(n){let e=sA(n);return Rh.encodeByteArray(e,!0)},Xc=function(n){return CV(n).replace(/\./g,"")},Nh=function(n){try{return Rh.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Ev(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var SV=()=>Ev().__FIREBASE_DEFAULTS__,AV=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},RV=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Nh(n[1]);return e&&JSON.parse(e)},Mh=()=>{try{return rA()||SV()||AV()||RV()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Iv=n=>{var e,t;return(t=(e=Mh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},aA=n=>{let e=Iv(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},wv=()=>{var n;return(n=Mh())===null||n===void 0?void 0:n.config},Tv=n=>{var e;return(e=Mh())===null||e===void 0?void 0:e[`_${n}`]};var go=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function ii(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Ph(n){return _(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function cA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Xc(JSON.stringify(t)),Xc(JSON.stringify(s)),""].join(".")}var Jc={};function NV(){let n={prod:[],emulator:[]};for(let e of Object.keys(Jc))Jc[e]?n.emulator.push(e):n.prod.push(e);return n}function MV(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var iA=!1;function kh(n,e){if(typeof window>"u"||typeof document>"u"||!ii(window.location.host)||Jc[n]===e||Jc[n]||iA)return;Jc[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=NV().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{iA=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=MV(r),y=t("text"),S=document.getElementById(y)||document.createElement("span"),P=t("learnmore"),M=document.getElementById(P)||document.createElement("a"),L=t("preprendIcon"),z=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let Z=m.element;a(Z),h(M,P);let De=l();u(z,L),Z.append(z,S,M,De),document.body.appendChild(Z)}o?(S.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function it(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(it())}function PV(){var n;let e=(n=Mh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dA(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function hA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fA(){let n=it();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function pA(){return!PV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function eu(){try{return typeof indexedDB=="object"}catch{return!1}}function gA(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var kV="FirebaseError",qt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=kV,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yn.prototype.create)}},yn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?xV(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new qt(i,a,r)}};function xV(n,e){return n.replace(OV,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var OV=/\{\$([^}]+)}/g;function mA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Un(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(oA(o)&&oA(s)){if(!Un(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function oA(n){return n!==null&&typeof n=="object"}function js(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function yA(n,e){let t=new _v(n,e);return t.subscribe.bind(t)}var _v=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");LV(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=yv),i.error===void 0&&(i.error=yv),i.complete===void 0&&(i.complete=yv);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function LV(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function yv(){}var ute=14400*1e3;function xe(n){return n&&n._delegate?n._delegate:n}var Mt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var mo="[DEFAULT]";var Dv=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new go;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VV(e))try{this.getOrInitializeService({instanceIdentifier:mo})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=mo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=mo){return this.instances.has(e)}getOptions(e=mo){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:FV(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=mo){return this.component?this.component.multipleInstances?e:mo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function FV(n){return n===mo?void 0:n}function VV(n){return n.instantiationMode==="EAGER"}var xh=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Dv(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var jV=[],oe=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(oe||{}),UV={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},BV=oe.INFO,$V={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},HV=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=$V[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Bn=class{constructor(e){this.name=e,this._logLevel=BV,this._logHandler=HV,this._userLogHandler=null,jV.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}};var zV=(n,e)=>e.some(t=>n instanceof t),vA,_A;function qV(){return vA||(vA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GV(){return _A||(_A=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var EA=new WeakMap,Cv=new WeakMap,IA=new WeakMap,bv=new WeakMap,Av=new WeakMap;function WV(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t($n(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&EA.set(t,n)}).catch(()=>{}),Av.set(e,n),e}function KV(n){if(Cv.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});Cv.set(n,e)}var Sv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Cv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||IA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return $n(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function wA(n){Sv=n(Sv)}function QV(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Oh(this),e,...t);return IA.set(r,e.sort?e.sort():[e]),$n(r)}:GV().includes(n)?function(...e){return n.apply(Oh(this),e),$n(EA.get(this))}:function(...e){return $n(n.apply(Oh(this),e))}}function YV(n){return typeof n=="function"?QV(n):(n instanceof IDBTransaction&&KV(n),zV(n,qV())?new Proxy(n,Sv):n)}function $n(n){if(n instanceof IDBRequest)return WV(n);if(bv.has(n))return bv.get(n);let e=YV(n);return e!==n&&(bv.set(n,e),Av.set(e,n)),e}var Oh=n=>Av.get(n);function DA(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=$n(s);return r&&s.addEventListener("upgradeneeded",u=>{r($n(s.result),u.oldVersion,u.newVersion,$n(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var ZV=["get","getKey","getAll","getAllKeys","count"],JV=["put","add","delete","clear"],Rv=new Map;function TA(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Rv.get(e))return Rv.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=JV.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ZV.includes(t)))return;let o=function(s,...a){return _(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return Rv.set(e,o),o}wA(n=>me(F({},n),{get:(e,t,r)=>TA(e,t)||n.get(e,t,r),has:(e,t)=>!!TA(e,t)||n.has(e,t)}));var Mv=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(XV(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function XV(n){let e=n.getComponent();return e?.type==="VERSION"}var Pv="@firebase/app",bA="0.13.2";var mr=new Bn("@firebase/app"),e2="@firebase/app-compat",t2="@firebase/analytics-compat",n2="@firebase/analytics",r2="@firebase/app-check-compat",i2="@firebase/app-check",o2="@firebase/auth",s2="@firebase/auth-compat",a2="@firebase/database",c2="@firebase/data-connect",u2="@firebase/database-compat",l2="@firebase/functions",d2="@firebase/functions-compat",h2="@firebase/installations",f2="@firebase/installations-compat",p2="@firebase/messaging",g2="@firebase/messaging-compat",m2="@firebase/performance",y2="@firebase/performance-compat",v2="@firebase/remote-config",_2="@firebase/remote-config-compat",E2="@firebase/storage",I2="@firebase/storage-compat",w2="@firebase/firestore",T2="@firebase/ai",D2="@firebase/firestore-compat",b2="firebase",C2="11.10.0";var kv="[DEFAULT]",S2={[Pv]:"fire-core",[e2]:"fire-core-compat",[n2]:"fire-analytics",[t2]:"fire-analytics-compat",[i2]:"fire-app-check",[r2]:"fire-app-check-compat",[o2]:"fire-auth",[s2]:"fire-auth-compat",[a2]:"fire-rtdb",[c2]:"fire-data-connect",[u2]:"fire-rtdb-compat",[l2]:"fire-fn",[d2]:"fire-fn-compat",[h2]:"fire-iid",[f2]:"fire-iid-compat",[p2]:"fire-fcm",[g2]:"fire-fcm-compat",[m2]:"fire-perf",[y2]:"fire-perf-compat",[v2]:"fire-rc",[_2]:"fire-rc-compat",[E2]:"fire-gcs",[I2]:"fire-gcs-compat",[w2]:"fire-fst",[D2]:"fire-fst-compat",[T2]:"fire-vertex","fire-js":"fire-js",[b2]:"fire-js-all"};var tu=new Map,A2=new Map,xv=new Map;function CA(n,e){try{n.container.addComponent(e)}catch(t){mr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function vn(n){let e=n.name;if(xv.has(e))return mr.debug(`There were multiple attempts to register component ${e}.`),!1;xv.set(e,n);for(let t of tu.values())CA(t,n);for(let t of A2.values())CA(t,n);return!0}function Us(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Gt(n){return n==null?!1:n.settings!==void 0}var R2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oi=new yn("app","Firebase",R2);var Ov=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Mt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oi.create("app-deleted",{appName:this._name})}};var si=C2;function Vv(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:kv,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw oi.create("bad-app-name",{appName:String(i)});if(t||(t=wv()),!t)throw oi.create("no-options");let o=tu.get(i);if(o){if(Un(t,o.options)&&Un(r,o.config))return o;throw oi.create("duplicate-app",{appName:i})}let s=new xh(i);for(let u of xv.values())s.addComponent(u);let a=new Ov(t,r,s);return tu.set(i,a),a}function yo(n=kv){let e=tu.get(n);if(!e&&n===kv&&wv())return Vv();if(!e)throw oi.create("no-app",{appName:n});return e}function Lh(){return Array.from(tu.values())}function Oe(n,e,t){var r;let i=(r=S2[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mr.warn(a.join(" "));return}vn(new Mt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var N2="firebase-heartbeat-database",M2=1,nu="firebase-heartbeat-store",Nv=null;function NA(){return Nv||(Nv=DA(N2,M2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(nu)}catch(t){console.warn(t)}}}}).catch(n=>{throw oi.create("idb-open",{originalErrorMessage:n.message})})),Nv}function P2(n){return _(this,null,function*(){try{let t=(yield NA()).transaction(nu),r=yield t.objectStore(nu).get(MA(n));return yield t.done,r}catch(e){if(e instanceof qt)mr.warn(e.message);else{let t=oi.create("idb-get",{originalErrorMessage:e?.message});mr.warn(t.message)}}})}function SA(n,e){return _(this,null,function*(){try{let r=(yield NA()).transaction(nu,"readwrite");yield r.objectStore(nu).put(e,MA(n)),yield r.done}catch(t){if(t instanceof qt)mr.warn(t.message);else{let r=oi.create("idb-set",{originalErrorMessage:t?.message});mr.warn(r.message)}}})}function MA(n){return`${n.name}!${n.options.appId}`}var k2=1024,x2=30,Lv=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Fv(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=AA();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>x2){let s=L2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){mr.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=AA(),{heartbeatsToSend:r,unsentEntries:i}=O2(this._heartbeatsCache.heartbeats),o=Xc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return mr.warn(t),""}})}};function AA(){return new Date().toISOString().substring(0,10)}function O2(n,e=k2){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),RA(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),RA(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Fv=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return eu()?gA().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield P2(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return SA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return SA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function RA(n){return Xc(JSON.stringify({version:2,heartbeats:n})).length}function L2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function F2(n){vn(new Mt("platform-logger",e=>new Mv(e),"PRIVATE")),vn(new Mt("heartbeat",e=>new Lv(e),"PRIVATE")),Oe(Pv,bA,n),Oe(Pv,bA,"esm2017"),Oe("fire-js","")}F2("");var V2="firebase",j2="11.10.0";Oe(V2,j2,"app");function PA(n){n===void 0&&(n=R(Ne));let e=n.get(hs);return t=>new q(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var ai=new xi("ANGULARFIRE2_VERSION");function ru(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var $s=(n,e)=>{let t=e?[e]:Lh(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Bs=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(Bs||{}),kA=Dc()&&typeof Zone<"u"?Bs.WARN:Bs.SILENT;var Fh=class{zone;delegate;constructor(e,t=cg){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},ci=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=R(de);this.outsideAngular=t.runOutsideAngular(()=>new Fh(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Fh(typeof Zone>"u"?void 0:Zone.current,ag))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xA=!1;function U2(n,e){!xA&&(kA>Bs.SILENT||Dc())&&(xA=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),kA>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function B2(n){let e=R(de,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function vo(n){let e=R(de,{optional:!0});return e?e.run(()=>n()):n()}var $2=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),$e(t,()=>vo(()=>n.apply(void 0,r)))),He=(n,e,t)=>(t||=e?Bs.WARN:Bs.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=R(ci),s=R(hs),a=R(Ve)}catch{return U2(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=vo(()=>s.add())),i[l]=$2(i[l],r,a));let u=B2(()=>n.apply(this,i));return e?u instanceof q?u.pipe(Lr(o.outsideAngular),Or(o.insideAngular),PA(a)):u instanceof Promise?vo(()=>{let l=s.add();return new Promise((h,p)=>{u.then(m=>$e(a,()=>vo(()=>h(m))),m=>$e(a,()=>vo(()=>p(m)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:vo(()=>u):u instanceof q?u.pipe(Lr(o.outsideAngular),Or(o.insideAngular)):vo(()=>u)});var yr=class{constructor(e){return e}},_o=class{constructor(){return Lh()}};function H2(n){return n&&n.length===1?n[0]:new yr(yo())}var jv=new B("angularfire2._apps"),z2={provide:yr,useFactory:H2,deps:[[new Bt,jv]]},q2={provide:_o,deps:[[new Bt,jv]]};function G2(n){return(e,t)=>{let r=t.get(Gr);Oe("angularfire",ai.full,"core"),Oe("angularfire",ai.full,"app"),Oe("angular",Tg.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new yr(i)}}function OA(n,...e){return yt([z2,q2,{provide:jv,useFactory:G2(n),multi:!0,deps:[de,Ne,ci,...e]}])}var LA=He(Vv,!0);var W2=new Map,K2={activated:!1,tokenObservers:[]},Q2={initialized:!1,enabled:!1};function _n(n){return W2.get(n)||Object.assign({},K2)}function UA(){return Q2}var Y2="https://content-firebaseappcheck.googleapis.com/v1";var Z2="exchangeDebugToken",FA={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},hne=1440*60*1e3;var $v=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return _(this,null,function*(){this.stop();try{this.pending=new go,this.pending.promise.catch(t=>{}),yield J2(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new go,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function J2(n){return new Promise(e=>{setTimeout(e,n)})}var X2={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},ui=new yn("appCheck","AppCheck",X2);function BA(n){if(!_n(n).activated)throw ui.create("use-before-activation",{appName:n.name})}function $A(r,i){return _(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw ui.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw ui.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw ui.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw ui.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function HA(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Y2}/projects/${t}/apps/${r}:${Z2}?key=${i}`,body:{debug_token:e}}}var ej="firebase-app-check-database",tj=1,Hv="firebase-app-check-store";var Vh=null;function nj(){return Vh||(Vh=new Promise((n,e)=>{try{let t=indexedDB.open(ej,tj);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ui.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Hv,{keyPath:"compositeKey"})}}}catch(t){e(ui.create("storage-open",{originalErrorMessage:t?.message}))}}),Vh)}function rj(n,e){return ij(oj(n),e)}function ij(n,e){return _(this,null,function*(){let r=(yield nj()).transaction(Hv,"readwrite"),o=r.objectStore(Hv).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(ui.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function oj(n){return`${n.options.appId}-${n.name}`}var iu=new Bn("@firebase/app-check");function Uv(n,e){return eu()?rj(n,e).catch(t=>{iu.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function zA(){return UA().enabled}function qA(){return _(this,null,function*(){let n=UA();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var sj={error:"UNKNOWN_ERROR"};function aj(n){return Rh.encodeString(JSON.stringify(n),!1)}function zv(n,e=!1,t=!1){return _(this,null,function*(){let r=n.app;BA(r);let i=_n(r),o=i.token,s;if(o&&!ou(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(ou(l)?o=l:yield Uv(r,void 0))}if(!e&&o&&ou(o))return{token:o.token};let a=!1;if(zA())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=$A(HA(r,yield qA()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield Uv(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?iu.warn(l.message):t&&iu.error(l),Bv(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield _n(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?iu.warn(l.message):t&&iu.error(l),s=l}let u;return o?s?ou(o)?u={token:o.token,internalError:s}:u=Bv(s):(u={token:o.token},i.token=o,yield Uv(r,o)):u=Bv(s),a&&dj(r,u),u})}function cj(n){return _(this,null,function*(){let e=n.app;BA(e);let{provider:t}=_n(e);if(zA()){let r=yield qA(),{token:i}=yield $A(HA(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function uj(n,e,t,r){let{app:i}=n,o=_n(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&ou(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),VA(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>VA(n))}function GA(n,e){let t=_n(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function VA(n){let{app:e}=n,t=_n(e),r=t.tokenRefresher;r||(r=lj(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function lj(n){let{app:e}=n;return new $v(()=>_(null,null,function*(){let t=_n(e),r;if(t.token?r=yield zv(n,!0):r=yield zv(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=_n(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},FA.RETRIAL_MIN_WAIT,FA.RETRIAL_MAX_WAIT)}function dj(n,e){let t=_n(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function ou(n){return n.expireTimeMillis-Date.now()>0}function Bv(n){return{token:aj(sj),error:n}}var qv=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=_n(this.app);for(let t of e)GA(this.app,t.next);return Promise.resolve()}};function hj(n,e){return new qv(n,e)}function fj(n){return{getToken:e=>zv(n,e),getLimitedUseToken:()=>cj(n),addTokenListener:e=>uj(n,"INTERNAL",e),removeTokenListener:e=>GA(n.app,e)}}var pj="@firebase/app-check",gj="0.10.1";var mj="app-check",jA="app-check-internal";function yj(){vn(new Mt(mj,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return hj(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(jA).initialize()})),vn(new Mt(jA,n=>{let e=n.getProvider("app-check").getImmediate();return fj(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Oe(pj,gj)}yj();var vj="app-check";var Hs=class{constructor(){return $s(vj)}};var _j=["localhost","0.0.0.0","127.0.0.1"],bne=typeof window<"u"&&_j.includes(window.location.hostname);function a0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var c0=a0,u0=new yn("auth","Firebase",a0());var zh=new Bn("@firebase/auth");function Ej(n,...e){zh.logLevel<=oe.WARN&&zh.warn(`Auth (${si}): ${n}`,...e)}function Uh(n,...e){zh.logLevel<=oe.ERROR&&zh.error(`Auth (${si}): ${n}`,...e)}function zn(n,...e){throw u_(n,...e)}function En(n,...e){return u_(n,...e)}function c_(n,e,t){let r=Object.assign(Object.assign({},c0()),{[e]:t});return new yn("auth","Firebase",r).create(e,{appName:n.name})}function Eo(n){return c_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ij(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&zn(n,"argument-error"),c_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function u_(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return u0.create(n,...e)}function Q(n,e,...t){if(!n)throw u_(e,...t)}function vr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Uh(e),new Error(e)}function Er(n,e){n||vr(e)}function Kv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function wj(){return WA()==="http:"||WA()==="https:"}function WA(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function Tj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wj()||dA()||"connection"in navigator)?navigator.onLine:!0}function Dj(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Io=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Er(t>e,"Short delay should be less than long delay!"),this.isMobile=uA()||hA()}get(){return Tj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function l_(n,e){Er(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var qh=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var bj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Cj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Sj=new Io(3e4,6e4);function d_(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function qs(o,s,a,u){return _(this,arguments,function*(n,e,t,r,i={}){return l0(n,i,()=>_(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=js(Object.assign({key:n.config.apiKey},h)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let y=Object.assign({method:e,headers:m},l);return lA()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&ii(n.emulatorConfig.host)&&(y.credentials="include"),qh.fetch()(yield d0(n,n.config.apiHost,t,p),y)}))})}function l0(n,e,t){return _(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},bj),e);try{let i=new Qv(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw jh(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw jh(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw jh(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw jh(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw c_(n,h,l);zn(n,h)}}catch(i){if(i instanceof qt)throw i;zn(n,"network-request-failed",{message:String(i)})}})}function Aj(o,s,a,u){return _(this,arguments,function*(n,e,t,r,i={}){let l=yield qs(n,e,t,r,i);return"mfaPendingCredential"in l&&zn(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function d0(n,e,t,r){return _(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?l_(n.config,i):`${n.config.apiScheme}://${i}`;return Cj.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var Qv=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(En(this.auth,"network-request-failed")),Sj.get())})}};function jh(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=En(n,e,r);return i.customData._tokenResponse=t,i}function Rj(n,e){return _(this,null,function*(){return qs(n,"POST","/v1/accounts:delete",e)})}function Gh(n,e){return _(this,null,function*(){return qs(n,"POST","/v1/accounts:lookup",e)})}function su(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function h_(n,e=!1){return _(this,null,function*(){let t=xe(n),r=yield t.getIdToken(e),i=f_(r);Q(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:su(Gv(i.auth_time)),issuedAtTime:su(Gv(i.iat)),expirationTime:su(Gv(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Gv(n){return Number(n)*1e3}function f_(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Uh("JWT malformed, contained fewer than 3 sections"),null;try{let i=Nh(t);return i?JSON.parse(i):(Uh("Failed to decode base64 JWT payload"),null)}catch(i){return Uh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function KA(n){let e=f_(n);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function cu(n,e,t=!1){return _(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof qt&&Nj(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function Nj({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Yv=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),t)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var uu=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=su(this.lastLoginAt),this.creationTime=su(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Wh(n){return _(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield cu(n,Gh(t,{idToken:r}));Q(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?h0(o.providerUserInfo):[],a=Mj(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new uu(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function p_(n){return _(this,null,function*(){let e=xe(n);yield Wh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Mj(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function h0(n){return n.map(e=>{var{providerId:t}=e,r=Il(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Pj(n,e){return _(this,null,function*(){let t=yield l0(n,{},()=>_(null,null,function*(){let r=js({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield d0(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return n.emulatorConfig&&ii(n.emulatorConfig.host)&&(u.credentials="include"),qh.fetch()(s,u)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function kj(n,e){return _(this,null,function*(){return qs(n,"POST","/v2/accounts:revokeToken",d_(n,e))})}var au=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):KA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Q(e.length!==0,"internal-error");let t=KA(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return _(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield Pj(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(Q(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Q(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Q(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return vr("not implemented")}};function li(n,e){Q(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var di=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Il(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Yv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new uu(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let t=yield cu(this,this.stsTokenManager.getToken(this.auth,e));return Q(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return h_(this,e)}reload(){return p_(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Wh(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(Gt(this.auth.app))return Promise.reject(Eo(this.auth));let e=yield this.getIdToken();return yield cu(this,Rj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,y=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,S=(s=t.photoURL)!==null&&s!==void 0?s:void 0,P=(a=t.tenantId)!==null&&a!==void 0?a:void 0,M=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,L=(l=t.createdAt)!==null&&l!==void 0?l:void 0,z=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Z,emailVerified:De,isAnonymous:Dt,providerData:_e,stsTokenManager:T}=t;Q(Z&&T,e,"internal-error");let v=au.fromJSON(this.name,T);Q(typeof Z=="string",e,"internal-error"),li(p,e.name),li(m,e.name),Q(typeof De=="boolean",e,"internal-error"),Q(typeof Dt=="boolean",e,"internal-error"),li(y,e.name),li(S,e.name),li(P,e.name),li(M,e.name),li(L,e.name),li(z,e.name);let I=new n({uid:Z,auth:e,email:m,emailVerified:De,displayName:p,isAnonymous:Dt,photoURL:S,phoneNumber:y,tenantId:P,stsTokenManager:v,createdAt:L,lastLoginAt:z});return _e&&Array.isArray(_e)&&(I.providerData=_e.map(w=>Object.assign({},w))),M&&(I._redirectEventId=M),I}static _fromIdTokenResponse(e,t,r=!1){return _(this,null,function*(){let i=new au;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Wh(o),o})}static _fromGetAccountInfoResponse(e,t,r){return _(this,null,function*(){let i=t.users[0];Q(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?h0(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new au;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new uu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var QA=new Map;function _r(n){Er(n instanceof Function,"Expected a class definition");let e=QA.get(n);return e?(Er(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,QA.set(n,e),e)}var xj=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(t,r){return _(this,null,function*(){this.storage[t]=r})}_get(t){return _(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return _(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Zv=xj;function Bh(n,e,t){return`firebase:${n}:${e}:${t}`}var Kh=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Bh(this.userKey,i.apiKey,o),this.fullPersistenceKey=Bh("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Gh(this.auth,{idToken:e}).catch(()=>{});return t?di._fromGetAccountInfoResponse(this.auth,t,e):null}return di._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return _(this,null,function*(){if(!t.length)return new n(_r(Zv),e,r);let i=(yield Promise.all(t.map(l=>_(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||_r(Zv),s=Bh(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let m=yield Gh(e,{idToken:h}).catch(()=>{});if(!m)break;p=yield di._fromGetAccountInfoResponse(e,m,h)}else p=di._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>_(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function YA(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(m0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(f0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(v0(e))return"Blackberry";if(_0(e))return"Webos";if(p0(e))return"Safari";if((e.includes("chrome/")||g0(e))&&!e.includes("edge/"))return"Chrome";if(y0(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function f0(n=it()){return/firefox\//i.test(n)}function p0(n=it()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function g0(n=it()){return/crios\//i.test(n)}function m0(n=it()){return/iemobile/i.test(n)}function y0(n=it()){return/android/i.test(n)}function v0(n=it()){return/blackberry/i.test(n)}function _0(n=it()){return/webos/i.test(n)}function g_(n=it()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Oj(n=it()){var e;return g_(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Lj(){return fA()&&document.documentMode===10}function E0(n=it()){return g_(n)||y0(n)||_0(n)||v0(n)||/windows phone/i.test(n)||m0(n)}function I0(n,e=[]){let t;switch(n){case"Browser":t=YA(it());break;case"Worker":t=`${YA(it())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${si}/${r}`}var Jv=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Fj(t){return _(this,arguments,function*(n,e={}){return qs(n,"GET","/v2/passwordPolicy",d_(n,e))})}var Vj=6,Xv=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:Vj,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var e_=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qh(this),this.idTokenSubscription=new Qh(this),this.beforeStateQueue=new Jv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=u0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_r(t)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Kh.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let t=yield Gh(this,{idToken:e}),r=yield di._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var t;if(Gt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield Wh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Dj()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(Gt(this.app))return Promise.reject(Eo(this));let t=e?xe(e):null;return t&&Q(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return _(this,null,function*(){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return Gt(this.app)?Promise.reject(Eo(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Gt(this.app)?Promise.reject(Eo(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(_r(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield Fj(this),t=new Xv(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield kj(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&_r(e)||this._popupRedirectResolver;Q(t,this,"argument-error"),this.redirectPersistenceManager=yield Kh.create(this,[_r(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=I0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return _(this,null,function*(){var e;if(Gt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&Ej(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function rf(n){return xe(n)}var Qh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=yA(t=>this.observer=t)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var m_={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jj(n){m_=n}function Uj(n){return m_.loadJS(n)}function Bj(){return m_.gapiScript}function w0(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function y_(n,e){let t=Us(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Un(o,e??{}))return i;zn(i,"already-initialized")}return t.initialize({options:e})}function $j(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(_r);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function v_(n,e,t){let r=rf(n);Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=T0(e),{host:s,port:a}=Hj(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Q(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Q(Un(l,r.config.emulator)&&Un(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,ii(s)?(Ph(`${o}//${s}${u}`),kh("Auth",!0)):i||zj()}function T0(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Hj(n){let e=T0(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:ZA(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:ZA(s)}}}function ZA(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function zj(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var lu=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return vr("not implemented")}_getIdTokenResponse(e){return vr("not implemented")}_linkToIdToken(e,t){return vr("not implemented")}_getReauthenticationResolver(e){return vr("not implemented")}};function zs(n,e){return _(this,null,function*(){return Aj(n,"POST","/v1/accounts:signInWithIdp",d_(n,e))})}var qj="http://localhost",Yh=class n extends lu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):zn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=Il(t,["providerId","signInMethod"]);if(!r||!i)return null;let s=new n(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return zs(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,zs(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,zs(e,t)}buildRequest(){let e={requestUri:qj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=js(t)}return e}};var du=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Zh=class extends du{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var __=(()=>{class n extends Zh{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Yh._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var hu=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return _(this,null,function*(){let o=yield di._fromIdTokenResponse(e,r,i),s=JA(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=JA(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function JA(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var t_=class n extends qt{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function D0(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?t_._fromErrorAndOperation(n,o,e,r):o})}function Gj(n,e,t=!1){return _(this,null,function*(){let r=yield cu(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return hu._forOperation(n,"link",r)})}function Wj(n,e,t=!1){return _(this,null,function*(){let{auth:r}=n;if(Gt(r.app))return Promise.reject(Eo(r));let i="reauthenticate";try{let o=yield cu(n,D0(r,i,e,n),t);Q(o.idToken,r,"internal-error");let s=f_(o.idToken);Q(s,r,"internal-error");let{sub:a}=s;return Q(n.uid===a,r,"user-mismatch"),hu._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&zn(r,"user-mismatch"),o}})}function Kj(n,e,t=!1){return _(this,null,function*(){if(Gt(n.app))return Promise.reject(Eo(n));let r="signIn",i=yield D0(n,r,e),o=yield hu._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function of(n,e,t,r){return xe(n).onIdTokenChanged(e,t,r)}function E_(n,e,t){return xe(n).beforeAuthStateChanged(e,t)}function sf(n,e,t,r){return xe(n).onAuthStateChanged(e,t,r)}function I_(n){return xe(n).signOut()}var Jh="__sak";var Xh=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Jh,"1"),this.storage.removeItem(Jh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Qj=1e3,Yj=10,Zj=(()=>{class n extends Xh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=E0(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);Lj()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,Yj):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},Qj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return _(this,null,function*(){yield kr(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return _(this,null,function*(){let r=yield kr(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return _(this,null,function*(){yield kr(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),b0=Zj;var Jj=(()=>{class n extends Xh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),w_=Jj;function Xj(n){return Promise.all(n.map(e=>_(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var eU=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return _(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>_(this,null,function*(){return h(r.origin,s)})),l=yield Xj(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function T_(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var n_=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=T_("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Hn(){return window}function tU(n){Hn().location.href=n}function C0(){return typeof Hn().WorkerGlobalScope<"u"&&typeof Hn().importScripts=="function"}function nU(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function rU(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function iU(){return C0()?self:null}var S0="firebaseLocalStorageDb",oU=1,ef="firebaseLocalStorage",A0="fbase_key",wo=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function af(n,e){return n.transaction([ef],e?"readwrite":"readonly").objectStore(ef)}function sU(){let n=indexedDB.deleteDatabase(S0);return new wo(n).toPromise()}function r_(){let n=indexedDB.open(S0,oU);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(ef,{keyPath:A0})}catch(i){t(i)}}),n.addEventListener("success",()=>_(null,null,function*(){let r=n.result;r.objectStoreNames.contains(ef)?e(r):(r.close(),yield sU(),e(yield r_()))}))})}function XA(n,e,t){return _(this,null,function*(){let r=af(n,!0).put({[A0]:e,value:t});return new wo(r).toPromise()})}function aU(n,e){return _(this,null,function*(){let t=af(n,!1).get(e),r=yield new wo(t).toPromise();return r===void 0?null:r.value})}function e0(n,e){let t=af(n,!0).delete(e);return new wo(t).toPromise()}var cU=800,uU=3,lU=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield r_(),this.db)})}_withRetries(t){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>uU)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return C0()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=eU._getInstance(iU()),this.receiver._subscribe("keyChanged",(t,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var t,r;if(this.activeServiceWorker=yield nU(),!this.activeServiceWorker)return;this.sender=new n_(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||rU()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let t=yield r_();return yield XA(t,Jh,"1"),yield e0(t,Jh),!0}catch{}return!1})}_withPendingWrite(t){return _(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>XA(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return _(this,null,function*(){let r=yield this._withRetries(i=>aU(i,t));return this.localCache[t]=r,r})}_remove(t){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>e0(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return _(this,null,function*(){let t=yield this._withRetries(o=>{let s=af(o,!1).getAll();return new wo(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),cU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),R0=lU;var One=w0("rcb"),Lne=new Io(3e4,6e4);function N0(n,e){return e?_r(e):(Q(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var fu=class extends lu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zs(e,this._buildIdpRequest())}_linkToIdToken(e,t){return zs(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return zs(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function dU(n){return Kj(n.auth,new fu(n),n.bypassAuthState)}function hU(n){let{auth:e,user:t}=n;return Q(t,e,"internal-error"),Wj(t,new fu(n),n.bypassAuthState)}function fU(n){return _(this,null,function*(){let{auth:e,user:t}=n;return Q(t,e,"internal-error"),Gj(t,new fu(n),n.bypassAuthState)})}var tf=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dU;case"linkViaPopup":case"linkViaRedirect":return fU;case"reauthViaPopup":case"reauthViaRedirect":return hU;default:zn(this.auth,"internal-error")}}resolve(e){Er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var pU=new Io(2e3,1e4);function D_(n,e,t){return _(this,null,function*(){if(Gt(n.app))return Promise.reject(En(n,"operation-not-supported-in-this-environment"));let r=rf(n);Ij(n,e,du);let i=N0(r,t);return new gU(r,"signInViaPopup",e,i).executeNotNull()})}var gU=(()=>{class n extends tf{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return _(this,null,function*(){let t=yield this.execute();return Q(t,this.auth,"internal-error"),t})}onExecution(){return _(this,null,function*(){Er(this.filter.length===1,"Popup operations only handle one event");let t=T_();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(En(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(En(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(En(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,pU.get())};t()}}n.currentPopupAction=null;return n})(),mU="pendingRedirect",$h=new Map,i_=class n extends tf{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=$h.get(this.auth._key());if(!e){try{let r=(yield yU(this.resolver,this.auth))?yield kr(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}$h.set(this.auth._key(),e)}return this.bypassAuthState||$h.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return kr(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,kr(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function yU(n,e){return _(this,null,function*(){let t=EU(e),r=_U(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function vU(n,e){$h.set(n._key(),e)}function _U(n){return _r(n._redirectPersistence)}function EU(n){return Bh(mU,n.config.apiKey,n.name)}function IU(n,e,t=!1){return _(this,null,function*(){if(Gt(n.app))return Promise.reject(Eo(n));let r=rf(n),i=N0(r,e),s=yield new i_(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var wU=600*1e3,o_=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!TU(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!M0(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(En(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wU&&this.cachedEventUids.clear(),this.cachedEventUids.has(t0(e))}saveEventToCache(e){this.cachedEventUids.add(t0(e)),this.lastProcessedEventTime=Date.now()}};function t0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function M0({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function TU(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return M0(n);default:return!1}}function DU(t){return _(this,arguments,function*(n,e={}){return qs(n,"GET","/v1/projects",e)})}var bU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CU=/^https?/;function SU(n){return _(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield DU(n);for(let t of e)try{if(AU(t))return}catch{}zn(n,"unauthorized-domain")})}function AU(n){let e=Kv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!CU.test(t))return!1;if(bU.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var RU=new Io(3e4,6e4);function n0(){let n=Hn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function NU(n){return new Promise((e,t)=>{var r,i,o;function s(){n0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{n0(),t(En(n,"network-request-failed"))},timeout:RU.get()})}if(!((i=(r=Hn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Hn().gapi)===null||o===void 0)&&o.load)s();else{let a=w0("iframefcb");return Hn()[a]=()=>{gapi.load?s():t(En(n,"network-request-failed"))},Uj(`${Bj()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw Hh=null,e})}var Hh=null;function MU(n){return Hh=Hh||NU(n),Hh}var PU=new Io(5e3,15e3),kU="__/auth/iframe",xU="emulator/auth/iframe",OU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function FU(n){let e=n.config;Q(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?l_(e,xU):`https://${n.config.authDomain}/${kU}`,r={apiKey:e.apiKey,appName:n.name,v:si},i=LU.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${js(r).slice(1)}`}function VU(n){return _(this,null,function*(){let e=yield MU(n),t=Hn().gapi;return Q(t,n,"internal-error"),e.open({where:document.body,url:FU(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OU,dontclear:!0},r=>new Promise((i,o)=>_(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=En(n,"network-request-failed"),a=Hn().setTimeout(()=>{o(s)},PU.get());function u(){Hn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var jU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},UU=500,BU=600,$U="_blank",HU="http://localhost",nf=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function zU(n,e,t,r=UU,i=BU){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},jU),{width:r.toString(),height:i.toString(),top:o,left:s}),l=it().toLowerCase();t&&(a=g0(l)?$U:t),f0(l)&&(e=e||HU,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,S])=>`${m}${y}=${S},`,"");if(Oj(l)&&a!=="_self")return qU(e||"",a),new nf(null);let p=window.open(e||"",a,h);Q(p,n,"popup-blocked");try{p.focus()}catch{}return new nf(p)}function qU(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var GU="__/auth/handler",WU="emulator/auth/handler",KU=encodeURIComponent("fac");function r0(n,e,t,r,i,o){return _(this,null,function*(){Q(n.config.authDomain,n,"auth-domain-config-required"),Q(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:si,eventId:i};if(e instanceof du){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",mA(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof Zh){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield n._getAppCheckToken(),l=u?`#${KU}=${encodeURIComponent(u)}`:"";return`${QU(n)}?${js(a).slice(1)}${l}`})}function QU({config:n}){return n.emulator?l_(n,WU):`https://${n.authDomain}/${GU}`}var Wv="webStorageSupport",s_=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=w_,this._completeRedirectFn=IU,this._overrideRedirectResult=vU}_openPopup(e,t,r,i){return _(this,null,function*(){var o;Er((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield r0(e,t,r,Kv(),i);return zU(e,s,T_())})}_openRedirect(e,t,r,i){return _(this,null,function*(){yield this._originValidation(e);let o=yield r0(e,t,r,Kv(),i);return tU(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Er(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return _(this,null,function*(){let t=yield VU(e),r=new o_(e);return t.register("authEvent",i=>(Q(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Wv,{type:Wv},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[Wv];s!==void 0&&t(!!s),zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=SU(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return E0()||p0()||g_()}},P0=s_;var i0="@firebase/auth",o0="1.10.8";var a_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function YU(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZU(n){vn(new Mt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Q(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:I0(n)},l=new e_(r,i,o,u);return $j(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),vn(new Mt("auth-internal",e=>{let t=rf(e.getProvider("auth").getImmediate());return(r=>new a_(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Oe(i0,o0,YU(n)),Oe(i0,o0,"esm2017")}var JU=300,XU=Tv("authIdTokenMaxAge")||JU,s0=null,eB=n=>e=>_(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>XU)return;let i=t?.token;s0!==i&&(s0=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function b_(n=yo()){let e=Us(n,"auth");if(e.isInitialized())return e.getImmediate();let t=y_(n,{popupRedirectResolver:P0,persistence:[R0,b0,w_]}),r=Tv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=eB(o.toString());E_(t,s,()=>s(t.currentUser)),of(t,a=>s(a))}}let i=Iv("auth");return i&&v_(t,`http://${i}`),t}function tB(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}jj({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=En("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",tB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZU("Browser");function x0(n){return new q(function(e){var t=sf(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var O0="auth",To=class{constructor(e){return e}},pu=class{constructor(){return $s(O0)}};var C_=new B("angularfire2.auth-instances");function zB(n,e){let t=ru(O0,n,e);return t&&new To(t)}function qB(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new To(r)}}var GB={provide:pu,deps:[[new Bt,C_]]},WB={provide:To,useFactory:zB,deps:[[new Bt,C_],yr]};function L0(n,...e){return Oe("angularfire",ai.full,"auth"),yt([WB,GB,{provide:C_,useFactory:qB(n),multi:!0,deps:[de,Ne,ci,_o,[new Bt,Hs],...e]}])}var F0=He(x0,!0);var V0=He(b_,!0);var j0=He(D_,!0,2);var U0=He(I_,!0,2);var B0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$0={};var Ir,S_;(function(){var n;function e(T,v){function I(){}I.prototype=v.prototype,T.D=v.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(w,D,C){for(var E=Array(arguments.length-2),Zn=2;Zn<arguments.length;Zn++)E[Zn-2]=arguments[Zn];return v.prototype[D].apply(w,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,I){I||(I=0);var w=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)w[D]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(D=0;16>D;++D)w[D]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=T.g[0],I=T.g[1],D=T.g[2];var C=T.g[3],E=v+(C^I&(D^C))+w[0]+3614090360&4294967295;v=I+(E<<7&4294967295|E>>>25),E=C+(D^v&(I^D))+w[1]+3905402710&4294967295,C=v+(E<<12&4294967295|E>>>20),E=D+(I^C&(v^I))+w[2]+606105819&4294967295,D=C+(E<<17&4294967295|E>>>15),E=I+(v^D&(C^v))+w[3]+3250441966&4294967295,I=D+(E<<22&4294967295|E>>>10),E=v+(C^I&(D^C))+w[4]+4118548399&4294967295,v=I+(E<<7&4294967295|E>>>25),E=C+(D^v&(I^D))+w[5]+1200080426&4294967295,C=v+(E<<12&4294967295|E>>>20),E=D+(I^C&(v^I))+w[6]+2821735955&4294967295,D=C+(E<<17&4294967295|E>>>15),E=I+(v^D&(C^v))+w[7]+4249261313&4294967295,I=D+(E<<22&4294967295|E>>>10),E=v+(C^I&(D^C))+w[8]+1770035416&4294967295,v=I+(E<<7&4294967295|E>>>25),E=C+(D^v&(I^D))+w[9]+2336552879&4294967295,C=v+(E<<12&4294967295|E>>>20),E=D+(I^C&(v^I))+w[10]+4294925233&4294967295,D=C+(E<<17&4294967295|E>>>15),E=I+(v^D&(C^v))+w[11]+2304563134&4294967295,I=D+(E<<22&4294967295|E>>>10),E=v+(C^I&(D^C))+w[12]+1804603682&4294967295,v=I+(E<<7&4294967295|E>>>25),E=C+(D^v&(I^D))+w[13]+4254626195&4294967295,C=v+(E<<12&4294967295|E>>>20),E=D+(I^C&(v^I))+w[14]+2792965006&4294967295,D=C+(E<<17&4294967295|E>>>15),E=I+(v^D&(C^v))+w[15]+1236535329&4294967295,I=D+(E<<22&4294967295|E>>>10),E=v+(D^C&(I^D))+w[1]+4129170786&4294967295,v=I+(E<<5&4294967295|E>>>27),E=C+(I^D&(v^I))+w[6]+3225465664&4294967295,C=v+(E<<9&4294967295|E>>>23),E=D+(v^I&(C^v))+w[11]+643717713&4294967295,D=C+(E<<14&4294967295|E>>>18),E=I+(C^v&(D^C))+w[0]+3921069994&4294967295,I=D+(E<<20&4294967295|E>>>12),E=v+(D^C&(I^D))+w[5]+3593408605&4294967295,v=I+(E<<5&4294967295|E>>>27),E=C+(I^D&(v^I))+w[10]+38016083&4294967295,C=v+(E<<9&4294967295|E>>>23),E=D+(v^I&(C^v))+w[15]+3634488961&4294967295,D=C+(E<<14&4294967295|E>>>18),E=I+(C^v&(D^C))+w[4]+3889429448&4294967295,I=D+(E<<20&4294967295|E>>>12),E=v+(D^C&(I^D))+w[9]+568446438&4294967295,v=I+(E<<5&4294967295|E>>>27),E=C+(I^D&(v^I))+w[14]+3275163606&4294967295,C=v+(E<<9&4294967295|E>>>23),E=D+(v^I&(C^v))+w[3]+4107603335&4294967295,D=C+(E<<14&4294967295|E>>>18),E=I+(C^v&(D^C))+w[8]+1163531501&4294967295,I=D+(E<<20&4294967295|E>>>12),E=v+(D^C&(I^D))+w[13]+2850285829&4294967295,v=I+(E<<5&4294967295|E>>>27),E=C+(I^D&(v^I))+w[2]+4243563512&4294967295,C=v+(E<<9&4294967295|E>>>23),E=D+(v^I&(C^v))+w[7]+1735328473&4294967295,D=C+(E<<14&4294967295|E>>>18),E=I+(C^v&(D^C))+w[12]+2368359562&4294967295,I=D+(E<<20&4294967295|E>>>12),E=v+(I^D^C)+w[5]+4294588738&4294967295,v=I+(E<<4&4294967295|E>>>28),E=C+(v^I^D)+w[8]+2272392833&4294967295,C=v+(E<<11&4294967295|E>>>21),E=D+(C^v^I)+w[11]+1839030562&4294967295,D=C+(E<<16&4294967295|E>>>16),E=I+(D^C^v)+w[14]+4259657740&4294967295,I=D+(E<<23&4294967295|E>>>9),E=v+(I^D^C)+w[1]+2763975236&4294967295,v=I+(E<<4&4294967295|E>>>28),E=C+(v^I^D)+w[4]+1272893353&4294967295,C=v+(E<<11&4294967295|E>>>21),E=D+(C^v^I)+w[7]+4139469664&4294967295,D=C+(E<<16&4294967295|E>>>16),E=I+(D^C^v)+w[10]+3200236656&4294967295,I=D+(E<<23&4294967295|E>>>9),E=v+(I^D^C)+w[13]+681279174&4294967295,v=I+(E<<4&4294967295|E>>>28),E=C+(v^I^D)+w[0]+3936430074&4294967295,C=v+(E<<11&4294967295|E>>>21),E=D+(C^v^I)+w[3]+3572445317&4294967295,D=C+(E<<16&4294967295|E>>>16),E=I+(D^C^v)+w[6]+76029189&4294967295,I=D+(E<<23&4294967295|E>>>9),E=v+(I^D^C)+w[9]+3654602809&4294967295,v=I+(E<<4&4294967295|E>>>28),E=C+(v^I^D)+w[12]+3873151461&4294967295,C=v+(E<<11&4294967295|E>>>21),E=D+(C^v^I)+w[15]+530742520&4294967295,D=C+(E<<16&4294967295|E>>>16),E=I+(D^C^v)+w[2]+3299628645&4294967295,I=D+(E<<23&4294967295|E>>>9),E=v+(D^(I|~C))+w[0]+4096336452&4294967295,v=I+(E<<6&4294967295|E>>>26),E=C+(I^(v|~D))+w[7]+1126891415&4294967295,C=v+(E<<10&4294967295|E>>>22),E=D+(v^(C|~I))+w[14]+2878612391&4294967295,D=C+(E<<15&4294967295|E>>>17),E=I+(C^(D|~v))+w[5]+4237533241&4294967295,I=D+(E<<21&4294967295|E>>>11),E=v+(D^(I|~C))+w[12]+1700485571&4294967295,v=I+(E<<6&4294967295|E>>>26),E=C+(I^(v|~D))+w[3]+2399980690&4294967295,C=v+(E<<10&4294967295|E>>>22),E=D+(v^(C|~I))+w[10]+4293915773&4294967295,D=C+(E<<15&4294967295|E>>>17),E=I+(C^(D|~v))+w[1]+2240044497&4294967295,I=D+(E<<21&4294967295|E>>>11),E=v+(D^(I|~C))+w[8]+1873313359&4294967295,v=I+(E<<6&4294967295|E>>>26),E=C+(I^(v|~D))+w[15]+4264355552&4294967295,C=v+(E<<10&4294967295|E>>>22),E=D+(v^(C|~I))+w[6]+2734768916&4294967295,D=C+(E<<15&4294967295|E>>>17),E=I+(C^(D|~v))+w[13]+1309151649&4294967295,I=D+(E<<21&4294967295|E>>>11),E=v+(D^(I|~C))+w[4]+4149444226&4294967295,v=I+(E<<6&4294967295|E>>>26),E=C+(I^(v|~D))+w[11]+3174756917&4294967295,C=v+(E<<10&4294967295|E>>>22),E=D+(v^(C|~I))+w[2]+718787259&4294967295,D=C+(E<<15&4294967295|E>>>17),E=I+(C^(D|~v))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(D+(E<<21&4294967295|E>>>11))&4294967295,T.g[2]=T.g[2]+D&4294967295,T.g[3]=T.g[3]+C&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var I=v-this.blockSize,w=this.B,D=this.h,C=0;C<v;){if(D==0)for(;C<=I;)i(this,T,C),C+=this.blockSize;if(typeof T=="string"){for(;C<v;)if(w[D++]=T.charCodeAt(C++),D==this.blockSize){i(this,w),D=0;break}}else for(;C<v;)if(w[D++]=T[C++],D==this.blockSize){i(this,w),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var I=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=I&255,I/=256;for(this.u(T),T=Array(16),v=I=0;4>v;++v)for(var w=0;32>w;w+=8)T[I++]=this.g[v]>>>w&255;return T};function o(T,v){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=v(T)}function s(T,v){this.h=v;for(var I=[],w=!0,D=T.length-1;0<=D;D--){var C=T[D]|0;w&&C==v||(I[D]=C,w=!1)}this.g=I}var a={};function u(T){return-128<=T&&128>T?o(T,function(v){return new s([v|0],0>v?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return M(l(-T));for(var v=[],I=1,w=0;T>=I;w++)v[w]=T/I|0,I*=4294967296;return new s(v,0)}function h(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return M(h(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),w=p,D=0;D<T.length;D+=8){var C=Math.min(8,T.length-D),E=parseInt(T.substring(D,D+C),v);8>C?(C=l(Math.pow(v,C)),w=w.j(C).add(l(E))):(w=w.j(I),w=w.add(l(E)))}return w}var p=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(P(this))return-M(this).m();for(var T=0,v=1,I=0;I<this.g.length;I++){var w=this.i(I);T+=(0<=w?w:4294967296+w)*v,v*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(S(this))return"0";if(P(this))return"-"+M(this).toString(T);for(var v=l(Math.pow(T,6)),I=this,w="";;){var D=De(I,v).g;I=L(I,D.j(v));var C=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=D,S(I))return C+w;for(;6>C.length;)C="0"+C;w=C+w}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function S(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function P(T){return T.h==-1}n.l=function(T){return T=L(this,T),P(T)?-1:S(T)?0:1};function M(T){for(var v=T.g.length,I=[],w=0;w<v;w++)I[w]=~T.g[w];return new s(I,~T.h).add(m)}n.abs=function(){return P(this)?M(this):this},n.add=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0,D=0;D<=v;D++){var C=w+(this.i(D)&65535)+(T.i(D)&65535),E=(C>>>16)+(this.i(D)>>>16)+(T.i(D)>>>16);w=E>>>16,C&=65535,E&=65535,I[D]=E<<16|C}return new s(I,I[I.length-1]&-2147483648?-1:0)};function L(T,v){return T.add(M(v))}n.j=function(T){if(S(this)||S(T))return p;if(P(this))return P(T)?M(this).j(M(T)):M(M(this).j(T));if(P(T))return M(this.j(M(T)));if(0>this.l(y)&&0>T.l(y))return l(this.m()*T.m());for(var v=this.g.length+T.g.length,I=[],w=0;w<2*v;w++)I[w]=0;for(w=0;w<this.g.length;w++)for(var D=0;D<T.g.length;D++){var C=this.i(w)>>>16,E=this.i(w)&65535,Zn=T.i(D)>>>16,ya=T.i(D)&65535;I[2*w+2*D]+=E*ya,z(I,2*w+2*D),I[2*w+2*D+1]+=C*ya,z(I,2*w+2*D+1),I[2*w+2*D+1]+=E*Zn,z(I,2*w+2*D+1),I[2*w+2*D+2]+=C*Zn,z(I,2*w+2*D+2)}for(w=0;w<v;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=v;w<2*v;w++)I[w]=0;return new s(I,0)};function z(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function Z(T,v){this.g=T,this.h=v}function De(T,v){if(S(v))throw Error("division by zero");if(S(T))return new Z(p,p);if(P(T))return v=De(M(T),v),new Z(M(v.g),M(v.h));if(P(v))return v=De(T,M(v)),new Z(M(v.g),v.h);if(30<T.g.length){if(P(T)||P(v))throw Error("slowDivide_ only works with positive integers.");for(var I=m,w=v;0>=w.l(T);)I=Dt(I),w=Dt(w);var D=_e(I,1),C=_e(w,1);for(w=_e(w,2),I=_e(I,2);!S(w);){var E=C.add(w);0>=E.l(T)&&(D=D.add(I),C=E),w=_e(w,1),I=_e(I,1)}return v=L(T,D.j(v)),new Z(D,v)}for(D=p;0<=T.l(v);){for(I=Math.max(1,Math.floor(T.m()/v.m())),w=Math.ceil(Math.log(I)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),C=l(I),E=C.j(v);P(E)||0<E.l(T);)I-=w,C=l(I),E=C.j(v);S(C)&&(C=m),D=D.add(C),T=L(T,E)}return new Z(D,T)}n.A=function(T){return De(this,T).h},n.and=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)&T.i(w);return new s(I,this.h&T.h)},n.or=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)|T.i(w);return new s(I,this.h|T.h)},n.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)^T.i(w);return new s(I,this.h^T.h)};function Dt(T){for(var v=T.g.length+1,I=[],w=0;w<v;w++)I[w]=T.i(w)<<1|T.i(w-1)>>>31;return new s(I,T.h)}function _e(T,v){var I=v>>5;v%=32;for(var w=T.g.length-I,D=[],C=0;C<w;C++)D[C]=0<v?T.i(C+I)>>>v|T.i(C+I+1)<<32-v:T.i(C+I);return new s(D,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,S_=$0.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Ir=$0.Integer=s}).apply(typeof B0<"u"?B0:typeof self<"u"?self:typeof window<"u"?window:{});var cf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},wr={};var A_,QB,Gs,R_,gu,uf,N_,M_,P_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof cf=="object"&&cf];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var b=c[g];if(!(b in f))break e;f=f[b]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,b={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function S(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,b,A){for(var x=Array(arguments.length-2),be=2;be<arguments.length;be++)x[be-2]=arguments[be];return d.prototype[b].apply(g,x)}}function P(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function M(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let b=c.length||0,A=g.length||0;c.length=b+A;for(let x=0;x<A;x++)c[b+x]=g[x]}else c.push(g)}}class L{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function z(c){return/^[\s\xa0]*$/.test(c)}function Z(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function De(c){return De[" "](c),c}De[" "]=function(){};var Dt=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function _e(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function T(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(c,d){let f,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(f in g)c[f]=g[f];for(let A=0;A<I.length;A++)f=I[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function C(c){a.setTimeout(()=>{throw c},0)}function E(){var c=mp;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Zn{constructor(){this.h=this.g=null}add(d,f){let g=ya.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var ya=new L(()=>new UM,c=>c.reset());class UM{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let va,_a=!1,mp=new Zn,XI=()=>{let c=a.Promise.resolve(void 0);va=()=>{c.then(BM)}};var BM=()=>{for(var c;c=E();){try{c.h.call(c.g)}catch(f){C(f)}var d=ya;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}_a=!1};function Rr(){this.s=this.s,this.C=this.C}Rr.prototype.s=!1,Rr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Rr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ht(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}ht.prototype.h=function(){this.defaultPrevented=!0};var $M=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c})();function Ea(c,d){if(ht.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Dt){e:{try{De(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:HM[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ea.aa.h.call(this)}}S(Ea,ht);var HM={2:"touch",3:"pen",4:"mouse"};Ea.prototype.h=function(){Ea.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ia="closure_listenable_"+(1e6*Math.random()|0),zM=0;function qM(c,d,f,g,b){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=b,this.key=++zM,this.da=this.fa=!1}function Hu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function zu(c){this.src=c,this.g={},this.h=0}zu.prototype.add=function(c,d,f,g,b){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var x=vp(c,d,g,b);return-1<x?(d=c[x],f||(d.fa=!1)):(d=new qM(d,this.src,A,!!g,b),d.fa=f,c.push(d)),d};function yp(c,d){var f=d.type;if(f in c.g){var g=c.g[f],b=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=b)&&Array.prototype.splice.call(g,b,1),A&&(Hu(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function vp(c,d,f,g){for(var b=0;b<c.length;++b){var A=c[b];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return b}return-1}var _p="closure_lm_"+(1e6*Math.random()|0),Ep={};function ew(c,d,f,g,b){if(g&&g.once)return nw(c,d,f,g,b);if(Array.isArray(d)){for(var A=0;A<d.length;A++)ew(c,d[A],f,g,b);return null}return f=Dp(f),c&&c[Ia]?c.K(d,f,l(g)?!!g.capture:!!g,b):tw(c,d,f,!1,g,b)}function tw(c,d,f,g,b,A){if(!d)throw Error("Invalid event type");var x=l(b)?!!b.capture:!!b,be=wp(c);if(be||(c[_p]=be=new zu(c)),f=be.add(d,f,g,x,A),f.proxy)return f;if(g=GM(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)$M||(b=x),b===void 0&&(b=!1),c.addEventListener(d.toString(),g,b);else if(c.attachEvent)c.attachEvent(iw(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function GM(){function c(f){return d.call(c.src,c.listener,f)}let d=WM;return c}function nw(c,d,f,g,b){if(Array.isArray(d)){for(var A=0;A<d.length;A++)nw(c,d[A],f,g,b);return null}return f=Dp(f),c&&c[Ia]?c.L(d,f,l(g)?!!g.capture:!!g,b):tw(c,d,f,!0,g,b)}function rw(c,d,f,g,b){if(Array.isArray(d))for(var A=0;A<d.length;A++)rw(c,d[A],f,g,b);else g=l(g)?!!g.capture:!!g,f=Dp(f),c&&c[Ia]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=vp(A,f,g,b),-1<f&&(Hu(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=wp(c))&&(d=c.g[d.toString()],c=-1,d&&(c=vp(d,f,g,b)),(f=-1<c?d[c]:null)&&Ip(f))}function Ip(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Ia])yp(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(iw(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=wp(d))?(yp(f,c),f.h==0&&(f.src=null,d[_p]=null)):Hu(c)}}}function iw(c){return c in Ep?Ep[c]:Ep[c]="on"+c}function WM(c,d){if(c.da)c=!0;else{d=new Ea(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Ip(c),c=f.call(g,d)}return c}function wp(c){return c=c[_p],c instanceof zu?c:null}var Tp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dp(c){return typeof c=="function"?c:(c[Tp]||(c[Tp]=function(d){return c.handleEvent(d)}),c[Tp])}function ft(){Rr.call(this),this.i=new zu(this),this.M=this,this.F=null}S(ft,Rr),ft.prototype[Ia]=!0,ft.prototype.removeEventListener=function(c,d,f,g){rw(this,c,d,f,g)};function bt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new ht(d,c);else if(d instanceof ht)d.target=d.target||c;else{var b=d;d=new ht(g,c),w(d,b)}if(b=!0,f)for(var A=f.length-1;0<=A;A--){var x=d.g=f[A];b=qu(x,g,!0,d)&&b}if(x=d.g=c,b=qu(x,g,!0,d)&&b,b=qu(x,g,!1,d)&&b,f)for(A=0;A<f.length;A++)x=d.g=f[A],b=qu(x,g,!1,d)&&b}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Hu(f[g]);delete c.g[d],c.h--}}this.F=null},ft.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},ft.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function qu(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,A=0;A<d.length;++A){var x=d[A];if(x&&!x.da&&x.capture==f){var be=x.listener,ct=x.ha||x.src;x.fa&&yp(c.i,x),b=be.call(ct,g)!==!1&&b}}return b&&!g.defaultPrevented}function ow(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function sw(c){c.g=ow(()=>{c.g=null,c.i&&(c.i=!1,sw(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class KM extends Rr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:sw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wa(c){Rr.call(this),this.h=c,this.g={}}S(wa,Rr);var aw=[];function cw(c){_e(c.g,function(d,f){this.g.hasOwnProperty(f)&&Ip(d)},c),c.g={}}wa.prototype.N=function(){wa.aa.N.call(this),cw(this)},wa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bp=a.JSON.stringify,QM=a.JSON.parse,YM=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Cp(){}Cp.prototype.h=null;function uw(c){return c.h||(c.h=c.i())}function lw(){}var Ta={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Sp(){ht.call(this,"d")}S(Sp,ht);function Ap(){ht.call(this,"c")}S(Ap,ht);var Ti={},dw=null;function Gu(){return dw=dw||new ft}Ti.La="serverreachability";function hw(c){ht.call(this,Ti.La,c)}S(hw,ht);function Da(c){let d=Gu();bt(d,new hw(d))}Ti.STAT_EVENT="statevent";function fw(c,d){ht.call(this,Ti.STAT_EVENT,c),this.stat=d}S(fw,ht);function Ct(c){let d=Gu();bt(d,new fw(d,c))}Ti.Ma="timingevent";function pw(c,d){ht.call(this,Ti.Ma,c),this.size=d}S(pw,ht);function ba(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Ca(){this.g=!0}Ca.prototype.xa=function(){this.g=!1};function ZM(c,d,f,g,b,A){c.info(function(){if(c.g)if(A)for(var x="",be=A.split("&"),ct=0;ct<be.length;ct++){var he=be[ct].split("=");if(1<he.length){var pt=he[0];he=he[1];var gt=pt.split("_");x=2<=gt.length&&gt[1]=="type"?x+(pt+"="+he+"&"):x+(pt+"=redacted&")}}else x=null;else x=A;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+f+`
`+x})}function JM(c,d,f,g,b,A,x){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+f+`
`+A+" "+x})}function Fo(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+eP(c,f)+(g?" "+g:"")})}function XM(c,d){c.info(function(){return"TIMEOUT: "+d})}Ca.prototype.info=function(){};function eP(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var A=b[0];if(A!="noop"&&A!="stop"&&A!="close")for(var x=1;x<b.length;x++)b[x]=""}}}}return bp(f)}catch{return d}}var Wu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},gw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Rp;function Ku(){}S(Ku,Cp),Ku.prototype.g=function(){return new XMLHttpRequest},Ku.prototype.i=function(){return{}},Rp=new Ku;function Nr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new wa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mw}function mw(){this.i=null,this.g="",this.h=!1}var yw={},Np={};function Mp(c,d,f){c.L=1,c.v=Ju(Jn(d)),c.m=f,c.P=!0,vw(c,null)}function vw(c,d){c.F=Date.now(),Qu(c),c.A=Jn(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),Pw(f.i,"t",g),c.C=0,f=c.j.J,c.h=new mw,c.g=Yw(c.j,f?d:null,!c.m),0<c.O&&(c.M=new KM(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(aw[0]=b.toString()),b=aw);for(var A=0;A<b.length;A++){var x=ew(f,b[A],g||d.handleEvent,!1,d.h||d);if(!x)break;d.g[x.key]=x}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Da(),ZM(c.i,c.u,c.A,c.l,c.R,c.m)}Nr.prototype.ca=function(c){c=c.target;let d=this.M;d&&Xn(c)==3?d.j():this.Y(c)},Nr.prototype.Y=function(c){try{if(c==this.g)e:{let gt=Xn(this.g);var d=this.g.Ba();let Uo=this.g.Z();if(!(3>gt)&&(gt!=3||this.g&&(this.h.h||this.g.oa()||jw(this.g)))){this.J||gt!=4||d==7||(d==8||0>=Uo?Da(3):Da(2)),Pp(this);var f=this.g.Z();this.X=f;t:if(_w(this)){var g=jw(this.g);c="";var b=g.length,A=Xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Di(this),Sa(this);var x="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==b-1)});g.length=0,this.h.g+=c,this.C=0,x=this.h.g}else x=this.g.oa();if(this.o=f==200,JM(this.i,this.u,this.A,this.l,this.R,gt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var be,ct=this.g;if((be=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(be)){var he=be;break t}}he=null}if(f=he)Fo(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,kp(this,f);else{this.o=!1,this.s=3,Ct(12),Di(this),Sa(this);break e}}if(this.P){f=!0;let on;for(;!this.J&&this.C<x.length;)if(on=tP(this,x),on==Np){gt==4&&(this.s=4,Ct(14),f=!1),Fo(this.i,this.l,null,"[Incomplete Response]");break}else if(on==yw){this.s=4,Ct(15),Fo(this.i,this.l,x,"[Invalid Chunk]"),f=!1;break}else Fo(this.i,this.l,on,null),kp(this,on);if(_w(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gt!=4||x.length!=0||this.h.h||(this.s=1,Ct(16),f=!1),this.o=this.o&&f,!f)Fo(this.i,this.l,x,"[Invalid Chunked Response]"),Di(this),Sa(this);else if(0<x.length&&!this.W){this.W=!0;var pt=this.j;pt.g==this&&pt.ba&&!pt.M&&(pt.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),jp(pt),pt.M=!0,Ct(11))}}else Fo(this.i,this.l,x,null),kp(this,x);gt==4&&Di(this),this.o&&!this.J&&(gt==4?Gw(this.j,this):(this.o=!1,Qu(this)))}else vP(this.g),f==400&&0<x.indexOf("Unknown SID")?(this.s=3,Ct(12)):(this.s=0,Ct(13)),Di(this),Sa(this)}}}catch{}finally{}};function _w(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function tP(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Np:(f=Number(d.substring(f,g)),isNaN(f)?yw:(g+=1,g+f>d.length?Np:(d=d.slice(g,g+f),c.C=g+f,d)))}Nr.prototype.cancel=function(){this.J=!0,Di(this)};function Qu(c){c.S=Date.now()+c.I,Ew(c,c.I)}function Ew(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ba(m(c.ba,c),d)}function Pp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Nr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(XM(this.i,this.A),this.L!=2&&(Da(),Ct(17)),Di(this),this.s=2,Sa(this)):Ew(this,this.S-c)};function Sa(c){c.j.G==0||c.J||Gw(c.j,c)}function Di(c){Pp(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,cw(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function kp(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||xp(f.h,c))){if(!c.K&&xp(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)rl(f),tl(f);else break e;Vp(f),Ct(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=ba(m(f.Za,f),6e3));if(1>=Tw(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Ci(f,11)}else if((c.K||f.g==c)&&rl(f),!z(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let he=b[d];if(f.T=he[0],he=he[1],f.G==2)if(he[0]=="c"){f.K=he[1],f.ia=he[2];let pt=he[3];pt!=null&&(f.la=pt,f.j.info("VER="+f.la));let gt=he[4];gt!=null&&(f.Aa=gt,f.j.info("SVER="+f.Aa));let Uo=he[5];Uo!=null&&typeof Uo=="number"&&0<Uo&&(g=1.5*Uo,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let on=c.g;if(on){let ol=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ol){var A=g.h;A.g||ol.indexOf("spdy")==-1&&ol.indexOf("quic")==-1&&ol.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Op(A,A.h),A.h=null))}if(g.D){let Up=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;Up&&(g.ya=Up,Ce(g.I,g.D,Up))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var x=c;if(g.qa=Qw(g,g.J?g.ia:null,g.W),x.K){Dw(g.h,x);var be=x,ct=g.L;ct&&(be.I=ct),be.B&&(Pp(be),Qu(be)),g.g=x}else zw(g);0<f.i.length&&nl(f)}else he[0]!="stop"&&he[0]!="close"||Ci(f,7);else f.G==3&&(he[0]=="stop"||he[0]=="close"?he[0]=="stop"?Ci(f,7):Fp(f):he[0]!="noop"&&f.l&&f.l.ta(he),f.v=0)}}Da(4)}catch{}}var nP=class{constructor(c,d){this.g=c,this.map=d}};function Iw(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ww(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Tw(c){return c.h?1:c.g?c.g.size:0}function xp(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Op(c,d){c.g?c.g.add(d):c.h=d}function Dw(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}Iw.prototype.cancel=function(){if(this.i=bw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function bw(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return P(c.i)}function rP(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function iP(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function Cw(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=iP(c),g=rP(c),b=g.length,A=0;A<b;A++)d.call(void 0,g[A],f&&f[A],c)}var Sw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oP(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),b=null;if(0<=g){var A=c[f].substring(0,g);b=c[f].substring(g+1)}else A=c[f];d(A,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function bi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof bi){this.h=c.h,Yu(this,c.j),this.o=c.o,this.g=c.g,Zu(this,c.s),this.l=c.l;var d=c.i,f=new Na;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Aw(this,f),this.m=c.m}else c&&(d=String(c).match(Sw))?(this.h=!1,Yu(this,d[1]||"",!0),this.o=Aa(d[2]||""),this.g=Aa(d[3]||"",!0),Zu(this,d[4]),this.l=Aa(d[5]||"",!0),Aw(this,d[6]||"",!0),this.m=Aa(d[7]||"")):(this.h=!1,this.i=new Na(null,this.h))}bi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Ra(d,Rw,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Ra(d,Rw,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Ra(f,f.charAt(0)=="/"?cP:aP,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Ra(f,lP)),c.join("")};function Jn(c){return new bi(c)}function Yu(c,d,f){c.j=f?Aa(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Zu(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function Aw(c,d,f){d instanceof Na?(c.i=d,dP(c.i,c.h)):(f||(d=Ra(d,uP)),c.i=new Na(d,c.h))}function Ce(c,d,f){c.i.set(d,f)}function Ju(c){return Ce(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Aa(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ra(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,sP),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function sP(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Rw=/[#\/\?@]/g,aP=/[#\?:]/g,cP=/[#\?]/g,uP=/[#\?@]/g,lP=/#/g;function Na(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Mr(c){c.g||(c.g=new Map,c.h=0,c.i&&oP(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Na.prototype,n.add=function(c,d){Mr(this),this.i=null,c=Vo(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function Nw(c,d){Mr(c),d=Vo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Mw(c,d){return Mr(c),d=Vo(c,d),c.g.has(d)}n.forEach=function(c,d){Mr(this),this.g.forEach(function(f,g){f.forEach(function(b){c.call(d,b,g,this)},this)},this)},n.na=function(){Mr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let b=c[g];for(let A=0;A<b.length;A++)f.push(d[g])}return f},n.V=function(c){Mr(this);let d=[];if(typeof c=="string")Mw(this,c)&&(d=d.concat(this.g.get(Vo(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return Mr(this),this.i=null,c=Vo(this,c),Mw(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function Pw(c,d,f){Nw(c,d),0<f.length&&(c.i=null,c.g.set(Vo(c,d),P(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),x=this.V(g);for(g=0;g<x.length;g++){var b=A;x[g]!==""&&(b+="="+encodeURIComponent(String(x[g]))),c.push(b)}}return this.i=c.join("&")};function Vo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function dP(c,d){d&&!c.j&&(Mr(c),c.i=null,c.g.forEach(function(f,g){var b=g.toLowerCase();g!=b&&(Nw(this,g),Pw(this,b,f))},c)),c.j=d}function hP(c,d){let f=new Ca;if(a.Image){let g=new Image;g.onload=y(Pr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Pr,f,"TestLoadImage: error",!1,d,g),g.onabort=y(Pr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Pr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function fP(c,d){let f=new Ca,g=new AbortController,b=setTimeout(()=>{g.abort(),Pr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(b),A.ok?Pr(f,"TestPingServer: ok",!0,d):Pr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),Pr(f,"TestPingServer: error",!1,d)})}function Pr(c,d,f,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(f)}catch{}}function pP(){this.g=new YM}function gP(c,d,f){let g=f||"";try{Cw(c,function(b,A){let x=b;l(b)&&(x=bp(b)),d.push(g+A+"="+encodeURIComponent(x))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function Ma(c){this.l=c.Ub||null,this.j=c.eb||!1}S(Ma,Cp),Ma.prototype.g=function(){return new Xu(this.l,this.j)},Ma.prototype.i=(function(c){return function(){return c}})({});function Xu(c,d){ft.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Xu,ft),n=Xu.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,ka(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Pa(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ka(this)),this.g&&(this.readyState=3,ka(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;kw(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function kw(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Pa(this):ka(this),this.readyState==3&&kw(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Pa(this))},n.Qa=function(c){this.g&&(this.response=c,Pa(this))},n.ga=function(){this.g&&Pa(this)};function Pa(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ka(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function ka(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Xu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function xw(c){let d="";return _e(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Lp(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=xw(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Ce(c,d,f))}function Me(c){ft.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Me,ft);var mP=/^https?$/i,yP=["POST","PUT"];n=Me.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Rp.g(),this.v=this.o?uw(this.o):uw(Rp),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){Ow(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)f.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(yP,d,void 0))||g||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,x]of f)this.g.setRequestHeader(A,x);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vw(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){Ow(this,A)}};function Ow(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,Lw(c),el(c)}function Lw(c){c.A||(c.A=!0,bt(c,"complete"),bt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,bt(this,"complete"),bt(this,"abort"),el(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),el(this,!0)),Me.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Fw(this):this.bb())},n.bb=function(){Fw(this)};function Fw(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Xn(c)!=4||c.Z()!=2)){if(c.u&&Xn(c)==4)ow(c.Ea,0,c);else if(bt(c,"readystatechange"),Xn(c)==4){c.h=!1;try{let x=c.Z();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=x===0){var b=String(c.D).match(Sw)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),g=!mP.test(b?b.toLowerCase():"")}f=g}if(f)bt(c,"complete"),bt(c,"success");else{c.m=6;try{var A=2<Xn(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",Lw(c)}}finally{el(c)}}}}function el(c,d){if(c.g){Vw(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||bt(c,"ready");try{f.onreadystatechange=g}catch{}}}function Vw(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Xn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Xn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),QM(d)}};function jw(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function vP(c){let d={};c=(c.g&&2<=Xn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(z(c[g]))continue;var f=D(c[g]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[b]||[];d[b]=A,A.push(f)}T(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xa(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function Uw(c){this.Aa=0,this.i=[],this.j=new Ca,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xa("baseRetryDelayMs",5e3,c),this.cb=xa("retryDelaySeedMs",1e4,c),this.Wa=xa("forwardChannelMaxRetries",2,c),this.wa=xa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Iw(c&&c.concurrentRequestLimit),this.Da=new pP,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Uw.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){Ct(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Qw(this,null,this.W),nl(this)};function Fp(c){if(Bw(c),c.G==3){var d=c.U++,f=Jn(c.I);if(Ce(f,"SID",c.K),Ce(f,"RID",d),Ce(f,"TYPE","terminate"),Oa(c,f),d=new Nr(c,c.j,d),d.L=2,d.v=Ju(Jn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Yw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Qu(d)}Kw(c)}function tl(c){c.g&&(jp(c),c.g.cancel(),c.g=null)}function Bw(c){tl(c),c.u&&(a.clearTimeout(c.u),c.u=null),rl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function nl(c){if(!ww(c.h)&&!c.s){c.s=!0;var d=c.Ga;va||XI(),_a||(va(),_a=!0),mp.add(d,c),c.B=0}}function _P(c,d){return Tw(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ba(m(c.Ga,c,d),Ww(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new Nr(this,this.j,c),A=this.o;if(this.S&&(A?(A=v(A),w(A,this.S)):A=this.S),this.m!==null||this.O||(b.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Hw(this,b,d),f=Jn(this.I),Ce(f,"RID",c),Ce(f,"CVER",22),this.D&&Ce(f,"X-HTTP-Session-Id",this.D),Oa(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(xw(A)))+"&"+d:this.m&&Lp(f,this.m,A)),Op(this.h,b),this.Ua&&Ce(f,"TYPE","init"),this.P?(Ce(f,"$req",d),Ce(f,"SID","null"),b.T=!0,Mp(b,f,null)):Mp(b,f,d),this.G=2}}else this.G==3&&(c?$w(this,c):this.i.length==0||ww(this.h)||$w(this))};function $w(c,d){var f;d?f=d.l:f=c.U++;let g=Jn(c.I);Ce(g,"SID",c.K),Ce(g,"RID",f),Ce(g,"AID",c.T),Oa(c,g),c.m&&c.o&&Lp(g,c.m,c.o),f=new Nr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=Hw(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Op(c.h,f),Mp(f,g,d)}function Oa(c,d){c.H&&_e(c.H,function(f,g){Ce(d,g,f)}),c.l&&Cw({},function(f,g){Ce(d,g,f)})}function Hw(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var b=c.i;let A=-1;for(;;){let x=["count="+f];A==-1?0<f?(A=b[0].g,x.push("ofs="+A)):A=0:x.push("ofs="+A);let be=!0;for(let ct=0;ct<f;ct++){let he=b[ct].g,pt=b[ct].map;if(he-=A,0>he)A=Math.max(0,b[ct].g-100),be=!1;else try{gP(pt,x,"req"+he+"_")}catch{g&&g(pt)}}if(be){g=x.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function zw(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;va||XI(),_a||(va(),_a=!0),mp.add(d,c),c.v=0}}function Vp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ba(m(c.Fa,c),Ww(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,qw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ba(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ct(10),tl(this),qw(this))};function jp(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function qw(c){c.g=new Nr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Jn(c.qa);Ce(d,"RID","rpc"),Ce(d,"SID",c.K),Ce(d,"AID",c.T),Ce(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ce(d,"TO",c.ja),Ce(d,"TYPE","xmlhttp"),Oa(c,d),c.m&&c.o&&Lp(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Ju(Jn(d)),f.m=null,f.P=!0,vw(f,c)}n.Za=function(){this.C!=null&&(this.C=null,tl(this),Vp(this),Ct(19))};function rl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Gw(c,d){var f=null;if(c.g==d){rl(c),jp(c),c.g=null;var g=2}else if(xp(c.h,d))f=d.D,Dw(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;g=Gu(),bt(g,new pw(g,f)),nl(c)}else zw(c);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&_P(c,d)||g==2&&Vp(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),b){case 1:Ci(c,5);break;case 4:Ci(c,10);break;case 3:Ci(c,6);break;default:Ci(c,2)}}}function Ww(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Ci(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let b=!g;g=new bi(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Yu(g,"https"),Ju(g),b?hP(g.toString(),f):fP(g.toString(),f)}else Ct(2);c.G=0,c.l&&c.l.sa(d),Kw(c),Bw(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function Kw(c){if(c.G=0,c.ka=[],c.l){let d=bw(c.h);(d.length!=0||c.i.length!=0)&&(M(c.ka,d),M(c.ka,c.i),c.h.i.length=0,P(c.i),c.i.length=0),c.l.ra()}}function Qw(c,d,f){var g=f instanceof bi?Jn(f):new bi(f);if(g.g!="")d&&(g.g=d+"."+g.g),Zu(g,g.s);else{var b=a.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var A=new bi(null);g&&Yu(A,g),d&&(A.g=d),b&&Zu(A,b),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Ce(g,f,d),Ce(g,"VER",c.la),Oa(c,g),g}function Yw(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Me(new Ma({eb:f})):new Me(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zw(){}n=Zw.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function il(){}il.prototype.g=function(c,d){return new Ft(c,d)};function Ft(c,d){ft.call(this),this.g=new Uw(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!z(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!z(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new jo(this)}S(Ft,ft),Ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){Fp(this.g)},Ft.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=bp(c),c=f);d.i.push(new nP(d.Ya++,c)),d.G==3&&nl(d)},Ft.prototype.N=function(){this.g.l=null,delete this.j,Fp(this.g),delete this.g,Ft.aa.N.call(this)};function Jw(c){Sp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}S(Jw,Sp);function Xw(){Ap.call(this),this.status=1}S(Xw,Ap);function jo(c){this.g=c}S(jo,Zw),jo.prototype.ua=function(){bt(this.g,"a")},jo.prototype.ta=function(c){bt(this.g,new Jw(c))},jo.prototype.sa=function(c){bt(this.g,new Xw)},jo.prototype.ra=function(){bt(this.g,"b")},il.prototype.createWebChannel=il.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,P_=wr.createWebChannelTransport=function(){return new il},M_=wr.getStatEventTarget=function(){return Gu()},N_=wr.Event=Ti,uf=wr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wu.NO_ERROR=0,Wu.TIMEOUT=8,Wu.HTTP_ERROR=6,gu=wr.ErrorCode=Wu,gw.COMPLETE="complete",R_=wr.EventType=gw,lw.EventType=Ta,Ta.OPEN="a",Ta.CLOSE="b",Ta.ERROR="c",Ta.MESSAGE="d",ft.prototype.listen=ft.prototype.K,Gs=wr.WebChannel=lw,QB=wr.FetchXmlHttpFactory=Ma,Me.prototype.listenOnce=Me.prototype.L,Me.prototype.getLastError=Me.prototype.Ka,Me.prototype.getLastErrorCode=Me.prototype.Ba,Me.prototype.getStatus=Me.prototype.Z,Me.prototype.getResponseJson=Me.prototype.Oa,Me.prototype.getResponseText=Me.prototype.oa,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Ha,A_=wr.XhrIo=Me}).apply(typeof cf<"u"?cf:typeof self<"u"?self:typeof window<"u"?window:{});var H0="@firebase/firestore",z0="4.8.0";var ot=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ot.UNAUTHENTICATED=new ot(null),ot.GOOGLE_CREDENTIALS=new ot("google-credentials-uid"),ot.FIRST_PARTY=new ot("first-party-uid"),ot.MOCK_USER=new ot("mock-user");var ha="11.10.0";var Ro=new Bn("@firebase/firestore");function Ws(){return Ro.logLevel}function V(n,...e){if(Ro.logLevel<=oe.DEBUG){let t=e.map(wI);Ro.debug(`Firestore (${ha}): ${n}`,...t)}}function Tr(n,...e){if(Ro.logLevel<=oe.ERROR){let t=e.map(wI);Ro.error(`Firestore (${ha}): ${n}`,...t)}}function mi(n,...e){if(Ro.logLevel<=oe.WARN){let t=e.map(wI);Ro.warn(`Firestore (${ha}): ${n}`,...t)}}function wI(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function W(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,LR(n,r,t)}function LR(n,e,t){let r=`FIRESTORE (${ha}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Tr(r),new Error(r)}function ve(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||LR(e,i,r)}function ee(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},O=class extends qt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var In=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var mf=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},V_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ot.UNAUTHENTICATED))}shutdown(){}},j_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},U_=class{constructor(e){this.t=e,this.currentUser=ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ve(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new In;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new In,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>_(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new In)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string",31837,{l:r}),new mf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string",2055,{h:e}),new ot(e)}},B_=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=ot.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},$_=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new B_(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}},yf=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},H_=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Gt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ve(this.o===void 0,3512);let r=o=>{o.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,V("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new yf(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ve(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new yf(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function YB(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function FR(){return new TextEncoder}var Iu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=YB(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function ie(n,e){return n<e?-1:n>e?1:0}function z_(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return ie(r,i);{let o=FR(),s=ZB(o.encode(q0(n,t)),o.encode(q0(e,t)));return s!==0?s:ie(r,i)}}t+=r>65535?2:1}return ie(n.length,e.length)}function q0(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function ZB(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ie(n[t],e[t]);return ie(n.length,e.length)}function ea(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var G0="__name__",vf=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&W(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&W(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return ie(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):z_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ir.fromString(e.substring(4,e.length-2))}},Re=class n extends vf{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new O(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},JB=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Kt=class n extends vf{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return JB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===G0}static keyField(){return new n([G0])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new O(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new O(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new O(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new O(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var H=class n{constructor(e){this.path=e}static fromPath(e){return new n(Re.fromString(e))}static fromName(e){return new n(Re.fromString(e).popFirst(5))}static empty(){return new n(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Re.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Re(e.slice()))}};function VR(n,e,t){if(!t)throw new O(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function XB(n,e,t,r){if(e===!0&&r===!0)throw new O(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function W0(n){if(!H.isDocumentKey(n))throw new O(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function K0(n){if(H.isDocumentKey(n))throw new O(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function jR(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Yf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":W(12329,{type:typeof n})}function wn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new O(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Yf(n);throw new O(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function We(n,e){let t={typeString:n};return e&&(t.value=e),t}function Lu(n,e){if(!jR(n))throw new O(N.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new O(N.INVALID_ARGUMENT,t);return!0}var Q0=-62135596800,Y0=1e6,Ke=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Y0);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new O(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new O(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Q0)throw new O(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Y0}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Lu(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-Q0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Ke._jsonSchemaVersion="firestore/timestamp/1.0",Ke._jsonSchema={type:We("string",Ke._jsonSchemaVersion),seconds:We("number"),nanoseconds:We("number")};var ne=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Ke(0,0))}static max(){return new n(new Ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var wu=-1,q_=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};q_.UNKNOWN_ID=-1;function e$(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(r===1e9?new Ke(t+1,0):new Ke(t,r));return new No(i,H.empty(),e)}function t$(n){return new No(n.readTime,n.key,wu)}var No=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ne.min(),H.empty(),wu)}static max(){return new n(ne.max(),H.empty(),wu)}};function n$(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=H.comparator(n.documentKey,e.documentKey),t!==0?t:ie(n.largestBatchId,e.largestBatchId))}var r$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",G_=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function fa(n){return _(this,null,function*(){if(n.code!==N.FAILED_PRECONDITION||n.message!==r$)throw n;V("LocalStore","Unexpectedly lost primary lease")})}var k=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&W(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function i$(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function pa(n){return n.name==="IndexedDbTransactionError"}var TI=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),DI=-1;function Zf(n){return n==null}function Tu(n){return n===0&&1/n==-1/0}function o$(n){return typeof n=="number"&&Number.isInteger(n)&&!Tu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var UR="";function s$(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Z0(e)),e=a$(n.get(t),e);return Z0(e)}function a$(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case UR:t+="";break;default:t+=o}}return t}function Z0(n){return n+UR+""}var c$="remoteDocuments",BR="owner";var $R="mutationQueues";var HR="mutations";var zR="documentMutations",u$="remoteDocumentsV14";var qR="remoteDocumentGlobal";var GR="targets";var WR="targetDocuments";var KR="targetGlobal",QR="collectionParents";var YR="clientMetadata";var ZR="bundles";var JR="namedQueries";var l$="indexConfiguration";var d$="indexState";var h$="indexEntries";var XR="documentOverlays";var f$="globals";var p$=[$R,HR,zR,c$,GR,BR,KR,WR,YR,qR,QR,ZR,JR],$re=[...p$,XR],g$=[$R,HR,zR,u$,GR,BR,KR,WR,YR,qR,QR,ZR,JR,XR],m$=g$,y$=[...m$,l$,d$,h$];var Hre=[...y$,f$];function J0(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function wi(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function eN(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Le=class n{constructor(e,t){this.comparator=e,this.root=t||qn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zs(this.root,e,this.comparator,!0)}},Zs=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},qn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw W(43730,{key:this.key,value:this.value});if(this.right.isRed())throw W(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw W(27949);return e+(this.isRed()?0:1)}};qn.EMPTY=null,qn.RED=!0,qn.BLACK=!1;qn.EMPTY=new class{constructor(){this.size=0}get key(){throw W(57766)}get value(){throw W(16141)}get color(){throw W(16727)}get left(){throw W(29726)}get right(){throw W(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new qn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var st=class n{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _f(this.data.getIterator())}getIteratorFrom(e){return new _f(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},_f=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var rn=class n{constructor(e){this.fields=e,e.sort(Kt.comparator)}static empty(){return new n([])}unionWith(e){let t=new st(Kt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ea(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Ef=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Tt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Ef("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Tt.EMPTY_BYTE_STRING=new Tt("");var v$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dr(n){if(ve(!!n,39018),typeof n=="string"){let e=0,t=v$.exec(n);if(ve(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ae(n.seconds),nanos:Ae(n.nanos)}}function Ae(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function br(n){return typeof n=="string"?Tt.fromBase64String(n):Tt.fromUint8Array(n)}var tN="server_timestamp",nN="__type__",rN="__previous_value__",iN="__local_write_time__";function bI(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[nN])===null||t===void 0?void 0:t.stringValue)===tN}function Jf(n){let e=n.mapValue.fields[rN];return bI(e)?Jf(e):e}function Du(n){let e=Dr(n.mapValue.fields[iN].timestampValue);return new Ke(e.seconds,e.nanos)}var W_=class{constructor(e,t,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},If="(default)",wf=class n{constructor(e,t){this.projectId=e,this.database=t||If}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===If}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var CI="__type__",oN="__max__",lf={mapValue:{fields:{__type__:{stringValue:oN}}}},SI="__vector__",ta="value";function yi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?bI(n)?4:aN(n)?9007199254740991:sN(n)?10:11:W(28295,{value:n})}function Qn(n,e){if(n===e)return!0;let t=yi(n);if(t!==yi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Du(n).isEqual(Du(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Dr(i.timestampValue),a=Dr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return br(i.bytesValue).isEqual(br(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return Ae(i.geoPointValue.latitude)===Ae(o.geoPointValue.latitude)&&Ae(i.geoPointValue.longitude)===Ae(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Ae(i.integerValue)===Ae(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ae(i.doubleValue),a=Ae(o.doubleValue);return s===a?Tu(s)===Tu(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return ea(n.arrayValue.values||[],e.arrayValue.values||[],Qn);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(J0(s)!==J0(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Qn(s[u],a[u])))return!1;return!0})(n,e);default:return W(52216,{left:n})}}function bu(n,e){return(n.values||[]).find(t=>Qn(t,e))!==void 0}function na(n,e){if(n===e)return 0;let t=yi(n),r=yi(e);if(t!==r)return ie(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ie(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=Ae(o.integerValue||o.doubleValue),u=Ae(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(n,e);case 3:return X0(n.timestampValue,e.timestampValue);case 4:return X0(Du(n),Du(e));case 5:return z_(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=br(o),u=br(s);return a.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ie(a[l],u[l]);if(h!==0)return h}return ie(a.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=ie(Ae(o.latitude),Ae(s.latitude));return a!==0?a:ie(Ae(o.longitude),Ae(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return eR(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p[ta])===null||a===void 0?void 0:a.arrayValue,S=(u=m[ta])===null||u===void 0?void 0:u.arrayValue,P=ie(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=S?.values)===null||h===void 0?void 0:h.length)||0);return P!==0?P:eR(y,S)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===lf.mapValue&&s===lf.mapValue)return 0;if(o===lf.mapValue)return 1;if(s===lf.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=z_(u[p],h[p]);if(m!==0)return m;let y=na(a[u[p]],l[h[p]]);if(y!==0)return y}return ie(u.length,h.length)})(n.mapValue,e.mapValue);default:throw W(23264,{le:t})}}function X0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ie(n,e);let t=Dr(n),r=Dr(e),i=ie(t.seconds,r.seconds);return i!==0?i:ie(t.nanos,r.nanos)}function eR(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=na(t[i],r[i]);if(o)return o}return ie(t.length,r.length)}function ra(n){return K_(n)}function K_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Dr(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return br(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return H.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=K_(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${K_(t.fields[s])}`;return i+"}"})(n.mapValue):W(61005,{value:n})}function ff(n){switch(yi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Jf(n);return e?16+ff(e):16;case 5:return 2*n.stringValue.length;case 6:return br(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+ff(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return wi(r.fields,(o,s)=>{i+=o.length+ff(s)}),i})(n.mapValue);default:throw W(13486,{value:n})}}function tR(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Q_(n){return!!n&&"integerValue"in n}function AI(n){return!!n&&"arrayValue"in n}function nR(n){return!!n&&"nullValue"in n}function rR(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function pf(n){return!!n&&"mapValue"in n}function sN(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[CI])===null||t===void 0?void 0:t.stringValue)===SI}function yu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return wi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=yu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=yu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function aN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===oN}var qre={mapValue:{fields:{[CI]:{stringValue:SI},[ta]:{arrayValue:{}}}}};var Wt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!pf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yu(t)}setAll(e){let t=Kt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=yu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());pf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];pf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){wi(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(yu(this.value))}};function cN(n){let e=[];return wi(n.fields,(t,r)=>{let i=new Kt([t]);if(pf(r)){let o=cN(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new rn(e)}var Tn=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ne.min(),ne.min(),ne.min(),Wt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ne.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ne.min(),ne.min(),Wt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ne.min(),ne.min(),Wt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ia=class{constructor(e,t){this.position=e,this.inclusive=t}};function iR(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=H.comparator(H.fromName(s.referenceValue),t.key):r=na(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function oR(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Qn(n.position[t],e.position[t]))return!1;return!0}var Mo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function _$(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Tf=class{},Ge=class n extends Tf{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Z_(e,t,r):t==="array-contains"?new eE(e,r):t==="in"?new tE(e,r):t==="not-in"?new nE(e,r):t==="array-contains-any"?new rE(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new J_(e,r):new X_(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(na(t,this.value)):t!==null&&yi(this.value)===yi(t)&&this.matchesComparison(na(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return W(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Dn=class n extends Tf{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return uN(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function uN(n){return n.op==="and"}function lN(n){return E$(n)&&uN(n)}function E$(n){for(let e of n.filters)if(e instanceof Dn)return!1;return!0}function Y_(n){if(n instanceof Ge)return n.field.canonicalString()+n.op.toString()+ra(n.value);if(lN(n))return n.filters.map(e=>Y_(e)).join(",");{let e=n.filters.map(t=>Y_(t)).join(",");return`${n.op}(${e})`}}function dN(n,e){return n instanceof Ge?(function(r,i){return i instanceof Ge&&r.op===i.op&&r.field.isEqual(i.field)&&Qn(r.value,i.value)})(n,e):n instanceof Dn?(function(r,i){return i instanceof Dn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&dN(s,i.filters[a]),!0):!1})(n,e):void W(19439)}function hN(n){return n instanceof Ge?(function(t){return`${t.field.canonicalString()} ${t.op} ${ra(t.value)}`})(n):n instanceof Dn?(function(t){return t.op.toString()+" {"+t.getFilters().map(hN).join(" ,")+"}"})(n):"Filter"}var Z_=class extends Ge{constructor(e,t,r){super(e,t,r),this.key=H.fromName(r.referenceValue)}matches(e){let t=H.comparator(e.key,this.key);return this.matchesComparison(t)}},J_=class extends Ge{constructor(e,t){super(e,"in",t),this.keys=fN("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},X_=class extends Ge{constructor(e,t){super(e,"not-in",t),this.keys=fN("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function fN(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>H.fromName(r.referenceValue))}var eE=class extends Ge{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return AI(t)&&bu(t.arrayValue,this.value)}},tE=class extends Ge{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&bu(this.value.arrayValue,t)}},nE=class extends Ge{constructor(e,t){super(e,"not-in",t)}matches(e){if(bu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!bu(this.value.arrayValue,t)}},rE=class extends Ge{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!AI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>bu(this.value.arrayValue,r))}};var iE=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function sR(n,e=null,t=[],r=[],i=null,o=null,s=null){return new iE(n,e,t,r,i,o,s)}function RI(n){let e=ee(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Y_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Zf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ra(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ra(r)).join(",")),e.Pe=t}return e.Pe}function NI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!_$(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!dN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!oR(n.startAt,e.startAt)&&oR(n.endAt,e.endAt)}function oE(n){return H.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var vi=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function I$(n,e,t,r,i,o,s,a){return new vi(n,e,t,r,i,o,s,a)}function Xf(n){return new vi(n)}function aR(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function pN(n){return n.collectionGroup!==null}function vu(n){let e=ee(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new st(Kt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Mo(o,r))}),t.has(Kt.keyField().canonicalString())||e.Te.push(new Mo(Kt.keyField(),r))}return e.Te}function Gn(n){let e=ee(n);return e.Ie||(e.Ie=w$(e,vu(n))),e.Ie}function w$(n,e){if(n.limitType==="F")return sR(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Mo(i.field,o)});let t=n.endAt?new ia(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ia(n.startAt.position,n.startAt.inclusive):null;return sR(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function sE(n,e){let t=n.filters.concat([e]);return new vi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function aE(n,e,t){return new vi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ep(n,e){return NI(Gn(n),Gn(e))&&n.limitType===e.limitType}function gN(n){return`${RI(Gn(n))}|lt:${n.limitType}`}function Ks(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>hN(i)).join(", ")}]`),Zf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ra(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ra(i)).join(",")),`Target(${r})`})(Gn(n))}; limitType=${n.limitType})`}function tp(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):H.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of vu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=iR(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,vu(r),i)||r.endAt&&!(function(s,a,u){let l=iR(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,vu(r),i))})(n,e)}function T$(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function mN(n){return(e,t)=>{let r=!1;for(let i of vu(n)){let o=D$(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function D$(n,e,t){let r=n.field.isKeyField()?H.comparator(e.key,t.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?na(u,l):W(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return W(19790,{direction:n.dir})}}var Cr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){wi(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return eN(this.inner)}size(){return this.innerSize}};var b$=new Le(H.comparator);function Sr(){return b$}var yN=new Le(H.comparator);function mu(...n){let e=yN;for(let t of n)e=e.insert(t.key,t);return e}function vN(n){let e=yN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Do(){return _u()}function _N(){return _u()}function _u(){return new Cr(n=>n.toString(),(n,e)=>n.isEqual(e))}var C$=new Le(H.comparator),S$=new st(H.comparator);function se(...n){let e=S$;for(let t of n)e=e.add(t);return e}var A$=new st(ie);function R$(){return A$}function MI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tu(e)?"-0":e}}function EN(n){return{integerValue:""+n}}function N$(n,e){return o$(e)?EN(e):MI(n,e)}var oa=class{constructor(){this._=void 0}};function M$(n,e,t){return n instanceof sa?(function(i,o){let s={fields:{[nN]:{stringValue:tN},[iN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&bI(o)&&(o=Jf(o)),o&&(s.fields[rN]=o),{mapValue:s}})(t,e):n instanceof Po?wN(n,e):n instanceof ko?TN(n,e):(function(i,o){let s=IN(i,o),a=cR(s)+cR(i.Ee);return Q_(s)&&Q_(i.Ee)?EN(a):MI(i.serializer,a)})(n,e)}function P$(n,e,t){return n instanceof Po?wN(n,e):n instanceof ko?TN(n,e):t}function IN(n,e){return n instanceof aa?(function(r){return Q_(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var sa=class extends oa{},Po=class extends oa{constructor(e){super(),this.elements=e}};function wN(n,e){let t=DN(e);for(let r of n.elements)t.some(i=>Qn(i,r))||t.push(r);return{arrayValue:{values:t}}}var ko=class extends oa{constructor(e){super(),this.elements=e}};function TN(n,e){let t=DN(e);for(let r of n.elements)t=t.filter(i=>!Qn(i,r));return{arrayValue:{values:t}}}var aa=class extends oa{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function cR(n){return Ae(n.integerValue||n.doubleValue)}function DN(n){return AI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function k$(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Po&&i instanceof Po||r instanceof ko&&i instanceof ko?ea(r.elements,i.elements,Qn):r instanceof aa&&i instanceof aa?Qn(r.Ee,i.Ee):r instanceof sa&&i instanceof sa})(n.transform,e.transform)}var cE=class{constructor(e,t){this.version=e,this.transformResults=t}},Wn=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function gf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ca=class{};function bN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Cu(n.key,Wn.none()):new xo(n.key,n.data,Wn.none());{let t=n.data,r=Wt.empty(),i=new st(Kt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Yn(n.key,r,new rn(i.toArray()),Wn.none())}}function x$(n,e,t){n instanceof xo?(function(i,o,s){let a=i.value.clone(),u=lR(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Yn?(function(i,o,s){if(!gf(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=lR(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(CN(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function Eu(n,e,t,r){return n instanceof xo?(function(o,s,a,u){if(!gf(o.precondition,s))return a;let l=o.value.clone(),h=dR(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof Yn?(function(o,s,a,u){if(!gf(o.precondition,s))return a;let l=dR(o.fieldTransforms,u,s),h=s.data;return h.setAll(CN(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(o,s,a){return gf(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function O$(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=IN(r.transform,i||null);o!=null&&(t===null&&(t=Wt.empty()),t.set(r.field,o))}return t||null}function uR(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ea(r,i,(o,s)=>k$(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var xo=class extends ca{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Yn=class extends ca{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function CN(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function lR(n,e,t){let r=new Map;ve(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,P$(s,a,t[i]))}return r}function dR(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,M$(o,s,e))}return r}var Cu=class extends ca{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},uE=class extends ca{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var lE=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&x$(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Eu(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Eu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=_N();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=bN(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),se())}isEqual(e){return this.batchId===e.batchId&&ea(this.mutations,e.mutations,(t,r)=>uR(t,r))&&ea(this.baseMutations,e.baseMutations,(t,r)=>uR(t,r))}},dE=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ve(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return C$})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var hE=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var fE=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ze,le;function L$(n){switch(n){case N.OK:return W(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return W(15467,{code:n})}}function SN(n){if(n===void 0)return Tr("GRPC error has no .code"),N.UNKNOWN;switch(n){case ze.OK:return N.OK;case ze.CANCELLED:return N.CANCELLED;case ze.UNKNOWN:return N.UNKNOWN;case ze.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case ze.INTERNAL:return N.INTERNAL;case ze.UNAVAILABLE:return N.UNAVAILABLE;case ze.UNAUTHENTICATED:return N.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case ze.NOT_FOUND:return N.NOT_FOUND;case ze.ALREADY_EXISTS:return N.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return N.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case ze.ABORTED:return N.ABORTED;case ze.OUT_OF_RANGE:return N.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return N.UNIMPLEMENTED;case ze.DATA_LOSS:return N.DATA_LOSS;default:return W(39323,{code:n})}}(le=ze||(ze={}))[le.OK=0]="OK",le[le.CANCELLED=1]="CANCELLED",le[le.UNKNOWN=2]="UNKNOWN",le[le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",le[le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",le[le.NOT_FOUND=5]="NOT_FOUND",le[le.ALREADY_EXISTS=6]="ALREADY_EXISTS",le[le.PERMISSION_DENIED=7]="PERMISSION_DENIED",le[le.UNAUTHENTICATED=16]="UNAUTHENTICATED",le[le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",le[le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",le[le.ABORTED=10]="ABORTED",le[le.OUT_OF_RANGE=11]="OUT_OF_RANGE",le[le.UNIMPLEMENTED=12]="UNIMPLEMENTED",le[le.INTERNAL=13]="INTERNAL",le[le.UNAVAILABLE=14]="UNAVAILABLE",le[le.DATA_LOSS=15]="DATA_LOSS";var hR=null;var F$=new Ir([4294967295,4294967295],0);function fR(n){let e=FR().encode(n),t=new S_;return t.update(e),new Uint8Array(t.digest())}function pR(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ir([t,r],0),new Ir([i,o],0)]}var pE=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new bo(`Invalid padding: ${t}`);if(r<0)throw new bo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new bo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new bo(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Ir.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(Ir.fromNumber(r)));return i.compare(F$)===1&&(i=new Ir([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=fR(e),[r,i]=pR(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=fR(e),[r,i]=pR(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},bo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Df=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Su.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ne.min(),i,new Le(ie),Sr(),se())}},Su=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,se(),se(),se())}};var Js=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},bf=class{constructor(e,t){this.targetId=e,this.De=t}},Cf=class{constructor(e,t,r=Tt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Sf=class{constructor(){this.ve=0,this.Ce=gR(),this.Fe=Tt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=se(),t=se(),r=se();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:W(38017,{changeType:o})}}),new Su(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=gR()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ve(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},gE=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Sr(),this.je=df(),this.Je=df(),this.He=new Le(ie)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:W(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(oE(o))if(r===0){let s=new H(o.path);this.Xe(t,s,Tn.newNoDocument(s,ne.min()))}else ve(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}hR?.ct((function(h,p,m,y,S){var P,M,L,z,Z,De;let Dt={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},_e=p.unchangedNames;return _e&&(Dt.bloomFilter={applied:S===0,hashCount:(P=_e?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:(z=(L=(M=_e?.bits)===null||M===void 0?void 0:M.bitmap)===null||L===void 0?void 0:L.length)!==null&&z!==void 0?z:0,padding:(De=(Z=_e?.bits)===null||Z===void 0?void 0:Z.padding)!==null&&De!==void 0?De:0,mightContain:T=>{var v;return(v=y?.mightContain(T))!==null&&v!==void 0&&v}}),Dt})(s,e.De,this.We.lt(),a,u))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=br(r).toUint8Array()}catch(u){if(u instanceof Ef)return mi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new pE(s,i,o)}catch(u){return mi(u instanceof bo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&oE(a.target)){let u=new H(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,Tn.newNoDocument(u,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=se();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Df(e,t,this.He,this.ze,r);return this.ze=Sr(),this.je=df(),this.Je=df(),this.He=new Le(ie),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Sf,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new st(ie),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new st(ie),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||V("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Sf),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function df(){return new Le(H.comparator)}function gR(){return new Le(H.comparator)}var V$={asc:"ASCENDING",desc:"DESCENDING"},j$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},U$={and:"AND",or:"OR"},mE=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function yE(n,e){return n.useProto3Json||Zf(e)?e:{value:e}}function Af(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function AN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function B$(n,e){return Af(n,e.toTimestamp())}function Kn(n){return ve(!!n,49232),ne.fromTimestamp((function(t){let r=Dr(t);return new Ke(r.seconds,r.nanos)})(n))}function PI(n,e){return vE(n,e).canonicalString()}function vE(n,e){let t=(function(i){return new Re(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function RN(n){let e=Re.fromString(n);return ve(xN(e),10190,{key:e.toString()}),e}function _E(n,e){return PI(n.databaseId,e.path)}function k_(n,e){let t=RN(e);if(t.get(1)!==n.databaseId.projectId)throw new O(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new O(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new H(MN(t))}function NN(n,e){return PI(n.databaseId,e)}function $$(n){let e=RN(n);return e.length===4?Re.emptyPath():MN(e)}function EE(n){return new Re(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function MN(n){return ve(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function mR(n,e,t){return{name:_E(n,e),fields:t.value.mapValue.fields}}function H$(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:W(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(ve(h===void 0||typeof h=="string",58123),Tt.fromBase64String(h||"")):(ve(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Tt.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let h=l.code===void 0?N.UNKNOWN:SN(l.code);return new O(h,l.message||"")})(s);t=new Cf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=k_(n,r.document.name),o=Kn(r.document.updateTime),s=r.document.createTime?Kn(r.document.createTime):ne.min(),a=new Wt({mapValue:{fields:r.document.fields}}),u=Tn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Js(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=k_(n,r.document),o=r.readTime?Kn(r.readTime):ne.min(),s=Tn.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Js([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=k_(n,r.document),o=r.removedTargetIds||[];t=new Js([],o,i,null)}else{if(!("filter"in e))return W(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new fE(i,o),a=r.targetId;t=new bf(a,s)}}return t}function z$(n,e){let t;if(e instanceof xo)t={update:mR(n,e.key,e.value)};else if(e instanceof Cu)t={delete:_E(n,e.key)};else if(e instanceof Yn)t={update:mR(n,e.key,e.data),updateMask:X$(e.fieldMask)};else{if(!(e instanceof uE))return W(16599,{Rt:e.type});t={verify:_E(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof sa)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Po)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ko)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof aa)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw W(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:B$(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:W(27497)})(n,e.precondition)),t}function q$(n,e){return n&&n.length>0?(ve(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?Kn(i.updateTime):Kn(o);return s.isEqual(ne.min())&&(s=Kn(o)),new cE(s,i.transformResults||[])})(t,e))):[]}function G$(n,e){return{documents:[NN(n,e.path)]}}function W$(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=NN(n,i);let o=(function(l){if(l.length!==0)return kN(Dn.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(m){return{field:Qs(m.field),direction:Y$(m.dir)}})(h))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=yE(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:t,parent:i}}function K$(n){let e=$$(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ve(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=(function(p){let m=PN(p);return m instanceof Dn&&lN(m)?m.getFilters():[m]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map(m=>(function(S){return new Mo(Ys(S.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(m))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let m;return m=typeof p=="object"?p.value:p,Zf(m)?null:m})(t.limit));let u=null;t.startAt&&(u=(function(p){let m=!!p.before,y=p.values||[];return new ia(y,m)})(t.startAt));let l=null;return t.endAt&&(l=(function(p){let m=!p.before,y=p.values||[];return new ia(y,m)})(t.endAt)),I$(e,i,s,o,a,"F",u,l)}function Q$(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return W(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function PN(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ys(t.unaryFilter.field);return Ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ys(t.unaryFilter.field);return Ge.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ys(t.unaryFilter.field);return Ge.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ys(t.unaryFilter.field);return Ge.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return W(61313);default:return W(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ge.create(Ys(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return W(58110);default:return W(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Dn.create(t.compositeFilter.filters.map(r=>PN(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return W(1026)}})(t.compositeFilter.op))})(n):W(30097,{filter:n})}function Y$(n){return V$[n]}function Z$(n){return j$[n]}function J$(n){return U$[n]}function Qs(n){return{fieldPath:n.canonicalString()}}function Ys(n){return Kt.fromServerFormat(n.fieldPath)}function kN(n){return n instanceof Ge?(function(t){if(t.op==="=="){if(rR(t.value))return{unaryFilter:{field:Qs(t.field),op:"IS_NAN"}};if(nR(t.value))return{unaryFilter:{field:Qs(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(rR(t.value))return{unaryFilter:{field:Qs(t.field),op:"IS_NOT_NAN"}};if(nR(t.value))return{unaryFilter:{field:Qs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qs(t.field),op:Z$(t.op),value:t.value}}})(n):n instanceof Dn?(function(t){let r=t.getFilters().map(i=>kN(i));return r.length===1?r[0]:{compositeFilter:{op:J$(t.op),filters:r}}})(n):W(54877,{filter:n})}function X$(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function xN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Au=class n{constructor(e,t,r,i,o=ne.min(),s=ne.min(),a=Tt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var IE=class{constructor(e){this.gt=e}};function eH(n){let e=K$({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?aE(e,e.limit,"L"):e}var Rf=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Ae(e.integerValue));else if("doubleValue"in e){let r=Ae(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Tu(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Dr(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(br(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?aN(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):sN(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):W(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=ta,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Ae(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),H.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Rf.Ut=new Rf;var wE=class{constructor(){this.Dn=new TE}addToCollectionParentIndex(e,t){return this.Dn.add(t),k.resolve()}getCollectionParents(e,t){return k.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return k.resolve()}deleteFieldIndex(e,t){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,t){return k.resolve()}getDocumentsMatchingTarget(e,t){return k.resolve(null)}getIndexType(e,t){return k.resolve(0)}getFieldIndexes(e,t){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,t){return k.resolve(No.min())}getMinOffsetFromCollectionGroup(e,t){return k.resolve(No.min())}updateCollectionGroup(e,t,r){return k.resolve()}updateIndexEntries(e,t){return k.resolve()}},TE=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new st(Re.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new st(Re.comparator)).toArray()}};var Gre=new Uint8Array(0);var yR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ON=41943040,nn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(ON,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);var Ru=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var vR="LruGarbageCollector",tH=1048576;function _R([n,e],[t,r]){let i=ie(n,t);return i===0?ie(e,r):i}var DE=class{constructor(e){this.Tr=e,this.buffer=new st(_R),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();_R(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},bE=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){V(vR,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>_(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){pa(t)?V(vR,"Ignoring IndexedDB error during garbage collection: ",t):yield fa(t)}yield this.Rr(3e5)}))}},CE=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return k.resolve(TI.ue);let r=new DE(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(V("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve(yR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(V("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yR):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(V("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Ws()<=oe.DEBUG&&V("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),k.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function nH(n,e){return new CE(n,e)}var SE=class{constructor(){this.changes=new Cr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?k.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var AE=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var RE=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Eu(r.mutation,i,rn.empty(),Ke.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,t,r=se()){let i=Do();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=mu();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Do();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,se()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Sr(),s=_u(),a=(function(){return _u()})();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Yn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Eu(h.mutation,l,h.mutation.getFieldMask(),Ke.now())):s.set(l.key,rn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new AE(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=_u(),i=new Le((s,a)=>s-a),o=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||rn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||se()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=_N();h.forEach(m=>{if(!o.has(m)){let y=bN(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return k.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return H.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):k.resolve(Do()),a=wu,u=o;return s.next(l=>k.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?k.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,se())).next(h=>({batchId:a,changes:vN(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new H(t)).next(r=>{let i=mu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=mu();return this.indexManager.getCollectionParents(e,o).next(a=>k.forEach(a,u=>{let l=(function(p,m){return new vi(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Tn.newInvalidDocument(h)))});let a=mu();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Eu(h.mutation,l,rn.empty(),Ke.now()),tp(t,l)&&(a=a.insert(u,l))}),a})}};var NE=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return k.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Kn(i.createTime)}})(t)),k.resolve()}getNamedQuery(e,t){return k.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:eH(i.bundledQuery),readTime:Kn(i.readTime)}})(t)),k.resolve()}};var ME=class{constructor(){this.overlays=new Le(H.comparator),this.kr=new Map}getOverlay(e,t){return k.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Do();return k.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),k.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),k.resolve()}getOverlaysForCollection(e,t,r){let i=Do(),o=t.length+1,s=new H(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return k.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Le((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Do(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Do(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return k.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new hE(t,r));let o=this.kr.get(t);o===void 0&&(o=se(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var PE=class{constructor(){this.sessionToken=Tt.EMPTY_BYTE_STRING}getSessionToken(e){return k.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,k.resolve()}};var Nu=class{constructor(){this.qr=new st(qe.Qr),this.$r=new st(qe.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new qe(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new qe(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new H(new Re([])),r=new qe(t,e),i=new qe(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new H(new Re([])),r=new qe(t,e),i=new qe(t,e+1),o=se();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new qe(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},qe=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return H.comparator(e.key,t.key)||ie(e.Hr,t.Hr)}static Ur(e,t){return ie(e.Hr,t.Hr)||H.comparator(e.key,t.key)}};var kE=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new st(qe.Qr)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new lE(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new qe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return k.resolve(s)}lookupMutationBatch(e,t){return k.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return k.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?DI:this.er-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new qe(t,0),i=new qe(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),k.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new st(ie);return t.forEach(i=>{let o=new qe(i,0),s=new qe(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),k.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;H.isDocumentKey(o)||(o=o.child(""));let s=new qe(new H(o),0),a=new st(ie);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),k.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ve(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return k.forEach(t.mutations,i=>{let o=new qe(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new qe(t,0),i=this.Yr.firstAfterOrEqual(r);return k.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var xE=class{constructor(e){this.ni=e,this.docs=(function(){return new Le(H.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return k.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(t))}getEntries(e,t){let r=Sr();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Tn.newInvalidDocument(i))}),k.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Sr(),s=t.path,a=new H(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||n$(t$(h),r)<=0||(i.has(h.key)||tp(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return k.resolve(o)}getAllFromCollectionGroup(e,t,r,i){W(9500)}ri(e,t){return k.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new OE(this)}getSize(e){return k.resolve(this.size)}},OE=class extends SE{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),k.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var LE=class{constructor(e){this.persistence=e,this.ii=new Cr(t=>RI(t),NI),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.si=0,this.oi=new Nu,this.targetCount=0,this._i=Ru.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),k.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Ru(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,k.resolve()}updateTargetData(e,t){return this.hr(t),k.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),k.waitFor(o).next(()=>i)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return k.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),k.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),k.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),k.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return k.resolve(r)}containsKey(e,t){return k.resolve(this.oi.containsKey(t))}};var Nf=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new TI(0),this.ci=!1,this.ci=!0,this.li=new PE,this.referenceDelegate=e(this),this.hi=new LE(this),this.indexManager=new wE,this.remoteDocumentCache=(function(i){return new xE(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new IE(t),this.Ti=new NE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ME,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new kE(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){V("MemoryPersistence","Starting transaction:",e);let i=new FE(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return k.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},FE=class extends G_{constructor(e){super(),this.currentSequenceNumber=e}},VE=class n{constructor(e){this.persistence=e,this.Ai=new Nu,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw W(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),k.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),k.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),k.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.mi,r=>{let i=H.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,ne.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return k.or([()=>k.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Mf=class n{constructor(e,t){this.persistence=e,this.gi=new Cr(r=>s$(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=nH(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return k.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return k.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?k.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,ne.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),k.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),k.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),k.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),k.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ff(e.data.value)),t}Sr(e,t,r){return k.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return k.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var jE=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=se(),i=se();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var UE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var BE=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return pA()?8:i$(it())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new UE;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Ws()<=oe.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",Ks(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),k.resolve()):(Ws()<=oe.DEBUG&&V("QueryEngine","Query:",Ks(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Ws()<=oe.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",Ks(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gn(t))):k.resolve())}ps(e,t){if(aR(t))return k.resolve(null);let r=Gn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=aE(t,null,"F"),r=Gn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=se(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(t,a);return this.Ds(t,l,s,u.readTime)?this.ps(e,aE(t,null,"F")):this.vs(e,l,t,u)}))})))}ys(e,t,r,i){return aR(t)||i.isEqual(ne.min())?k.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?k.resolve(null):(Ws()<=oe.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ks(t)),this.vs(e,s,t,e$(i,wu)).next(a=>a))})}bs(e,t){let r=new st(mN(e));return t.forEach((i,o)=>{tp(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Ws()<=oe.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",Ks(t)),this.gs.getDocumentsMatchingQuery(e,t,No.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var kI="LocalStore",rH=3e8,$E=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Le(ie),this.Ms=new Cr(o=>RI(o),NI),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RE(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function iH(n,e,t,r){return new $E(n,e,t,r)}function LN(n,e){return _(this,null,function*(){let t=ee(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=se();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function oH(n,e){let t=ee(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,h){let p=l.batch,m=p.keys(),y=k.resolve();return m.forEach(S=>{y=y.next(()=>h.getEntry(u,S)).next(P=>{let M=l.docVersions.get(S);ve(M!==null,48541),P.version.compareTo(M)<0&&(p.applyToRemoteDocument(P,l),P.isValidDocument()&&(P.setReadTime(l.commitVersion),h.addEntry(P)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=se();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function FN(n){let e=ee(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function sH(n,e){let t=ee(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Tt.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(P,M,L){return P.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=rH?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(m,y,h)&&a.push(t.hi.updateTargetData(o,y))});let u=Sr(),l=se();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(aH(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(ne.min())){let h=t.hi.getLastRemoteSnapshotVersion(o).next(p=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return k.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Fs=i,o))}function aH(n,e,t){let r=se(),i=se();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Sr();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):V(kI,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function cH(n,e){let t=ee(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=DI),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function uH(n,e){let t=ee(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,k.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new Au(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function HE(n,e,t){return _(this,null,function*(){let r=ee(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!pa(s))throw s;V(kI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function ER(n,e,t){let r=ee(n),i=ne.min(),o=se();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=ee(u),m=p.Ms.get(h);return m!==void 0?k.resolve(p.Fs.get(m)):p.hi.getTargetData(l,h)})(r,s,Gn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:ne.min(),t?o:se())).next(a=>(lH(r,T$(e),a),{documents:a,qs:o})))}function lH(n,e,t){let r=n.xs.get(e)||ne.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var Pf=class{constructor(){this.activeTargetIds=R$()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var zE=class{constructor(){this.Fo=new Pf,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Pf,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var qE=class{xo(e){}shutdown(){}};var IR="ConnectivityMonitor",kf=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){V(IR,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){V(IR,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var hf=null;function GE(){return hf===null?hf=(function(){return 268435456+Math.round(2147483648*Math.random())})():hf++,"0x"+hf.toString(16)}var x_="RestConnection",dH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},WE=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===If?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=GE(),a=this.Go(e,t.toUriEncodedString());V(x_,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=ii(l);return this.jo(e,a,u,r,h).then(p=>(V(x_,`Received RPC '${e}' ${s}: `,p),p),p=>{throw mi(x_,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ha})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=dH[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var KE=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var wt="WebChannelConnection",QE=class extends WE{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=GE();return new Promise((a,u)=>{let l=new A_;l.setWithCredentials(!0),l.listenOnce(R_.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case gu.NO_ERROR:let p=l.getResponseJson();V(wt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case gu.TIMEOUT:V(wt,`RPC '${e}' ${s} timed out`),u(new O(N.DEADLINE_EXCEEDED,"Request time out"));break;case gu.HTTP_ERROR:let m=l.getStatus();if(V(wt,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let S=y?.error;if(S&&S.status&&S.message){let P=(function(L){let z=L.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(z)>=0?z:N.UNKNOWN})(S.status);u(new O(P,S.message))}else u(new O(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new O(N.UNAVAILABLE,"Connection failed."));break;default:W(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{V(wt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);V(wt,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}P_(e,t,r){let i=GE(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=P_(),a=M_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");V(wt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let m=!1,y=!1,S=new KE({Ho:M=>{y?V(wt,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(V(wt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),V(wt,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},Yo:()=>p.close()}),P=(M,L,z)=>{M.listen(L,Z=>{try{z(Z)}catch(De){setTimeout(()=>{throw De},0)}})};return P(p,Gs.EventType.OPEN,()=>{y||(V(wt,`RPC '${e}' stream ${i} transport opened.`),S.s_())}),P(p,Gs.EventType.CLOSE,()=>{y||(y=!0,V(wt,`RPC '${e}' stream ${i} transport closed`),S.__(),this.I_(p))}),P(p,Gs.EventType.ERROR,M=>{y||(y=!0,mi(wt,`RPC '${e}' stream ${i} transport errored. Name:`,M.name,"Message:",M.message),S.__(new O(N.UNAVAILABLE,"The operation could not be completed")))}),P(p,Gs.EventType.MESSAGE,M=>{var L;if(!y){let z=M.data[0];ve(!!z,16349);let Z=z,De=Z?.error||((L=Z[0])===null||L===void 0?void 0:L.error);if(De){V(wt,`RPC '${e}' stream ${i} received error:`,De);let Dt=De.status,_e=(function(I){let w=ze[I];if(w!==void 0)return SN(w)})(Dt),T=De.message;_e===void 0&&(_e=N.INTERNAL,T="Unknown error status: "+Dt+" with message "+De.message),y=!0,S.__(new O(_e,T)),p.close()}else V(wt,`RPC '${e}' stream ${i} received:`,z),S.a_(z)}}),P(a,N_.STAT_EVENT,M=>{M.stat===uf.PROXY?V(wt,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===uf.NOPROXY&&V(wt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.o_()},0),S}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function O_(){return typeof document<"u"?document:null}function np(n){return new mE(n,!0)}var xf=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var wR="PersistentStream",Of=class{constructor(e,t,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new xf(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return _(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return _(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return _(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(Tr(t.toString()),Tr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new O(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>_(this,null,function*(){this.state=0,this.start()}))}G_(e){return V(wR,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(V(wR,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},YE=class extends Of{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=H$(this.serializer,e),r=(function(o){if(!("targetChange"in o))return ne.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ne.min():s.readTime?Kn(s.readTime):ne.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=EE(this.serializer),t.addTarget=(function(o,s){let a,u=s.target;if(a=oE(u)?{documents:G$(o,u)}:{query:W$(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=AN(o,s.resumeToken);let l=yE(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ne.min())>0){a.readTime=Af(o,s.snapshotVersion.toTimestamp());let l=yE(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=Q$(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=EE(this.serializer),t.removeTarget=e,this.k_(t)}},ZE=class extends Of{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=q$(e.writeResults,e.commitTime),r=Kn(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=EE(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>z$(this.serializer,r))};this.k_(t)}};var JE=class{},XE=class extends JE{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new O(N.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,vE(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new O(N.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,vE(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new O(N.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},eI=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Tr(t),this._a=!1):V("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Oo="RemoteStore",tI=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>_(this,null,function*(){Lo(this)&&(V(Oo,"Restarting streams for network reachability change."),yield(function(u){return _(this,null,function*(){let l=ee(u);l.Ia.add(4),yield Fu(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield rp(l)})})(this))}))}),this.Aa=new eI(r,i)}};function rp(n){return _(this,null,function*(){if(Lo(n))for(let e of n.da)yield e(!0)})}function Fu(n){return _(this,null,function*(){for(let e of n.da)yield e(!1)})}function VN(n,e){let t=ee(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),FI(t)?LI(t):ga(t).x_()&&OI(t,e))}function xI(n,e){let t=ee(n),r=ga(t);t.Ta.delete(e),r.x_()&&jN(t,e),t.Ta.size===0&&(r.x_()?r.B_():Lo(t)&&t.Aa.set("Unknown"))}function OI(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ga(n).H_(e)}function jN(n,e){n.Ra.$e(e),ga(n).Y_(e)}function LI(n){n.Ra=new gE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),ga(n).start(),n.Aa.aa()}function FI(n){return Lo(n)&&!ga(n).M_()&&n.Ta.size>0}function Lo(n){return ee(n).Ia.size===0}function UN(n){n.Ra=void 0}function hH(n){return _(this,null,function*(){n.Aa.set("Online")})}function fH(n){return _(this,null,function*(){n.Ta.forEach((e,t)=>{OI(n,e)})})}function pH(n,e){return _(this,null,function*(){UN(n),FI(n)?(n.Aa.la(e),LI(n)):n.Aa.set("Unknown")})}function gH(n,e,t){return _(this,null,function*(){if(n.Aa.set("Online"),e instanceof Cf&&e.state===2&&e.cause)try{yield(function(i,o){return _(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(n,e)}catch(r){V(Oo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Lf(n,r)}else if(e instanceof Js?n.Ra.Ye(e):e instanceof bf?n.Ra.it(e):n.Ra.et(e),!t.isEqual(ne.min()))try{let r=yield FN(n.localStore);t.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(Tt.EMPTY_BYTE_STRING,h.snapshotVersion)),jN(o,u);let p=new Au(h.target,u,l,h.sequenceNumber);OI(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t))}catch(r){V(Oo,"Failed to raise snapshot:",r),yield Lf(n,r)}})}function Lf(n,e,t){return _(this,null,function*(){if(!pa(e))throw e;n.Ia.add(1),yield Fu(n),n.Aa.set("Offline"),t||(t=()=>FN(n.localStore)),n.asyncQueue.enqueueRetryable(()=>_(null,null,function*(){V(Oo,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield rp(n)}))})}function BN(n,e){return e().catch(t=>Lf(n,t,e))}function ip(n){return _(this,null,function*(){let e=ee(n),t=_i(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:DI;for(;mH(e);)try{let i=yield cH(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,yH(e,i)}catch(i){yield Lf(e,i)}$N(e)&&HN(e)})}function mH(n){return Lo(n)&&n.Pa.length<10}function yH(n,e){n.Pa.push(e);let t=_i(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function $N(n){return Lo(n)&&!_i(n).M_()&&n.Pa.length>0}function HN(n){_i(n).start()}function vH(n){return _(this,null,function*(){_i(n).na()})}function _H(n){return _(this,null,function*(){let e=_i(n);for(let t of n.Pa)e.X_(t.mutations)})}function EH(n,e,t){return _(this,null,function*(){let r=n.Pa.shift(),i=dE.from(r,e,t);yield BN(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ip(n)})}function IH(n,e){return _(this,null,function*(){e&&_i(n).Z_&&(yield(function(r,i){return _(this,null,function*(){if((function(s){return L$(s)&&s!==N.ABORTED})(i.code)){let o=r.Pa.shift();_i(r).N_(),yield BN(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield ip(r)}})})(n,e)),$N(n)&&HN(n)})}function TR(n,e){return _(this,null,function*(){let t=ee(n);t.asyncQueue.verifyOperationInProgress(),V(Oo,"RemoteStore received new credentials");let r=Lo(t);t.Ia.add(3),yield Fu(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield rp(t)})}function wH(n,e){return _(this,null,function*(){let t=ee(n);e?(t.Ia.delete(2),yield rp(t)):e||(t.Ia.add(2),yield Fu(t),t.Aa.set("Unknown"))})}function ga(n){return n.Va||(n.Va=(function(t,r,i){let o=ee(t);return o.ia(),new YE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:hH.bind(null,n),e_:fH.bind(null,n),n_:pH.bind(null,n),J_:gH.bind(null,n)}),n.da.push(e=>_(null,null,function*(){e?(n.Va.N_(),FI(n)?LI(n):n.Aa.set("Unknown")):(yield n.Va.stop(),UN(n))}))),n.Va}function _i(n){return n.ma||(n.ma=(function(t,r,i){let o=ee(t);return o.ia(),new ZE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:vH.bind(null,n),n_:IH.bind(null,n),ea:_H.bind(null,n),ta:EH.bind(null,n)}),n.da.push(e=>_(null,null,function*(){e?(n.ma.N_(),yield ip(n)):(yield n.ma.stop(),n.Pa.length>0&&(V(Oo,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var nI=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new In,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function VI(n,e){if(Tr("AsyncQueue",`${e}: ${n}`),pa(n))return new O(N.UNAVAILABLE,`${e}: ${n}`);throw n}var Ff=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||H.comparator(t.key,r.key):(t,r)=>H.comparator(t.key,r.key),this.keyedMap=mu(),this.sortedSet=new Le(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Vf=class{constructor(){this.fa=new Le(H.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):W(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},ua=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Ff.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ep(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var rI=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},iI=class{constructor(){this.queries=DR(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=ee(t),o=i.queries;i.queries=DR(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new O(N.ABORTED,"Firestore shutting down"))}};function DR(){return new Cr(n=>gN(n),ep)}function jI(n,e){return _(this,null,function*(){let t=ee(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new rI,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=VI(s,`Initialization of query '${Ks(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&BI(t)})}function UI(n,e){return _(this,null,function*(){let t=ee(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function TH(n,e){let t=ee(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&BI(t)}function DH(n,e,t){let r=ee(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function BI(n){n.Da.forEach(e=>{e.next()})}var oI,bR;(bR=oI||(oI={})).Fa="default",bR.Cache="cache";var Mu=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ua(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=ua.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==oI.Cache}};var jf=class{constructor(e){this.key=e}},Uf=class{constructor(e){this.key=e}},sI=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=se(),this.mutatedKeys=se(),this.Xa=mN(e),this.eu=new Ff(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new Vf,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=tp(this.query,p)?p:null,S=!!m&&this.mutatedKeys.has(m.key),P=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),M=!1;m&&y?m.data.isEqual(y.data)?S!==P&&(r.track({type:3,doc:y}),M=!0):this.iu(m,y)||(r.track({type:2,doc:y}),M=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),M=!0):m&&!y&&(r.track({type:1,doc:m}),M=!0,(u||l)&&(a=!0)),M&&(y?(s=s.add(y),o=P?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>(function(y,S){let P=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return W(20277,{At:M})}};return P(y)-P(S)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new ua(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Vf,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=se(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new Uf(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new jf(r))}),t}uu(e){this.Ha=e.qs,this.Za=se();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return ua.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},$I="SyncEngine",aI=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},cI=class{constructor(e){this.key=e,this.lu=!1}},uI=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Cr(a=>gN(a),ep),this.Tu=new Map,this.Iu=new Set,this.du=new Le(H.comparator),this.Eu=new Map,this.Au=new Nu,this.Ru={},this.Vu=new Map,this.mu=Ru.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function bH(n,e,t=!0){return _(this,null,function*(){let r=QN(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield zN(r,e,t,!0),i})}function CH(n,e){return _(this,null,function*(){let t=QN(n);yield zN(t,e,!0,!1)})}function zN(n,e,t,r){return _(this,null,function*(){let i=yield uH(n.localStore,Gn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield SH(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&VN(n.remoteStore,i),a})}function SH(n,e,t,r,i){return _(this,null,function*(){n.gu=(p,m,y)=>(function(P,M,L,z){return _(this,null,function*(){let Z=M.view.nu(L);Z.Ds&&(Z=yield ER(P.localStore,M.query,!1).then(({documents:T})=>M.view.nu(T,Z)));let De=z&&z.targetChanges.get(M.targetId),Dt=z&&z.targetMismatches.get(M.targetId)!=null,_e=M.view.applyChanges(Z,P.isPrimaryClient,De,Dt);return SR(P,M.targetId,_e._u),_e.snapshot})})(n,p,m,y);let o=yield ER(n.localStore,e,!0),s=new sI(e,o.qs),a=s.nu(o.documents),u=Su.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);SR(n,t,l._u);let h=new aI(e,t,s);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot})}function AH(n,e,t){return _(this,null,function*(){let r=ee(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!ep(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield HE(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&xI(r.remoteStore,i.targetId),lI(r,i.targetId)}).catch(fa))):(lI(r,i.targetId),yield HE(r.localStore,i.targetId,!0))})}function RH(n,e){return _(this,null,function*(){let t=ee(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),xI(t.remoteStore,r.targetId))})}function NH(n,e,t){return _(this,null,function*(){let r=FH(n);try{let i=yield(function(s,a){let u=ee(s),l=Ke.now(),h=a.reduce((y,S)=>y.add(S.key),se()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=Sr(),P=se();return u.Os.getEntries(y,h).next(M=>{S=M,S.forEach((L,z)=>{z.isValidDocument()||(P=P.add(L))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,S)).next(M=>{p=M;let L=[];for(let z of a){let Z=O$(z,p.get(z.key).overlayedDocument);Z!=null&&L.push(new Yn(z.key,Z,cN(Z.value.mapValue),Wn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,L,a)}).next(M=>{m=M;let L=M.applyToLocalDocumentSet(p,P);return u.documentOverlayCache.saveOverlays(y,M.batchId,L)})}).then(()=>({batchId:m.batchId,changes:vN(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Le(ie)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,t),yield Vu(r,i.changes),yield ip(r.remoteStore)}catch(i){let o=VI(i,"Failed to persist write");t.reject(o)}})}function qN(n,e){return _(this,null,function*(){let t=ee(n);try{let r=yield sH(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(ve(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?ve(s.lu,14607):i.removedDocuments.size>0&&(ve(s.lu,42227),s.lu=!1))}),yield Vu(t,r,e)}catch(r){yield fa(r)}})}function CR(n,e,t){let r=ee(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=ee(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.wa)m.va(a)&&(l=!0)}),l&&BI(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function MH(n,e,t){return _(this,null,function*(){let r=ee(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Le(H.comparator);s=s.insert(o,Tn.newNoDocument(o,ne.min()));let a=se().add(o),u=new Df(ne.min(),new Map,new Le(ie),s,a);yield qN(r,u),r.du=r.du.remove(o),r.Eu.delete(e),HI(r)}else yield HE(r.localStore,e,!1).then(()=>lI(r,e,t)).catch(fa)})}function PH(n,e){return _(this,null,function*(){let t=ee(n),r=e.batch.batchId;try{let i=yield oH(t.localStore,e);WN(t,r,null),GN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Vu(t,i)}catch(i){yield fa(i)}})}function kH(n,e,t){return _(this,null,function*(){let r=ee(n);try{let i=yield(function(s,a){let u=ee(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(ve(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);WN(r,e,t),GN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Vu(r,i)}catch(i){yield fa(i)}})}function GN(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function WN(n,e,t){let r=ee(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function lI(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||KN(n,r)})}function KN(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(xI(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),HI(n))}function SR(n,e,t){for(let r of t)r instanceof jf?(n.Au.addReference(r.key,e),xH(n,r)):r instanceof Uf?(V($I,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||KN(n,r.key)):W(19791,{yu:r})}function xH(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(V($I,"New document in limbo: "+t),n.Iu.add(r),HI(n))}function HI(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new H(Re.fromString(e)),r=n.mu.next();n.Eu.set(r,new cI(t)),n.du=n.du.insert(t,r),VN(n.remoteStore,new Au(Gn(Xf(t.path)),r,"TargetPurposeLimboResolution",TI.ue))}}function Vu(n,e,t){return _(this,null,function*(){let r=ee(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=jE.Es(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(u,l){return _(this,null,function*(){let h=ee(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>k.forEach(l,m=>k.forEach(m.Is,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>k.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!pa(p))throw p;V(kI,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.Fs.get(m),S=y.snapshotVersion,P=y.withLastLimboFreeSnapshotVersion(S);h.Fs=h.Fs.insert(m,P)}}})})(r.localStore,o))})}function OH(n,e){return _(this,null,function*(){let t=ee(n);if(!t.currentUser.isEqual(e)){V($I,"User change. New user:",e.toKey());let r=yield LN(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new O(N.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Vu(t,r.Bs)}})}function LH(n,e){let t=ee(n),r=t.Eu.get(e);if(r&&r.lu)return se().add(r.key);{let i=se(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function QN(n){let e=ee(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=qN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=LH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MH.bind(null,e),e.hu.J_=TH.bind(null,e.eventManager),e.hu.pu=DH.bind(null,e.eventManager),e}function FH(n){let e=ee(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kH.bind(null,e),e}var YN=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return _(this,null,function*(){this.serializer=np(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return iH(this.persistence,new BE,t.initialUser,this.serializer)}Du(t){return new Nf(VE.Vi,this.serializer)}bu(t){return new zE}terminate(){return _(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),dI=class extends YN{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){ve(this.persistence.referenceDelegate instanceof Mf,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new bE(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new Nf(r=>Mf.Vi(r,t),this.serializer)}};var VH=(()=>{class n{initialize(t,r){return _(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>CR(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=OH.bind(null,this.syncEngine),yield wH(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new iI})()}createDatastore(t){let r=np(t.databaseInfo.databaseId),i=(function(s){return new QE(s)})(t.databaseInfo);return(function(s,a,u,l){return new XE(s,a,u,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,u){return new tI(i,o,s,a,u)})(this.localStore,this.datastore,t.asyncQueue,r=>CR(this.syncEngine,r,0),(function(){return kf.C()?new kf:new qE})())}createSyncEngine(t,r){return(function(o,s,a,u,l,h,p){let m=new uI(o,s,a,u,l,h);return p&&(m.fu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var t,r;yield(function(o){return _(this,null,function*(){let s=ee(o);V(Oo,"RemoteStore shutting down."),s.Ia.add(5),yield Fu(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Pu=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Tr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Ei="FirestoreClient",hI=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ot.UNAUTHENTICATED,this.clientId=Iu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>_(this,null,function*(){V(Ei,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(V(Ei,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new In;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=VI(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function L_(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),V(Ei,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>_(null,null,function*(){r.isEqual(i)||(yield LN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{mi("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{V("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{mi("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function AR(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield jH(n);V(Ei,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>TR(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>TR(e.remoteStore,i)),n._onlineComponents=e})}function jH(n){return _(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){V(Ei,"Using user provided OfflineComponentProvider");try{yield L_(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;mi("Error using user provided cache. Falling back to memory cache: "+t),yield L_(n,new YN)}}else V(Ei,"Using default OfflineComponentProvider"),yield L_(n,new dI(void 0));return n._offlineComponents})}function ZN(n){return _(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(V(Ei,"Using user provided OnlineComponentProvider"),yield AR(n,n._uninitializedComponentsProvider._online)):(V(Ei,"Using default OnlineComponentProvider"),yield AR(n,new VH))),n._onlineComponents})}function UH(n){return ZN(n).then(e=>e.syncEngine)}function Bf(n){return _(this,null,function*(){let e=yield ZN(n),t=e.eventManager;return t.onListen=bH.bind(null,e.syncEngine),t.onUnlisten=AH.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=CH.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=RH.bind(null,e.syncEngine),t})}function BH(n,e,t={}){let r=new In;return n.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return(function(o,s,a,u,l){let h=new Pu({next:m=>{h.Ou(),s.enqueueAndForget(()=>UI(o,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new O(N.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new O(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Mu(Xf(a.path),h,{includeMetadataChanges:!0,ka:!0});return jI(o,p)})(yield Bf(n),n.asyncQueue,e,t,r)})),r.promise}function $H(n,e,t={}){let r=new In;return n.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return(function(o,s,a,u,l){let h=new Pu({next:m=>{h.Ou(),s.enqueueAndForget(()=>UI(o,p)),m.fromCache&&u.source==="server"?l.reject(new O(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Mu(a,h,{includeMetadataChanges:!0,ka:!0});return jI(o,p)})(yield Bf(n),n.asyncQueue,e,t,r)})),r.promise}function JN(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var RR=new Map;var XN="firestore.googleapis.com",NR=!0,$f=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new O(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=XN,this.ssl=NR}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:NR;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ON;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<tH)throw new O(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new O(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new O(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new O(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},la=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $f({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new O(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new O(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $f(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new V_;switch(r.type){case"firstParty":return new $_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new O(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=RR.get(t);r&&(V("ComponentProvider","Removing Datastore"),RR.delete(t),r.terminate())})(this),Promise.resolve()}};function eM(n,e,t,r={}){var i;n=wn(n,la);let o=ii(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o&&(Ph(`https://${u}`),kh("Firestore",!0)),s.host!==XN&&s.host!==u&&mi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!Un(l,a)&&(n._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=ot.MOCK_USER;else{h=cA(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new O(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ot(m)}n._authCredentials=new j_(new mf(h,p))}}var Ii=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},at=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Lu(t,n._jsonSchema))return new n(e,r||null,new H(Re.fromString(t.referencePath)))}};at._jsonSchemaVersion="firestore/documentReference/1.0",at._jsonSchema={type:We("string",at._jsonSchemaVersion),referencePath:We("string")};var hi=class n extends Ii{constructor(e,t,r){super(e,t,Xf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new at(this.firestore,null,new H(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function tM(n,e,...t){if(n=xe(n),VR("collection","path",e),n instanceof la){let r=Re.fromString(e,...t);return K0(r),new hi(n,null,r)}{if(!(n instanceof at||n instanceof hi))throw new O(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Re.fromString(e,...t));return K0(r),new hi(n.firestore,null,r)}}function nM(n,e,...t){if(n=xe(n),arguments.length===1&&(e=Iu.newId()),VR("doc","path",e),n instanceof la){let r=Re.fromString(e,...t);return W0(r),new at(n,null,new H(r))}{if(!(n instanceof at||n instanceof hi))throw new O(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Re.fromString(e,...t));return W0(r),new at(n.firestore,n instanceof hi?n.converter:null,new H(r))}}var MR="AsyncQueue",Hf=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new xf(this,"async_queue_retry"),this.oc=()=>{let r=O_();r&&V(MR,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=O_();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=O_();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new In;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return _(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!pa(e))throw e;V(MR,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Tr("INTERNAL UNHANDLED ERROR: ",PR(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=nI.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&W(47125,{hc:PR(this.tc)})}verifyOperationInProgress(){}Pc(){return _(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function PR(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function kR(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var Ar=class extends la{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Hf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Hf(e),this._firestoreClient=void 0,yield e}})}};function rM(n,e){let t=typeof n=="object"?n:yo(),r=typeof n=="string"?n:e||If,i=Us(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=aA("firestore");o&&eM(i,...o)}return i}function ju(n){if(n._terminated)throw new O(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||HH(n),n._firestoreClient}function HH(n){var e,t,r;let i=n._freezeSettings(),o=(function(a,u,l,h){return new W_(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,JN(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new hI(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}})(n._componentsProvider))}var fi=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Tt.fromBase64String(e))}catch(t){throw new O(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Lu(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};fi._jsonSchemaVersion="firestore/bytes/1.0",fi._jsonSchema={type:We("string",fi._jsonSchemaVersion),bytes:We("string")};var da=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new O(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ku=class{constructor(e){this._methodName=e}};var pi=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new O(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new O(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Lu(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};pi._jsonSchemaVersion="firestore/geoPoint/1.0",pi._jsonSchema={type:We("string",pi._jsonSchemaVersion),latitude:We("number"),longitude:We("number")};var gi=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Lu(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new O(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};gi._jsonSchemaVersion="firestore/vectorValue/1.0",gi._jsonSchema={type:We("string",gi._jsonSchemaVersion),vectorValues:We("object")};var zH=/^__.*__$/,fI=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Yn(e,this.data,this.fieldMask,t,this.fieldTransforms):new xo(e,this.data,t,this.fieldTransforms)}},zf=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Yn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function iM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw W(40011,{Ec:n})}}var pI=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Gf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(iM(this.Ec)&&zH.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},gI=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||np(e)}Dc(e,t,r,i=!1){return new pI({Ec:e,methodName:t,bc:r,path:Kt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function zI(n){let e=n._freezeSettings(),t=np(n._databaseId);return new gI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function oM(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);qI("Data must be an object, but it was:",s,r);let a=sM(r,s),u,l;if(o.merge)u=new rn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=mI(e,p,t);if(!s.contains(m))throw new O(N.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);cM(h,m)||h.push(m)}u=new rn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new fI(new Wt(a),u,l)}var qf=class n extends ku{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function qH(n,e,t,r){let i=n.Dc(1,e,t);qI("Data must be an object, but it was:",i,r);let o=[],s=Wt.empty();wi(r,(u,l)=>{let h=GI(e,u,t);l=xe(l);let p=i.gc(h);if(l instanceof qf)o.push(h);else{let m=Uu(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new rn(o);return new zf(s,a,i.fieldTransforms)}function GH(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[mI(e,r,t)],u=[i];if(o.length%2!=0)throw new O(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(mI(e,o[m])),u.push(o[m+1]);let l=[],h=Wt.empty();for(let m=a.length-1;m>=0;--m)if(!cM(l,a[m])){let y=a[m],S=u[m];S=xe(S);let P=s.gc(y);if(S instanceof qf)l.push(y);else{let M=Uu(S,P);M!=null&&(l.push(y),h.set(y,M))}}let p=new rn(l);return new zf(h,p,s.fieldTransforms)}function WH(n,e,t,r=!1){return Uu(t,n.Dc(r?4:3,e))}function Uu(n,e){if(aM(n=xe(n)))return qI("Unsupported field value:",e,n),sM(n,e);if(n instanceof ku)return(function(r,i){if(!iM(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=Uu(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=xe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return N$(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ke.fromDate(r);return{timestampValue:Af(i.serializer,o)}}if(r instanceof Ke){let o=new Ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Af(i.serializer,o)}}if(r instanceof pi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof fi)return{bytesValue:AN(i.serializer,r._byteString)};if(r instanceof at){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:PI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof gi)return(function(s,a){return{mapValue:{fields:{[CI]:{stringValue:SI},[ta]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return MI(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${Yf(r)}`)})(n,e)}function sM(n,e){let t={};return eN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wi(n,(r,i)=>{let o=Uu(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function aM(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ke||n instanceof pi||n instanceof fi||n instanceof at||n instanceof ku||n instanceof gi)}function qI(n,e,t){if(!aM(t)||!jR(t)){let r=Yf(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function mI(n,e,t){if((e=xe(e))instanceof da)return e._internalPath;if(typeof e=="string")return GI(n,e);throw Gf("Field path arguments must be of type string or ",n,!1,void 0,t)}var KH=new RegExp("[~\\*/\\[\\]]");function GI(n,e,t){if(e.search(KH)>=0)throw Gf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new da(...e.split("."))._internalPath}catch{throw Gf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Gf(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new O(N.INVALID_ARGUMENT,a+n+u)}function cM(n,e){return n.some(t=>t.isEqual(e))}var Wf=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new at(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new yI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(op("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},yI=class extends Wf{data(){return super.data()}};function op(n,e){return typeof e=="string"?GI(n,e):e instanceof da?e._internalPath:e._delegate._internalPath}function uM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new O(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var xu=class{},Kf=class extends xu{};function lM(n,e,...t){let r=[];e instanceof xu&&r.push(e),r=r.concat(t),(function(o){let s=o.filter(u=>u instanceof vI).length,a=o.filter(u=>u instanceof Qf).length;if(s>1||s>0&&a>0)throw new O(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var Qf=class n extends Kf{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return fM(e._query,t),new Ii(e.firestore,e.converter,sE(e._query,t))}_parse(e){let t=zI(e.firestore);return(function(o,s,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new O(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){OR(p,h);let S=[];for(let P of p)S.push(xR(u,o,P));m={arrayValue:{values:S}}}else m=xR(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||OR(p,h),m=WH(a,s,p,h==="in"||h==="not-in");return Ge.create(l,h,m)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function dM(n,e,t){let r=e,i=op("where",n);return Qf._create(i,r,t)}var vI=class n extends xu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Dn.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)fM(s,u),s=sE(s,u)})(e._query,t),new Ii(e.firestore,e.converter,sE(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var _I=class n extends Kf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,o,s){if(i.startAt!==null)throw new O(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new O(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mo(o,s)})(e._query,this._field,this._direction);return new Ii(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new vi(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function hM(n,e="asc"){let t=e,r=op("orderBy",n);return _I._create(r,t)}function xR(n,e,t){if(typeof(t=xe(t))=="string"){if(t==="")throw new O(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pN(e)&&t.indexOf("/")!==-1)throw new O(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Re.fromString(t));if(!H.isDocumentKey(r))throw new O(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return tR(n,new H(r))}if(t instanceof at)return tR(n,t._key);throw new O(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yf(t)}.`)}function OR(n,e){if(!Array.isArray(n)||n.length===0)throw new O(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fM(n,e){let t=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new O(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new O(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var EI=class{convertValue(e,t="none"){switch(yi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ae(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(br(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw W(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return wi(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[ta].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ae(s.doubleValue));return new gi(o)}convertGeoPoint(e){return new pi(Ae(e.latitude),Ae(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Jf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Du(e));default:return null}}convertTimestamp(e){let t=Dr(e);return new Ke(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Re.fromString(e);ve(xN(r),9688,{name:e});let i=new wf(r.get(1),r.get(3)),o=new H(r.popFirst(5));return i.isEqual(t)||Tr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function pM(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Co=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},So=class n extends Wf{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Xs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(op("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new O(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};So._jsonSchemaVersion="firestore/documentSnapshot/1.0",So._jsonSchema={type:We("string",So._jsonSchemaVersion),bundleSource:We("string","DocumentSnapshot"),bundleName:We("string"),bundle:We("string")};var Xs=class extends So{data(e={}){return super.data(e)}},Ao=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Co(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Xs(this._firestore,this._userDataWriter,r.key,r,new Co(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new O(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Xs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Co(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Xs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Co(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:QH(a.type),doc:u,oldIndex:l,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new O(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Iu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function QH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return W(61501,{type:n})}}function gM(n){n=wn(n,at);let e=wn(n.firestore,Ar);return BH(ju(e),n._key).then(t=>_M(e,n,t))}Ao._jsonSchemaVersion="firestore/querySnapshot/1.0",Ao._jsonSchema={type:We("string",Ao._jsonSchemaVersion),bundleSource:We("string","QuerySnapshot"),bundleName:We("string"),bundle:We("string")};var Ou=class extends EI{constructor(e){super(),this.firestore=e}convertBytes(e){return new fi(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new at(this.firestore,null,t)}};function mM(n){n=wn(n,Ii);let e=wn(n.firestore,Ar),t=ju(e),r=new Ou(e);return uM(n._query),$H(t,n._query).then(i=>new Ao(e,r,n,i))}function yM(n,e,t){n=wn(n,at);let r=wn(n.firestore,Ar),i=pM(n.converter,e,t);return vM(r,[oM(zI(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Wn.none())])}function WI(n,...e){var t,r,i;n=xe(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||kR(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(kR(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof at)l=wn(n.firestore,Ar),h=Xf(n._key.path),u={next:p=>{e[s]&&e[s](_M(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=wn(n,Ii);l=wn(p.firestore,Ar),h=p._query;let m=new Ou(l);u={next:y=>{e[s]&&e[s](new Ao(l,m,p,y))},error:e[s+1],complete:e[s+2]},uM(n._query)}return(function(m,y,S,P){let M=new Pu(P),L=new Mu(y,M,S);return m.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return jI(yield Bf(m),L)})),()=>{M.Ou(),m.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return UI(yield Bf(m),L)}))}})(ju(l),h,a,u)}function vM(n,e){return(function(r,i){let o=new In;return r.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return NH(yield UH(r),i,o)})),o.promise})(ju(n),e)}function _M(n,e,t){let r=t.docs.get(e._key),i=new Ou(n);return new So(n,i,e._key,r,new Co(t.hasPendingWrites,t.fromCache),e.converter)}var II=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=zI(e)}set(e,t,r){this._verifyNotCommitted();let i=F_(e,this._firestore),o=pM(i.converter,t,r),s=oM(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Wn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=F_(e,this._firestore),s;return s=typeof(t=xe(t))=="string"||t instanceof da?GH(this._dataReader,"WriteBatch.update",o._key,t,r,i):qH(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Wn.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=F_(e,this._firestore);return this._mutations=this._mutations.concat(new Cu(t._key,Wn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new O(N.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function F_(n,e){if((n=xe(n)).firestore!==e)throw new O(N.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function EM(n){return ju(n=wn(n,Ar)),new II(n,e=>vM(n,e))}(function(e,t=!0){(function(i){ha=i})(si),vn(new Mt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Ar(new U_(r.getProvider("auth-internal")),new H_(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new O(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wf(l.options.projectId,h)})(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Oe(H0,z0,e),Oe(H0,z0,"esm2017")})();var sp=function(){return sp=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},sp.apply(this,arguments)};var JH={includeMetadataChanges:!1};function IM(n,e){return e===void 0&&(e=JH),new q(function(t){var r=WI(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function wM(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:sp(sp({},r),(t={},t[e.idField]=n.id,t))}function TM(n){return IM(n,{includeMetadataChanges:!0}).pipe(K(function(e){return e.docs}))}function DM(n,e){return e===void 0&&(e={}),TM(n).pipe(K(function(t){return t.map(function(r){return wM(r,e)})}))}var bn=class{constructor(e){return e}},bM="firestore",KI=class{constructor(){return $s(bM)}};var QI=new B("angularfire2.firestore-instances");function XH(n,e){let t=ru(bM,n,e);return t&&new bn(t)}function e4(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new bn(r)}}var t4={provide:KI,deps:[[new Bt,QI]]},n4={provide:bn,useFactory:XH,deps:[[new Bt,QI],yr]};function CM(n,...e){return Oe("angularfire",ai.full,"fst"),yt([n4,t4,{provide:QI,useFactory:e4(n),multi:!0,deps:[de,Ne,ci,_o,[new Bt,pu],[new Bt,Hs],...e]}])}var SM=He(DM,!0);var Bu=He(tM,!0,2);var ap=He(nM,!0,2);var AM=He(gM,!0);var RM=He(mM,!0);var NM=He(rM,!0);var MM=He(hM,!0,2),PM=He(lM,!0,2);var YI=He(yM,!0,2);var kM=He(dM,!0,2),xM=He(EM,!0,2);var cp=class n{constructor(e){this.firestore=e}getThings(){let e={fromFirestore:i=>{let o=i.data();return{id:i.id,name:o.name,description:o.description,location:o.location,photoURL:o.photoURL,createdAt:o.createdAt,owner:o.owner,status:o.status,metadata:o.metadata}},toFirestore:i=>({name:i.name,description:i.description,location:i.location,photoURL:i.photoURL,createdAt:i.createdAt,owner:i.owner,status:i.status,metadata:i.metadata})},t=Bu(this.firestore,"Things"),r=PM(t,kM("status","==","ON"),MM("createdAt","desc")).withConverter(e);return SM(r)}static \u0275fac=function(t){return new(t||n)($(bn))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var i4=(n,e)=>e.id;function o4(n,e){if(n&1&&(dt(0,"div",3)(1,"div",5),_c(2,"img",6),dt(3,"div",7)(4,"h5",8),pe(5),Et(),dt(6,"p",9),pe(7),Et(),dt(8,"a",10),pe(9," Ver Detalhes "),_c(10,"i",11),Et()()()()),n&2){let t=e.$implicit;_t(2),Hd("src",t.photoURL,no)("alt",t.name),_t(3),ao(t.name),_t(2),ao(t.description)}}function s4(n,e){n&1&&(dt(0,"div",4)(1,"div",12),pe(2,"Nenhum item em destaque."),Et(),dt(3,"p"),pe(4,"Voc\xEA pode criar itens de teste acessando a rota "),dt(5,"a",13),pe(6,"/seed-data"),Et(),pe(7,"."),Et()())}function a4(n,e){n&1&&gy(0,o4,11,4,"div",3,i4,!1,s4,8,0,"div",4),n&2&&my(e)}var up=class n{constructor(e){this.dataService=e}things$;ngOnInit(){this.things$=this.dataService.getThings()}static \u0275fac=function(t){return new(t||n)(Ze(cp))};static \u0275cmp=$t({type:n,selectors:[["app-home"]],decls:6,vars:3,consts:[[1,"container","mt-2"],[1,"mb-4","text-center"],[1,"row"],[1,"col-12","col-sm-6","col-md-4","mb-4"],[1,"col-12","text-center","mt-5"],[1,"card","shadow-sm","h-100"],[1,"card-img-top",2,"height","200px","object-fit","cover",3,"src","alt"],[1,"card-body","d-flex","flex-column"],[1,"card-title","text-primary"],[1,"card-text","text-muted","small","mt-auto"],["href","#",1,"btn","btn-sm","btn-outline-secondary"],[1,"bi","bi-arrow-right-circle"],[1,"alert","alert-warning"],["href","/seed-data"]],template:function(t,r){if(t&1&&(dt(0,"div",0)(1,"h2",1),pe(2,"Coisas em Destaque"),Et(),dt(3,"div",2),dr(4,a4,3,1),Ts(5,"async"),Et()()),t&2){let i;_t(4),hr((i=Ds(5,1,r.things$))?4:-1,i)}},dependencies:[Jr,Ac],encapsulation:2})};var lp=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$t({type:n,selectors:[["app-contacts"]],decls:2,vars:0,template:function(t,r){t&1&&(dt(0,"p"),pe(1,"contacts works!"),Et())},encapsulation:2})};var dp=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$t({type:n,selectors:[["app-about"]],decls:2,vars:0,template:function(t,r){t&1&&(dt(0,"p"),pe(1,"about works!"),Et())},encapsulation:2})};var c4=(n,e,t)=>({"alert-success":n,"alert-info":e,"alert-danger":t});function u4(n,e){n&1&&(we(0,"div",3)(1,"span",5),pe(2,"Loading..."),Te()())}function l4(n,e){if(n&1&&(we(0,"div",4),pe(1),Te()),n&2){let t=Yr();so("ngClass",yy(2,c4,t.feedbackMessage.includes("sucesso"),t.feedbackMessage.includes("j\xE1 existe"),t.feedbackMessage.includes("erro"))),_t(),Ic(" ",t.feedbackMessage," ")}}var hp=class n{constructor(e){this.firestore=e;this.checkAndSeedData()}feedbackMessage=null;isLoading=!0;owners=["4j2oIn4DlqbS91MDgHr5l0HRwTf2","t3CQISBwVWP0CAFrNMnVfFSXRaK2"];checkAndSeedData(){return _(this,null,function*(){try{let e=Bu(this.firestore,"Things");(yield RM(e)).empty?(yield this.seedData(),this.feedbackMessage='Cole\xE7\xE3o "Things" criada e populada com 15 itens!'):this.feedbackMessage='A cole\xE7\xE3o "Things" j\xE1 existe. Nenhuma a\xE7\xE3o foi necess\xE1ria.'}catch(e){console.error("Erro ao verificar ou criar dados:",e),this.feedbackMessage="Ocorreu um erro ao processar a solicita\xE7\xE3o."}finally{this.isLoading=!1}})}seedData(){return _(this,null,function*(){let e=xM(this.firestore),t=Bu(this.firestore,"Things");for(let r=1;r<=15;r++){let i=this.getRandomDate(),o=this.owners[Math.floor(Math.random()*this.owners.length)],s={name:`Coisa N\xBA ${r}`,description:`Descri\xE7\xE3o completa e sem embara\xE7os da coisa n\xFAmero ${r}.`,location:`Localiza\xE7\xE3o secreta e bem escondida da coisa ${r}`,photoURL:`https://picsum.photos/400/300?random=${r}`,createdAt:i,owner:o,status:"ON",metadata:{}},a=ap(t);e.set(a,s)}yield e.commit()})}getRandomDate(){let e=new Date,t=new Date;t.setMonth(e.getMonth()-6);let r=t.getTime()+Math.random()*(e.getTime()-t.getTime());return new Date(r).toISOString()}static \u0275fac=function(t){return new(t||n)(Ze(bn))};static \u0275cmp=$t({type:n,selectors:[["app-seed-data"]],decls:7,vars:2,consts:[[1,"container","mt-5"],[1,"row","justify-content-center"],[1,"col-md-8","text-center"],["role","status",1,"spinner-border","text-primary","mt-4"],[1,"alert","mt-4",3,"ngClass"],[1,"visually-hidden"]],template:function(t,r){t&1&&(we(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),pe(4,"Popula\xE7\xE3o de Dados"),Te(),dr(5,u4,3,0,"div",3),dr(6,l4,2,6,"div",4),Te()()()),t&2&&(_t(5),hr(r.isLoading?5:-1),_t(),hr(r.feedbackMessage?6:-1))},dependencies:[Jr,Ry],encapsulation:2})};var fp="NgCRUD",OM=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:up,title:fp},{path:"contacts",component:lp,title:`${fp} - Fa\xE7a Contato`},{path:"about",component:dp,title:`${fp} - Sobre`},{path:"seed-data",component:hp,title:`${fp} - Cadastro de Coisas`},{path:"**",redirectTo:"/home"}];var JI="Service workers are disabled or not supported by this browser",ma=class{serviceWorker;worker;registration;events;constructor(e,t){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new q(r=>r.error(new U(5601,!1)));else{let r=null,i=new ke;this.worker=new q(l=>(r!==null&&l.next(r),i.subscribe(h=>l.next(h))));let o=()=>{let{controller:l}=e;l!==null&&(r=l,i.next(r))};e.addEventListener("controllerchange",o),o(),this.registration=this.worker.pipe(Se(()=>e.getRegistration().then(l=>{if(!l)throw new U(5601,!1);return l})));let s=new ke;this.events=s.asObservable();let a=l=>{let{data:h}=l;h?.type&&s.next(h)};e.addEventListener("message",a),t?.get(kn,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",o),e.removeEventListener("message",a)})}}postMessage(e,t){return new Promise(r=>{this.worker.pipe(St(1)).subscribe(i=>{i.postMessage(F({action:e},t)),r()})})}postMessageWithOperation(e,t,r){let i=this.waitForOperationCompleted(r),o=this.postMessage(e,t);return Promise.all([o,i]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=r=>r.type===e:t=r=>e.includes(r.type),this.events.pipe(et(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(St(1))}waitForOperationCompleted(e){return new Promise((t,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(et(i=>i.nonce===e),St(1),K(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:t,error:r})})}get isEnabled(){return!!this.serviceWorker}},d4=(()=>{class n{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new ke;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=tr,this.notificationClicks=tr,this.notificationCloses=tr,this.pushSubscriptionChanges=tr,this.subscription=tr;return}this.messages=this.sw.eventsOfType("PUSH").pipe(K(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(K(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(K(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(K(i=>i.data)),this.pushManager=this.sw.registration.pipe(K(i=>i.pushManager));let r=this.pushManager.pipe(Se(i=>i.getSubscription()));this.subscription=new q(i=>{let o=r.subscribe(i),s=this.subscriptionChanges.subscribe(i);return()=>{o.unsubscribe(),s.unsubscribe()}})}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(JI));let r={userVisibleOnly:!0},i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return r.applicationServerKey=o,new Promise((s,a)=>{this.pushManager.pipe(Se(u=>u.subscribe(r)),St(1)).subscribe({next:u=>{this.subscriptionChanges.next(u),s(u)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(JI));let t=r=>{if(r===null)throw new U(5602,!1);return r.unsubscribe().then(i=>{if(!i)throw new U(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,i)=>{this.subscription.pipe(St(1),Se(t)).subscribe({next:r,error:i})})}decodeBase64(t){return atob(t)}static \u0275fac=function(r){return new(r||n)($(ma))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),h4=(()=>{class n{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=tr,this.unrecoverable=tr;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED","VERSION_FAILED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(JI));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let t=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new U(5601,!1));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(r){return new(r||n)($(ma))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})();var FM=new B("");function f4(){let n=R($u);if(!("serviceWorker"in navigator&&n.enabled!==!1))return;let e=R(FM),t=R(de),r=R(kn);t.runOutsideAngular(()=>{let i=navigator.serviceWorker,o=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",o),r.onDestroy(()=>{i.removeEventListener("controllerchange",o)})}),t.runOutsideAngular(()=>{let i,{registrationStrategy:o}=n;if(typeof o=="function")i=new Promise(s=>o().subscribe(()=>s()));else{let[s,...a]=(o||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=LM(+a[0]||0);break;case"registerWhenStable":i=Promise.race([r.whenStable(),LM(+a[0])]);break;default:throw new U(5600,!1)}}i.then(()=>{r.destroyed||navigator.serviceWorker.register(e,{scope:n.scope,updateViaCache:n.updateViaCache,type:n.type}).catch(s=>console.error($r(5604,!1)))})})}function LM(n){return new Promise(e=>setTimeout(e,n))}function p4(n,e){return new ma(n.enabled!==!1?navigator.serviceWorker:void 0,e)}var $u=class{enabled;updateViaCache;type;scope;registrationStrategy};function VM(n,e={}){return yt([d4,h4,{provide:FM,useValue:n},{provide:$u,useValue:e},{provide:ma,useFactory:p4,deps:[$u,Ne]},Es(f4)])}var jM={providers:[am(),Ey({eventCoalescing:!0}),pv(OM),OA(()=>LA({projectId:"ngcrud-93a6f",appId:"1:1043187476281:web:777f337c87a8d171d22ae8",storageBucket:"ngcrud-93a6f.firebasestorage.app",apiKey:"AIzaSyDHQPWxYc2Xc2xXwW2dh6bg1Bup7vjYNrk",authDomain:"ngcrud-93a6f.firebaseapp.com",messagingSenderId:"1043187476281"})),L0(()=>V0()),CM(()=>NM()),VM("ngsw-worker.js",{enabled:!Dc(),registrationStrategy:"registerWhenStable:30000"})]};var pp=class n{constructor(e,t){this.auth=e;this.firestore=t;this.user$=Pi(()=>F0(this.auth)).pipe(Se(r=>{if(!r)return new q(o=>o.next(null));let i=ap(this.firestore,"Users",r.uid);return Ie(AM(i)).pipe(Se(o=>{let s=new Date().toISOString();if(o.exists())return Ie(YI(i,{lastLoginAt:s},{merge:!0})).pipe(K(()=>r));{let a={displayName:r.displayName,email:r.email,photoURL:r.photoURL,uid:r.uid,lastLoginAt:s,role:"user",status:"ON",createdAt:s};return Ie(YI(i,a)).pipe(K(()=>r))}}))}))}user$;loginWithGoogle(){return j0(this.auth,new __)}logout(){return U0(this.auth)}static \u0275fac=function(t){return new(t||n)($(To),$(bn))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};function m4(n,e){if(n&1){let t=ws();we(0,"a",31),fr("click",function(){Gi(t);let i=Yr();return Wi(i.confirmLogout())}),rt(1,"img",32),Te()}if(n&2){let t=e;_t(),so("src",t.photoURL,no)("alt",t.displayName)("title",t.displayName)}}function y4(n,e){if(n&1){let t=ws();we(0,"a",31),fr("click",function(){Gi(t);let i=Yr();return Wi(i.authService.loginWithGoogle())}),rt(1,"i",33),Te()}}function v4(n,e){if(n&1){let t=ws();we(0,"a",34),fr("click",function(){Gi(t);let i=Yr();return Wi(i.confirmLogout())}),rt(1,"img",35),we(2,"span"),pe(3),Te()()}if(n&2){let t=e;_t(),so("src",t.photoURL,no)("alt",t.displayName)("title",t.displayName),_t(2),ao(t.displayName)}}function _4(n,e){if(n&1){let t=ws();we(0,"a",34),fr("click",function(){Gi(t);let i=Yr();return Wi(i.authService.loginWithGoogle())}),rt(1,"i",36),we(2,"span"),pe(3,"Login"),Te()()}}var gp=class n{constructor(e){this.authService=e}title="ngcrud";confirmLogout(){confirm("Tem certeza que deseja sair?")&&this.authService.logout()}static \u0275fac=function(t){return new(t||n)(Ze(pp))};static \u0275cmp=$t({type:n,selectors:[["app-root"]],decls:56,vars:6,consts:[[1,"d-flex","flex-column","min-vh-100"],[1,"navbar","navbar-expand-sm","bg-dark","navbar-dark"],[1,"container"],["routerLink","/home",1,"navbar-brand"],[1,"bi","bi-database"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#offcanvasNavbar","aria-controls","offcanvasNavbar",1,"navbar-toggler","d-sm-none"],[1,"navbar-toggler-icon"],["id","collapsibleNavbar",1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto","align-items-center"],[1,"nav-item"],["routerLink","/home",1,"nav-link"],["routerLink","/contacts",1,"nav-link"],["routerLink","/about",1,"nav-link"],[1,"nav-link"],["tabindex","-1","id","offcanvasNavbar","aria-labelledby","offcanvasNavbarLabel",1,"offcanvas","offcanvas-end","text-bg-dark","d-sm-none"],[1,"offcanvas-header"],["id","offcanvasNavbarLabel",1,"offcanvas-title"],[1,"bi","bi-database-fill"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close","btn-close-white"],[1,"offcanvas-body"],[1,"navbar-nav","justify-content-end","flex-grow-1","pe-3"],["routerLink","/home",1,"nav-link","ps-2"],[1,"bi","bi-house-fill","pe-2",2,"font-size","1.2rem"],["routerLink","/contacts",1,"nav-link","ps-2"],[1,"bi","bi-chat-dots-fill","pe-2",2,"font-size","1.2rem"],["routerLink","/about",1,"nav-link","ps-2"],[1,"bi","bi-info-circle-fill","pe-2",2,"font-size","1.2rem"],["data-bs-dismiss","offcanvas",1,"nav-link","ps-2","d-flex","align-items-center"],[1,"container","flex-grow-1"],[1,"bg-dark","text-white","text-center","p-3","mt-4"],[1,"mb-0"],[1,"nav-link",3,"click"],["width","32","height","32",1,"rounded-circle",3,"src","alt","title"],[1,"bi","bi-person-circle",2,"font-size","1.5rem"],["data-bs-dismiss","offcanvas",1,"nav-link","ps-2","d-flex","align-items-center",3,"click"],["width","32","height","32",1,"rounded-circle","me-2",3,"src","alt","title"],[1,"bi","bi-person-circle","me-2",2,"font-size","2rem"]],template:function(t,r){if(t&1&&(we(0,"div",0)(1,"nav",1)(2,"div",2)(3,"a",3),pe(4,"NG"),rt(5,"i",4),pe(6,"CRUD"),Te(),we(7,"button",5),rt(8,"span",6),Te(),we(9,"div",7)(10,"ul",8)(11,"li",9)(12,"a",10),pe(13,"In\xEDcio"),Te()(),we(14,"li",9)(15,"a",11),pe(16,"Contatos"),Te()(),we(17,"li",9)(18,"a",12),pe(19,"Sobre"),Te()(),we(20,"li",9),dr(21,m4,2,3,"a",13),Ts(22,"async"),Is(23,y4,2,0,"a",13),Te()()()()(),we(24,"div",14)(25,"div",15)(26,"h1",16),pe(27,"NG"),rt(28,"i",17),pe(29,"CRUD"),Te(),rt(30,"button",18),Te(),we(31,"div",19)(32,"ul",20)(33,"li",9)(34,"a",21),rt(35,"i",22),pe(36,"In\xEDcio"),Te()(),we(37,"li",9)(38,"a",23),rt(39,"i",24),pe(40,"Contatos"),Te()(),we(41,"li",9)(42,"a",25),rt(43,"i",26),pe(44,"Sobre"),Te()(),we(45,"li",9),rt(46,"hr"),Te(),we(47,"li",9),dr(48,v4,4,4,"a",27),Ts(49,"async"),Is(50,_4,4,0,"a",27),Te()()()(),we(51,"main",28),rt(52,"router-outlet"),Te(),we(53,"footer",29)(54,"p",30),pe(55,"\xA9 Copyright 2025 Joca da Silva"),Te()()()),t&2){let i,o;_t(21),hr((i=Ds(22,2,r.authService.user$))?21:23,i),_t(27),hr((o=Ds(49,4,r.authService.user$))?48:50,o)}},dependencies:[Jr,Wc,mv,Ah,Ac],styles:["@media (max-width: 575.98px){.offcanvas[_ngcontent-%COMP%]{max-width:280px}}a[_ngcontent-%COMP%]{cursor:pointer}.nav-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}"]})};Uy(gp,jM).catch(n=>console.error(n));

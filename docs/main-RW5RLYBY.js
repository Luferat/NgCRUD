var yO=Object.defineProperty,vO=Object.defineProperties;var _O=Object.getOwnPropertyDescriptors;var ob=Object.getOwnPropertySymbols,EO=Object.getPrototypeOf,IO=Object.prototype.hasOwnProperty,wO=Object.prototype.propertyIsEnumerable,DO=Reflect.get;var sb=(t,e,n)=>e in t?yO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,k=(t,e)=>{for(var n in e||={})IO.call(e,n)&&sb(t,n,e[n]);if(ob)for(var n of ob(e))wO.call(e,n)&&sb(t,n,e[n]);return t},re=(t,e)=>vO(t,_O(e));var pi=(t,e,n)=>DO(EO(t),n,e);var _=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{a(n.next(u))}catch(l){i(l)}},s=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((n=n.apply(t,e)).next())});var um;function sd(){return um}function er(t){let e=um;return um=t,e}var ab=Symbol("NotFound");function vs(t){return t===ab||t?.name==="\u0275NotFound"}function dd(t,e){return Object.is(t,e)}var Nt=null,ad=!1,lm=1,TO=null,Ut=Symbol("SIGNAL");function ne(t){let e=Nt;return Nt=t,e}function hd(){return Nt}var _s={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Es(t){if(ad)throw new Error("");if(Nt===null)return;Nt.consumerOnSignalRead(t);let e=Nt.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=Nt.recomputing;if(r&&(n=e!==void 0?e.nextProducer:Nt.producers,n!==void 0&&n.producer===t)){Nt.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===Nt&&(!r||CO(i,Nt)))return;let o=ws(Nt),s={producer:t,consumer:Nt,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};Nt.producersTail=s,e!==void 0?e.nextProducer=s:Nt.producers=s,o&&db(t,s)}function cb(){lm++}function fd(t){if(!(ws(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===lm)){if(!t.producerMustRecompute(t)&&!Sc(t)){ld(t);return}t.producerRecomputeValue(t),ld(t)}}function dm(t){if(t.consumers===void 0)return;let e=ad;ad=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||bO(r)}}finally{ad=e}}function hm(){return Nt?.consumerAllowSignalWrites!==!1}function bO(t){t.dirty=!0,dm(t),t.consumerMarkedDirty?.(t)}function ld(t){t.dirty=!1,t.lastCleanEpoch=lm}function Is(t){return t&&ub(t),ne(t)}function ub(t){t.producersTail=void 0,t.recomputing=!0}function Cc(t,e){ne(e),t&&lb(t)}function lb(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(ws(t))do n=fm(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function Sc(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(fd(n),r!==n.version))return!0}return!1}function Ac(t){if(ws(t)){let e=t.producers;for(;e!==void 0;)e=fm(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function db(t,e){let n=t.consumersTail,r=ws(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)db(i.producer,i)}function fm(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!ws(e)){let o=e.producers;for(;o!==void 0;)o=fm(o)}return n}function ws(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function pd(t){TO?.(t)}function CO(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function gd(t,e){let n=Object.create(SO);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(fd(n),Es(n),n.value===bc)throw n.error;return n.value};return r[Ut]=n,pd(n),r}var cd=Symbol("UNSET"),ud=Symbol("COMPUTING"),bc=Symbol("ERRORED"),SO=re(k({},_s),{value:cd,dirty:!0,error:null,equal:dd,kind:"computed",producerMustRecompute(t){return t.value===cd||t.value===ud},producerRecomputeValue(t){if(t.value===ud)throw new Error("");let e=t.value;t.value=ud;let n=Is(t),r,i=!1;try{r=t.computation(),ne(null),i=e!==cd&&e!==bc&&r!==bc&&t.equal(e,r)}catch(o){r=bc,t.error=o}finally{Cc(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function AO(){throw new Error}var hb=AO;function fb(t){hb(t)}function pm(t){hb=t}var RO=null;function gm(t,e){let n=Object.create(md);n.value=t,e!==void 0&&(n.equal=e);let r=()=>pb(n);return r[Ut]=n,pd(n),[r,s=>Ds(n,s),s=>mm(n,s)]}function pb(t){return Es(t),t.value}function Ds(t,e){hm()||fb(t),t.equal(t.value,e)||(t.value=e,NO(t))}function mm(t,e){hm()||fb(t),Ds(t,e(t.value))}var md=re(k({},_s),{equal:dd,value:void 0,kind:"signal"});function NO(t){t.version++,cb(),dm(t),RO?.(t)}function ae(t){return typeof t=="function"}function Ts(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var yd=Ts(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ho(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var je=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ae(r))try{r()}catch(o){e=o instanceof yd?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{gb(o)}catch(s){e=e??[],s instanceof yd?e=[...e,...s.errors]:e.push(s)}}if(e)throw new yd(e)}}add(e){var n;if(e&&e!==this)if(this.closed)gb(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ho(n,e)}remove(e){let{_finalizers:n}=this;n&&ho(n,e),e instanceof t&&e._removeParent(this)}};je.EMPTY=(()=>{let t=new je;return t.closed=!0,t})();var ym=je.EMPTY;function vd(t){return t instanceof je||t&&"closed"in t&&ae(t.remove)&&ae(t.add)&&ae(t.unsubscribe)}function gb(t){ae(t)?t():t.unsubscribe()}var Rn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var bs={setTimeout(t,e,...n){let{delegate:r}=bs;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=bs;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function _d(t){bs.setTimeout(()=>{let{onUnhandledError:e}=Rn;if(e)e(t);else throw t})}function fo(){}var mb=vm("C",void 0,void 0);function yb(t){return vm("E",void 0,t)}function vb(t){return vm("N",t,void 0)}function vm(t,e,n){return{kind:t,value:e,error:n}}var po=null;function Cs(t){if(Rn.useDeprecatedSynchronousErrorHandling){let e=!po;if(e&&(po={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=po;if(po=null,n)throw r}}else t()}function _b(t){Rn.useDeprecatedSynchronousErrorHandling&&po&&(po.errorThrown=!0,po.error=t)}var go=class extends je{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,vd(e)&&e.add(this)):this.destination=xO}static create(e,n,r){return new Ss(e,n,r)}next(e){this.isStopped?Em(vb(e),this):this._next(e)}error(e){this.isStopped?Em(yb(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Em(mb,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},MO=Function.prototype.bind;function _m(t,e){return MO.call(t,e)}var Im=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ed(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ed(r)}else Ed(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ed(n)}}},Ss=class extends go{constructor(e,n,r){super();let i;if(ae(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Rn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&_m(e.next,o),error:e.error&&_m(e.error,o),complete:e.complete&&_m(e.complete,o)}):i=e}this.destination=new Im(i)}};function Ed(t){Rn.useDeprecatedSynchronousErrorHandling?_b(t):_d(t)}function PO(t){throw t}function Em(t,e){let{onStoppedNotification:n}=Rn;n&&bs.setTimeout(()=>n(t,e))}var xO={closed:!0,next:fo,error:PO,complete:fo};var As=typeof Symbol=="function"&&Symbol.observable||"@@observable";function nn(t){return t}function Id(...t){return wm(t)}function wm(t){return t.length===0?nn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Y=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=OO(n)?n:new Ss(n,r,i);return Cs(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Eb(r),new r((i,o)=>{let s=new Ss({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[As](){return this}pipe(...n){return wm(n)(this)}toPromise(n){return n=Eb(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Eb(t){var e;return(e=t??Rn.Promise)!==null&&e!==void 0?e:Promise}function kO(t){return t&&ae(t.next)&&ae(t.error)&&ae(t.complete)}function OO(t){return t&&t instanceof go||kO(t)&&vd(t)}function Dm(t){return ae(t?.lift)}function ve(t){return e=>{if(Dm(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function fe(t,e,n,r,i){return new Tm(t,e,n,r,i)}var Tm=class extends go{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Rs(){return ve((t,e)=>{let n=null;t._refCount++;let r=fe(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Ns=class extends Y{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Dm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new je;let n=this.getSubject();e.add(this.source.subscribe(fe(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=je.EMPTY)}return e}refCount(){return Rs()(this)}};var Ib=Ts(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Pe=(()=>{class t extends Y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new wd(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Ib}next(n){Cs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Cs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Cs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?ym:(this.currentObservers=null,o.push(n),new je(()=>{this.currentObservers=null,ho(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new Y;return n.source=this,n}}return t.create=(e,n)=>new wd(e,n),t})(),wd=class extends Pe{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:ym}};var Et=class extends Pe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var bm={now(){return(bm.delegate||Date).now()},delegate:void 0};var Dd=class extends je{constructor(e,n){super()}schedule(e,n=0){return this}};var Rc={setInterval(t,e,...n){let{delegate:r}=Rc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Rc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Ms=class extends Dd{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Rc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Rc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ho(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Ps=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Ps.now=bm.now;var xs=class extends Ps{constructor(e,n=Ps.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Cm=new xs(Ms);var Td=class extends Ms{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var bd=class extends xs{};var Sm=new bd(Td);var Wt=new Y(t=>t.complete());function wb(t){return t&&ae(t.schedule)}function Db(t){return t[t.length-1]}function Cd(t){return ae(Db(t))?t.pop():void 0}function gi(t){return wb(Db(t))?t.pop():void 0}function Sd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function bb(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function Tb(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function mo(t){return this instanceof mo?(this.v=t,this):new mo(t)}function Cb(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(D){return Promise.resolve(D).then(y,p)}}function a(y,D){r[y]&&(i[y]=function(N){return new Promise(function(R,O){o.push([y,N,R,O])>1||u(y,N)})},D&&(i[y]=D(i[y])))}function u(y,D){try{l(r[y](D))}catch(N){g(o[0][3],N)}}function l(y){y.value instanceof mo?Promise.resolve(y.value.v).then(h,p):g(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function g(y,D){y(D),o.shift(),o.length&&u(o[0][0],o[0][1])}}function Sb(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Tb=="function"?Tb(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Ad=t=>t&&typeof t.length=="number"&&typeof t!="function";function Rd(t){return ae(t?.then)}function Nd(t){return ae(t[As])}function Md(t){return Symbol.asyncIterator&&ae(t?.[Symbol.asyncIterator])}function Pd(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function FO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var xd=FO();function kd(t){return ae(t?.[xd])}function Od(t){return Cb(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield mo(n.read());if(i)return yield mo(void 0);yield yield mo(r)}}finally{n.releaseLock()}})}function Fd(t){return ae(t?.getReader)}function Qe(t){if(t instanceof Y)return t;if(t!=null){if(Nd(t))return LO(t);if(Ad(t))return VO(t);if(Rd(t))return jO(t);if(Md(t))return Ab(t);if(kd(t))return UO(t);if(Fd(t))return BO(t)}throw Pd(t)}function LO(t){return new Y(e=>{let n=t[As]();if(ae(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function VO(t){return new Y(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function jO(t){return new Y(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,_d)})}function UO(t){return new Y(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Ab(t){return new Y(e=>{$O(t,e).catch(n=>e.error(n))})}function BO(t){return Ab(Od(t))}function $O(t,e){var n,r,i,o;return bb(this,void 0,void 0,function*(){try{for(n=Sb(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Kt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function mi(t,e=0){return ve((n,r)=>{n.subscribe(fe(r,i=>Kt(r,t,()=>r.next(i),e),()=>Kt(r,t,()=>r.complete(),e),i=>Kt(r,t,()=>r.error(i),e)))})}function yi(t,e=0){return ve((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Rb(t,e){return Qe(t).pipe(yi(e),mi(e))}function Nb(t,e){return Qe(t).pipe(yi(e),mi(e))}function Mb(t,e){return new Y(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Pb(t,e){return new Y(n=>{let r;return Kt(n,e,()=>{r=t[xd](),Kt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>ae(r?.return)&&r.return()})}function Ld(t,e){if(!t)throw new Error("Iterable cannot be null");return new Y(n=>{Kt(n,e,()=>{let r=t[Symbol.asyncIterator]();Kt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function xb(t,e){return Ld(Od(t),e)}function kb(t,e){if(t!=null){if(Nd(t))return Rb(t,e);if(Ad(t))return Mb(t,e);if(Rd(t))return Nb(t,e);if(Md(t))return Ld(t,e);if(kd(t))return Pb(t,e);if(Fd(t))return xb(t,e)}throw Pd(t)}function pe(t,e){return e?kb(t,e):Qe(t)}function Z(...t){let e=gi(t);return pe(t,e)}function Nn(t,e){let n=ae(t)?t:()=>t,r=i=>i.error(n());return new Y(e?i=>e.schedule(r,0,i):r)}function Am(t){return!!t&&(t instanceof Y||ae(t.lift)&&ae(t.subscribe))}var Nr=Ts(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function G(t,e){return ve((n,r)=>{let i=0;n.subscribe(fe(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:HO}=Array;function qO(t,e){return HO(e)?t(...e):t(e)}function Vd(t){return G(e=>qO(t,e))}var{isArray:zO}=Array,{getPrototypeOf:GO,prototype:WO,keys:KO}=Object;function jd(t){if(t.length===1){let e=t[0];if(zO(e))return{args:e,keys:null};if(QO(e)){let n=KO(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function QO(t){return t&&typeof t=="object"&&GO(t)===WO}function Ud(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Nc(...t){let e=gi(t),n=Cd(t),{args:r,keys:i}=jd(t);if(r.length===0)return pe([],e);let o=new Y(YO(r,e,i?s=>Ud(i,s):nn));return n?o.pipe(Vd(n)):o}function YO(t,e,n=nn){return r=>{Ob(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)Ob(e,()=>{let l=pe(t[u],e),h=!1;l.subscribe(fe(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Ob(t,e,n){t?Kt(n,t,e):e()}function Fb(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=N=>l<r?D(N):u.push(N),D=N=>{o&&e.next(N),l++;let R=!1;Qe(n(N,h++)).subscribe(fe(e,O=>{i?.(O),o?y(O):e.next(O)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let O=u.shift();s?Kt(e,s,()=>D(O)):D(O)}g()}catch(O){e.error(O)}}))};return t.subscribe(fe(e,y,()=>{p=!0,g()})),()=>{a?.()}}function $e(t,e,n=1/0){return ae(e)?$e((r,i)=>G((o,s)=>e(r,o,i,s))(Qe(t(r,i))),n):(typeof e=="number"&&(n=e),ve((r,i)=>Fb(r,i,t,n)))}function ks(t=1/0){return $e(nn,t)}function Lb(){return ks(1)}function Os(...t){return Lb()(pe(t,gi(t)))}function yo(t){return new Y(e=>{Qe(t()).subscribe(e)})}function Rm(...t){let e=Cd(t),{args:n,keys:r}=jd(t),i=new Y(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Qe(n[h]).subscribe(fe(o,g=>{p||(p=!0,l--),a[h]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Ud(r,a):a),o.complete())}))}});return e?i.pipe(Vd(e)):i}var Mr=new Y(fo);function ft(t,e){return ve((n,r)=>{let i=0;n.subscribe(fe(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Bt(t){return ve((e,n)=>{let r=null,i=!1,o;r=e.subscribe(fe(n,void 0,void 0,s=>{o=Qe(t(s,Bt(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Vb(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(fe(s,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function vi(t,e){return ae(e)?$e(t,e,1):$e(t,1)}function _i(t){return ve((e,n)=>{let r=!1;e.subscribe(fe(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function ct(t){return t<=0?()=>Wt:ve((e,n)=>{let r=0;e.subscribe(fe(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Bd(t=ZO){return ve((e,n)=>{let r=!1;e.subscribe(fe(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function ZO(){return new Nr}function Mc(t){return ve((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Pr(t,e){let n=arguments.length>=2;return r=>r.pipe(t?ft((i,o)=>t(i,o,r)):nn,ct(1),n?_i(e):Bd(()=>new Nr))}function Fs(t){return t<=0?()=>Wt:ve((e,n)=>{let r=[];e.subscribe(fe(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Nm(t,e){let n=arguments.length>=2;return r=>r.pipe(t?ft((i,o)=>t(i,o,r)):nn,Fs(1),n?_i(e):Bd(()=>new Nr))}function $d(t,e){return ve(Vb(t,e,arguments.length>=2,!0))}function Hd(...t){let e=gi(t);return ve((n,r)=>{(e?Os(t,n,e):Os(t,n)).subscribe(r)})}function xe(t,e){return ve((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(fe(r,u=>{i?.unsubscribe();let l=0,h=o++;Qe(t(u,h)).subscribe(i=fe(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function qd(t){return ve((e,n)=>{Qe(t).subscribe(fe(n,()=>n.complete(),fo)),!n.closed&&e.subscribe(n)})}function pt(t,e,n){let r=ae(t)||e||n?{next:t,error:e,complete:n}:t;return r?ve((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(fe(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):nn}function jb(t){let e=ne(null);try{return t()}finally{ne(e)}}var Ei=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Hm=new Ei("20.3.1");var Kd="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",V=class extends Error{code;constructor(e,n){super(Di(e,n)),this.code=e}};function JO(t){return`NG0${Math.abs(t)}`}function Di(t,e){return`${JO(t)}${e?": "+e:""}`}var Fr=globalThis;function De(t){for(let e in t)if(t[e]===De)return e;throw Error("")}function $b(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function kr(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(kr).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function qm(t,e){return t?e?`${t} ${e}`:t:e||""}var XO=De({__forward_ref__:De});function Ti(t){return t.__forward_ref__=Ti,t.toString=function(){return kr(this())},t}function It(t){return zm(t)?t():t}function zm(t){return typeof t=="function"&&t.hasOwnProperty(XO)&&t.__forward_ref__===Ti}function H(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function gn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Oc(t){return e1(t,Qd)}function Gm(t){return Oc(t)!==null}function e1(t,e){return t.hasOwnProperty(e)&&t[e]||null}function t1(t){let e=t?.[Qd]??null;return e||null}function Pm(t){return t&&t.hasOwnProperty(Gd)?t[Gd]:null}var Qd=De({\u0275prov:De}),Gd=De({\u0275inj:De}),U=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=H({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Wm(t){return t&&!!t.\u0275providers}var Km=De({\u0275cmp:De}),Qm=De({\u0275dir:De}),Ym=De({\u0275pipe:De}),Zm=De({\u0275mod:De}),xc=De({\u0275fac:De}),wo=De({__NG_ELEMENT_ID__:De}),Ub=De({__NG_ENV_ID__:De});function Fc(t){return typeof t=="string"?t:t==null?"":String(t)}function Hb(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Fc(t)}var qb=De({ngErrorCode:De}),n1=De({ngErrorMessage:De}),r1=De({ngTokenPath:De});function Jm(t,e){return zb("",-200,e)}function Yd(t,e){throw new V(-201,!1)}function zb(t,e,n){let r=new V(e,t);return r[qb]=e,r[n1]=t,n&&(r[r1]=n),r}function i1(t){return t[qb]}var xm;function Gb(){return xm}function $t(t){let e=xm;return xm=t,e}function Xm(t,e,n){let r=Oc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Yd(t,"Injector")}var o1={},vo=o1,km="__NG_DI_FLAG__",Om=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=_o(n)||0;try{return this.injector.get(e,r&8?null:vo,r)}catch(i){if(vs(i))return i;throw i}}};function s1(t,e=0){let n=sd();if(n===void 0)throw new V(-203,!1);if(n===null)return Xm(t,void 0,e);{let r=a1(e),i=n.retrieve(t,r);if(vs(i)){if(r.optional)return null;throw i}return i}}function z(t,e=0){return(Gb()||s1)(It(t),e)}function M(t,e){return z(t,_o(e))}function _o(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function a1(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Fm(t){let e=[];for(let n=0;n<t.length;n++){let r=It(t[n]);if(Array.isArray(r)){if(r.length===0)throw new V(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=c1(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(z(i,o))}else e.push(z(r))}return e}function Wb(t,e){return t[km]=e,t.prototype[km]=e,t}function c1(t){return t[km]}function Ii(t,e){let n=t.hasOwnProperty(xc);return n?t[xc]:null}function Zd(t,e){t.forEach(n=>Array.isArray(n)?Zd(n,e):e(n))}function ey(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Lc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Kb(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function Qb(t,e,n){let r=Vs(t,e);return r>=0?t[r|1]=n:(r=~r,Kb(t,r,e,n)),r}function Jd(t,e){let n=Vs(t,e);if(n>=0)return t[n|1]}function Vs(t,e){return u1(t,e,1)}function u1(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var bi={},rn=[],Lr=new U(""),ty=new U("",-1),ny=new U(""),kc=class{get(e,n=vo){if(n===vo){let i=zb("",-201);throw i.name="\u0275NotFound",i}return n}};function ry(t){return t[Zm]||null}function Vr(t){return t[Km]||null}function iy(t){return t[Qm]||null}function Yb(t){return t[Ym]||null}function Mt(t){return{\u0275providers:t}}function Zb(t){return Mt([{provide:Lr,multi:!0,useValue:t}])}function Jb(...t){return{\u0275providers:oy(!0,t),\u0275fromNgModule:!0}}function oy(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Zd(e,s=>{let a=s;Wd(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Xb(i,o),n}function Xb(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];sy(i,o=>{e(o,r)})}}function Wd(t,e,n,r){if(t=It(t),!t)return!1;let i=null,o=Pm(t),s=!o&&Vr(t);if(!o&&!s){let u=t.ngModule;if(o=Pm(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Wd(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Zd(o.imports,h=>{Wd(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&Xb(l,e)}if(!a){let l=Ii(i)||(()=>new i);e({provide:i,useFactory:l,deps:rn},i),e({provide:ny,useValue:i,multi:!0},i),e({provide:Lr,useValue:()=>z(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;sy(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function sy(t,e){for(let n of t)Wm(n)&&(n=n.\u0275providers),Array.isArray(n)?sy(n,e):e(n)}var l1=De({provide:String,useValue:De});function eC(t){return t!==null&&typeof t=="object"&&l1 in t}function d1(t){return!!(t&&t.useExisting)}function h1(t){return!!(t&&t.useFactory)}function Eo(t){return typeof t=="function"}function tC(t){return!!t.useClass}var Vc=new U(""),zd={},Bb={},Mm;function jc(){return Mm===void 0&&(Mm=new kc),Mm}var He=class{},Io=class extends He{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Vm(e,s=>this.processProvider(s)),this.records.set(ty,Ls(void 0,this)),i.has("environment")&&this.records.set(He,Ls(void 0,this));let o=this.records.get(Vc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(ny,rn,{self:!0}))}retrieve(e,n){let r=_o(n)||0;try{return this.get(e,vo,r)}catch(i){if(vs(i))return i;throw i}}destroy(){Pc(this),this._destroyed=!0;let e=ne(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ne(e)}}onDestroy(e){return Pc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Pc(this);let n=er(this),r=$t(void 0),i;try{return e()}finally{er(n),$t(r)}}get(e,n=vo,r){if(Pc(this),e.hasOwnProperty(Ub))return e[Ub](this);let i=_o(r),o,s=er(this),a=$t(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=y1(e)&&Oc(e);h&&this.injectableDefInScope(h)?l=Ls(Lm(e),zd):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?jc():this.parent;return n=i&8&&n===vo?null:n,u.get(e,n)}catch(u){let l=i1(u);throw l===-200||l===-201?new V(l,null):u}finally{$t(a),er(s)}}resolveInjectorInitializers(){let e=ne(null),n=er(this),r=$t(void 0),i;try{let o=this.get(Lr,rn,{self:!0});for(let s of o)s()}finally{er(n),$t(r),ne(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(kr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=It(e);let n=Eo(e)?e:It(e&&e.provide),r=p1(e);if(!Eo(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Ls(void 0,zd,!0),i.factory=()=>Fm(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=ne(null);try{if(n.value===Bb)throw Jm(kr(e));return n.value===zd&&(n.value=Bb,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&m1(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ne(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=It(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Lm(t){let e=Oc(t),n=e!==null?e.factory:Ii(t);if(n!==null)return n;if(t instanceof U)throw new V(204,!1);if(t instanceof Function)return f1(t);throw new V(204,!1)}function f1(t){if(t.length>0)throw new V(204,!1);let n=t1(t);return n!==null?()=>n.factory(t):()=>new t}function p1(t){if(eC(t))return Ls(void 0,t.useValue);{let e=ay(t);return Ls(e,zd)}}function ay(t,e,n){let r;if(Eo(t)){let i=It(t);return Ii(i)||Lm(i)}else if(eC(t))r=()=>It(t.useValue);else if(h1(t))r=()=>t.useFactory(...Fm(t.deps||[]));else if(d1(t))r=(i,o)=>z(It(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=It(t&&(t.useClass||t.provide));if(g1(t))r=()=>new i(...Fm(t.deps));else return Ii(i)||Lm(i)}return r}function Pc(t){if(t.destroyed)throw new V(205,!1)}function Ls(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function g1(t){return!!t.deps}function m1(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function y1(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Vm(t,e){for(let n of t)Array.isArray(n)?Vm(n,e):n&&Wm(n)?Vm(n.\u0275providers,e):e(n)}function Ye(t,e){let n;t instanceof Io?(Pc(t),n=t):n=new Om(t);let r,i=er(n),o=$t(void 0);try{return e()}finally{er(i),$t(o)}}function nC(){return Gb()!==void 0||sd()!=null}var Pn=0,X=1,ie=2,gt=3,mn=4,yn=5,js=6,Us=7,qe=8,Bs=9,tr=10,ze=11,$s=12,cy=13,Do=14,on=15,To=16,bo=17,Co=18,Uc=19,uy=20,xr=21,Xd=22,Bc=23,sn=24,So=25,wt=26,Ze=27,rC=1,ly=6,Ci=7,$c=8,Hc=9,ut=10;function nr(t){return Array.isArray(t)&&typeof t[rC]=="object"}function xn(t){return Array.isArray(t)&&t[rC]===!0}function dy(t){return(t.flags&4)!==0}function Si(t){return t.componentOffset>-1}function eh(t){return(t.flags&1)===1}function rr(t){return!!t.template}function Hs(t){return(t[ie]&512)!==0}function Ao(t){return(t[ie]&256)===256}var iC="svg",oC="math";function vn(t){for(;Array.isArray(t);)t=t[Pn];return t}function hy(t,e){return vn(e[t])}function kn(t,e){return vn(e[t.index])}function qc(t,e){return t.data[e]}function fy(t,e){return t[e]}function py(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function _n(t,e){let n=e[t];return nr(n)?n:n[Pn]}function th(t){return(t[ie]&128)===128}function sC(t){return xn(t[gt])}function ir(t,e){return e==null?null:t[e]}function gy(t){t[bo]=0}function my(t){t[ie]&1024||(t[ie]|=1024,th(t)&&qs(t))}function aC(t,e){for(;t>0;)e=e[Do],t--;return e}function zc(t){return!!(t[ie]&9216||t[sn]?.dirty)}function nh(t){t[tr].changeDetectionScheduler?.notify(8),t[ie]&64&&(t[ie]|=1024),zc(t)&&qs(t)}function qs(t){t[tr].changeDetectionScheduler?.notify(0);let e=wi(t);for(;e!==null&&!(e[ie]&8192||(e[ie]|=8192,!th(e)));)e=wi(e)}function yy(t,e){if(Ao(t))throw new V(911,!1);t[xr]===null&&(t[xr]=[]),t[xr].push(e)}function cC(t,e){if(t[xr]===null)return;let n=t[xr].indexOf(e);n!==-1&&t[xr].splice(n,1)}function wi(t){let e=t[gt];return xn(e)?e[gt]:e}function uC(t){return t[Us]??=[]}function lC(t){return t.cleanup??=[]}var de={lFrame:TC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var jm=!1;function dC(){return de.lFrame.elementDepthCount}function hC(){de.lFrame.elementDepthCount++}function vy(){de.lFrame.elementDepthCount--}function fC(){return de.bindingsEnabled}function pC(){return de.skipHydrationRootTNode!==null}function _y(t){return de.skipHydrationRootTNode===t}function Ey(){de.skipHydrationRootTNode=null}function me(){return de.lFrame.lView}function Qt(){return de.lFrame.tView}function jr(t){return de.lFrame.contextLView=t,t[qe]}function Ur(t){return de.lFrame.contextLView=null,t}function Ht(){let t=Iy();for(;t!==null&&t.type===64;)t=t.parent;return t}function Iy(){return de.lFrame.currentTNode}function gC(){let t=de.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function zs(t,e){let n=de.lFrame;n.currentTNode=t,n.isParent=e}function wy(){return de.lFrame.isParent}function mC(){de.lFrame.isParent=!1}function Dy(){return jm}function Ty(t){let e=jm;return jm=t,e}function Gc(){let t=de.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function yC(t){return de.lFrame.bindingIndex=t}function Gs(){return de.lFrame.bindingIndex++}function vC(t){let e=de.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function _C(){return de.lFrame.inI18n}function EC(t,e){let n=de.lFrame;n.bindingIndex=n.bindingRootIndex=t,rh(e)}function IC(){return de.lFrame.currentDirectiveIndex}function rh(t){de.lFrame.currentDirectiveIndex=t}function wC(t){let e=de.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function by(t){de.lFrame.currentQueryIndex=t}function v1(t){let e=t[X];return e.type===2?e.declTNode:e.type===1?t[yn]:null}function Cy(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=v1(o),i===null||(o=o[Do],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=de.lFrame=DC();return r.currentTNode=e,r.lView=t,!0}function ih(t){let e=DC(),n=t[X];de.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function DC(){let t=de.lFrame,e=t===null?null:t.child;return e===null?TC(t):e}function TC(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function bC(){let t=de.lFrame;return de.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Sy=bC;function oh(){let t=bC();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function CC(t){return(de.lFrame.contextLView=aC(t,de.lFrame.contextLView))[qe]}function Ai(){return de.lFrame.selectedIndex}function Ri(t){de.lFrame.selectedIndex=t}function Ay(){let t=de.lFrame;return qc(t.tView,t.selectedIndex)}function SC(){return de.lFrame.currentNamespace}var AC=!0;function sh(){return AC}function ah(t){AC=t}function Um(t,e=null,n=null,r){let i=Ry(t,e,n,r);return i.resolveInjectorInitializers(),i}function Ry(t,e=null,n=null,r,i=new Set){let o=[n||rn,Jb(t)];return r=r||(typeof t=="object"?void 0:kr(t)),new Io(o,e||jc(),r||null,i)}var ke=class t{static THROW_IF_NOT_FOUND=vo;static NULL=new kc;static create(e,n){if(Array.isArray(e))return Um({name:""},n,e,"");{let r=e.name??"";return Um({name:r},e.parent,e.providers,r)}}static \u0275prov=H({token:t,providedIn:"any",factory:()=>z(ty)});static __NG_ELEMENT_ID__=-1},Ge=new U(""),or=(()=>{class t{static __NG_ELEMENT_ID__=_1;static __NG_ENV_ID__=n=>n}return t})(),Bm=class extends or{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Ao(this._lView)}onDestroy(e){let n=this._lView;return yy(n,e),()=>cC(n,e)}};function _1(){return new Bm(me())}var Mn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Pt=new U("",{providedIn:"root",factory:()=>{let t=M(He),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(Mn),e.handleError(n))}}}),RC={provide:Lr,useValue:()=>void M(Mn),multi:!0},E1=new U("",{providedIn:"root",factory:()=>{let t=M(Ge).defaultView;if(!t)return;let e=M(Pt),n=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),M(or).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function Ny(){return Mt([Zb(()=>void M(E1))])}function En(t,e){let[n,r,i]=gm(t,e?.equal),o=n,s=o[Ut];return o.set=r,o.update=i,o.asReadonly=NC.bind(o),o}function NC(){let t=this[Ut];if(t.readonlyFn===void 0){let e=()=>this();e[Ut]=t,t.readonlyFn=e}return t.readonlyFn}var Or=class{},Wc=new U("",{providedIn:"root",factory:()=>!1});var My=new U(""),Py=new U("");var ch=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=I1}return t})();function I1(){return new ch(me(),Ht())}var sr=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Et(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Y(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}return t})(),Ws=(()=>{class t{internalPendingTasks=M(sr);scheduler=M(Or);errorHandler=M(Pt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}return t})();function Kc(...t){}var xy=(()=>{class t{static \u0275prov=H({token:t,providedIn:"root",factory:()=>new $m})}return t})(),$m=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function Xs(t){return{toString:t}.toString()}var uh="__parameters__";function N1(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function M1(t,e,n){return Xs(()=>{let r=N1(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(uh)?u[uh]:Object.defineProperty(u,uh,{value:[]})[uh];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var an=Wb(M1("Optional"),8);function P1(t){return typeof t=="function"}var mh=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function aS(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var $r=(()=>{let t=()=>cS;return t.ngInherit=!0,t})();function cS(t){return t.type.prototype.ngOnChanges&&(t.setInput=k1),x1}function x1(){let t=lS(this),e=t?.current;if(e){let n=t.previous;if(n===bi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function k1(t,e,n,r,i){let o=this.declaredInputs[r],s=lS(t)||O1(t,{previous:bi,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new mh(l&&l.currentValue,n,u===bi),aS(t,e,i,n)}var uS="__ngSimpleChanges__";function lS(t){return t[uS]||null}function O1(t,e){return t[uS]=e}var MC=[];var Ce=function(t,e=null,n){for(let r=0;r<MC.length;r++){let i=MC[r];i(t,e,n)}};function F1(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=cS(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function L1(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function fh(t,e,n){dS(t,e,3,n)}function ph(t,e,n,r){(t[ie]&3)===n&&dS(t,e,n,r)}function ky(t,e){let n=t[ie];(n&3)===e&&(n&=16383,n+=1,t[ie]=n)}function dS(t,e,n,r){let i=r!==void 0?t[bo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[bo]+=65536),(a<o||o==-1)&&(V1(t,n,e,u),t[bo]=(t[bo]&4294901760)+u+2),u++}function PC(t,e){Ce(4,t,e);let n=ne(null);try{e.call(t)}finally{ne(n),Ce(5,t,e)}}function V1(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[ie]>>14<t[bo]>>16&&(t[ie]&3)===e&&(t[ie]+=16384,PC(a,o)):PC(a,o)}var Qs=-1,No=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function j1(t){return(t.flags&8)!==0}function U1(t){return(t.flags&16)!==0}function B1(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];$1(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function hS(t){return t===3||t===4||t===6}function $1(t){return t.charCodeAt(0)===64}function Ys(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?xC(t,n,i,null,e[++r]):xC(t,n,i,null,null))}}return t}function xC(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function fS(t){return t!==Qs}function yh(t){return t&32767}function H1(t){return t>>16}function vh(t,e){let n=H1(t),r=e;for(;n>0;)r=r[Do],n--;return r}var Gy=!0;function _h(t){let e=Gy;return Gy=t,e}var q1=256,pS=q1-1,gS=5,z1=0,ar={};function G1(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(wo)&&(r=n[wo]),r==null&&(r=n[wo]=z1++);let i=r&pS,o=1<<i;e.data[t+(i>>gS)]|=o}function Eh(t,e){let n=mS(t,e);if(n!==-1)return n;let r=e[X];r.firstCreatePass&&(t.injectorIndex=e.length,Oy(r.data,t),Oy(e,null),Oy(r.blueprint,null));let i=yv(t,e),o=t.injectorIndex;if(fS(i)){let s=yh(i),a=vh(i,e),u=a[X].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Oy(t,e){t.push(0,0,0,0,0,0,0,0,e)}function mS(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function yv(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=IS(i),r===null)return Qs;if(n++,i=i[Do],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Qs}function Wy(t,e,n){G1(t,e,n)}function W1(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(hS(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function yS(t,e,n){if(n&8||t!==void 0)return t;Yd(e,"NodeInjector")}function vS(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[Bs],o=$t(void 0);try{return i?i.get(e,r,n&8):Xm(e,r,n&8)}finally{$t(o)}}return yS(r,e,n)}function _S(t,e,n,r=0,i){if(t!==null){if(e[ie]&2048&&!(r&2)){let s=J1(t,e,n,r,ar);if(s!==ar)return s}let o=ES(t,e,n,r,ar);if(o!==ar)return o}return vS(e,n,r,i)}function ES(t,e,n,r,i){let o=Y1(n);if(typeof o=="function"){if(!Cy(e,t,r))return r&1?yS(i,n,r):vS(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Yd(n);else return s}finally{Sy()}}else if(typeof o=="number"){let s=null,a=mS(t,e),u=Qs,l=r&1?e[on][yn]:null;for((a===-1||r&4)&&(u=a===-1?yv(t,e):e[a+8],u===Qs||!OC(r,!1)?a=-1:(s=e[X],a=yh(u),e=vh(u,e)));a!==-1;){let h=e[X];if(kC(o,a,h.data)){let p=K1(a,e,n,s,r,l);if(p!==ar)return p}u=e[a+8],u!==Qs&&OC(r,e[X].data[a+8]===l)&&kC(o,a,e)?(s=h,a=yh(u),e=vh(u,e)):a=-1}}return i}function K1(t,e,n,r,i,o){let s=e[X],a=s.data[t+8],u=r==null?Si(a)&&Gy:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=Q1(a,s,n,u,l);return h!==null?Ih(e,s,h,a,i):ar}function Q1(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let D=s[y];if(y<u&&n===D||y>=u&&D.type===n)return y}if(i){let y=s[u];if(y&&rr(y)&&y.type===n)return u}return null}function Ih(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof No){let a=o;if(a.resolving){let y=Hb(s[n]);throw Jm(y)}let u=_h(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],h,p=a.injectImpl?$t(a.injectImpl):null,g=Cy(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&F1(n,s[n],e)}finally{p!==null&&$t(p),_h(u),a.resolving=!1,Sy()}}return o}function Y1(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(wo)?t[wo]:void 0;return typeof e=="number"?e>=0?e&pS:Z1:e}function kC(t,e,n){let r=1<<t;return!!(n[e+(t>>gS)]&r)}function OC(t,e){return!(t&2)&&!(t&1&&e)}var Ro=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return _S(this._tNode,this._lView,e,_o(r),n)}};function Z1(){return new Ro(Ht(),me())}function ea(t){return Xs(()=>{let e=t.prototype.constructor,n=e[xc]||Ky(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[xc]||Ky(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Ky(t){return zm(t)?()=>{let e=Ky(It(t));return e&&e()}:Ii(t)}function J1(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[ie]&2048&&!Hs(s);){let a=ES(o,s,n,r|2,ar);if(a!==ar)return a;let u=o.parent;if(!u){let l=s[uy];if(l){let h=l.get(n,ar,r);if(h!==ar)return h}u=IS(s),s=s[Do]}o=u}return i}function IS(t){let e=t[X],n=e.type;return n===2?e.declTNode:n===1?t[yn]:null}function nu(t){return W1(Ht(),t)}function X1(){return vv(Ht(),me())}function vv(t,e){return new lr(kn(t,e))}var lr=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=X1}return t})();function wS(t){return(t.flags&128)===128}var _v=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(_v||{}),DS=new Map,eF=0;function tF(){return eF++}function nF(t){DS.set(t[Uc],t)}function Qy(t){DS.delete(t[Uc])}var FC="__ngContext__";function Zs(t,e){nr(e)?(t[FC]=e[Uc],nF(e)):t[FC]=e}function TS(t){return CS(t[$s])}function bS(t){return CS(t[mn])}function CS(t){for(;t!==null&&!xn(t);)t=t[mn];return t}var Yy;function Ev(t){Yy=t}function SS(){if(Yy!==void 0)return Yy;if(typeof document<"u")return document;throw new V(210,!1)}var Lh=new U("",{providedIn:"root",factory:()=>rF}),rF="ng",Vh=new U(""),Ni=new U("",{providedIn:"platform",factory:()=>"unknown"});var jh=new U("",{providedIn:"root",factory:()=>SS().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var iF="h",oF="b";var AS="r";var RS="di";var NS=!1,MS=new U("",{providedIn:"root",factory:()=>NS});var Iv=new U("");var sF=(t,e,n,r)=>{};function aF(t,e,n,r){sF(t,e,n,r)}function wv(t){return(t.flags&32)===32}var cF=()=>null;function PS(t,e,n=!1){return cF(t,e,n)}function xS(t,e){let n=t.contentQueries;if(n!==null){let r=ne(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];by(o),a.contentQueries(2,e[s],s)}}}finally{ne(r)}}}function Zy(t,e,n){by(0);let r=ne(null);try{e(t,n)}finally{ne(r)}}function kS(t,e,n){if(dy(e)){let r=ne(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{ne(r)}}}var Br=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t})(Br||{});var lh;function uF(){if(lh===void 0&&(lh=null,Fr.trustedTypes))try{lh=Fr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return lh}function LC(t){return uF()?.createScriptURL(t)||t}var wh=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Kd})`}};function ru(t){return t instanceof wh?t.changingThisBreaksApplicationSecurity:t}function Dv(t,e){let n=OS(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Kd})`)}return n===e}function OS(t){return t instanceof wh&&t.getTypeName()||null}var lF=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function FS(t){return t=String(t),t.match(lF)?t:"unsafe:"+t}var Uh=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(Uh||{});function Fn(t){let e=VS();return e?e.sanitize(Uh.URL,t)||"":Dv(t,"URL")?ru(t):FS(Fc(t))}function LS(t){let e=VS();if(e)return LC(e.sanitize(Uh.RESOURCE_URL,t)||"");if(Dv(t,"ResourceURL"))return LC(ru(t));throw new V(904,!1)}function dF(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?LS:Fn}function Tv(t,e,n){return dF(e,n)(t)}function VS(){let t=me();return t&&t[tr].sanitizer}function jS(t){return t instanceof Function?t():t}function hF(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var US="ng-template";function fF(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&hF(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(bv(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function bv(t){return t.type===4&&t.value!==US}function pF(t,e,n){let r=t.type===4&&!n?US:t.value;return e===r}function gF(t,e,n){let r=4,i=t.attrs,o=i!==null?vF(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!On(r)&&!On(u))return!1;if(s&&On(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!pF(t,u,n)||u===""&&e.length===1){if(On(r))return!1;s=!0}}else if(r&8){if(i===null||!fF(t,i,u,n)){if(On(r))return!1;s=!0}}else{let l=e[++a],h=mF(u,i,bv(t),n);if(h===-1){if(On(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(On(r))return!1;s=!0}}}}return On(r)||s}function On(t){return(t&1)===0}function mF(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return _F(e,t)}function yF(t,e,n=!1){for(let r=0;r<e.length;r++)if(gF(t,e[r],n))return!0;return!1}function vF(t){for(let e=0;e<t.length;e++){let n=t[e];if(hS(n))return e}return t.length}function _F(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function VC(t,e){return t?":not("+e.trim()+")":e}function EF(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!On(s)&&(e+=VC(o,i),i=""),r=s,o=o||!On(r);n++}return i!==""&&(e+=VC(o,i)),e}function IF(t){return t.map(EF).join(",")}function wF(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!On(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var dr={};function DF(t,e){return t.createText(e)}function TF(t,e,n){t.setValue(e,n)}function BS(t,e,n){return t.createElement(e,n)}function Dh(t,e,n,r,i){t.insertBefore(e,n,r,i)}function $S(t,e,n){t.appendChild(e,n)}function jC(t,e,n,r,i){r!==null?Dh(t,e,n,r,i):$S(t,e,n)}function HS(t,e,n){t.removeChild(null,e,n)}function bF(t,e,n){t.setAttribute(e,"style",n)}function CF(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function qS(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&B1(t,e,r),i!==null&&CF(t,e,i),o!==null&&bF(t,e,o)}function Cv(t,e,n,r,i,o,s,a,u,l,h){let p=Ze+r,g=p+i,y=SF(p,g),D=typeof l=="function"?l():l;return y[X]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:D,incompleteFirstPass:!1,ssrId:h}}function SF(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:dr);return n}function AF(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Cv(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Sv(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Pn]=i,p[ie]=r|4|128|8|64|1024,(l!==null||t&&t[ie]&2048)&&(p[ie]|=2048),gy(p),p[gt]=p[Do]=t,p[qe]=n,p[tr]=s||t&&t[tr],p[ze]=a||t&&t[ze],p[Bs]=u||t&&t[Bs]||null,p[yn]=o,p[Uc]=tF(),p[js]=h,p[uy]=l,p[on]=e.type==2?t[on]:p,p}function RF(t,e,n){let r=kn(e,t),i=AF(n),o=t[tr].rendererFactory,s=Av(t,Sv(t,i,null,zS(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function zS(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function GS(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Av(t,e){return t[$s]?t[cy][mn]=e:t[$s]=e,t[cy]=e,e}function oe(t=1){WS(Qt(),me(),Ai()+t,!1)}function WS(t,e,n,r){if(!r)if((e[ie]&3)===3){let o=t.preOrderCheckHooks;o!==null&&fh(e,o,n)}else{let o=t.preOrderHooks;o!==null&&ph(e,o,0,n)}Ri(n)}var Bh=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(Bh||{});function Jy(t,e,n,r){let i=ne(null);try{let[o,s,a]=t.inputs[n],u=null;(s&Bh.SignalBased)!==0&&(u=e[o][Ut]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):aS(e,u,o,r)}finally{ne(i)}}var cr=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(cr||{}),NF;function Rv(t,e){return NF(t,e)}var $h=new Set;function Ks(t,e,n,r,i,o){if(r!=null){let s,a=!1;xn(r)?s=r:nr(r)&&(a=!0,r=r[Pn]);let u=vn(r);t===0&&n!==null?i==null?$S(e,n,u):Dh(e,n,u,i||null,!0):t===1&&n!==null?Dh(e,n,u,i||null,!0):t===2?UC(o,()=>{HS(e,u,a)}):t===3&&UC(o,()=>{e.destroyNode(u)}),s!=null&&HF(e,t,s,n,i)}}function MF(t,e){KS(t,e),e[Pn]=null,e[yn]=null}function PF(t,e,n,r,i,o){r[Pn]=i,r[yn]=e,qh(t,r,n,1,i,o)}function KS(t,e){e[tr].changeDetectionScheduler?.notify(9),qh(t,e,e[ze],2,null,null)}function xF(t){let e=t[$s];if(!e)return Fy(t[X],t);for(;e;){let n=null;if(nr(e))n=e[$s];else{let r=e[ut];r&&(n=r)}if(!n){for(;e&&!e[mn]&&e!==t;)nr(e)&&Fy(e[X],e),e=e[gt];e===null&&(e=t),nr(e)&&Fy(e[X],e),n=e&&e[mn]}e=n}}function Nv(t,e){let n=t[Hc],r=n.indexOf(e);n.splice(r,1)}function Hh(t,e){if(Ao(e))return;let n=e[ze];n.destroyNode&&qh(t,e,n,3,null,null),xF(e)}function Fy(t,e){if(Ao(e))return;let n=ne(null);try{e[ie]&=-129,e[ie]|=256,e[sn]&&Ac(e[sn]),FF(t,e),OF(t,e),e[X].type===1&&e[ze].destroy();let r=e[To];if(r!==null&&xn(e[gt])){r!==e[gt]&&Nv(r,e);let i=e[Co];i!==null&&i.detachView(t)}Qy(e)}finally{ne(n)}}function UC(t,e){if(t&&t[wt]&&t[wt].leave)if(t[wt].skipLeaveAnimations)t[wt].skipLeaveAnimations=!1;else{let n=t[wt].leave,r=[];for(let i=0;i<n.length;i++){let o=n[i];r.push(o())}t[wt].running=Promise.allSettled(r),t[wt].leave=void 0}kF(t,e)}function kF(t,e){if(t&&t[wt]&&t[wt].running){t[wt].running.then(()=>{t[wt]&&t[wt].running&&(t[wt].running=void 0),$h.delete(t),e()});return}e()}function OF(t,e){let n=t.cleanup,r=e[Us];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[Us]=null);let i=e[xr];if(i!==null){e[xr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Bc];if(o!==null){e[Bc]=null;for(let s of o)s.destroy()}}function FF(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof No)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Ce(4,a,u);try{u.call(a)}finally{Ce(5,a,u)}}else{Ce(4,i,o);try{o.call(i)}finally{Ce(5,i,o)}}}}}function LF(t,e,n){return VF(t,e.parent,n)}function VF(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Pn];if(Si(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Br.None||i===Br.Emulated)return null}return kn(r,n)}function jF(t,e,n){return BF(t,e,n)}function UF(t,e,n){return t.type&40?kn(t,n):null}var BF=UF,BC;function Mv(t,e,n,r){let i=LF(t,r,e),o=e[ze],s=r.parent||e[yn],a=jF(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)jC(o,i,n[u],a,!1);else jC(o,i,n,a,!1);BC!==void 0&&BC(o,r,e,n,i)}function Qc(t,e){if(e!==null){let n=e.type;if(n&3)return kn(e,t);if(n&4)return Xy(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Qc(t,r);{let i=t[e.index];return xn(i)?Xy(-1,i):vn(i)}}else{if(n&128)return Qc(t,e.next);if(n&32)return Rv(e,t)()||vn(t[e.index]);{let r=QS(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=wi(t[on]);return Qc(i,r)}else return Qc(t,e.next)}}}return null}function QS(t,e){if(e!==null){let r=t[on][yn],i=e.projection;return r.projection[i]}return null}function Xy(t,e){let n=ut+t+1;if(n<e.length){let r=e[n],i=r[X].firstChild;if(i!==null)return Qc(r,i)}return e[Ci]}function Pv(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(s&&e===0&&(a&&Zs(vn(a),r),n.flags|=2),!wv(n))if(u&8)Pv(t,e,n.child,r,i,o,!1),Ks(e,t,i,a,o,r);else if(u&32){let l=Rv(n,r),h;for(;h=l();)Ks(e,t,i,h,o,r);Ks(e,t,i,a,o,r)}else u&16?$F(t,e,r,n,i,o):Ks(e,t,i,a,o,r);n=s?n.projectionNext:n.next}}function qh(t,e,n,r,i,o){Pv(n,r,t.firstChild,e,i,o,!1)}function $F(t,e,n,r,i,o){let s=n[on],u=s[yn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Ks(e,t,i,h,o,n)}else{let l=u,h=s[gt];wS(r)&&(l.flags|=128),Pv(t,e,l,h,i,o,!0)}}function HF(t,e,n,r,i){let o=n[Ci],s=vn(n);o!==s&&Ks(e,t,r,o,i);for(let a=ut;a<n.length;a++){let u=n[a];qh(u[X],u,t,e,r,o)}}function qF(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:cr.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=cr.Important),t.setStyle(n,r,i,o))}}function YS(t,e,n,r,i){let o=Ai(),s=r&2;try{Ri(-1),s&&e.length>Ze&&WS(t,e,Ze,!1),Ce(s?2:0,i,n),n(r,i)}finally{Ri(o),Ce(s?3:1,i,n)}}function ZS(t,e,n){JF(t,e,n),(n.flags&64)===64&&XF(t,e,n)}function xv(t,e,n=kn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function zF(t,e,n,r){let o=r.get(MS,NS)||n===Br.ShadowDom,s=t.selectRootElement(e,o);return GF(s),s}function GF(t){WF(t)}var WF=()=>null;function KF(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function QF(t,e,n,r,i,o){let s=e[X];if(kv(t,s,e,n,r)){Si(t)&&ZF(e,t.index);return}t.type&3&&(n=KF(n)),YF(t,e,n,r,i,o)}function YF(t,e,n,r,i,o){if(t.type&3){let s=kn(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function ZF(t,e){let n=_n(e,t);n[ie]&16||(n[ie]|=64)}function JF(t,e,n){let r=n.directiveStart,i=n.directiveEnd;Si(n)&&RF(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Eh(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],u=Ih(e,t,s,n);if(Zs(u,e),o!==null&&iL(e,s-r,u,a,n,o),rr(a)){let l=_n(n.index,e);l[qe]=Ih(e,t,s,n)}}}function XF(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=IC();try{Ri(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];rh(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&eL(u,l)}}finally{Ri(-1),rh(s)}}function eL(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function tL(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];yF(e,o.selectors,!1)&&(r??=[],rr(o)?r.unshift(o):r.push(o))}return r}function nL(t,e,n,r,i,o){let s=kn(t,e);rL(e[ze],s,o,t.value,n,r,i)}function rL(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Fc(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function iL(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Jy(r,n,u,l)}}function JS(t,e,n,r,i){let o=Ze+n,s=e[X],a=i(s,e,t,r,n);e[o]=a,zs(t,!0);let u=t.type===2;return u?(qS(e[ze],a,t),(dC()===0||eh(t))&&Zs(a,e),hC()):Zs(a,e),sh()&&(!u||!wv(t))&&Mv(s,e,a,t),t}function XS(t){let e=t;return wy()?mC():(e=e.parent,zs(e,!1)),e}function oL(t,e){let n=t[Bs];if(!n)return;let r;try{r=n.get(Pt,null)}catch{r=null}r?.(e)}function kv(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Jy(p,n[l],h,i),a=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];Jy(h,l,r,i),a=!0}return a}function sL(t,e){let n=_n(e,t),r=n[X];aL(r,n);let i=n[Pn];i!==null&&n[js]===null&&(n[js]=PS(i,n[Bs])),Ce(18),Ov(r,n,n[qe]),Ce(19,n[qe])}function aL(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Ov(t,e,n){ih(e);try{let r=t.viewQuery;r!==null&&Zy(1,r,n);let i=t.template;i!==null&&YS(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Co]?.finishViewCreation(t),t.staticContentQueries&&xS(t,e),t.staticViewQueries&&Zy(2,t.viewQuery,n);let o=t.components;o!==null&&cL(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ie]&=-5,oh()}}function cL(t,e){for(let n=0;n<e.length;n++)sL(t,e[n])}function Fv(t,e,n,r){let i=ne(null);try{let o=e.tView,a=t[ie]&4096?4096:16,u=Sv(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[To]=l;let h=t[Co];return h!==null&&(u[Co]=h.createEmbeddedView(o)),Ov(o,u,n),u}finally{ne(i)}}function Zc(t,e){return!e||e.firstChild===null||wS(t)}function Jc(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(vn(o)),xn(o)&&e0(o,r);let s=n.type;if(s&8)Jc(t,e,n.child,r);else if(s&32){let a=Rv(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=QS(e,n);if(Array.isArray(a))r.push(...a);else{let u=wi(e[on]);Jc(u[X],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function e0(t,e){for(let n=ut;n<t.length;n++){let r=t[n],i=r[X].firstChild;i!==null&&Jc(r[X],r,i,e)}t[Ci]!==t[Pn]&&e.push(t[Ci])}function t0(t){if(t[So]!==null){for(let e of t[So])e.impl.addSequence(e);t[So].length=0}}var n0=[];function uL(t){return t[sn]??lL(t)}function lL(t){let e=n0.pop()??Object.create(hL);return e.lView=t,e}function dL(t){t.lView[sn]!==t&&(t.lView=null,n0.push(t))}var hL=re(k({},_s),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{qs(t.lView)},consumerOnSignalRead(){this.lView[sn]=this}});function fL(t){let e=t[sn]??Object.create(pL);return e.lView=t,e}var pL=re(k({},_s),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=wi(t.lView);for(;e&&!r0(e[X]);)e=wi(e);e&&my(e)},consumerOnSignalRead(){this.lView[sn]=this}});function r0(t){return t.type!==2}function i0(t){if(t[Bc]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Bc])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[ie]&8192)}}var gL=100;function o0(t,e=0){let r=t[tr].rendererFactory,i=!1;i||r.begin?.();try{mL(t,e)}finally{i||r.end?.()}}function mL(t,e){let n=Dy();try{Ty(!0),ev(t,e);let r=0;for(;zc(t);){if(r===gL)throw new V(103,!1);r++,ev(t,1)}}finally{Ty(n)}}function yL(t,e,n,r){if(Ao(e))return;let i=e[ie],o=!1,s=!1;ih(e);let a=!0,u=null,l=null;o||(r0(t)?(l=uL(e),u=Is(l)):hd()===null?(a=!1,l=fL(e),u=Is(l)):e[sn]&&(Ac(e[sn]),e[sn]=null));try{gy(e),yC(t.bindingStartIndex),n!==null&&YS(t,e,n,2,r),vL(e);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&fh(e,y,null)}else{let y=t.preOrderHooks;y!==null&&ph(e,y,0,null),ky(e,0)}if(s||_L(e),i0(e),s0(e,0),t.contentQueries!==null&&xS(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&fh(e,y)}else{let y=t.contentHooks;y!==null&&ph(e,y,1),ky(e,1)}IL(t,e);let p=t.components;p!==null&&c0(e,p,0);let g=t.viewQuery;if(g!==null&&Zy(2,g,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&fh(e,y)}else{let y=t.viewHooks;y!==null&&ph(e,y,2),ky(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Xd]){for(let y of e[Xd])y();e[Xd]=null}o||(t0(e),e[ie]&=-73)}catch(h){throw o||qs(e),h}finally{l!==null&&(Cc(l,u),a&&dL(l)),oh()}}function vL(t){let e=t[wt];if(e?.enter){for(let n of e.enter)n();e.enter=void 0}}function s0(t,e){for(let n=TS(t);n!==null;n=bS(n))for(let r=ut;r<n.length;r++){let i=n[r];a0(i,e)}}function _L(t){for(let e=TS(t);e!==null;e=bS(e)){if(!(e[ie]&2))continue;let n=e[Hc];for(let r=0;r<n.length;r++){let i=n[r];my(i)}}}function EL(t,e,n){Ce(18);let r=_n(e,t);a0(r,n),Ce(19,r[qe])}function a0(t,e){th(t)&&ev(t,e)}function ev(t,e){let r=t[X],i=t[ie],o=t[sn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Sc(o)),s||=!1,o&&(o.dirty=!1),t[ie]&=-9217,s)yL(r,t,r.template,t[qe]);else if(i&8192){let a=ne(null);try{i0(t),s0(t,1);let u=r.components;u!==null&&c0(t,u,1),t0(t)}finally{ne(a)}}}function c0(t,e,n){for(let r=0;r<e.length;r++)EL(t,e[r],n)}function IL(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Ri(~i);else{let o=i,s=n[++r],a=n[++r];EC(s,o);let u=e[o];Ce(24,u),a(2,u),Ce(25,u)}}}finally{Ri(-1)}}function Lv(t,e){let n=Dy()?64:1088;for(t[tr].changeDetectionScheduler?.notify(e);t;){t[ie]|=n;let r=wi(t);if(Hs(t)&&!r)return t;t=r}return null}function u0(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function l0(t,e){let n=ut+e;if(n<t.length)return t[n]}function zh(t,e,n,r=!0){let i=e[X];if(wL(i,e,t,n),r){let s=Xy(n,t),a=e[ze],u=a.parentNode(t[Ci]);u!==null&&PF(i,t[yn],a,e,u,s)}let o=e[js];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function d0(t,e){let n=Xc(t,e);return n!==void 0&&Hh(n[X],n),n}function Xc(t,e){if(t.length<=ut)return;let n=ut+e,r=t[n];if(r){let i=r[To];i!==null&&i!==t&&Nv(i,r),e>0&&(t[n-1][mn]=r[mn]);let o=Lc(t,ut+e);MF(r[X],r);let s=o[Co];s!==null&&s.detachView(o[X]),r[gt]=null,r[mn]=null,r[ie]&=-129}return r}function wL(t,e,n,r){let i=ut+r,o=n.length;r>0&&(n[i-1][mn]=e),r<o-ut?(e[mn]=n[i],ey(n,ut+r,e)):(n.push(e),e[mn]=null),e[gt]=n;let s=e[To];s!==null&&n!==s&&h0(s,e);let a=e[Co];a!==null&&a.insertView(t),nh(e),e[ie]|=128}function h0(t,e){let n=t[Hc],r=e[gt];if(nr(r))t[ie]|=2;else{let i=r[gt][on];e[on]!==i&&(t[ie]|=2)}n===null?t[Hc]=[e]:n.push(e)}var Mo=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[X];return Jc(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[qe]}set context(e){this._lView[qe]=e}get destroyed(){return Ao(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[gt];if(xn(e)){let n=e[$c],r=n?n.indexOf(this):-1;r>-1&&(Xc(e,r),Lc(n,r))}this._attachedToViewContainer=!1}Hh(this._lView[X],this._lView)}onDestroy(e){yy(this._lView,e)}markForCheck(){Lv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ie]&=-129}reattach(){nh(this._lView),this._lView[ie]|=128}detectChanges(){this._lView[ie]|=1024,o0(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new V(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Hs(this._lView),n=this._lView[To];n!==null&&!e&&Nv(n,this._lView),KS(this._lView[X],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new V(902,!1);this._appRef=e;let n=Hs(this._lView),r=this._lView[To];r!==null&&!n&&h0(r,this._lView),nh(this._lView)}};function Gh(t,e,n,r,i){let o=t.data[e];if(o===null)o=DL(t,e,n,r,i),_C()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=gC();o.injectorIndex=s===null?-1:s.injectorIndex}return zs(o,!0),o}function DL(t,e,n,r,i){let o=Iy(),s=wy(),a=s?o:o&&o.parent,u=t.data[e]=bL(t,a,n,e,r,i);return TL(t,u,o,s),u}function TL(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function bL(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return pC()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var WQ=new RegExp(`^(\\d+)*(${oF}|${iF})*(.*)`);function CL(t){let e=t[ly]??[],r=t[gt][ze],i=[];for(let o of e)o.data[RS]!==void 0?i.push(o):SL(o,r);t[ly]=i}function SL(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[AS];for(;n<i;){let o=r.nextSibling;HS(e,r,!1),r=o,n++}}}var AL=()=>null,RL=()=>null;function tv(t,e){return AL(t,e)}function f0(t,e,n){return RL(t,e,n)}var p0=class{},Wh=class{},nv=class{resolveComponentFactory(e){throw new V(917,!1)}},iu=class{static NULL=new nv},Po=class{},Hr=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>NL()}return t})();function NL(){let t=me(),e=Ht(),n=_n(e.index,t);return(nr(n)?n:t)[ze]}var g0=(()=>{class t{static \u0275prov=H({token:t,providedIn:"root",factory:()=>null})}return t})();var gh={},rv=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,gh,r);return i!==gh||n===gh?i:this.parentInjector.get(e,n,r)}};function Th(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=qm(i,a);else if(o==2){let u=a,l=e[++s];r=qm(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function W(t,e=0){let n=me();if(n===null)return z(t,e);let r=Ht();return _S(r,n,It(t),e)}function Vv(){let t="invalid";throw new Error(t)}function ML(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}kL(t,e,n,a,o,u,l)}o!==null&&r!==null&&PL(n,r,o)}function PL(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new V(-301,!1);r.push(e[i],o)}}function xL(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function kL(t,e,n,r,i,o,s){let a=r.length,u=!1;for(let g=0;g<a;g++){let y=r[g];!u&&rr(y)&&(u=!0,xL(t,n,g)),Wy(Eh(n,e),t,y.type)}UL(n,t.data.length,a);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=GS(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(n.mergedAttrs=Ys(n.mergedAttrs,y.hostAttrs),FL(t,n,e,p,y),jL(p,y,i),s!==null&&s.has(y)){let[N,R]=s.get(y);n.directiveToIndex.set(y.type,[p,N+n.directiveStart,R+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let D=y.type.prototype;!l&&(D.ngOnChanges||D.ngOnInit||D.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(D.ngOnChanges||D.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}OL(t,n,o)}function OL(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))$C(0,e,i,r),$C(1,e,i,r),qC(e,r,!1);else{let o=n.get(i);HC(0,e,o,r),HC(1,e,o,r),qC(e,r,!0)}}}function $C(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),m0(e,o)}}function HC(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),m0(e,s)}}function m0(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function qC(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||bv(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function FL(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Ii(i.type,!0)),s=new No(o,rr(i),W,null);t.blueprint[r]=s,n[r]=s,LL(t,e,r,GS(t,n,i.hostVars,dr),i)}function LL(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;VL(s)!=a&&s.push(a),s.push(n,r,o)}}function VL(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function jL(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;rr(e)&&(n[""]=t)}}function UL(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function y0(t,e,n,r,i,o,s,a){let u=e[X],l=u.consts,h=ir(l,s),p=Gh(u,t,n,r,h);return o&&ML(u,e,p,ir(l,a),i),p.mergedAttrs=Ys(p.mergedAttrs,p.attrs),p.attrs!==null&&Th(p,p.attrs,!1),p.mergedAttrs!==null&&Th(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function v0(t,e){L1(t,e),dy(e)&&t.queries.elementEnd(e)}function BL(t,e,n,r,i,o){let s=e.consts,a=ir(s,i),u=Gh(e,t,n,r,a);if(u.mergedAttrs=Ys(u.mergedAttrs,u.attrs),o!=null){let l=ir(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&Th(u,u.attrs,!1),u.mergedAttrs!==null&&Th(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function jv(t,e,n){return t[e]=n}function ur(t,e,n){if(n===dr)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function _0(t,e,n,r){let i=ur(t,e,n);return ur(t,e+1,r)||i}function $L(t,e,n,r,i){let o=_0(t,e,n,r);return ur(t,e+2,i)||o}function Ly(t,e,n){return function r(i){let o=Si(t)?_n(t.index,e):e;Lv(o,5);let s=e[qe],a=zC(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)a=zC(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function zC(t,e,n,r){let i=ne(null);try{return Ce(6,e,n),n(r)!==!1}catch(o){return oL(t,o),!1}finally{Ce(7,e,n),ne(i)}}function HL(t,e,n,r,i,o,s,a){let u=eh(t),l=!1,h=null;if(!r&&u&&(h=zL(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=kn(t,n),g=r?r(p):p;aF(n,g,o,a);let y=i.listen(g,o,a);if(!qL(o)){let D=r?N=>r(vn(N[t.index])):t.index;E0(D,e,n,o,a,y,!1)}}return l}function qL(t){return t.startsWith("animation")||t.startsWith("transition")}function zL(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Us],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function E0(t,e,n,r,i,o,s){let a=e.firstCreatePass?lC(e):null,u=uC(n),l=u.length;u.push(i,o),a&&a.push(r,t,l,(l+1)*(s?-1:1))}function GC(t,e,n,r,i,o){let s=e[n],a=e[X],l=a.data[n].outputs[r],p=s[l].subscribe(o);E0(t.index,a,e,i,o,p,!0)}var iv=Symbol("BINDING");var bh=class extends iu{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Vr(e);return new xo(n,this.ngModule)}};function GL(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&Bh.SignalBased)!==0};return i&&(o.transform=i),o})}function WL(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function KL(t,e,n){let r=e instanceof He?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new rv(n,r):n}function QL(t){let e=t.get(Po,null);if(e===null)throw new V(407,!1);let n=t.get(g0,null),r=t.get(Or,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function YL(t,e){let n=I0(t);return BS(e,n,n==="svg"?iC:n==="math"?oC:null)}function I0(t){return(t.selectors[0][0]||"div").toLowerCase()}var xo=class extends Wh{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=GL(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=WL(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=IF(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){Ce(22);let a=ne(null);try{let u=this.componentDef,l=ZL(r,u,s,o),h=KL(u,i||this.ngModule,e),p=QL(h),g=p.rendererFactory.createRenderer(null,u),y=r?zF(g,r,u.encapsulation,h):YL(u,g),D=s?.some(WC)||o?.some(O=>typeof O!="function"&&O.bindings.some(WC)),N=Sv(null,l,null,512|zS(u),null,null,p,g,h,null,PS(y,h,!0));N[Ze]=y,ih(N);let R=null;try{let O=y0(Ze,N,2,"#host",()=>l.directiveRegistry,!0,0);y&&(qS(g,y,O),Zs(y,N)),ZS(l,N,O),kS(l,O,N),v0(l,O),n!==void 0&&XL(O,this.ngContentSelectors,n),R=_n(O.index,N),N[qe]=R[qe],Ov(l,N,null)}catch(O){throw R!==null&&Qy(R),Qy(N),O}finally{Ce(23),oh()}return new Ch(this.componentType,N,!!D)}finally{ne(a)}}};function ZL(t,e,n,r){let i=t?["ng-version","20.3.1"]:wF(e.selectors[0]),o=null,s=null,a=0;if(n)for(let h of n)a+=h[iv].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let g of p.bindings){a+=g[iv].requiredVars;let y=h+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,g=iy(p);u.push(g)}return Cv(0,null,JL(o,s),1,a,u,null,null,null,[i],null)}function JL(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function WC(t){let e=t[iv].kind;return e==="input"||e==="twoWay"}var Ch=class extends p0{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=qc(n[X],Ze),this.location=vv(this._tNode,n),this.instance=_n(this._tNode.index,n)[qe],this.hostView=this.changeDetectorRef=new Mo(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=kv(r,i[X],i,e,n);this.previousInputValues.set(e,n);let s=_n(r.index,i);Lv(s,1)}get injector(){return new Ro(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function XL(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var ou=(()=>{class t{static __NG_ELEMENT_ID__=eV}return t})();function eV(){let t=Ht();return nV(t,me())}var tV=ou,w0=class extends tV{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return vv(this._hostTNode,this._hostLView)}get injector(){return new Ro(this._hostTNode,this._hostLView)}get parentInjector(){let e=yv(this._hostTNode,this._hostLView);if(fS(e)){let n=vh(e,this._hostLView),r=yh(e),i=n[X].data[r+8];return new Ro(i,n)}else return new Ro(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=KC(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-ut}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=tv(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Zc(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let u=e&&!P1(e),l;if(u)l=n;else{let R=n||{};l=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,a=R.bindings}let h=u?e:new xo(Vr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let O=(u?p:this.parentInjector).get(He,null);O&&(o=O)}let g=Vr(h.componentType??{}),y=tv(this._lContainer,g?.id??null),D=y?.firstChild??null,N=h.create(p,i,D,o,s,a);return this.insertImpl(N.hostView,l,Zc(this._hostTNode,y)),N}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(sC(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[gt],l=new w0(u,u[yn],u[gt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return zh(s,i,o,r),e.attachToViewContainerRef(),ey(Vy(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=KC(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Xc(this._lContainer,n);r&&(Lc(Vy(this._lContainer),n),Hh(r[X],r))}detach(e){let n=this._adjustIndex(e,-1),r=Xc(this._lContainer,n);return r&&Lc(Vy(this._lContainer),n)!=null?new Mo(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function KC(t){return t[$c]}function Vy(t){return t[$c]||(t[$c]=[])}function nV(t,e){let n,r=e[t.index];return xn(r)?n=r:(n=u0(r,e,null,t),e[t.index]=n,Av(e,n)),iV(n,e,t,r),new w0(n,t,e)}function rV(t,e){let n=t[ze],r=n.createComment(""),i=kn(e,t),o=n.parentNode(i);return Dh(n,o,r,n.nextSibling(i),!1),r}var iV=aV,oV=()=>!1;function sV(t,e,n){return oV(t,e,n)}function aV(t,e,n,r){if(t[Ci])return;let i;n.type&8?i=vn(r):i=rV(e,n),t[Ci]=i}var QC=new Set;function Ln(t){QC.has(t)||(QC.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var ko=class{},Kh=class{};var Sh=class extends ko{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new bh(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=ry(e);this._bootstrapComponents=jS(o.bootstrap),this._r3Injector=Ry(e,n,[{provide:ko,useValue:this},{provide:iu,useValue:this.componentFactoryResolver},...r],kr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Ah=class extends Kh{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Sh(this.moduleType,e,[])}};var eu=class extends ko{injector;componentFactoryResolver=new bh(this);instance=null;constructor(e){super();let n=new Io([...e.providers,{provide:ko,useValue:this},{provide:iu,useValue:this.componentFactoryResolver}],e.parent||jc(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ta(t,e,n=null){return new eu({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var cV=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=oy(!1,n.type),i=r.length>0?ta([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=H({token:t,providedIn:"environment",factory:()=>new t(z(He))})}return t})();function Dt(t){return Xs(()=>{let e=D0(t),n=re(k({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===_v.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(cV).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Br.Emulated,styles:t.styles||rn,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Ln("NgStandalone"),T0(n);let r=t.dependencies;return n.directiveDefs=YC(r,uV),n.pipeDefs=YC(r,Yb),n.id=hV(n),n})}function uV(t){return Vr(t)||iy(t)}function Vn(t){return Xs(()=>({type:t.type,bootstrap:t.bootstrap||rn,declarations:t.declarations||rn,imports:t.imports||rn,exports:t.exports||rn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function lV(t,e){if(t==null)return bi;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Bh.None,u=null),n[o]=[r,a,u],e[o]=s}return n}function dV(t){if(t==null)return bi;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function xt(t){return Xs(()=>{let e=D0(t);return T0(e),e})}function Qh(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function D0(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||bi,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||rn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:lV(t.inputs,e),outputs:dV(t.outputs),debugInfo:null}}function T0(t){t.features?.forEach(e=>e(t))}function YC(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function hV(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function fV(t){return Object.getPrototypeOf(t.prototype).constructor}function qr(t){let e=fV(t.type),n=!0,r=[t];for(;e;){let i;if(rr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new V(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=jy(t.inputs),s.declaredInputs=jy(t.declaredInputs),s.outputs=jy(t.outputs);let a=i.hostBindings;a&&vV(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&mV(t,u),l&&yV(t,l),pV(t,i),$b(t.outputs,i.outputs),rr(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===qr&&(n=!1)}}e=Object.getPrototypeOf(e)}gV(r)}function pV(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function gV(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ys(i.hostAttrs,n=Ys(n,i.hostAttrs))}}function jy(t){return t===bi?{}:t===rn?[]:t}function mV(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function yV(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function vV(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function _V(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=Ys(t.mergedAttrs,t.attrs);let h=t.tView=Cv(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),zs(t,!1);let u=EV(n,e,t,r);sh()&&Mv(n,e,u,t),Zs(u,e);let l=u0(u,e,u,t);e[r+Ze]=l,Av(e,l),sV(l,t,e)}function Rh(t,e,n,r,i,o,s,a,u,l,h){let p=n+Ze,g;if(e.firstCreatePass){if(g=Gh(e,p,4,s||null,a||null),l!=null){let y=ir(e.consts,l);g.localNames=[];for(let D=0;D<y.length;D+=2)g.localNames.push(y[D],-1)}}else g=e.data[p];return _V(g,t,e,n,r,i,o,u),l!=null&&xv(t,g,h),g}var EV=IV;function IV(t,e,n,r){return ah(!0),e[ze].createComment("")}var Yh=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(Yh||{}),Fo=new U(""),b0=!1,ov=class extends Pe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,nC()&&(this.destroyRef=M(or,{optional:!0})??void 0,this.pendingTasks=M(sr,{optional:!0})??void 0)}emit(e){let n=ne(null);try{super.next(e)}finally{ne(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof je&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Je=ov;function C0(t){let e,n;function r(){t=Kc;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function ZC(t){return queueMicrotask(()=>t()),()=>{t=Kc}}var Uv="isAngularZone",Nh=Uv+"_ID",wV=0,Ee=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Je(!1);onMicrotaskEmpty=new Je(!1);onStable=new Je(!1);onError=new Je(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=b0}=e;if(typeof Zone>"u")throw new V(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,bV(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Uv)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new V(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new V(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,DV,Kc,Kc);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},DV={};function Bv(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function TV(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){C0(()=>{t.callbackScheduled=!1,sv(t),t.isCheckStableRunning=!0,Bv(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),sv(t)}function bV(t){let e=()=>{TV(t)},n=wV++;t._inner=t._inner.fork({name:"angular",properties:{[Uv]:!0,[Nh]:n,[Nh+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(CV(u))return r.invokeTask(o,s,a,u);try{return JC(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),XC(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return JC(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!SV(u)&&e(),XC(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,sv(t),Bv(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function sv(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function JC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function XC(t){t._nesting--,Bv(t)}var Mh=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Je;onMicrotaskEmpty=new Je;onStable=new Je;onError=new Je;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function CV(t){return S0(t,"__ignore_ng_zone__")}function SV(t){return S0(t,"__scheduler_tick__")}function S0(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var $v=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}return t})(),A0=[0,1,2,3],R0=(()=>{class t{ngZone=M(Ee);scheduler=M(Or);errorHandler=M(Mn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){M(Fo,{optional:!0})}execute(){let n=this.sequences.size>0;n&&Ce(16),this.executing=!0;for(let r of A0)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&Ce(17)}register(n){let{view:r}=n;r!==void 0?((r[So]??=[]).push(n),qs(r),r[ie]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(Yh.AFTER_NEXT_RENDER,n):n()}static \u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}return t})(),Ph=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,o,s=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[So];e&&(this.view[So]=e.filter(n=>n!==this))}};function Zh(t,e){let n=e?.injector??M(ke);return Ln("NgAfterNextRender"),RV(t,n,e,!0)}function AV(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function RV(t,e,n,r){let i=e.get($v);i.impl??=e.get(R0);let o=e.get(Fo,null,{optional:!0}),s=n?.manualCleanup!==!0?e.get(or):null,a=e.get(ch,null,{optional:!0}),u=new Ph(i.impl,AV(t),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var Hv=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var qv=new U("");function zr(t){return!!t&&typeof t.then=="function"}function Jh(t){return!!t&&typeof t.subscribe=="function"}var zv=new U("");function na(t){return Mt([{provide:zv,multi:!0,useValue:t}])}var Gv=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=M(zv,{optional:!0})??[];injector=M(ke);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=Ye(this.injector,i);if(zr(o))n.push(o);else if(Jh(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),su=new U("");function N0(){pm(()=>{let t="";throw new V(600,t)})}function M0(t){return t.isBoundToModule}var NV=10;var jn=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=M(Pt);afterRenderManager=M($v);zonelessEnabled=M(Wc);rootEffectScheduler=M(xy);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Pe;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=M(sr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(G(n=>!n))}constructor(){M(Fo,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=M(He);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=ke.NULL){return this._injector.get(Ee).run(()=>{Ce(10);let s=n instanceof Wh;if(!this._injector.get(Gv).done){let D="";throw new V(405,D)}let u;s?u=n:u=this._injector.get(iu).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=M0(u)?void 0:this._injector.get(ko),h=r||u.selector,p=u.create(i,[],h,l),g=p.location.nativeElement,y=p.injector.get(qv,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),Yc(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),Ce(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ce(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Yh.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new V(101,!1);let n=ne(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ne(n),this.afterTick.next(),Ce(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Po,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<NV;)Ce(14),this.synchronizeOnce(),Ce(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!zc(i))continue;let o=r&&!this.zonelessEnabled?0:1;o0(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>zc(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Yc(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(su,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Yc(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new V(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Yc(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function au(t,e,n,r){let i=me(),o=Gs();if(ur(i,o,e)){let s=Qt(),a=Ay();nL(a,i,t,e,n,r)}return au}var eY=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var av=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e,!0))}};function Uy(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function MV(t,e,n){let r,i,o=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=t.at(o),h=e[o],p=Uy(o,l,o,h,n);if(p!==0){p<0&&t.updateValue(o,h),o++;continue}let g=t.at(s),y=e[u],D=Uy(s,g,u,y,n);if(D!==0){D<0&&t.updateValue(s,y),s--,u--;continue}let N=n(o,l),R=n(s,g),O=n(o,h);if(Object.is(O,R)){let Q=n(u,y);Object.is(Q,N)?(t.swap(o,s),t.updateValue(s,y),u--,s--):t.move(s,o),t.updateValue(o,h),o++;continue}if(r??=new xh,i??=tS(t,o,s,n),cv(t,r,o,O))t.updateValue(o,h),o++,s++;else if(i.has(O))r.set(N,t.detach(o)),s--;else{let Q=t.create(o,e[o]);t.attach(o,Q),o++,s++}}for(;o<=u;)eS(t,r,n,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let h=t.at(o),p=l.value,g=Uy(o,h,o,p,n);if(g!==0)g<0&&t.updateValue(o,p),o++,l=u.next();else{r??=new xh,i??=tS(t,o,s,n);let y=n(o,p);if(cv(t,r,o,y))t.updateValue(o,p),o++,s++,l=u.next();else if(!i.has(y))t.attach(o,t.create(o,p)),o++,s++,l=u.next();else{let D=n(o,h);r.set(D,t.detach(o)),s--}}}for(;!l.done;)eS(t,r,n,t.length,l.value),l=u.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(u=>{t.destroy(u)})}function cv(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function eS(t,e,n,r,i){if(cv(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function tS(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var xh=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function Xe(t,e,n,r,i,o,s,a){Ln("NgControlFlow");let u=me(),l=Qt(),h=ir(l.consts,o);return Rh(u,l,t,e,n,r,i,h,256,s,a),ra}function ra(t,e,n,r,i,o,s,a){Ln("NgControlFlow");let u=me(),l=Qt(),h=ir(l.consts,o);return Rh(u,l,t,e,n,r,i,h,512,s,a),ra}function et(t,e){Ln("NgControlFlow");let n=me(),r=Gs(),i=n[r]!==dr?n[r]:-1,o=i!==-1?kh(n,Ze+i):void 0,s=0;if(ur(n,r,t)){let a=ne(null);try{if(o!==void 0&&d0(o,s),t!==-1){let u=Ze+t,l=kh(n,u),h=hv(n[X],u),p=f0(l,h,n),g=Fv(n,h,e,{dehydratedView:p});zh(l,g,s,Zc(h,p))}}finally{ne(a)}}else if(o!==void 0){let a=l0(o,s);a!==void 0&&(a[qe]=e)}}var uv=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-ut}};var lv=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function Wv(t,e,n,r,i,o,s,a,u,l,h,p,g){Ln("NgControlFlow");let y=me(),D=Qt(),N=u!==void 0,R=me(),O=a?s.bind(R[on][qe]):s,Q=new lv(N,O);R[Ze+t]=Q,Rh(y,D,t+1,e,n,r,i,ir(D.consts,o),256),N&&Rh(y,D,t+2,u,l,h,p,ir(D.consts,g),512)}var dv=class extends av{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-ut}at(e){return this.getLView(e)[qe].$implicit}attach(e,n){let r=n[js];this.needsIndexUpdate||=e!==this.length,zh(this.lContainer,n,e,Zc(this.templateTNode,r))}detach(e,n){return this.needsIndexUpdate||=e!==this.length-1,n&&PV(this.lContainer,e),xV(this.lContainer,e)}create(e,n){let r=tv(this.lContainer,this.templateTNode.tView.ssrId),i=Fv(this.hostLView,this.templateTNode,new uv(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Hh(e[X],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[qe].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[qe].$index=e}getLView(e){return kV(this.lContainer,e)}};function Kv(t){let e=ne(null),n=Ai();try{let r=me(),i=r[X],o=r[n],s=n+1,a=kh(r,s);if(o.liveCollection===void 0){let l=hv(i,s);o.liveCollection=new dv(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(MV(u,t,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=Gs(),h=u.length===0;if(ur(r,l,h)){let p=n+2,g=kh(r,p);if(h){let y=hv(i,p),D=f0(g,y,r),N=Fv(r,y,void 0,{dehydratedView:D});zh(g,N,0,Zc(y,D))}else i.firstUpdatePass&&CL(g),d0(g,0)}}}finally{ne(e)}}function kh(t,e){return t[e]}function PV(t,e){if(t.length<=ut)return;let n=ut+e,r=t[n];r&&r[wt]&&(r[wt].skipLeaveAnimations=!0)}function xV(t,e){return Xc(t,e)}function kV(t,e){return l0(t,e)}function hv(t,e){return qc(t,e)}function Tt(t,e,n){let r=me(),i=Gs();if(ur(r,i,e)){let o=Qt(),s=Ay();QF(s,r,t,e,r[ze],n)}return Tt}function nS(t,e,n,r,i){kv(e,t,n,i?"class":"style",r)}function B(t,e,n,r){let i=me(),o=i[X],s=t+Ze,a=o.firstCreatePass?y0(s,i,2,e,tL,fC(),n,r):o.data[s];if(JS(a,i,t,e,P0),eh(a)){let u=i[X];ZS(u,i,a),kS(u,a,i)}return r!=null&&xv(i,a),B}function j(){let t=Qt(),e=Ht(),n=XS(e);return t.firstCreatePass&&v0(t,n),_y(n)&&Ey(),vy(),n.classesWithoutHost!=null&&j1(n)&&nS(t,n,me(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&U1(n)&&nS(t,n,me(),n.stylesWithoutHost,!1),j}function ye(t,e,n,r){return B(t,e,n,r),j(),ye}function ia(t,e,n,r){let i=me(),o=i[X],s=t+Ze,a=o.firstCreatePass?BL(s,o,2,e,n,r):o.data[s];return JS(a,i,t,e,P0),r!=null&&xv(i,a),ia}function oa(){let t=Ht(),e=XS(t);return _y(e)&&Ey(),vy(),oa}var P0=(t,e,n,r,i)=>(ah(!0),BS(e[ze],r,SC()));function Mi(){return me()}var dh=void 0;function OV(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var FV=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],dh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],dh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",dh,"{1} 'at' {0}",dh],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",OV],By={};function cn(t){let e=LV(t),n=rS(e);if(n)return n;let r=e.split("-")[0];if(n=rS(r),n)return n;if(r==="en")return FV;throw new V(701,!1)}function rS(t){return t in By||(By[t]=Fr.ng&&Fr.ng.common&&Fr.ng.common.locales&&Fr.ng.common.locales[t]),By[t]}var We=(function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t})(We||{});function LV(t){return t.toLowerCase().replace(/_/g,"-")}var cu="en-US";var VV=cu;function x0(t){typeof t=="string"&&(VV=t.toLowerCase().replace(/_/g,"-"))}function bt(t,e,n){let r=me(),i=Qt(),o=Ht();return jV(i,r,r[ze],o,t,e,n),bt}function jV(t,e,n,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=Ly(r,e,o),HL(r,t,e,s,n,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let g=h[p],y=h[p+1];u??=Ly(r,e,o),GC(r,e,g,y,i,u)}if(l&&l.length)for(let p of l)u??=Ly(r,e,o),GC(r,e,p,i,i,u)}}function Yt(t=1){return CC(t)}function hh(t,e){return t<<17|e<<2}function Oo(t){return t>>17&32767}function UV(t){return(t&2)==2}function BV(t,e){return t&131071|e<<17}function fv(t){return t|2}function Js(t){return(t&131068)>>2}function $y(t,e){return t&-131069|e<<2}function $V(t){return(t&1)===1}function pv(t){return t|1}function HV(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Oo(s),u=Js(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||Vs(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let g=Oo(t[a+1]);t[r+1]=hh(g,a),g!==0&&(t[g+1]=$y(t[g+1],r)),t[a+1]=BV(t[a+1],r)}else t[r+1]=hh(a,0),a!==0&&(t[a+1]=$y(t[a+1],r)),a=r;else t[r+1]=hh(u,0),a===0?a=r:t[u+1]=$y(t[u+1],r),u=r;l&&(t[r+1]=fv(t[r+1])),iS(t,h,r,!0),iS(t,h,r,!1),qV(e,h,t,r,o),s=hh(a,u),o?e.classBindings=s:e.styleBindings=s}function qV(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Vs(o,e)>=0&&(n[r+1]=pv(n[r+1]))}function iS(t,e,n,r){let i=t[n+1],o=e===null,s=r?Oo(i):Js(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];zV(u,e)&&(a=!0,t[s+1]=r?pv(l):fv(l)),s=r?Oo(l):Js(l)}a&&(t[n+1]=r?fv(i):pv(i))}function zV(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Vs(t,e)>=0:!1}function hr(t,e){return GV(t,e,null,!0),hr}function GV(t,e,n,r){let i=me(),o=Qt(),s=vC(2);if(o.firstUpdatePass&&KV(o,t,s,r),e!==dr&&ur(i,s,e)){let a=o.data[Ai()];XV(o,a,i,i[ze],t,i[s+1]=e2(e,n),r,s)}}function WV(t,e){return e>=t.expandoStartIndex}function KV(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Ai()],s=WV(t,n);t2(o,r)&&e===null&&!s&&(e=!1),e=QV(i,o,e,r),HV(i,o,e,n,s,r)}}function QV(t,e,n,r){let i=wC(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Hy(null,t,e,n,r),n=tu(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Hy(i,t,e,n,r),o===null){let u=YV(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Hy(null,t,e,u[1],r),u=tu(u,e.attrs,r),ZV(t,e,r,u))}else o=JV(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function YV(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Js(r)!==0)return t[Oo(r)]}function ZV(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Oo(i)]=r}function JV(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=tu(r,s,n)}return tu(r,e.attrs,n)}function Hy(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=tu(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function tu(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Qb(t,s,n?!0:e[++o]))}return t===void 0?null:t}function XV(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=$V(l)?oS(u,e,n,i,Js(l),s):void 0;if(!Oh(h)){Oh(o)||UV(l)&&(o=oS(u,null,n,i,a,s));let p=hy(Ai(),n);qF(r,s,p,i,o)}}function oS(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,g=n[i+1];g===dr&&(g=p?rn:void 0);let y=p?Jd(g,r):h===r?g:void 0;if(l&&!Oh(y)&&(y=Jd(u,r)),Oh(y)&&(a=y,s))return a;let D=t[i+1];i=s?Oo(D):Js(D)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Jd(u,r))}return a}function Oh(t){return t!==void 0}function e2(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=kr(ru(t)))),t}function t2(t,e){return(t.flags&(e?8:16))!==0}function q(t,e=""){let n=me(),r=Qt(),i=t+Ze,o=r.firstCreatePass?Gh(r,i,1,e,null):r.data[i],s=n2(r,n,o,e,t);n[i]=s,sh()&&Mv(r,n,s,o),zs(o,!1)}var n2=(t,e,n,r,i)=>(ah(!0),DF(e[ze],r));function r2(t,e,n,r=""){return ur(t,Gs(),n)?e+Fc(n)+r:dr}function qt(t){return Gr("",t),qt}function Gr(t,e,n){let r=me(),i=r2(r,t,e,n);return i!==dr&&i2(r,Ai(),i),Gr}function i2(t,e,n){let r=hy(e,t);TF(t[ze],r,n)}function o2(t,e,n){let r=Qt();if(r.firstCreatePass){let i=rr(t);gv(n,r.data,r.blueprint,i,!0),gv(e,r.data,r.blueprint,i,!1)}}function gv(t,e,n,r,i){if(t=It(t),Array.isArray(t))for(let o=0;o<t.length;o++)gv(t[o],e,n,r,i);else{let o=Qt(),s=me(),a=Ht(),u=Eo(t)?t:It(t.provide),l=ay(t),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(Eo(t)||!t.multi){let y=new No(l,i,W,null),D=zy(u,e,i?h:h+g,p);D===-1?(Wy(Eh(a,s),o,u),qy(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[D]=y,s[D]=y)}else{let y=zy(u,e,h+g,p),D=zy(u,e,h,h+g),N=y>=0&&n[y],R=D>=0&&n[D];if(i&&!R||!i&&!N){Wy(Eh(a,s),o,u);let O=c2(i?a2:s2,n.length,i,r,l,t);!i&&R&&(n[D].providerFactory=O),qy(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(O),s.push(O)}else{let O=k0(n[i?D:y],l,!i&&r);qy(o,t,y>-1?y:D,O)}!i&&r&&R&&n[D].componentProviders++}}}function qy(t,e,n,r){let i=Eo(e),o=tC(e);if(i||o){let u=(o?It(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function k0(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function zy(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function s2(t,e,n,r,i){return mv(this.multi,[])}function a2(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=Ih(r,r[X],this.providerFactory.index,i);s=u.slice(0,a),mv(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],mv(o,s);return s}function mv(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function c2(t,e,n,r,i,o){let s=new No(t,n,W,null);return s.multi=[],s.index=e,s.componentProviders=0,k0(s,i,r&&!n),s}function uu(t,e=[]){return n=>{n.providersResolver=(r,i)=>o2(r,i?i(t):t,e)}}function lu(t,e,n,r){return O0(me(),Gc(),t,e,n,r)}function Qv(t,e,n,r,i,o){return l2(me(),Gc(),t,e,n,r,i,o)}function Yv(t,e){let n=t[e];return n===dr?void 0:n}function O0(t,e,n,r,i,o){let s=e+n;return ur(t,s,i)?jv(t,s+1,o?r.call(o,i):r(i)):Yv(t,s+1)}function u2(t,e,n,r,i,o,s){let a=e+n;return _0(t,a,i,o)?jv(t,a+2,s?r.call(s,i,o):r(i,o)):Yv(t,a+2)}function l2(t,e,n,r,i,o,s,a){let u=e+n;return $L(t,u,i,o,s)?jv(t,u+3,a?r.call(a,i,o,s):r(i,o,s)):Yv(t,u+3)}function Pi(t,e){let n=Qt(),r,i=t+Ze;n.firstCreatePass?(r=d2(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Ii(r.type,!0)),s,a=$t(W);try{let u=_h(!1),l=o();return _h(u),py(n,me(),i,l),l}finally{$t(a)}}function d2(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function sa(t,e,n){let r=t+Ze,i=me(),o=fy(i,r);return F0(i,r)?O0(i,Gc(),e,o.transform,n,o):o.transform(n)}function Zv(t,e,n,r){let i=t+Ze,o=me(),s=fy(o,i);return F0(o,i)?u2(o,Gc(),e,s.transform,n,r,s):s.transform(n,r)}function F0(t,e){return t[X].data[e].pure}var Fh=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Jv=(()=>{class t{compileModuleSync(n){return new Ah(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=ry(n),o=jS(i.declarations).reduce((s,a)=>{let u=Vr(a);return u&&s.push(new xo(u)),s},[]);return new Fh(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var h2=(()=>{class t{zone=M(Ee);changeDetectionScheduler=M(Or);applicationRef=M(jn);applicationErrorHandler=M(Pt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),L0=new U("",{factory:()=>!1});function Xv({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Ee(re(k({},t_()),{scheduleInRootZone:n})),[{provide:Ee,useFactory:t},{provide:Lr,multi:!0,useFactory:()=>{let r=M(h2,{optional:!0});return()=>r.initialize()}},{provide:Lr,multi:!0,useFactory:()=>{let r=M(f2);return()=>{r.initialize()}}},e===!0?{provide:My,useValue:!0}:[],{provide:Py,useValue:n??b0},{provide:Pt,useFactory:()=>{let r=M(Ee),i=M(He),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Mn),o.handleError(s))})}}}]}function e_(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=Xv({ngZoneFactory:()=>{let i=t_(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&Ln("NgZone_CoalesceEvent"),new Ee(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Mt([{provide:L0,useValue:!0},{provide:Wc,useValue:!1},r])}function t_(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var f2=(()=>{class t{subscription=new je;initialized=!1;zone=M(Ee);pendingTasks=M(sr);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ee.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ee.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var V0=(()=>{class t{applicationErrorHandler=M(Pt);appRef=M(jn);taskService=M(sr);ngZone=M(Ee);zonelessEnabled=M(Wc);tracing=M(Fo,{optional:!0});disableScheduling=M(My,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new je;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Nh):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(Py,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Mh||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?ZC:C0;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Nh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,ZC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function p2(){return typeof $localize<"u"&&$localize.locale||cu}var du=new U("",{providedIn:"root",factory:()=>M(du,{optional:!0,skipSelf:!0})||p2()});function tt(t){return jb(t)}function aa(t,e){return gd(t,e?.equal)}var j0=class{[Ut];constructor(e){this[Ut]=e}destroy(){this[Ut].destroy()}};var $0=Symbol("InputSignalNode#UNSET"),N2=re(k({},md),{transformFn:void 0,applyValueToInputSignal(t,e){Ds(t,e)}});function H0(t,e){let n=Object.create(N2);n.value=t,n.transformFn=e?.transform;function r(){if(Es(n),n.value===$0){let i=null;throw new V(-950,i)}return n.value}return r[Ut]=n,r}var ef=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>nu(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},M2=new U("");M2.__NG_ELEMENT_ID__=t=>{let e=Ht();if(e===null)throw new V(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new V(204,!1)};function U0(t,e){return H0(t,e)}function P2(t){return H0($0,t)}var q0=(U0.required=P2,U0);var n_=new U(""),x2=new U("");function hu(t){return!t.moduleRef}function k2(t){let e=hu(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Ee);return n.run(()=>{hu(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Pt),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),hu(t)){let o=()=>e.destroy(),s=t.platformInjector.get(n_);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(n_);s.add(o),t.moduleRef.onDestroy(()=>{Yc(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return F2(r,n,()=>{let o=e.get(sr),s=o.add(),a=e.get(Gv);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(du,cu);if(x0(u||cu),!e.get(x2,!0))return hu(t)?e.get(jn):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(hu(t)){let h=e.get(jn);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return O2?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var O2;function F2(t,e,n){try{let r=n();return zr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var Xh=null;function L2(t=[],e){return ke.create({name:e,providers:[{provide:Vc,useValue:"platform"},{provide:n_,useValue:new Set([()=>Xh=null])},...t]})}function V2(t=[]){if(Xh)return Xh;let e=L2(t);return Xh=e,N0(),j2(e),e}function j2(t){let e=t.get(Vh,null);Ye(t,()=>{e?.forEach(n=>n())})}function fu(){return!1}var Vo=(()=>{class t{static __NG_ELEMENT_ID__=U2}return t})();function U2(t){return B2(Ht(),me(),(t&16)===16)}function B2(t,e,n){if(Si(t)&&!n){let r=_n(t.index,e);return new Mo(r,r)}else if(t.type&175){let r=e[on];return new Mo(r,e)}return null}function z0(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;Ce(8);try{let o=i?.injector??V2(r),s=[Xv({}),{provide:Or,useExisting:V0},RC,...n||[]],a=new eu({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return k2({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Ce(9)}}function ca(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function G0(t){let e=Vr(t);if(!e)return null;let n=new xo(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Q0=null;function In(){return Q0}function r_(t){Q0??=t}var pu=class{},gu=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>M(Y0),providedIn:"platform"})}return t})(),i_=new U(""),Y0=(()=>{class t extends gu{_location;_history;_doc=M(Ge);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return In().getBaseHref(this._doc)}onPopState(n){let r=In().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=In().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function tf(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function W0(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function Un(t){return t&&t[0]!=="?"?`?${t}`:t}var Bn=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>M(rf),providedIn:"root"})}return t})(),nf=new U(""),rf=(()=>{class t extends Bn{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(Ge).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return tf(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Un(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Un(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Un(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(z(gu),z(nf,8))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),xi=(()=>{class t{_subject=new Pe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=q2(W0(K0(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Un(r))}normalize(n){return t.stripTrailingSlash(H2(this._basePath,K0(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Un(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Un(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Un;static joinWithSlash=tf;static stripTrailingSlash=W0;static \u0275fac=function(r){return new(r||t)(z(Bn))};static \u0275prov=H({token:t,factory:()=>$2(),providedIn:"root"})}return t})();function $2(){return new xi(z(Bn))}function H2(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function K0(t){return t.replace(/\/index.html$/,"")}function q2(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var d_=(()=>{class t extends Bn{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=tf(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Un(o))||this._platformLocation.pathname;this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Un(o))||this._platformLocation.pathname;this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(z(gu),z(nf,8))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})();var kt=(function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t})(kt||{}),Se=(function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t})(Se||{}),Zt=(function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t})(Zt||{}),Kr={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function X0(t){return cn(t)[We.LocaleId]}function eA(t,e,n){let r=cn(t),i=[r[We.DayPeriodsFormat],r[We.DayPeriodsStandalone]],o=wn(i,e);return wn(o,n)}function tA(t,e,n){let r=cn(t),i=[r[We.DaysFormat],r[We.DaysStandalone]],o=wn(i,e);return wn(o,n)}function nA(t,e,n){let r=cn(t),i=[r[We.MonthsFormat],r[We.MonthsStandalone]],o=wn(i,e);return wn(o,n)}function rA(t,e){let r=cn(t)[We.Eras];return wn(r,e)}function mu(t,e){let n=cn(t);return wn(n[We.DateFormat],e)}function yu(t,e){let n=cn(t);return wn(n[We.TimeFormat],e)}function vu(t,e){let r=cn(t)[We.DateTimeFormat];return wn(r,e)}function _u(t,e){let n=cn(t),r=n[We.NumberSymbols][e];if(typeof r>"u"){if(e===Kr.CurrencyDecimal)return n[We.NumberSymbols][Kr.Decimal];if(e===Kr.CurrencyGroup)return n[We.NumberSymbols][Kr.Group]}return r}function iA(t){if(!t[We.ExtraData])throw new V(2303,!1)}function oA(t){let e=cn(t);return iA(e),(e[We.ExtraData][2]||[]).map(r=>typeof r=="string"?o_(r):[o_(r[0]),o_(r[1])])}function sA(t,e,n){let r=cn(t);iA(r);let i=[r[We.ExtraData][0],r[We.ExtraData][1]],o=wn(i,e)||[];return wn(o,n)||[]}function wn(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new V(2304,!1)}function o_(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var z2=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,of={},G2=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function aA(t,e,n,r){let i=tj(t);e=Wr(n,e)||e;let s=[],a;for(;e;)if(a=G2.exec(e),a){s=s.concat(a.slice(1));let h=s.pop();if(!h)break;e=h}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=uA(r,u),i=ej(i,r));let l="";return s.forEach(h=>{let p=J2(h);l+=p?p(i,n,u):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function lf(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Wr(t,e){let n=X0(t);if(of[n]??={},of[n][e])return of[n][e];let r="";switch(e){case"shortDate":r=mu(t,Zt.Short);break;case"mediumDate":r=mu(t,Zt.Medium);break;case"longDate":r=mu(t,Zt.Long);break;case"fullDate":r=mu(t,Zt.Full);break;case"shortTime":r=yu(t,Zt.Short);break;case"mediumTime":r=yu(t,Zt.Medium);break;case"longTime":r=yu(t,Zt.Long);break;case"fullTime":r=yu(t,Zt.Full);break;case"short":let i=Wr(t,"shortTime"),o=Wr(t,"shortDate");r=sf(vu(t,Zt.Short),[i,o]);break;case"medium":let s=Wr(t,"mediumTime"),a=Wr(t,"mediumDate");r=sf(vu(t,Zt.Medium),[s,a]);break;case"long":let u=Wr(t,"longTime"),l=Wr(t,"longDate");r=sf(vu(t,Zt.Long),[u,l]);break;case"full":let h=Wr(t,"fullTime"),p=Wr(t,"fullDate");r=sf(vu(t,Zt.Full),[h,p]);break}return r&&(of[n][e]=r),r}function sf(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function $n(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function W2(t,e){return $n(t,3).substring(0,e)}function nt(t,e,n=0,r=!1,i=!1){return function(o,s){let a=K2(t,o);if((n>0||a>-n)&&(a+=n),t===3)a===0&&n===-12&&(a=12);else if(t===6)return W2(a,e);let u=_u(s,Kr.MinusSign);return $n(a,e,u,r,i)}}function K2(t,e){switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new V(2301,!1)}}function Ne(t,e,n=kt.Format,r=!1){return function(i,o){return Q2(i,o,t,e,n,r)}}function Q2(t,e,n,r,i,o){switch(n){case 2:return nA(e,i,r)[t.getMonth()];case 1:return tA(e,i,r)[t.getDay()];case 0:let s=t.getHours(),a=t.getMinutes();if(o){let l=oA(e),h=sA(e,i,r),p=l.findIndex(g=>{if(Array.isArray(g)){let[y,D]=g,N=s>=y.hours&&a>=y.minutes,R=s<D.hours||s===D.hours&&a<D.minutes;if(y.hours<D.hours){if(N&&R)return!0}else if(N||R)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return eA(e,i,r)[s<12?0:1];case 3:return rA(e,r)[t.getFullYear()<=0?0:1];default:let u=n;throw new V(2302,!1)}}function af(t){return function(e,n,r){let i=-1*r,o=_u(n,Kr.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case 0:return(i>=0?"+":"")+$n(s,2,o)+$n(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+$n(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+$n(s,2,o)+":"+$n(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+$n(s,2,o)+":"+$n(Math.abs(i%60),2,o);default:throw new V(2310,!1)}}}var Y2=0,uf=4;function Z2(t){let e=lf(t,Y2,1).getDay();return lf(t,0,1+(e<=uf?uf:uf+7)-e)}function cA(t){let e=t.getDay(),n=e===0?-3:uf-e;return lf(t.getFullYear(),t.getMonth(),t.getDate()+n)}function s_(t,e=!1){return function(n,r){let i;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=cA(n),s=Z2(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return $n(i,t,_u(r,Kr.MinusSign))}}function cf(t,e=!1){return function(n,r){let o=cA(n).getFullYear();return $n(o,t,_u(r,Kr.MinusSign),e)}}var a_={};function J2(t){if(a_[t])return a_[t];let e;switch(t){case"G":case"GG":case"GGG":e=Ne(3,Se.Abbreviated);break;case"GGGG":e=Ne(3,Se.Wide);break;case"GGGGG":e=Ne(3,Se.Narrow);break;case"y":e=nt(0,1,0,!1,!0);break;case"yy":e=nt(0,2,0,!0,!0);break;case"yyy":e=nt(0,3,0,!1,!0);break;case"yyyy":e=nt(0,4,0,!1,!0);break;case"Y":e=cf(1);break;case"YY":e=cf(2,!0);break;case"YYY":e=cf(3);break;case"YYYY":e=cf(4);break;case"M":case"L":e=nt(1,1,1);break;case"MM":case"LL":e=nt(1,2,1);break;case"MMM":e=Ne(2,Se.Abbreviated);break;case"MMMM":e=Ne(2,Se.Wide);break;case"MMMMM":e=Ne(2,Se.Narrow);break;case"LLL":e=Ne(2,Se.Abbreviated,kt.Standalone);break;case"LLLL":e=Ne(2,Se.Wide,kt.Standalone);break;case"LLLLL":e=Ne(2,Se.Narrow,kt.Standalone);break;case"w":e=s_(1);break;case"ww":e=s_(2);break;case"W":e=s_(1,!0);break;case"d":e=nt(2,1);break;case"dd":e=nt(2,2);break;case"c":case"cc":e=nt(7,1);break;case"ccc":e=Ne(1,Se.Abbreviated,kt.Standalone);break;case"cccc":e=Ne(1,Se.Wide,kt.Standalone);break;case"ccccc":e=Ne(1,Se.Narrow,kt.Standalone);break;case"cccccc":e=Ne(1,Se.Short,kt.Standalone);break;case"E":case"EE":case"EEE":e=Ne(1,Se.Abbreviated);break;case"EEEE":e=Ne(1,Se.Wide);break;case"EEEEE":e=Ne(1,Se.Narrow);break;case"EEEEEE":e=Ne(1,Se.Short);break;case"a":case"aa":case"aaa":e=Ne(0,Se.Abbreviated);break;case"aaaa":e=Ne(0,Se.Wide);break;case"aaaaa":e=Ne(0,Se.Narrow);break;case"b":case"bb":case"bbb":e=Ne(0,Se.Abbreviated,kt.Standalone,!0);break;case"bbbb":e=Ne(0,Se.Wide,kt.Standalone,!0);break;case"bbbbb":e=Ne(0,Se.Narrow,kt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ne(0,Se.Abbreviated,kt.Format,!0);break;case"BBBB":e=Ne(0,Se.Wide,kt.Format,!0);break;case"BBBBB":e=Ne(0,Se.Narrow,kt.Format,!0);break;case"h":e=nt(3,1,-12);break;case"hh":e=nt(3,2,-12);break;case"H":e=nt(3,1);break;case"HH":e=nt(3,2);break;case"m":e=nt(4,1);break;case"mm":e=nt(4,2);break;case"s":e=nt(5,1);break;case"ss":e=nt(5,2);break;case"S":e=nt(6,1);break;case"SS":e=nt(6,2);break;case"SSS":e=nt(6,3);break;case"Z":case"ZZ":case"ZZZ":e=af(0);break;case"ZZZZZ":e=af(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=af(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=af(2);break;default:return null}return a_[t]=e,e}function uA(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function X2(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function ej(t,e,n){let i=t.getTimezoneOffset(),o=uA(e,i);return X2(t,-1*(o-i))}function tj(t){if(Z0(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,o=1,s=1]=t.split("-").map(a=>+a);return lf(i,o-1,s)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(z2))return nj(r)}let e=new Date(t);if(!Z0(e))throw new V(2311,!1);return e}function nj(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,s,a,u,l),e}function Z0(t){return t instanceof Date&&!isNaN(t.valueOf())}var c_=/\s+/,J0=[],h_=(()=>{class t{_ngEl;_renderer;initialClasses=J0;rawClass;stateMap=new Map;constructor(n,r){this._ngEl=n,this._renderer=r}set klass(n){this.initialClasses=n!=null?n.trim().split(c_):J0}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(c_):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(c_).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||t)(W(lr),W(Hr))};static \u0275dir=xt({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})();function lA(t,e){return new V(2100,!1)}var u_=class{createSubscription(e,n,r){return tt(()=>e.subscribe({next:n,error:r}))}dispose(e){tt(()=>e.unsubscribe())}},l_=class{createSubscription(e,n,r){return e.then(i=>n?.(i),i=>r?.(i)),{unsubscribe:()=>{n=null,r=null}}}dispose(e){e.unsubscribe()}},rj=new l_,ij=new u_,Eu=(()=>{class t{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=M(Pt);constructor(n){this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r),r=>this.applicationErrorHandler(r))}_selectStrategy(n){if(zr(n))return rj;if(Jh(n))return ij;throw lA(t,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||t)(W(Vo,16))};static \u0275pipe=Qh({name:"async",type:t,pure:!1})}return t})();var oj="mediumDate",dA=new U(""),hA=new U(""),f_=(()=>{class t{locale;defaultTimezone;defaultOptions;constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(n==null||n===""||n!==n)return null;try{let s=r??this.defaultOptions?.dateFormat??oj,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return aA(n,s,o||this.locale,a)}catch(s){throw lA(t,s.message)}}static \u0275fac=function(r){return new(r||t)(W(du,16),W(dA,24),W(hA,24))};static \u0275pipe=Qh({name:"date",type:t,pure:!0})}return t})();var Dn=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Vn({type:t});static \u0275inj=gn({})}return t})();function p_(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Iu=class{};var fA="browser";var pA=(()=>{class t{static \u0275prov=H({token:t,providedIn:"root",factory:()=>new g_(M(Ge),window)})}return t})(),g_=class{document;window;offset=()=>[0,0];constructor(e,n){this.document=e,this.window=n}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,n){this.window.scrollTo(re(k({},n),{left:e[0],top:e[1]}))}scrollToAnchor(e,n){let r=aj(this.document,e);r&&(this.scrollToElement(r,n),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(Di(2400,!1))}}scrollToElement(e,n){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(re(k({},n),{left:i-s[0],top:o-s[1]}))}};function aj(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var hf=new U(""),E_=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new V(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(z(hf),z(Ee))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),Du=class{_doc;constructor(e){this._doc=e}manager},m_="ng-app-id";function gA(t){for(let e of t)e.remove()}function mA(t,e){let n=e.createElement("style");return n.textContent=t,n}function cj(t,e,n,r){let i=t.head?.querySelectorAll(`style[${m_}="${e}"],link[${m_}="${e}"]`);if(i)for(let o of i)o.removeAttribute(m_),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function v_(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var I_=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,cj(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,mA);r?.forEach(i=>this.addUsage(i,this.external,v_))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(gA(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])gA(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,mA(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,v_(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(z(Ge),z(Lh),z(jh,8),z(Ni))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),y_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},w_=/%COMP%/g;var vA="%COMP%",uj=`_nghost-${vA}`,lj=`_ngcontent-${vA}`,dj=!0,hj=new U("",{providedIn:"root",factory:()=>dj});function fj(t){return lj.replace(w_,t)}function pj(t){return uj.replace(w_,t)}function _A(t,e){return e.map(n=>n.replace(w_,t))}var D_=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,u,l=null,h=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new Tu(n,s,u,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof df?i.applyToHost(n):i instanceof bu&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case Br.Emulated:o=new df(u,l,r,this.appId,h,s,a,p,g);break;case Br.ShadowDom:return new __(u,l,n,r,s,a,this.nonce,p,g);default:o=new bu(u,l,r,h,s,a,p,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(z(E_),z(I_),z(Lh),z(hj),z(Ge),z(Ni),z(Ee),z(jh),z(Fo,8))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),Tu=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(y_[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(yA(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(yA(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new V(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=y_[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=y_[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(cr.DashCase|cr.Important)?e.style.setProperty(n,r,i&cr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&cr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=In().getGlobalEventTarget(this.doc,e),!e))throw new V(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function yA(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var __=class extends Tu{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=_A(i.id,h);for(let g of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=g,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let g of p){let y=v_(g,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},bu=class extends Tu{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?_A(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&$h.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},df=class extends bu{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,n,r,o,s,a,u,l,h),this.contentAttr=fj(h),this.hostAttr=pj(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var ff=class t extends pu{supportsDOMEvents=!0;static makeCurrent(){r_(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=gj();return n==null?null:mj(n)}resetBaseElement(){Cu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return p_(document.cookie,e)}},Cu=null;function gj(){return Cu=Cu||document.head.querySelector("base"),Cu?Cu.getAttribute("href"):null}function mj(t){return new URL(t,document.baseURI).pathname}var yj=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),IA=(()=>{class t extends Du{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(z(Ge))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),EA=["alt","control","meta","shift"],vj={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_j={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},wA=(()=>{class t extends Du{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>In().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),EA.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=vj[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),EA.forEach(s=>{if(s!==i){let a=_j[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(z(Ge))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})();function T_(t,e,n){let r=k({rootComponent:t,platformRef:n?.platformRef},Ej(e));return z0(r)}function Ej(t){return{appProviders:[...bj,...t?.providers??[]],platformProviders:Tj}}function Ij(){ff.makeCurrent()}function wj(){return new Mn}function Dj(){return Ev(document),document}var Tj=[{provide:Ni,useValue:fA},{provide:Vh,useValue:Ij,multi:!0},{provide:Ge,useFactory:Dj}];var bj=[{provide:Vc,useValue:"root"},{provide:Mn,useFactory:wj},{provide:hf,useClass:IA,multi:!0,deps:[Ge]},{provide:hf,useClass:wA,multi:!0,deps:[Ge]},D_,I_,E_,{provide:Po,useExisting:D_},{provide:Iu,useClass:yj},[]];var ua=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(z(Ge))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ue="primary",ju=Symbol("RouteTitle"),N_=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Bo(t){return new N_(t)}function NA(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Cj(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!fr(t[n],e[n]))return!1;return!0}function fr(t,e){let n=t?M_(t):void 0,r=e?M_(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!MA(t[i],e[i]))return!1;return!0}function M_(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function MA(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function PA(t){return t.length>0?t[t.length-1]:null}function Qr(t){return Am(t)?t:zr(t)?pe(Promise.resolve(t)):Z(t)}var Sj={exact:kA,subset:OA},xA={exact:Aj,subset:Rj,ignored:()=>!0};function DA(t,e,n){return Sj[n.paths](t.root,e.root,n.matrixParams)&&xA[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Aj(t,e){return fr(t,e)}function kA(t,e,n){if(!jo(t.segments,e.segments)||!mf(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!kA(t.children[r],e.children[r],n))return!1;return!0}function Rj(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>MA(t[n],e[n]))}function OA(t,e,n){return FA(t,e,e.segments,n)}function FA(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!jo(i,n)||e.hasChildren()||!mf(i,n,r))}else if(t.segments.length===n.length){if(!jo(t.segments,n)||!mf(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!OA(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!jo(t.segments,i)||!mf(t.segments,i,r)||!t.children[ue]?!1:FA(t.children[ue],e,o,r)}}function mf(t,e,n){return e.every((r,i)=>xA[n](t[i].parameters,r.parameters))}var gr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new we([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Bo(this.queryParams),this._queryParamMap}toString(){return Pj.serialize(this)}},we=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return yf(this)}},ki=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Bo(this.parameters),this._parameterMap}toString(){return VA(this)}};function Nj(t,e){return jo(t,e)&&t.every((n,r)=>fr(n.parameters,e[r].parameters))}function jo(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function Mj(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ue&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ue&&(n=n.concat(e(i,r)))}),n}var $o=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>new Oi,providedIn:"root"})}return t})(),Oi=class{parse(e){let n=new x_(e);return new gr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Su(e.root,!0)}`,r=Oj(e.queryParams),i=typeof e.fragment=="string"?`#${xj(e.fragment)}`:"";return`${n}${r}${i}`}},Pj=new Oi;function yf(t){return t.segments.map(e=>VA(e)).join("/")}function Su(t,e){if(!t.hasChildren())return yf(t);if(e){let n=t.children[ue]?Su(t.children[ue],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==ue&&r.push(`${i}:${Su(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=Mj(t,(r,i)=>i===ue?[Su(t.children[ue],!1)]:[`${i}:${Su(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ue]!=null?`${yf(t)}/${n[0]}`:`${yf(t)}/(${n.join("//")})`}}function LA(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function pf(t){return LA(t).replace(/%3B/gi,";")}function xj(t){return encodeURI(t)}function P_(t){return LA(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vf(t){return decodeURIComponent(t)}function TA(t){return vf(t.replace(/\+/g,"%20"))}function VA(t){return`${P_(t.path)}${kj(t.parameters)}`}function kj(t){return Object.entries(t).map(([e,n])=>`;${P_(e)}=${P_(n)}`).join("")}function Oj(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${pf(n)}=${pf(i)}`).join("&"):`${pf(n)}=${pf(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var Fj=/^[^\/()?;#]+/;function C_(t){let e=t.match(Fj);return e?e[0]:""}var Lj=/^[^\/()?;=#]+/;function Vj(t){let e=t.match(Lj);return e?e[0]:""}var jj=/^[^=?&#]+/;function Uj(t){let e=t.match(jj);return e?e[0]:""}var Bj=/^[^&#]+/;function $j(t){let e=t.match(Bj);return e?e[0]:""}var x_=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new we([],{}):new we([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ue]=new we(e,n)),r}parseSegment(){let e=C_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new V(4009,!1);return this.capture(e),new ki(vf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Vj(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=C_(this.remaining);i&&(r=i,this.capture(r))}e[vf(n)]=vf(r)}parseQueryParam(e){let n=Uj(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=$j(this.remaining);s&&(r=s,this.capture(r))}let i=TA(n),o=TA(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=C_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new V(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ue);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[ue]:new we([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new V(4011,!1)}};function jA(t){return t.segments.length>0?new we([],{[ue]:t}):t}function UA(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=UA(i);if(r===ue&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new we(t.segments,e);return Hj(n)}function Hj(t){if(t.numberOfChildren===1&&t.children[ue]){let e=t.children[ue];return new we(t.segments.concat(e.segments),e.children)}return t}function Fi(t){return t instanceof gr}function BA(t,e,n=null,r=null){let i=$A(t);return HA(i,e,n,r)}function $A(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new we(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=jA(r);return e??i}function HA(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return S_(i,i,i,n,r);let o=qj(e);if(o.toRoot())return S_(i,i,new we([],{}),n,r);let s=zj(o,i,t),a=s.processChildren?Ru(s.segmentGroup,s.index,o.commands):zA(s.segmentGroup,s.index,o.commands);return S_(i,s.segmentGroup,a,n,r)}function _f(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Mu(t){return typeof t=="object"&&t!=null&&t.outlets}function S_(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=qA(t,e,n);let a=jA(UA(s));return new gr(a,o,i)}function qA(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=qA(o,e,n)}),new we(t.segments,r)}var Ef=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&_f(r[0]))throw new V(4003,!1);let i=r.find(Mu);if(i&&i!==PA(r))throw new V(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function qj(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Ef(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Ef(n,e,r)}var ha=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function zj(t,e,n){if(t.isAbsolute)return new ha(e,!0,0);if(!n)return new ha(e,!1,NaN);if(n.parent===null)return new ha(n,!0,0);let r=_f(t.commands[0])?0:1,i=n.segments.length-1+r;return Gj(n,i,t.numberOfDoubleDots)}function Gj(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new V(4005,!1);i=r.segments.length}return new ha(r,!1,i-o)}function Wj(t){return Mu(t[0])?t[0].outlets:{[ue]:t}}function zA(t,e,n){if(t??=new we([],{}),t.segments.length===0&&t.hasChildren())return Ru(t,e,n);let r=Kj(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new we(t.segments.slice(0,r.pathIndex),{});return o.children[ue]=new we(t.segments.slice(r.pathIndex),t.children),Ru(o,0,i)}else return r.match&&i.length===0?new we(t.segments,{}):r.match&&!t.hasChildren()?k_(t,e,n):r.match?Ru(t,0,i):k_(t,e,n)}function Ru(t,e,n){if(n.length===0)return new we(t.segments,{});{let r=Wj(n),i={};if(Object.keys(r).some(o=>o!==ue)&&t.children[ue]&&t.numberOfChildren===1&&t.children[ue].segments.length===0){let o=Ru(t.children[ue],e,n);return new we(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=zA(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new we(t.segments,i)}}function Kj(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Mu(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!CA(u,l,s))return o;r+=2}else{if(!CA(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function k_(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Mu(o)){let u=Qj(o.outlets);return new we(r,u)}if(i===0&&_f(n[0])){let u=t.segments[e];r.push(new ki(u.path,bA(n[0]))),i++;continue}let s=Mu(o)?o.outlets[ue]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&_f(a)?(r.push(new ki(s,bA(a))),i+=2):(r.push(new ki(s,{})),i++)}return new we(r,{})}function Qj(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=k_(new we([],{}),0,r))}),e}function bA(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function CA(t,e,n){return t==n.path&&fr(e,n.parameters)}var fa="imperative",dt=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(dt||{}),ln=class{id;url;constructor(e,n){this.id=e,this.url=n}},Li=class extends ln{type=dt.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Tn=class extends ln{urlAfterRedirects;type=dt.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},zt=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(zt||{}),ga=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(ga||{}),pr=class extends ln{reason;code;type=dt.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},mr=class extends ln{reason;code;type=dt.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},ma=class extends ln{error;target;type=dt.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Pu=class extends ln{urlAfterRedirects;state;type=dt.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},If=class extends ln{urlAfterRedirects;state;type=dt.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wf=class extends ln{urlAfterRedirects;state;shouldActivate;type=dt.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Df=class extends ln{urlAfterRedirects;state;type=dt.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tf=class extends ln{urlAfterRedirects;state;type=dt.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bf=class{route;type=dt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Cf=class{route;type=dt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Sf=class{snapshot;type=dt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Af=class{snapshot;type=dt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Rf=class{snapshot;type=dt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Nf=class{snapshot;type=dt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ya=class{routerEvent;position;anchor;type=dt.Scroll;constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},xu=class{},va=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function Yj(t){return!(t instanceof xu)&&!(t instanceof va)}function Zj(t,e){return t.providers&&!t._injector&&(t._injector=ta(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Hn(t){return t.outlet||ue}function Jj(t,e){let n=t.filter(r=>Hn(r)===e);return n.push(...t.filter(r=>Hn(r)!==e)),n}function Ia(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Mf=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ia(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Ho(this.rootInjector)}},Ho=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Mf(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(z(He))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Pf=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=O_(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=O_(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=F_(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return F_(e,this._root).map(n=>n.value)}};function O_(t,e){if(t===e.value)return e;for(let n of e.children){let r=O_(t,n);if(r)return r}return null}function F_(t,e){if(t===e.value)return[e];for(let n of e.children){let r=F_(t,n);if(r.length)return r.unshift(e),r}return[]}var un=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function da(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var ku=class extends Pf{snapshot;constructor(e,n){super(e),this.snapshot=n,q_(this,e)}toString(){return this.snapshot.toString()}};function GA(t){let e=Xj(t),n=new Et([new ki("",{})]),r=new Et({}),i=new Et({}),o=new Et({}),s=new Et(""),a=new Jt(n,r,o,s,i,ue,t,e.root);return a.snapshot=e.root,new ku(new un(a,[]),e)}function Xj(t){let e={},n={},r={},o=new Uo([],e,r,"",n,ue,t,null,{});return new Ou("",new un(o,[]))}var Jt=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(G(l=>l[ju]))??Z(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(G(e=>Bo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(G(e=>Bo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function xf(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:k(k({},e.params),t.params),data:k(k({},e.data),t.data),resolve:k(k(k(k({},t.data),e.data),i?.data),t._resolvedData)}:r={params:k({},t.params),data:k({},t.data),resolve:k(k({},t.data),t._resolvedData??{})},i&&KA(i)&&(r.resolve[ju]=i.title),r}var Uo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[ju]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Bo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Bo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ou=class extends Pf{url;constructor(e,n){super(n),this.url=e,q_(this,n)}toString(){return WA(this._root)}};function q_(t,e){e.value._routerState=t,e.children.forEach(n=>q_(t,n))}function WA(t){let e=t.children.length>0?` { ${t.children.map(WA).join(", ")} } `:"";return`${t.value}${e}`}function A_(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,fr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),fr(e.params,n.params)||t.paramsSubject.next(n.params),Cj(e.url,n.url)||t.urlSubject.next(n.url),fr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function L_(t,e){let n=fr(t.params,e.params)&&Nj(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||L_(t.parent,e.parent))}function KA(t){return typeof t.title=="string"||t.title===null}var QA=new U(""),Uu=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ue;activateEvents=new Je;deactivateEvents=new Je;attachEvents=new Je;detachEvents=new Je;routerOutletData=q0(void 0);parentContexts=M(Ho);location=M(ou);changeDetector=M(Vo);inputBinder=M(Bu,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new V(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new V(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new V(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new V(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new V_(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=xt({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[$r]})}return t})(),V_=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Jt?this.route:e===Ho?this.childContexts:e===QA?this.outletData:this.parent.get(e,n)}},Bu=new U(""),z_=(()=>{class t{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:r}=n,i=Nc([r.queryParams,r.params,r.data]).pipe(xe(([o,s,a],u)=>(a=k(k(k({},o),s),a),u===0?Z(a):Promise.resolve(a)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(n);return}let s=G0(r.component);if(!s){this.unsubscribeFromRouteData(n);return}for(let{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(n,i)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),G_=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Dt({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&ye(0,"router-outlet")},dependencies:[Uu],encapsulation:2})}return t})();function W_(t){let e=t.children&&t.children.map(W_),n=e?re(k({},t),{children:e}):k({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ue&&(n.component=G_),n}function eU(t,e,n){let r=Fu(t,e._root,n?n._root:void 0);return new ku(r,e)}function Fu(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=tU(t,e,n);return new un(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Fu(t,a)),s}}let r=nU(e.value),i=e.children.map(o=>Fu(t,o));return new un(r,i)}}function tU(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Fu(t,r,i);return Fu(t,r)})}function nU(t){return new Jt(new Et(t.url),new Et(t.params),new Et(t.queryParams),new Et(t.fragment),new Et(t.data),t.outlet,t.component,t)}var _a=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},YA="ngNavigationCancelingError";function kf(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Fi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=ZA(!1,zt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function ZA(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[YA]=!0,n.cancellationCode=e,n}function rU(t){return JA(t)&&Fi(t.url)}function JA(t){return!!t&&t[YA]}var iU=(t,e,n,r)=>G(i=>(new j_(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),j_=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),A_(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=da(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=da(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=da(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=da(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Nf(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Af(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(A_(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),A_(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Of=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},pa=class{component;route;constructor(e,n){this.component=e,this.route=n}};function oU(t,e,n){let r=t._root,i=e?e._root:null;return Au(r,i,n,[r.value])}function sU(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function wa(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Gm(t)?t:e.get(t):r}function Au(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=da(e);return t.children.forEach(s=>{aU(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Nu(a,n.getContext(s),i)),i}function aU(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=cU(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Of(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Au(t,e,a?a.children:null,r,i):Au(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new pa(a.outlet.component,s))}else s&&Nu(e,a,i),i.canActivateChecks.push(new Of(r)),o.component?Au(t,null,a?a.children:null,r,i):Au(t,null,n,r,i);return i}function cU(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!jo(t.url,e.url);case"pathParamsOrQueryParamsChange":return!jo(t.url,e.url)||!fr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!L_(t,e)||!fr(t.queryParams,e.queryParams);case"paramsChange":default:return!L_(t,e)}}function Nu(t,e,n){let r=da(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Nu(s,e.children.getContext(o),n):Nu(s,null,n):Nu(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new pa(e.outlet.component,i)):n.canDeactivateChecks.push(new pa(null,i)):n.canDeactivateChecks.push(new pa(null,i))}function $u(t){return typeof t=="function"}function uU(t){return typeof t=="boolean"}function lU(t){return t&&$u(t.canLoad)}function dU(t){return t&&$u(t.canActivate)}function hU(t){return t&&$u(t.canActivateChild)}function fU(t){return t&&$u(t.canDeactivate)}function pU(t){return t&&$u(t.canMatch)}function XA(t){return t instanceof Nr||t?.name==="EmptyError"}var gf=Symbol("INITIAL_VALUE");function Ea(){return xe(t=>Nc(t.map(e=>e.pipe(ct(1),Hd(gf)))).pipe(G(e=>{for(let n of e)if(n!==!0){if(n===gf)return gf;if(n===!1||gU(n))return n}return!0}),ft(e=>e!==gf),ct(1)))}function gU(t){return Fi(t)||t instanceof _a}function mU(t,e){return $e(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?Z(re(k({},n),{guardsResult:!0})):yU(s,r,i,t).pipe($e(a=>a&&uU(a)?vU(r,o,t,e):Z(a)),G(a=>re(k({},n),{guardsResult:a})))})}function yU(t,e,n,r){return pe(t).pipe($e(i=>DU(i.component,i.route,n,e,r)),Pr(i=>i!==!0,!0))}function vU(t,e,n,r){return pe(e).pipe(vi(i=>Os(EU(i.route.parent,r),_U(i.route,r),wU(t,i.path,n),IU(t,i.route,n))),Pr(i=>i!==!0,!0))}function _U(t,e){return t!==null&&e&&e(new Rf(t)),Z(!0)}function EU(t,e){return t!==null&&e&&e(new Sf(t)),Z(!0)}function IU(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let i=r.map(o=>yo(()=>{let s=Ia(e)??n,a=wa(o,s),u=dU(a)?a.canActivate(e,t):Ye(s,()=>a(e,t));return Qr(u).pipe(Pr())}));return Z(i).pipe(Ea())}function wU(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>sU(s)).filter(s=>s!==null).map(s=>yo(()=>{let a=s.guards.map(u=>{let l=Ia(s.node)??n,h=wa(u,l),p=hU(h)?h.canActivateChild(r,t):Ye(l,()=>h(r,t));return Qr(p).pipe(Pr())});return Z(a).pipe(Ea())}));return Z(o).pipe(Ea())}function DU(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Z(!0);let s=o.map(a=>{let u=Ia(e)??i,l=wa(a,u),h=fU(l)?l.canDeactivate(t,e,n,r):Ye(u,()=>l(t,e,n,r));return Qr(h).pipe(Pr())});return Z(s).pipe(Ea())}function TU(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return Z(!0);let o=i.map(s=>{let a=wa(s,t),u=lU(a)?a.canLoad(e,n):Ye(t,()=>a(e,n));return Qr(u)});return Z(o).pipe(Ea(),eR(r))}function eR(t){return Id(pt(e=>{if(typeof e!="boolean")throw kf(t,e)}),G(e=>e===!0))}function bU(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return Z(!0);let o=i.map(s=>{let a=wa(s,t),u=pU(a)?a.canMatch(e,n):Ye(t,()=>a(e,n));return Qr(u)});return Z(o).pipe(Ea(),eR(r))}var Lu=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Vu=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function la(t){return Nn(new Lu(t))}function CU(t){return Nn(new V(4e3,!1))}function SU(t){return Nn(ZA(!1,zt.GuardRejected))}var U_=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Z(r);if(i.numberOfChildren>1||!i.children[ue])return CU(`${e.redirectTo}`);i=i.children[ue]}}applyRedirectCommands(e,n,r,i,o){return AU(n,i,o).pipe(G(s=>{if(s instanceof gr)throw new Vu(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Vu(a);return a}))}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new gr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new we(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new V(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function AU(t,e,n){if(typeof t=="string")return Z(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return Qr(Ye(n,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var B_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function RU(t,e,n,r,i){let o=tR(t,e,n);return o.matched?(r=Zj(e,r),bU(r,e,n,i).pipe(G(s=>s===!0?o:k({},B_)))):Z(o)}function tR(t,e,n){if(e.path==="**")return NU(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?k({},B_):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||NA)(n,t,e);if(!i)return k({},B_);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?k(k({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function NU(t){return{matched:!0,parameters:t.length>0?PA(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function SA(t,e,n,r){return n.length>0&&xU(t,n,r)?{segmentGroup:new we(e,PU(r,new we(n,t.children))),slicedSegments:[]}:n.length===0&&kU(t,n,r)?{segmentGroup:new we(t.segments,MU(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new we(t.segments,t.children),slicedSegments:n}}function MU(t,e,n,r){let i={};for(let o of n)if(Lf(t,e,o)&&!r[Hn(o)]){let s=new we([],{});i[Hn(o)]=s}return k(k({},r),i)}function PU(t,e){let n={};n[ue]=e;for(let r of t)if(r.path===""&&Hn(r)!==ue){let i=new we([],{});n[Hn(r)]=i}return n}function xU(t,e,n){return n.some(r=>Lf(t,e,r)&&Hn(r)!==ue)}function kU(t,e,n){return n.some(r=>Lf(t,e,r))}function Lf(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function OU(t,e,n){return e.length===0&&!t.children[n]}var $_=class{};function FU(t,e,n,r,i,o,s="emptyOnly"){return new H_(t,e,n,r,i,s,o).recognize()}var LU=31,H_=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new U_(this.urlSerializer,this.urlTree)}noMatchError(e){return new V(4002,`'${e.segmentGroup}'`)}recognize(){let e=SA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(G(({children:n,rootSnapshot:r})=>{let i=new un(r,n),o=new Ou("",i),s=BA(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Uo([],Object.freeze({}),Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ue,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ue,n).pipe(G(r=>({children:r,rootSnapshot:n})),Bt(r=>{if(r instanceof Vu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Lu?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(G(s=>s instanceof un?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return pe(o).pipe(vi(s=>{let a=r.children[s],u=Jj(n,s);return this.processSegmentGroup(e,u,a,s,i)}),$d((s,a)=>(s.push(...a),s)),_i(null),Nm(),$e(s=>{if(s===null)return la(r);let a=nR(s);return VU(a),Z(a)}))}processSegment(e,n,r,i,o,s,a){return pe(n).pipe(vi(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(Bt(l=>{if(l instanceof Lu)return Z(null);throw l}))),Pr(u=>!!u),Bt(u=>{if(XA(u))return OU(r,i,o)?Z(new $_):la(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return Hn(r)!==s&&(s===ue||!Lf(i,o,r))?la(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):la(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=tR(n,i,o);if(!u)return la(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>LU&&(this.allowRedirects=!1));let y=new Uo(o,l,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,AA(i),Hn(i),i.component??i._loadedComponent??null,i,RA(i)),D=xf(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(D.params),y.data=Object.freeze(D.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(xe(R=>this.applyRedirects.lineralizeSegments(i,R)),$e(R=>this.processSegment(e,r,n,R.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=RU(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(xe(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(xe(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:y}=u,D=new Uo(g,p,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,AA(r),Hn(r),r.component??r._loadedComponent??null,r,RA(r)),N=xf(D,s,this.paramsInheritanceStrategy);D.params=Object.freeze(N.params),D.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:O}=SA(n,g,y,l);if(O.length===0&&R.hasChildren())return this.processChildren(h,l,R,D).pipe(G(te=>new un(D,te)));if(l.length===0&&O.length===0)return Z(new un(D,[]));let Q=Hn(r)===o;return this.processSegment(h,l,R,O,Q?ue:o,!0,D).pipe(G(te=>new un(D,te instanceof un?[te]:[])))}))):la(n)))}getChildConfig(e,n,r){return n.children?Z({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Z({routes:n._loadedRoutes,injector:n._loadedInjector}):TU(e,n,r,this.urlSerializer).pipe($e(i=>i?this.configLoader.loadChildren(e,n).pipe(pt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):SU(n))):Z({routes:[],injector:e})}};function VU(t){t.sort((e,n)=>e.value.outlet===ue?-1:n.value.outlet===ue?1:e.value.outlet.localeCompare(n.value.outlet))}function jU(t){let e=t.value.routeConfig;return e&&e.path===""}function nR(t){let e=[],n=new Set;for(let r of t){if(!jU(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=nR(r.children);e.push(new un(r.value,i))}return e.filter(r=>!n.has(r))}function AA(t){return t.data||{}}function RA(t){return t.resolve||{}}function UU(t,e,n,r,i,o){return $e(s=>FU(t,e,n,r,s.extractedUrl,i,o).pipe(G(({state:a,tree:u})=>re(k({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function BU(t,e){return $e(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Z(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of rR(u))s.add(l);let a=0;return pe(s).pipe(vi(u=>o.has(u)?$U(u,r,t,e):(u.data=xf(u,u.parent,t).resolve,Z(void 0))),pt(()=>a++),Fs(1),$e(u=>a===s.size?Z(n):Wt))})}function rR(t){let e=t.children.map(n=>rR(n)).flat();return[t,...e]}function $U(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!KA(i)&&(o[ju]=i.title),yo(()=>(t.data=xf(t,t.parent,n).resolve,HU(o,t,e,r).pipe(G(s=>(t._resolvedData=s,t.data=k(k({},t.data),s),null)))))}function HU(t,e,n,r){let i=M_(t);if(i.length===0)return Z({});let o={};return pe(i).pipe($e(s=>qU(t[s],e,n,r).pipe(Pr(),pt(a=>{if(a instanceof _a)throw kf(new Oi,a);o[s]=a}))),Fs(1),G(()=>o),Bt(s=>XA(s)?Wt:Nn(s)))}function qU(t,e,n,r){let i=Ia(e)??r,o=wa(t,i),s=o.resolve?o.resolve(e,n):Ye(i,()=>o(e,n));return Qr(s)}function R_(t){return xe(e=>{let n=t(e);return n?pe(n).pipe(G(()=>e)):Z(e)})}var K_=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ue);return r}getResolvedTitleForRoute(n){return n.data[ju]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>M(iR),providedIn:"root"})}return t})(),iR=(()=>{class t extends K_{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(z(ua))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Vi=new U("",{providedIn:"root",factory:()=>({})}),qo=new U(""),Vf=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=M(Jv);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Z(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Qr(Ye(n,()=>r.loadComponent())).pipe(G(sR),xe(aR),pt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Mc(()=>{this.componentLoaders.delete(r)})),o=new Ns(i,()=>new Pe).pipe(Rs());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=oR(r,this.compiler,n,this.onLoadEndListener).pipe(Mc(()=>{this.childrenLoaders.delete(r)})),s=new Ns(o,()=>new Pe).pipe(Rs());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function oR(t,e,n,r){return Qr(Ye(n,()=>t.loadChildren())).pipe(G(sR),xe(aR),$e(i=>i instanceof Kh||Array.isArray(i)?Z(i):pe(e.compileModuleAsync(i))),G(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(qo,[],{optional:!0,self:!0}).flat()),{routes:s.map(W_),injector:o}}))}function zU(t){return t&&typeof t=="object"&&"default"in t}function sR(t){return zU(t)?t.default:t}function aR(t){return Z(t)}var jf=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>M(GU),providedIn:"root"})}return t})(),GU=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Q_=new U(""),Y_=new U("");function cR(t,e,n){let r=t.get(Y_),i=t.get(Ge);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),WU(t)));a.ready.catch(l=>{});let{onViewTransitionCreated:u}=r;return u&&Ye(t,()=>u({transition:a,from:e,to:n})),s}function WU(t){return new Promise(e=>{Zh({read:()=>setTimeout(e)},{injector:t})})}var Z_=new U(""),Uf=(()=>{class t{currentNavigation=En(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Pe;transitionAbortWithErrorSubject=new Pe;configLoader=M(Vf);environmentInjector=M(He);destroyRef=M(or);urlSerializer=M($o);rootContexts=M(Ho);location=M(xi);inputBindingEnabled=M(Bu,{optional:!0})!==null;titleStrategy=M(K_);options=M(Vi,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=M(jf);createViewTransition=M(Q_,{optional:!0});navigationErrorHandler=M(Z_,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Z(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new bf(i)),r=i=>this.events.next(new Cf(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;tt(()=>{this.transitions?.next(re(k({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(n){return this.transitions=new Et(null),this.transitions.pipe(ft(r=>r!==null),xe(r=>{let i=!1;return Z(r).pipe(xe(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",zt.SupersededByNewNavigation),Wt;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?re(k({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new mr(o.id,this.urlSerializer.serialize(o.rawUrl),"",ga.IgnoredSameUrlNavigation)),o.resolve(!1),Wt;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return Z(o).pipe(xe(u=>(this.events.next(new Li(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Wt:Promise.resolve(u))),UU(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),pt(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=u.urlAfterRedirects,h));let l=new Pu(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:g}=o,y=new Li(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let D=GA(this.rootComponentType).snapshot;return this.currentTransition=r=re(k({},o),{targetSnapshot:D,urlAfterRedirects:l,extras:re(k({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(N=>(N.finalUrl=l,N)),Z(r)}else return this.events.next(new mr(o.id,this.urlSerializer.serialize(o.extractedUrl),"",ga.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Wt}),pt(o=>{let s=new If(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),G(o=>(this.currentTransition=r=re(k({},o),{guards:oU(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),mU(this.environmentInjector,o=>this.events.next(o)),pt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw kf(this.urlSerializer,o.guardsResult);let s=new wf(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),ft(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",zt.GuardRejected),!1)),R_(o=>{if(o.guards.canActivateChecks.length!==0)return Z(o).pipe(pt(s=>{let a=new Df(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),xe(s=>{let a=!1;return Z(s).pipe(BU(this.paramsInheritanceStrategy,this.environmentInjector),pt({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",zt.NoDataFromResolver)}}))}),pt(s=>{let a=new Tf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),R_(o=>{let s=a=>{let u=[];if(a.routeConfig?.loadComponent){let l=Ia(a)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(pt(h=>{a.component=h}),G(()=>{})))}for(let l of a.children)u.push(...s(l));return u};return Nc(s(o.targetSnapshot.root)).pipe(_i(null),ct(1))}),R_(()=>this.afterPreactivation()),xe(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?pe(a).pipe(G(()=>r)):Z(r)}),G(o=>{let s=eU(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=re(k({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),pt(()=>{this.events.next(new xu)}),iU(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),ct(1),qd(new Y(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(ft(()=>!i&&!r.targetRouterState),pt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",zt.Aborted)}))),pt({next:o=>{i=!0,this.lastSuccessfulNavigation=tt(this.currentNavigation),this.events.next(new Tn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),qd(this.transitionAbortWithErrorSubject.pipe(pt(o=>{throw o}))),Mc(()=>{i||this.cancelNavigationTransition(r,"",zt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Bt(o=>{if(this.destroyed)return r.resolve(!1),Wt;if(i=!0,JA(o))this.events.next(new pr(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),rU(o)?this.events.next(new va(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new ma(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=Ye(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof _a){let{message:u,cancellationCode:l}=kf(this.urlSerializer,a);this.events.next(new pr(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new va(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Wt}))}))}cancelNavigationTransition(n,r,i){let o=new pr(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=tt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function KU(t){return t!==fa}var uR=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>M(QU),providedIn:"root"})}return t})(),Ff=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},QU=(()=>{class t extends Ff{static \u0275fac=(()=>{let n;return function(i){return(n||(n=ea(t)))(i||t)}})();static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),lR=(()=>{class t{urlSerializer=M($o);options=M(Vi,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=M(xi);urlHandlingStrategy=M(jf);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new gr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof gr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=GA(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>M(YU),providedIn:"root"})}return t})(),YU=(()=>{class t extends lR{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Li?this.updateStateMemento():n instanceof mr?this.commitTransition(r):n instanceof Pu?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof xu?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof pr&&n.code!==zt.SupersededByNewNavigation&&n.code!==zt.Redirect?this.restoreHistory(r):n instanceof ma?this.restoreHistory(r,!0):n instanceof Tn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,u=k(k({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",u)}else{let a=k(k({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=ea(t)))(i||t)}})();static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Bf(t,e){t.events.pipe(ft(n=>n instanceof Tn||n instanceof pr||n instanceof ma||n instanceof mr),G(n=>n instanceof Tn||n instanceof mr?0:(n instanceof pr?n.code===zt.Redirect||n.code===zt.SupersededByNewNavigation:!1)?2:1),ft(n=>n!==2),ct(1)).subscribe(()=>{e()})}var ZU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},JU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Xt=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=M(Hv);stateManager=M(lR);options=M(Vi,{optional:!0})||{};pendingTasks=M(sr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=M(Uf);urlSerializer=M($o);location=M(xi);urlHandlingStrategy=M(jf);injector=M(He);_events=new Pe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=M(uR);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=M(qo,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!M(Bu,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new je;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=tt(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof pr&&r.code!==zt.Redirect&&r.code!==zt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Tn)this.navigated=!0;else if(r instanceof va){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=k({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||KU(i.source)},s);this.scheduleNavigation(a,fa,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Yj(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),fa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=k({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(Pt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return tt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(W_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=k(k({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=$A(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return HA(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Fi(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,fa,null,r)}navigate(n,r={skipLocationChange:!1}){return XU(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=k({},ZU):r===!1?i=k({},JU):i=r,Fi(n))return DA(this.currentUrlTree,n,i);let o=this.parseUrl(n);return DA(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,u=g});let h=this.pendingTasks.add();return Bf(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function XU(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new V(4008,!1)}var ji=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=En(null);get href(){return tt(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Pe;applicationErrorHandler=M(Pt);options=M(Vi,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(M(new ef("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Tn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Fi(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:Fi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(W(Xt),W(Jt),nu("tabindex"),W(Hr),W(lr),W(Bn))};static \u0275dir=xt({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&bt("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&au("href",i.reactiveHref(),Tv)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ca],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ca],replaceUrl:[2,"replaceUrl","replaceUrl",ca],routerLink:"routerLink"},features:[$r]})}return t})();var Hu=class{};var dR=(()=>{class t{router;injector;preloadingStrategy;loader;subscription;constructor(n,r,i,o){this.router=n,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ft(n=>n instanceof Tn),vi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=ta(o.providers,n,`Route: ${o.path}`));let s=o._injector??n,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return pe(i).pipe(ks())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(n,r):i=Z(null);let o=i.pipe($e(s=>s===null?Z(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(n,r);return pe([o,s]).pipe(ks())}else return o})}static \u0275fac=function(r){return new(r||t)(z(Xt),z(He),z(Hu),z(Vf))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),hR=new U(""),eB=(()=>{class t{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=fa;restoredId=0;store={};constructor(n,r,i,o,s={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Li?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Tn?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof mr&&n.code===ga.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof ya&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>_(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new ya(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){Vv()};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})();function X_(t,...e){return Mt([{provide:qo,multi:!0,useValue:t},[],{provide:Jt,useFactory:fR,deps:[Xt]},{provide:su,multi:!0,useFactory:pR},e.map(n=>n.\u0275providers)])}function fR(t){return t.routerState.root}function qu(t,e){return{\u0275kind:t,\u0275providers:e}}function pR(){let t=M(ke);return e=>{let n=t.get(jn);if(e!==n.components[0])return;let r=t.get(Xt),i=t.get(gR);t.get(eE)===1&&r.initialNavigation(),t.get(vR,null,{optional:!0})?.setUpPreloading(),t.get(hR,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var gR=new U("",{factory:()=>new Pe}),eE=new U("",{providedIn:"root",factory:()=>1});function mR(){let t=[{provide:Iv,useValue:!0},{provide:eE,useValue:0},na(()=>{let e=M(ke);return e.get(i_,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(Xt),o=e.get(gR);Bf(i,()=>{r(!0)}),e.get(Uf).afterPreactivation=()=>(r(!0),o.closed?Z(void 0):o),i.initialNavigation()}))})];return qu(2,t)}function yR(){let t=[na(()=>{M(Xt).setUpLocationChangeListener()}),{provide:eE,useValue:2}];return qu(3,t)}var vR=new U("");function _R(t){return qu(0,[{provide:vR,useExisting:dR},{provide:Hu,useExisting:t}])}function ER(){return qu(8,[z_,{provide:Bu,useExisting:z_}])}function IR(t){Ln("NgRouterViewTransitions");let e=[{provide:Q_,useValue:cR},{provide:Y_,useValue:k({skipNextTransition:!!t?.skipInitialTransition},t)}];return qu(9,e)}var wR=[xi,{provide:$o,useClass:Oi},Xt,Ho,{provide:Jt,useFactory:fR,deps:[Xt]},Vf,[]],tE=(()=>{class t{constructor(){}static forRoot(n,r){return{ngModule:t,providers:[wR,[],{provide:qo,multi:!0,useValue:n},[],r?.errorHandler?{provide:Z_,useValue:r.errorHandler}:[],{provide:Vi,useValue:r||{}},r?.useHash?nB():rB(),tB(),r?.preloadingStrategy?_R(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?iB(r):[],r?.bindToComponentInputs?ER().\u0275providers:[],r?.enableViewTransitions?IR().\u0275providers:[],oB()]}}static forChild(n){return{ngModule:t,providers:[{provide:qo,multi:!0,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Vn({type:t});static \u0275inj=gn({})}return t})();function tB(){return{provide:hR,useFactory:()=>{let t=M(pA),e=M(Ee),n=M(Vi),r=M(Uf),i=M($o);return n.scrollOffset&&t.setOffset(n.scrollOffset),new eB(i,r,t,e,n)}}}function nB(){return{provide:Bn,useClass:d_}}function rB(){return{provide:Bn,useClass:rf}}function iB(t){return[t.initialNavigation==="disabled"?yR().\u0275providers:[],t.initialNavigation==="enabledBlocking"?mR().\u0275providers:[]]}var J_=new U("");function oB(){return[{provide:J_,useFactory:pR},{provide:su,multi:!0,useExisting:J_}]}var DR=()=>{};var CR=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},sB=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},$f={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(g=64)),r.push(n[h],n[p],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(CR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):sB(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new iE;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let D=l<<6&192|p;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},iE=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},aB=function(t){let e=CR(t);return $f.encodeByteArray(e,!0)},Gu=function(t){return aB(t).replace(/\./g,"")},Hf=function(t){try{return $f.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function sE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var cB=()=>sE().__FIREBASE_DEFAULTS__,uB=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lB=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Hf(t[1]);return e&&JSON.parse(e)},qf=()=>{try{return DR()||cB()||uB()||lB()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},aE=t=>{var e,n;return(n=(e=qf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},SR=t=>{let e=aE(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},cE=()=>{var t;return(t=qf())===null||t===void 0?void 0:t.config},uE=t=>{var e;return(e=qf())===null||e===void 0?void 0:e[`_${t}`]};var zo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Ui(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function zf(t){return _(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function AR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Gu(JSON.stringify(n)),Gu(JSON.stringify(s)),""].join(".")}var zu={};function dB(){let t={prod:[],emulator:[]};for(let e of Object.keys(zu))zu[e]?t.emulator.push(e):t.prod.push(e);return t}function hB(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var TR=!1;function Gf(t,e){if(typeof window>"u"||typeof document>"u"||!Ui(window.location.host)||zu[t]===e||zu[t]||TR)return;zu[t]=e;function n(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=dB().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{TR=!0,s()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=hB(r),y=n("text"),D=document.getElementById(y)||document.createElement("span"),N=n("learnmore"),R=document.getElementById(N)||document.createElement("a"),O=n("preprendIcon"),Q=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let te=g.element;a(te),h(R,N);let Ae=l();u(Q,O),te.append(Q,D,R,Ae),document.body.appendChild(te)}o?(D.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mt())}function fB(){var t;let e=(t=qf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function MR(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function PR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xR(){let t=mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function kR(){return!fB()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Wu(){try{return typeof indexedDB=="object"}catch{return!1}}function OR(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var pB="FirebaseError",dn=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=pB,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qn.prototype.create)}},qn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?gB(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new dn(i,a,r)}};function gB(t,e){return t.replace(mB,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var mB=/\{\$([^}]+)}/g;function FR(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function yr(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(bR(o)&&bR(s)){if(!yr(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function bR(t){return t!==null&&typeof t=="object"}function Da(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function LR(t,e){let n=new oE(t,e);return n.subscribe.bind(n)}var oE=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");yB(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=rE),i.error===void 0&&(i.error=rE),i.complete===void 0&&(i.complete=rE);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function yB(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function rE(){}var coe=14400*1e3;function Le(t){return t&&t._delegate?t._delegate:t}var Gt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Go="[DEFAULT]";var lE=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new zo;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_B(e))try{this.getOrInitializeService({instanceIdentifier:Go})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Go){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Go){return this.instances.has(e)}getOptions(e=Go){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:vB(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Go){return this.component?this.component.multipleInstances?e:Go:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function vB(t){return t===Go?void 0:t}function _B(t){return t.instantiationMode==="EAGER"}var Wf=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new lE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var EB=[],he=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(he||{}),IB={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},wB=he.INFO,DB={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},TB=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=DB[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},vr=class{constructor(e){this.name=e,this._logLevel=wB,this._logHandler=TB,this._userLogHandler=null,EB.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?IB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}};var bB=(t,e)=>e.some(n=>t instanceof n),VR,jR;function CB(){return VR||(VR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SB(){return jR||(jR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var UR=new WeakMap,hE=new WeakMap,BR=new WeakMap,dE=new WeakMap,pE=new WeakMap;function AB(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(_r(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&UR.set(n,t)}).catch(()=>{}),pE.set(e,t),e}function RB(t){if(hE.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});hE.set(t,e)}var fE={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return hE.get(t);if(e==="objectStoreNames")return t.objectStoreNames||BR.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _r(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $R(t){fE=t(fE)}function NB(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Kf(this),e,...n);return BR.set(r,e.sort?e.sort():[e]),_r(r)}:SB().includes(t)?function(...e){return t.apply(Kf(this),e),_r(UR.get(this))}:function(...e){return _r(t.apply(Kf(this),e))}}function MB(t){return typeof t=="function"?NB(t):(t instanceof IDBTransaction&&RB(t),bB(t,CB())?new Proxy(t,fE):t)}function _r(t){if(t instanceof IDBRequest)return AB(t);if(dE.has(t))return dE.get(t);let e=MB(t);return e!==t&&(dE.set(t,e),pE.set(e,t)),e}var Kf=t=>pE.get(t);function qR(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=_r(s);return r&&s.addEventListener("upgradeneeded",u=>{r(_r(s.result),u.oldVersion,u.newVersion,_r(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var PB=["get","getKey","getAll","getAllKeys","count"],xB=["put","add","delete","clear"],gE=new Map;function HR(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gE.get(e))return gE.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=xB.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||PB.includes(n)))return;let o=function(s,...a){return _(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return gE.set(e,o),o}$R(t=>re(k({},t),{get:(e,n,r)=>HR(e,n)||t.get(e,n,r),has:(e,n)=>!!HR(e,n)||t.has(e,n)}));var yE=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(kB(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function kB(t){let e=t.getComponent();return e?.type==="VERSION"}var vE="@firebase/app",zR="0.13.2";var Yr=new vr("@firebase/app"),OB="@firebase/app-compat",FB="@firebase/analytics-compat",LB="@firebase/analytics",VB="@firebase/app-check-compat",jB="@firebase/app-check",UB="@firebase/auth",BB="@firebase/auth-compat",$B="@firebase/database",HB="@firebase/data-connect",qB="@firebase/database-compat",zB="@firebase/functions",GB="@firebase/functions-compat",WB="@firebase/installations",KB="@firebase/installations-compat",QB="@firebase/messaging",YB="@firebase/messaging-compat",ZB="@firebase/performance",JB="@firebase/performance-compat",XB="@firebase/remote-config",e$="@firebase/remote-config-compat",t$="@firebase/storage",n$="@firebase/storage-compat",r$="@firebase/firestore",i$="@firebase/ai",o$="@firebase/firestore-compat",s$="firebase",a$="11.10.0";var _E="[DEFAULT]",c$={[vE]:"fire-core",[OB]:"fire-core-compat",[LB]:"fire-analytics",[FB]:"fire-analytics-compat",[jB]:"fire-app-check",[VB]:"fire-app-check-compat",[UB]:"fire-auth",[BB]:"fire-auth-compat",[$B]:"fire-rtdb",[HB]:"fire-data-connect",[qB]:"fire-rtdb-compat",[zB]:"fire-fn",[GB]:"fire-fn-compat",[WB]:"fire-iid",[KB]:"fire-iid-compat",[QB]:"fire-fcm",[YB]:"fire-fcm-compat",[ZB]:"fire-perf",[JB]:"fire-perf-compat",[XB]:"fire-rc",[e$]:"fire-rc-compat",[t$]:"fire-gcs",[n$]:"fire-gcs-compat",[r$]:"fire-fst",[o$]:"fire-fst-compat",[i$]:"fire-vertex","fire-js":"fire-js",[s$]:"fire-js-all"};var Ku=new Map,u$=new Map,EE=new Map;function GR(t,e){try{t.container.addComponent(e)}catch(n){Yr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function zn(t){let e=t.name;if(EE.has(e))return Yr.debug(`There were multiple attempts to register component ${e}.`),!1;EE.set(e,t);for(let n of Ku.values())GR(n,t);for(let n of u$.values())GR(n,t);return!0}function Ta(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function hn(t){return t==null?!1:t.settings!==void 0}var l$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bi=new qn("app","Firebase",l$);var IE=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Gt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Bi.create("app-deleted",{appName:this._name})}};var $i=a$;function TE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:_E,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Bi.create("bad-app-name",{appName:String(i)});if(n||(n=cE()),!n)throw Bi.create("no-options");let o=Ku.get(i);if(o){if(yr(n,o.options)&&yr(r,o.config))return o;throw Bi.create("duplicate-app",{appName:i})}let s=new Wf(i);for(let u of EE.values())s.addComponent(u);let a=new IE(n,r,s);return Ku.set(i,a),a}function Wo(t=_E){let e=Ku.get(t);if(!e&&t===_E&&cE())return TE();if(!e)throw Bi.create("no-app",{appName:t});return e}function Qf(){return Array.from(Ku.values())}function Ue(t,e,n){var r;let i=(r=c$[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yr.warn(a.join(" "));return}zn(new Gt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var d$="firebase-heartbeat-database",h$=1,Qu="firebase-heartbeat-store",mE=null;function YR(){return mE||(mE=qR(d$,h$,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Qu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Bi.create("idb-open",{originalErrorMessage:t.message})})),mE}function f$(t){return _(this,null,function*(){try{let n=(yield YR()).transaction(Qu),r=yield n.objectStore(Qu).get(ZR(t));return yield n.done,r}catch(e){if(e instanceof dn)Yr.warn(e.message);else{let n=Bi.create("idb-get",{originalErrorMessage:e?.message});Yr.warn(n.message)}}})}function WR(t,e){return _(this,null,function*(){try{let r=(yield YR()).transaction(Qu,"readwrite");yield r.objectStore(Qu).put(e,ZR(t)),yield r.done}catch(n){if(n instanceof dn)Yr.warn(n.message);else{let r=Bi.create("idb-set",{originalErrorMessage:n?.message});Yr.warn(r.message)}}})}function ZR(t){return`${t.name}!${t.options.appId}`}var p$=1024,g$=30,wE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new DE(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=KR();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>g$){let s=y$(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Yr.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=KR(),{heartbeatsToSend:r,unsentEntries:i}=m$(this._heartbeatsCache.heartbeats),o=Gu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Yr.warn(n),""}})}};function KR(){return new Date().toISOString().substring(0,10)}function m$(t,e=p$){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),QR(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),QR(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var DE=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return Wu()?OR().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield f$(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return WR(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return WR(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function QR(t){return Gu(JSON.stringify({version:2,heartbeats:t})).length}function y$(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function v$(t){zn(new Gt("platform-logger",e=>new yE(e),"PRIVATE")),zn(new Gt("heartbeat",e=>new wE(e),"PRIVATE")),Ue(vE,zR,t),Ue(vE,zR,"esm2017"),Ue("fire-js","")}v$("");var _$="firebase",E$="11.10.0";Ue(_$,E$,"app");function JR(t){t===void 0&&(t=M(ke));let e=t.get(Ws);return n=>new Y(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Hi=new Ei("ANGULARFIRE2_VERSION");function Yu(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Ca=(t,e)=>{let n=e?[e]:Qf(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},ba=(function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t})(ba||{}),XR=fu()&&typeof Zone<"u"?ba.WARN:ba.SILENT;var Yf=class{zone;delegate;constructor(e,n=Sm){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},qi=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=M(Ee);this.outsideAngular=n.runOutsideAngular(()=>new Yf(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new Yf(typeof Zone>"u"?void 0:Zone.current,Cm))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),eN=!1;function I$(t,e){!eN&&(XR>ba.SILENT||fu())&&(eN=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),XR>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function w$(t){let e=M(Ee,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function Ko(t){let e=M(Ee,{optional:!0});return e?e.run(()=>t()):t()}var D$=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),Ye(n,()=>Ko(()=>t.apply(void 0,r)))),Ke=(t,e,n)=>(n||=e?ba.WARN:ba.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=M(qi),s=M(Ws),a=M(He)}catch{return I$(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Ko(()=>s.add())),i[l]=D$(i[l],r,a));let u=w$(()=>t.apply(this,i));return e?u instanceof Y?u.pipe(yi(o.outsideAngular),mi(o.insideAngular),JR(a)):u instanceof Promise?Ko(()=>{let l=s.add();return new Promise((h,p)=>{u.then(g=>Ye(a,()=>Ko(()=>h(g))),g=>Ye(a,()=>Ko(()=>p(g)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:Ko(()=>u):u instanceof Y?u.pipe(yi(o.outsideAngular),mi(o.insideAngular)):Ko(()=>u)});var Zr=class{constructor(e){return e}},Qo=class{constructor(){return Qf()}};function T$(t){return t&&t.length===1?t[0]:new Zr(Wo())}var bE=new U("angularfire2._apps"),b$={provide:Zr,useFactory:T$,deps:[[new an,bE]]},C$={provide:Qo,deps:[[new an,bE]]};function S$(t){return(e,n)=>{let r=n.get(Ni);Ue("angularfire",Hi.full,"core"),Ue("angularfire",Hi.full,"app"),Ue("angular",Hm.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Zr(i)}}function tN(t,...e){return Mt([b$,C$,{provide:bE,useFactory:S$(t),multi:!0,deps:[Ee,ke,qi,...e]}])}var nN=Ke(TE,!0);var A$=new Map,R$={activated:!1,tokenObservers:[]},N$={initialized:!1,enabled:!1};function Gn(t){return A$.get(t)||Object.assign({},R$)}function sN(){return N$}var M$="https://content-firebaseappcheck.googleapis.com/v1";var P$="exchangeDebugToken",rN={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},dse=1440*60*1e3;var AE=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return _(this,null,function*(){this.stop();try{this.pending=new zo,this.pending.promise.catch(n=>{}),yield x$(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new zo,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function x$(t){return new Promise(e=>{setTimeout(e,t)})}var k$={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},zi=new qn("appCheck","AppCheck",k$);function aN(t){if(!Gn(t).activated)throw zi.create("use-before-activation",{appName:t.name})}function cN(r,i){return _(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,a)}catch(y){throw zi.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw zi.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw zi.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw zi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+p,issuedAtTimeMillis:g}})}function uN(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${M$}/projects/${n}/apps/${r}:${P$}?key=${i}`,body:{debug_token:e}}}var O$="firebase-app-check-database",F$=1,RE="firebase-app-check-store";var Zf=null;function L$(){return Zf||(Zf=new Promise((t,e)=>{try{let n=indexedDB.open(O$,F$);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(zi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(RE,{keyPath:"compositeKey"})}}}catch(n){e(zi.create("storage-open",{originalErrorMessage:n?.message}))}}),Zf)}function V$(t,e){return j$(U$(t),e)}function j$(t,e){return _(this,null,function*(){let r=(yield L$()).transaction(RE,"readwrite"),o=r.objectStore(RE).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(zi.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function U$(t){return`${t.options.appId}-${t.name}`}var Zu=new vr("@firebase/app-check");function CE(t,e){return Wu()?V$(t,e).catch(n=>{Zu.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function lN(){return sN().enabled}function dN(){return _(this,null,function*(){let t=sN();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var B$={error:"UNKNOWN_ERROR"};function $$(t){return $f.encodeString(JSON.stringify(t),!1)}function NE(t,e=!1,n=!1){return _(this,null,function*(){let r=t.app;aN(r);let i=Gn(r),o=i.token,s;if(o&&!Ju(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Ju(l)?o=l:yield CE(r,void 0))}if(!e&&o&&Ju(o))return{token:o.token};let a=!1;if(lN())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=cN(uN(r,yield dN()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield CE(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Zu.warn(l.message):n&&Zu.error(l),SE(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield Gn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Zu.warn(l.message):n&&Zu.error(l),s=l}let u;return o?s?Ju(o)?u={token:o.token,internalError:s}:u=SE(s):(u={token:o.token},i.token=o,yield CE(r,o)):u=SE(s),a&&G$(r,u),u})}function H$(t){return _(this,null,function*(){let e=t.app;aN(e);let{provider:n}=Gn(e);if(lN()){let r=yield dN(),{token:i}=yield cN(uN(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function q$(t,e,n,r){let{app:i}=t,o=Gn(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Ju(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),iN(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>iN(t))}function hN(t,e){let n=Gn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function iN(t){let{app:e}=t,n=Gn(e),r=n.tokenRefresher;r||(r=z$(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function z$(t){let{app:e}=t;return new AE(()=>_(null,null,function*(){let n=Gn(e),r;if(n.token?r=yield NE(t,!0):r=yield NE(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Gn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},rN.RETRIAL_MIN_WAIT,rN.RETRIAL_MAX_WAIT)}function G$(t,e){let n=Gn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Ju(t){return t.expireTimeMillis-Date.now()>0}function SE(t){return{token:$$(B$),error:t}}var ME=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Gn(this.app);for(let n of e)hN(this.app,n.next);return Promise.resolve()}};function W$(t,e){return new ME(t,e)}function K$(t){return{getToken:e=>NE(t,e),getLimitedUseToken:()=>H$(t),addTokenListener:e=>q$(t,"INTERNAL",e),removeTokenListener:e=>hN(t.app,e)}}var Q$="@firebase/app-check",Y$="0.10.1";var Z$="app-check",oN="app-check-internal";function J$(){zn(new Gt(Z$,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return W$(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(oN).initialize()})),zn(new Gt(oN,t=>{let e=t.getProvider("app-check").getImmediate();return K$(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ue(Q$,Y$)}J$();var X$="app-check";var Sa=class{constructor(){return Ca(X$)}};var eH=["localhost","0.0.0.0","127.0.0.1"],Tse=typeof window<"u"&&eH.includes(window.location.hostname);function SN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var AN=SN,RN=new qn("auth","Firebase",SN());var rp=new vr("@firebase/auth");function tH(t,...e){rp.logLevel<=he.WARN&&rp.warn(`Auth (${$i}): ${t}`,...e)}function Xf(t,...e){rp.logLevel<=he.ERROR&&rp.error(`Auth (${$i}): ${t}`,...e)}function Ir(t,...e){throw QE(t,...e)}function Wn(t,...e){return QE(t,...e)}function KE(t,e,n){let r=Object.assign(Object.assign({},AN()),{[e]:n});return new qn("auth","Firebase",r).create(e,{appName:t.name})}function Yo(t){return KE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nH(t,e,n){let r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ir(t,"argument-error"),KE(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function QE(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return RN.create(t,...e)}function ee(t,e,...n){if(!t)throw QE(e,...n)}function Jr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Xf(e),new Error(e)}function ei(t,e){t||Jr(e)}function kE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function rH(){return fN()==="http:"||fN()==="https:"}function fN(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function iH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rH()||MR()||"connection"in navigator)?navigator.onLine:!0}function oH(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Zo=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,ei(n>e,"Short delay should be less than long delay!"),this.isMobile=RR()||PR()}get(){return iH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function YE(t,e){ei(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var ip=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var sH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var aH=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cH=new Zo(3e4,6e4);function ZE(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Ra(o,s,a,u){return _(this,arguments,function*(t,e,n,r,i={}){return NN(t,i,()=>_(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Da(Object.assign({key:t.config.apiKey},h)).slice(1),g=yield t._getAdditionalHeaders();g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode);let y=Object.assign({method:e,headers:g},l);return NR()||(y.referrerPolicy="no-referrer"),t.emulatorConfig&&Ui(t.emulatorConfig.host)&&(y.credentials="include"),ip.fetch()(yield MN(t,t.config.apiHost,n,p),y)}))})}function NN(t,e,n){return _(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},sH),e);try{let i=new OE(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Jf(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jf(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Jf(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw Jf(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw KE(t,h,l);Ir(t,h)}}catch(i){if(i instanceof dn)throw i;Ir(t,"network-request-failed",{message:String(i)})}})}function uH(o,s,a,u){return _(this,arguments,function*(t,e,n,r,i={}){let l=yield Ra(t,e,n,r,i);return"mfaPendingCredential"in l&&Ir(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function MN(t,e,n,r){return _(this,null,function*(){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?YE(t.config,i):`${t.config.apiScheme}://${i}`;return aH.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var OE=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Wn(this.auth,"network-request-failed")),cH.get())})}};function Jf(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Wn(t,e,r);return i.customData._tokenResponse=n,i}function lH(t,e){return _(this,null,function*(){return Ra(t,"POST","/v1/accounts:delete",e)})}function op(t,e){return _(this,null,function*(){return Ra(t,"POST","/v1/accounts:lookup",e)})}function Xu(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function JE(t,e=!1){return _(this,null,function*(){let n=Le(t),r=yield n.getIdToken(e),i=XE(r);ee(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Xu(PE(i.auth_time)),issuedAtTime:Xu(PE(i.iat)),expirationTime:Xu(PE(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function PE(t){return Number(t)*1e3}function XE(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Xf("JWT malformed, contained fewer than 3 sections"),null;try{let i=Hf(n);return i?JSON.parse(i):(Xf("Failed to decode base64 JWT payload"),null)}catch(i){return Xf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function pN(t){let e=XE(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function tl(t,e,n=!1){return _(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof dn&&dH(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function dH({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var FE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),n)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var nl=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xu(this.lastLoginAt),this.creationTime=Xu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function sp(t){return _(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield tl(t,op(n,{idToken:r}));ee(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?PN(o.providerUserInfo):[],a=hH(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new nl(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function eI(t){return _(this,null,function*(){let e=Le(t);yield sp(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function hH(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function PN(t){return t.map(e=>{var{providerId:n}=e,r=Sd(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function fH(t,e){return _(this,null,function*(){let n=yield NN(t,{},()=>_(null,null,function*(){let r=Da({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield MN(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&Ui(t.emulatorConfig.host)&&(u.credentials="include"),ip.fetch()(s,u)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function pH(t,e){return _(this,null,function*(){return Ra(t,"POST","/v2/accounts:revokeToken",ZE(t,e))})}var el=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):pN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ee(e.length!==0,"internal-error");let n=pN(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return _(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield fH(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(ee(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ee(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ee(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Jr("not implemented")}};function Gi(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Wi=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Sd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new FE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new nl(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let n=yield tl(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return JE(this,e)}reload(){return eI(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield sp(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(hn(this.auth.app))return Promise.reject(Yo(this.auth));let e=yield this.getIdToken();return yield tl(this,lH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,D=(s=n.photoURL)!==null&&s!==void 0?s:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,O=(l=n.createdAt)!==null&&l!==void 0?l:void 0,Q=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:te,emailVerified:Ae,isAnonymous:Lt,providerData:be,stsTokenManager:T}=n;ee(te&&T,e,"internal-error");let v=el.fromJSON(this.name,T);ee(typeof te=="string",e,"internal-error"),Gi(p,e.name),Gi(g,e.name),ee(typeof Ae=="boolean",e,"internal-error"),ee(typeof Lt=="boolean",e,"internal-error"),Gi(y,e.name),Gi(D,e.name),Gi(N,e.name),Gi(R,e.name),Gi(O,e.name),Gi(Q,e.name);let I=new t({uid:te,auth:e,email:g,emailVerified:Ae,displayName:p,isAnonymous:Lt,photoURL:D,phoneNumber:y,tenantId:N,stsTokenManager:v,createdAt:O,lastLoginAt:Q});return be&&Array.isArray(be)&&(I.providerData=be.map(w=>Object.assign({},w))),R&&(I._redirectEventId=R),I}static _fromIdTokenResponse(e,n,r=!1){return _(this,null,function*(){let i=new el;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield sp(o),o})}static _fromGetAccountInfoResponse(e,n,r){return _(this,null,function*(){let i=n.users[0];ee(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?PN(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new el;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new nl(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var gN=new Map;function Xr(t){ei(t instanceof Function,"Expected a class definition");let e=gN.get(t);return e?(ei(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,gN.set(t,e),e)}var gH=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(n,r){return _(this,null,function*(){this.storage[n]=r})}_get(n){return _(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return _(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),LE=gH;function ep(t,e,n){return`firebase:${t}:${e}:${n}`}var ap=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=ep(this.userKey,i.apiKey,o),this.fullPersistenceKey=ep("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield op(this.auth,{idToken:e}).catch(()=>{});return n?Wi._fromGetAccountInfoResponse(this.auth,n,e):null}return Wi._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return _(this,null,function*(){if(!n.length)return new t(Xr(LE),e,r);let i=(yield Promise.all(n.map(l=>_(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Xr(LE),s=ep(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let g=yield op(e,{idToken:h}).catch(()=>{});if(!g)break;p=yield Wi._fromGetAccountInfoResponse(e,g,h)}else p=Wi._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>_(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function mN(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(FN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(VN(e))return"Blackberry";if(jN(e))return"Webos";if(kN(e))return"Safari";if((e.includes("chrome/")||ON(e))&&!e.includes("edge/"))return"Chrome";if(LN(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function xN(t=mt()){return/firefox\//i.test(t)}function kN(t=mt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ON(t=mt()){return/crios\//i.test(t)}function FN(t=mt()){return/iemobile/i.test(t)}function LN(t=mt()){return/android/i.test(t)}function VN(t=mt()){return/blackberry/i.test(t)}function jN(t=mt()){return/webos/i.test(t)}function tI(t=mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function mH(t=mt()){var e;return tI(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function yH(){return xR()&&document.documentMode===10}function UN(t=mt()){return tI(t)||LN(t)||jN(t)||VN(t)||/windows phone/i.test(t)||FN(t)}function BN(t,e=[]){let n;switch(t){case"Browser":n=mN(mt());break;case"Worker":n=`${mN(mt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${$i}/${r}`}var VE=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function vH(n){return _(this,arguments,function*(t,e={}){return Ra(t,"GET","/v2/passwordPolicy",ZE(t,e))})}var _H=6,jE=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:_H,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var UE=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cp(this),this.idTokenSubscription=new cp(this),this.beforeStateQueue=new VE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Xr(n)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield ap.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let n=yield op(this,{idToken:e}),r=yield Wi._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var n;if(hn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield sp(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=oH()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(hn(this.app))return Promise.reject(Yo(this));let n=e?Le(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return _(this,null,function*(){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return hn(this.app)?Promise.reject(Yo(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return hn(this.app)?Promise.reject(Yo(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(Xr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield vH(this),n=new jE(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new qn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield pH(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Xr(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=yield ap.create(this,[Xr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=BN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return _(this,null,function*(){var e;if(hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&tH(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function mp(t){return Le(t)}var cp=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=LR(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var nI={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function EH(t){nI=t}function IH(t){return nI.loadJS(t)}function wH(){return nI.gapiScript}function $N(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function rI(t,e){let n=Ta(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(yr(o,e??{}))return i;Ir(i,"already-initialized")}return n.initialize({options:e})}function DH(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Xr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function iI(t,e,n){let r=mp(t);ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=HN(e),{host:s,port:a}=TH(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ee(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ee(yr(l,r.config.emulator)&&yr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Ui(s)?(zf(`${o}//${s}${u}`),Gf("Auth",!0)):i||bH()}function HN(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function TH(t){let e=HN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:yN(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:yN(s)}}}function yN(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function bH(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var rl=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Jr("not implemented")}_getIdTokenResponse(e){return Jr("not implemented")}_linkToIdToken(e,n){return Jr("not implemented")}_getReauthenticationResolver(e){return Jr("not implemented")}};function Aa(t,e){return _(this,null,function*(){return uH(t,"POST","/v1/accounts:signInWithIdp",ZE(t,e))})}var CH="http://localhost",up=class t extends rl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let n=new t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ir("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=Sd(n,["providerId","signInMethod"]);if(!r||!i)return null;let s=new t(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let n=this.buildRequest();return Aa(e,n)}_linkToIdToken(e,n){let r=this.buildRequest();return r.idToken=n,Aa(e,r)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,Aa(e,n)}buildRequest(){let e={requestUri:CH,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Da(n)}return e}};var il=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var lp=class extends il{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var oI=(()=>{class t extends lp{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return up._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;let{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return t.credential(r,i)}catch{return null}}}t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com";return t})();var ol=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return _(this,null,function*(){let o=yield Wi._fromIdTokenResponse(e,r,i),s=vN(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=vN(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function vN(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var BE=class t extends dn{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function qN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?BE._fromErrorAndOperation(t,o,e,r):o})}function SH(t,e,n=!1){return _(this,null,function*(){let r=yield tl(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return ol._forOperation(t,"link",r)})}function AH(t,e,n=!1){return _(this,null,function*(){let{auth:r}=t;if(hn(r.app))return Promise.reject(Yo(r));let i="reauthenticate";try{let o=yield tl(t,qN(r,i,e,t),n);ee(o.idToken,r,"internal-error");let s=XE(o.idToken);ee(s,r,"internal-error");let{sub:a}=s;return ee(t.uid===a,r,"user-mismatch"),ol._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Ir(r,"user-mismatch"),o}})}function RH(t,e,n=!1){return _(this,null,function*(){if(hn(t.app))return Promise.reject(Yo(t));let r="signIn",i=yield qN(t,r,e),o=yield ol._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function yp(t,e,n,r){return Le(t).onIdTokenChanged(e,n,r)}function sI(t,e,n){return Le(t).beforeAuthStateChanged(e,n)}function vp(t,e,n,r){return Le(t).onAuthStateChanged(e,n,r)}function aI(t){return Le(t).signOut()}var dp="__sak";var hp=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(dp,"1"),this.storage.removeItem(dp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var NH=1e3,MH=10,PH=(()=>{class t extends hp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=UN(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);yH()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,MH):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},NH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return _(this,null,function*(){yield pi(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return _(this,null,function*(){let r=yield pi(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return _(this,null,function*(){yield pi(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),zN=PH;var xH=(()=>{class t extends hp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),cI=xH;function kH(t){return Promise.all(t.map(e=>_(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var OH=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return _(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>_(this,null,function*(){return h(r.origin,s)})),l=yield kH(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function uI(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var $E=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=uI("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Er(){return window}function FH(t){Er().location.href=t}function GN(){return typeof Er().WorkerGlobalScope<"u"&&typeof Er().importScripts=="function"}function LH(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function VH(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function jH(){return GN()?self:null}var WN="firebaseLocalStorageDb",UH=1,fp="firebaseLocalStorage",KN="fbase_key",Jo=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function _p(t,e){return t.transaction([fp],e?"readwrite":"readonly").objectStore(fp)}function BH(){let t=indexedDB.deleteDatabase(WN);return new Jo(t).toPromise()}function HE(){let t=indexedDB.open(WN,UH);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(fp,{keyPath:KN})}catch(i){n(i)}}),t.addEventListener("success",()=>_(null,null,function*(){let r=t.result;r.objectStoreNames.contains(fp)?e(r):(r.close(),yield BH(),e(yield HE()))}))})}function _N(t,e,n){return _(this,null,function*(){let r=_p(t,!0).put({[KN]:e,value:n});return new Jo(r).toPromise()})}function $H(t,e){return _(this,null,function*(){let n=_p(t,!1).get(e),r=yield new Jo(n).toPromise();return r===void 0?null:r.value})}function EN(t,e){let n=_p(t,!0).delete(e);return new Jo(n).toPromise()}var HH=800,qH=3,zH=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield HE(),this.db)})}_withRetries(n){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>qH)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return GN()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=OH._getInstance(jH()),this.receiver._subscribe("keyChanged",(n,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var n,r;if(this.activeServiceWorker=yield LH(),!this.activeServiceWorker)return;this.sender=new $E(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||VH()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let n=yield HE();return yield _N(n,dp,"1"),yield EN(n,dp),!0}catch{}return!1})}_withPendingWrite(n){return _(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>_N(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return _(this,null,function*(){let r=yield this._withRetries(i=>$H(i,n));return this.localCache[n]=r,r})}_remove(n){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>EN(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return _(this,null,function*(){let n=yield this._withRetries(o=>{let s=_p(o,!1).getAll();return new Jo(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),HH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),QN=zH;var kse=$N("rcb"),Ose=new Zo(3e4,6e4);function YN(t,e){return e?Xr(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var sl=class extends rl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Aa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Aa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Aa(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function GH(t){return RH(t.auth,new sl(t),t.bypassAuthState)}function WH(t){let{auth:e,user:n}=t;return ee(n,e,"internal-error"),AH(n,new sl(t),t.bypassAuthState)}function KH(t){return _(this,null,function*(){let{auth:e,user:n}=t;return ee(n,e,"internal-error"),SH(n,new sl(t),t.bypassAuthState)})}var pp=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return GH;case"linkViaPopup":case"linkViaRedirect":return KH;case"reauthViaPopup":case"reauthViaRedirect":return WH;default:Ir(this.auth,"internal-error")}}resolve(e){ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var QH=new Zo(2e3,1e4);function lI(t,e,n){return _(this,null,function*(){if(hn(t.app))return Promise.reject(Wn(t,"operation-not-supported-in-this-environment"));let r=mp(t);nH(t,e,il);let i=YN(r,n);return new YH(r,"signInViaPopup",e,i).executeNotNull()})}var YH=(()=>{class t extends pp{constructor(n,r,i,o,s){super(n,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}executeNotNull(){return _(this,null,function*(){let n=yield this.execute();return ee(n,this.auth,"internal-error"),n})}onExecution(){return _(this,null,function*(){ei(this.filter.length===1,"Popup operations only handle one event");let n=uI();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Wn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var n;return((n=this.authWindow)===null||n===void 0?void 0:n.associatedEvent)||null}cancel(){this.reject(Wn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){let n=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Wn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,QH.get())};n()}}t.currentPopupAction=null;return t})(),ZH="pendingRedirect",tp=new Map,qE=class t extends pp{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=tp.get(this.auth._key());if(!e){try{let r=(yield JH(this.resolver,this.auth))?yield pi(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}tp.set(this.auth._key(),e)}return this.bypassAuthState||tp.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return pi(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,pi(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function JH(t,e){return _(this,null,function*(){let n=t4(e),r=e4(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function XH(t,e){tp.set(t._key(),e)}function e4(t){return Xr(t._redirectPersistence)}function t4(t){return ep(ZH,t.config.apiKey,t.name)}function n4(t,e,n=!1){return _(this,null,function*(){if(hn(t.app))return Promise.reject(Yo(t));let r=mp(t),i=YN(r,e),s=yield new qE(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var r4=600*1e3,zE=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!i4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!ZN(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Wn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=r4&&this.cachedEventUids.clear(),this.cachedEventUids.has(IN(e))}saveEventToCache(e){this.cachedEventUids.add(IN(e)),this.lastProcessedEventTime=Date.now()}};function IN(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ZN({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function i4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ZN(t);default:return!1}}function o4(n){return _(this,arguments,function*(t,e={}){return Ra(t,"GET","/v1/projects",e)})}var s4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,a4=/^https?/;function c4(t){return _(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield o4(t);for(let n of e)try{if(u4(n))return}catch{}Ir(t,"unauthorized-domain")})}function u4(t){let e=kE(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!a4.test(n))return!1;if(s4.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var l4=new Zo(3e4,6e4);function wN(){let t=Er().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function d4(t){return new Promise((e,n)=>{var r,i,o;function s(){wN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wN(),n(Wn(t,"network-request-failed"))},timeout:l4.get()})}if(!((i=(r=Er().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Er().gapi)===null||o===void 0)&&o.load)s();else{let a=$N("iframefcb");return Er()[a]=()=>{gapi.load?s():n(Wn(t,"network-request-failed"))},IH(`${wH()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw np=null,e})}var np=null;function h4(t){return np=np||d4(t),np}var f4=new Zo(5e3,15e3),p4="__/auth/iframe",g4="emulator/auth/iframe",m4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},y4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function v4(t){let e=t.config;ee(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?YE(e,g4):`https://${t.config.authDomain}/${p4}`,r={apiKey:e.apiKey,appName:t.name,v:$i},i=y4.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Da(r).slice(1)}`}function _4(t){return _(this,null,function*(){let e=yield h4(t),n=Er().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:v4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:m4,dontclear:!0},r=>new Promise((i,o)=>_(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Wn(t,"network-request-failed"),a=Er().setTimeout(()=>{o(s)},f4.get());function u(){Er().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var E4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},I4=500,w4=600,D4="_blank",T4="http://localhost",gp=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function b4(t,e,n,r=I4,i=w4){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},E4),{width:r.toString(),height:i.toString(),top:o,left:s}),l=mt().toLowerCase();n&&(a=ON(l)?D4:n),xN(l)&&(e=e||T4,u.scrollbars="yes");let h=Object.entries(u).reduce((g,[y,D])=>`${g}${y}=${D},`,"");if(mH(l)&&a!=="_self")return C4(e||"",a),new gp(null);let p=window.open(e||"",a,h);ee(p,t,"popup-blocked");try{p.focus()}catch{}return new gp(p)}function C4(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var S4="__/auth/handler",A4="emulator/auth/handler",R4=encodeURIComponent("fac");function DN(t,e,n,r,i,o){return _(this,null,function*(){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:$i,eventId:i};if(e instanceof il){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",FR(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof lp){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${R4}=${encodeURIComponent(u)}`:"";return`${N4(t)}?${Da(a).slice(1)}${l}`})}function N4({config:t}){return t.emulator?YE(t,A4):`https://${t.authDomain}/${S4}`}var xE="webStorageSupport",GE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cI,this._completeRedirectFn=n4,this._overrideRedirectResult=XH}_openPopup(e,n,r,i){return _(this,null,function*(){var o;ei((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield DN(e,n,r,kE(),i);return b4(e,s,uI())})}_openRedirect(e,n,r,i){return _(this,null,function*(){yield this._originValidation(e);let o=yield DN(e,n,r,kE(),i);return FH(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(ei(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return _(this,null,function*(){let n=yield _4(e),r=new zE(e);return n.register("authEvent",i=>(ee(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(xE,{type:xE},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[xE];s!==void 0&&n(!!s),Ir(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=c4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return UN()||kN()||tI()}},JN=GE;var TN="@firebase/auth",bN="1.10.8";var WE=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function M4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function P4(t){zn(new Gt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ee(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BN(t)},l=new UE(r,i,o,u);return DH(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),zn(new Gt("auth-internal",e=>{let n=mp(e.getProvider("auth").getImmediate());return(r=>new WE(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ue(TN,bN,M4(t)),Ue(TN,bN,"esm2017")}var x4=300,k4=uE("authIdTokenMaxAge")||x4,CN=null,O4=t=>e=>_(null,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>k4)return;let i=n?.token;CN!==i&&(CN=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function dI(t=Wo()){let e=Ta(t,"auth");if(e.isInitialized())return e.getImmediate();let n=rI(t,{popupRedirectResolver:JN,persistence:[QN,zN,cI]}),r=uE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=O4(o.toString());sI(n,s,()=>s(n.currentUser)),yp(n,a=>s(a))}}let i=aE("auth");return i&&iI(n,`http://${i}`),n}function F4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}EH({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Wn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",F4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});P4("Browser");function eM(t){return new Y(function(e){var n=vp(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var tM="auth",Kn=class{constructor(e){return e}},al=class{constructor(){return Ca(tM)}};var hI=new U("angularfire2.auth-instances");function b3(t,e){let n=Yu(tM,t,e);return n&&new Kn(n)}function C3(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Kn(r)}}var S3={provide:al,deps:[[new an,hI]]},A3={provide:Kn,useFactory:b3,deps:[[new an,hI],Zr]};function nM(t,...e){return Ue("angularfire",Hi.full,"auth"),Mt([A3,S3,{provide:hI,useFactory:C3(t),multi:!0,deps:[Ee,ke,qi,Qo,[new an,Sa],...e]}])}var Na=Ke(eM,!0);var rM=Ke(dI,!0);var iM=Ke(lI,!0,2);var oM=Ke(aI,!0,2);var sM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},aM={};var ti,pI;(function(){var t;function e(T,v){function I(){}I.prototype=v.prototype,T.D=v.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(w,b,S){for(var E=Array(arguments.length-2),Sr=2;Sr<arguments.length;Sr++)E[Sr-2]=arguments[Sr];return v.prototype[b].apply(w,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,I){I||(I=0);var w=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)w[b]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(b=0;16>b;++b)w[b]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=T.g[0],I=T.g[1],b=T.g[2];var S=T.g[3],E=v+(S^I&(b^S))+w[0]+3614090360&4294967295;v=I+(E<<7&4294967295|E>>>25),E=S+(b^v&(I^b))+w[1]+3905402710&4294967295,S=v+(E<<12&4294967295|E>>>20),E=b+(I^S&(v^I))+w[2]+606105819&4294967295,b=S+(E<<17&4294967295|E>>>15),E=I+(v^b&(S^v))+w[3]+3250441966&4294967295,I=b+(E<<22&4294967295|E>>>10),E=v+(S^I&(b^S))+w[4]+4118548399&4294967295,v=I+(E<<7&4294967295|E>>>25),E=S+(b^v&(I^b))+w[5]+1200080426&4294967295,S=v+(E<<12&4294967295|E>>>20),E=b+(I^S&(v^I))+w[6]+2821735955&4294967295,b=S+(E<<17&4294967295|E>>>15),E=I+(v^b&(S^v))+w[7]+4249261313&4294967295,I=b+(E<<22&4294967295|E>>>10),E=v+(S^I&(b^S))+w[8]+1770035416&4294967295,v=I+(E<<7&4294967295|E>>>25),E=S+(b^v&(I^b))+w[9]+2336552879&4294967295,S=v+(E<<12&4294967295|E>>>20),E=b+(I^S&(v^I))+w[10]+4294925233&4294967295,b=S+(E<<17&4294967295|E>>>15),E=I+(v^b&(S^v))+w[11]+2304563134&4294967295,I=b+(E<<22&4294967295|E>>>10),E=v+(S^I&(b^S))+w[12]+1804603682&4294967295,v=I+(E<<7&4294967295|E>>>25),E=S+(b^v&(I^b))+w[13]+4254626195&4294967295,S=v+(E<<12&4294967295|E>>>20),E=b+(I^S&(v^I))+w[14]+2792965006&4294967295,b=S+(E<<17&4294967295|E>>>15),E=I+(v^b&(S^v))+w[15]+1236535329&4294967295,I=b+(E<<22&4294967295|E>>>10),E=v+(b^S&(I^b))+w[1]+4129170786&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^b&(v^I))+w[6]+3225465664&4294967295,S=v+(E<<9&4294967295|E>>>23),E=b+(v^I&(S^v))+w[11]+643717713&4294967295,b=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(b^S))+w[0]+3921069994&4294967295,I=b+(E<<20&4294967295|E>>>12),E=v+(b^S&(I^b))+w[5]+3593408605&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^b&(v^I))+w[10]+38016083&4294967295,S=v+(E<<9&4294967295|E>>>23),E=b+(v^I&(S^v))+w[15]+3634488961&4294967295,b=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(b^S))+w[4]+3889429448&4294967295,I=b+(E<<20&4294967295|E>>>12),E=v+(b^S&(I^b))+w[9]+568446438&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^b&(v^I))+w[14]+3275163606&4294967295,S=v+(E<<9&4294967295|E>>>23),E=b+(v^I&(S^v))+w[3]+4107603335&4294967295,b=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(b^S))+w[8]+1163531501&4294967295,I=b+(E<<20&4294967295|E>>>12),E=v+(b^S&(I^b))+w[13]+2850285829&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^b&(v^I))+w[2]+4243563512&4294967295,S=v+(E<<9&4294967295|E>>>23),E=b+(v^I&(S^v))+w[7]+1735328473&4294967295,b=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(b^S))+w[12]+2368359562&4294967295,I=b+(E<<20&4294967295|E>>>12),E=v+(I^b^S)+w[5]+4294588738&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^b)+w[8]+2272392833&4294967295,S=v+(E<<11&4294967295|E>>>21),E=b+(S^v^I)+w[11]+1839030562&4294967295,b=S+(E<<16&4294967295|E>>>16),E=I+(b^S^v)+w[14]+4259657740&4294967295,I=b+(E<<23&4294967295|E>>>9),E=v+(I^b^S)+w[1]+2763975236&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^b)+w[4]+1272893353&4294967295,S=v+(E<<11&4294967295|E>>>21),E=b+(S^v^I)+w[7]+4139469664&4294967295,b=S+(E<<16&4294967295|E>>>16),E=I+(b^S^v)+w[10]+3200236656&4294967295,I=b+(E<<23&4294967295|E>>>9),E=v+(I^b^S)+w[13]+681279174&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^b)+w[0]+3936430074&4294967295,S=v+(E<<11&4294967295|E>>>21),E=b+(S^v^I)+w[3]+3572445317&4294967295,b=S+(E<<16&4294967295|E>>>16),E=I+(b^S^v)+w[6]+76029189&4294967295,I=b+(E<<23&4294967295|E>>>9),E=v+(I^b^S)+w[9]+3654602809&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^b)+w[12]+3873151461&4294967295,S=v+(E<<11&4294967295|E>>>21),E=b+(S^v^I)+w[15]+530742520&4294967295,b=S+(E<<16&4294967295|E>>>16),E=I+(b^S^v)+w[2]+3299628645&4294967295,I=b+(E<<23&4294967295|E>>>9),E=v+(b^(I|~S))+w[0]+4096336452&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~b))+w[7]+1126891415&4294967295,S=v+(E<<10&4294967295|E>>>22),E=b+(v^(S|~I))+w[14]+2878612391&4294967295,b=S+(E<<15&4294967295|E>>>17),E=I+(S^(b|~v))+w[5]+4237533241&4294967295,I=b+(E<<21&4294967295|E>>>11),E=v+(b^(I|~S))+w[12]+1700485571&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~b))+w[3]+2399980690&4294967295,S=v+(E<<10&4294967295|E>>>22),E=b+(v^(S|~I))+w[10]+4293915773&4294967295,b=S+(E<<15&4294967295|E>>>17),E=I+(S^(b|~v))+w[1]+2240044497&4294967295,I=b+(E<<21&4294967295|E>>>11),E=v+(b^(I|~S))+w[8]+1873313359&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~b))+w[15]+4264355552&4294967295,S=v+(E<<10&4294967295|E>>>22),E=b+(v^(S|~I))+w[6]+2734768916&4294967295,b=S+(E<<15&4294967295|E>>>17),E=I+(S^(b|~v))+w[13]+1309151649&4294967295,I=b+(E<<21&4294967295|E>>>11),E=v+(b^(I|~S))+w[4]+4149444226&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~b))+w[11]+3174756917&4294967295,S=v+(E<<10&4294967295|E>>>22),E=b+(v^(S|~I))+w[2]+718787259&4294967295,b=S+(E<<15&4294967295|E>>>17),E=I+(S^(b|~v))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(b+(E<<21&4294967295|E>>>11))&4294967295,T.g[2]=T.g[2]+b&4294967295,T.g[3]=T.g[3]+S&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var I=v-this.blockSize,w=this.B,b=this.h,S=0;S<v;){if(b==0)for(;S<=I;)i(this,T,S),S+=this.blockSize;if(typeof T=="string"){for(;S<v;)if(w[b++]=T.charCodeAt(S++),b==this.blockSize){i(this,w),b=0;break}}else for(;S<v;)if(w[b++]=T[S++],b==this.blockSize){i(this,w),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var I=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=I&255,I/=256;for(this.u(T),T=Array(16),v=I=0;4>v;++v)for(var w=0;32>w;w+=8)T[I++]=this.g[v]>>>w&255;return T};function o(T,v){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=v(T)}function s(T,v){this.h=v;for(var I=[],w=!0,b=T.length-1;0<=b;b--){var S=T[b]|0;w&&S==v||(I[b]=S,w=!1)}this.g=I}var a={};function u(T){return-128<=T&&128>T?o(T,function(v){return new s([v|0],0>v?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return R(l(-T));for(var v=[],I=1,w=0;T>=I;w++)v[w]=T/I|0,I*=4294967296;return new s(v,0)}function h(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return R(h(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),w=p,b=0;b<T.length;b+=8){var S=Math.min(8,T.length-b),E=parseInt(T.substring(b,b+S),v);8>S?(S=l(Math.pow(v,S)),w=w.j(S).add(l(E))):(w=w.j(I),w=w.add(l(E)))}return w}var p=u(0),g=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(N(this))return-R(this).m();for(var T=0,v=1,I=0;I<this.g.length;I++){var w=this.i(I);T+=(0<=w?w:4294967296+w)*v,v*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(D(this))return"0";if(N(this))return"-"+R(this).toString(T);for(var v=l(Math.pow(T,6)),I=this,w="";;){var b=Ae(I,v).g;I=O(I,b.j(v));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=b,D(I))return S+w;for(;6>S.length;)S="0"+S;w=S+w}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function D(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function N(T){return T.h==-1}t.l=function(T){return T=O(this,T),N(T)?-1:D(T)?0:1};function R(T){for(var v=T.g.length,I=[],w=0;w<v;w++)I[w]=~T.g[w];return new s(I,~T.h).add(g)}t.abs=function(){return N(this)?R(this):this},t.add=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0,b=0;b<=v;b++){var S=w+(this.i(b)&65535)+(T.i(b)&65535),E=(S>>>16)+(this.i(b)>>>16)+(T.i(b)>>>16);w=E>>>16,S&=65535,E&=65535,I[b]=E<<16|S}return new s(I,I[I.length-1]&-2147483648?-1:0)};function O(T,v){return T.add(R(v))}t.j=function(T){if(D(this)||D(T))return p;if(N(this))return N(T)?R(this).j(R(T)):R(R(this).j(T));if(N(T))return R(this.j(R(T)));if(0>this.l(y)&&0>T.l(y))return l(this.m()*T.m());for(var v=this.g.length+T.g.length,I=[],w=0;w<2*v;w++)I[w]=0;for(w=0;w<this.g.length;w++)for(var b=0;b<T.g.length;b++){var S=this.i(w)>>>16,E=this.i(w)&65535,Sr=T.i(b)>>>16,sc=T.i(b)&65535;I[2*w+2*b]+=E*sc,Q(I,2*w+2*b),I[2*w+2*b+1]+=S*sc,Q(I,2*w+2*b+1),I[2*w+2*b+1]+=E*Sr,Q(I,2*w+2*b+1),I[2*w+2*b+2]+=S*Sr,Q(I,2*w+2*b+2)}for(w=0;w<v;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=v;w<2*v;w++)I[w]=0;return new s(I,0)};function Q(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function te(T,v){this.g=T,this.h=v}function Ae(T,v){if(D(v))throw Error("division by zero");if(D(T))return new te(p,p);if(N(T))return v=Ae(R(T),v),new te(R(v.g),R(v.h));if(N(v))return v=Ae(T,R(v)),new te(R(v.g),v.h);if(30<T.g.length){if(N(T)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var I=g,w=v;0>=w.l(T);)I=Lt(I),w=Lt(w);var b=be(I,1),S=be(w,1);for(w=be(w,2),I=be(I,2);!D(w);){var E=S.add(w);0>=E.l(T)&&(b=b.add(I),S=E),w=be(w,1),I=be(I,1)}return v=O(T,b.j(v)),new te(b,v)}for(b=p;0<=T.l(v);){for(I=Math.max(1,Math.floor(T.m()/v.m())),w=Math.ceil(Math.log(I)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),S=l(I),E=S.j(v);N(E)||0<E.l(T);)I-=w,S=l(I),E=S.j(v);D(S)&&(S=g),b=b.add(S),T=O(T,E)}return new te(b,T)}t.A=function(T){return Ae(this,T).h},t.and=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)&T.i(w);return new s(I,this.h&T.h)},t.or=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)|T.i(w);return new s(I,this.h|T.h)},t.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)^T.i(w);return new s(I,this.h^T.h)};function Lt(T){for(var v=T.g.length+1,I=[],w=0;w<v;w++)I[w]=T.i(w)<<1|T.i(w-1)>>>31;return new s(I,T.h)}function be(T,v){var I=v>>5;v%=32;for(var w=T.g.length-I,b=[],S=0;S<w;S++)b[S]=0<v?T.i(S+I)>>>v|T.i(S+I+1)<<32-v:T.i(S+I);return new s(b,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,pI=aM.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,ti=aM.Integer=s}).apply(typeof sM<"u"?sM:typeof self<"u"?self:typeof window<"u"?window:{});var Ep=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ni={};var gI,R3,Ma,mI,cl,Ip,yI,vI,_I;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ep=="object"&&Ep];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var C=c[m];if(!(C in f))break e;f=f[C]}c=c[c.length-1],m=f[c],d=d(m),d!=m&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,m=!1,C={next:function(){if(!m&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return m=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,m),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function g(c,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function D(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(m,C,A){for(var F=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)F[Re-2]=arguments[Re];return d.prototype[C].apply(m,F)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=c[m];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(u(m)){let C=c.length||0,A=m.length||0;c.length=C+A;for(let F=0;F<A;F++)c[C+F]=m[F]}else c.push(m)}}class O{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function Q(c){return/^[\s\xa0]*$/.test(c)}function te(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Ae(c){return Ae[" "](c),c}Ae[" "]=function(){};var Lt=te().indexOf("Gecko")!=-1&&!(te().toLowerCase().indexOf("webkit")!=-1&&te().indexOf("Edge")==-1)&&!(te().indexOf("Trident")!=-1||te().indexOf("MSIE")!=-1)&&te().indexOf("Edge")==-1;function be(c,d,f){for(let m in c)d.call(f,c[m],m,c)}function T(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(c,d){let f,m;for(let C=1;C<arguments.length;C++){m=arguments[C];for(f in m)c[f]=m[f];for(let A=0;A<I.length;A++)f=I[A],Object.prototype.hasOwnProperty.call(m,f)&&(c[f]=m[f])}}function b(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function E(){var c=Vg;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Sr{constructor(){this.h=this.g=null}add(d,f){let m=sc.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var sc=new O(()=>new Lk,c=>c.reset());class Lk{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ac,cc=!1,Vg=new Sr,iT=()=>{let c=a.Promise.resolve(void 0);ac=()=>{c.then(Vk)}};var Vk=()=>{for(var c;c=E();){try{c.h.call(c.g)}catch(f){S(f)}var d=sc;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}cc=!1};function li(){this.s=this.s,this.C=this.C}li.prototype.s=!1,li.prototype.ma=function(){this.s||(this.s=!0,this.N())},li.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ct(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Ct.prototype.h=function(){this.defaultPrevented=!0};var jk=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c})();function uc(c,d){if(Ct.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Lt){e:{try{Ae(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Uk[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&uc.aa.h.call(this)}}D(uc,Ct);var Uk={2:"touch",3:"pen",4:"mouse"};uc.prototype.h=function(){uc.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var lc="closure_listenable_"+(1e6*Math.random()|0),Bk=0;function $k(c,d,f,m,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=C,this.key=++Bk,this.da=this.fa=!1}function Hl(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ql(c){this.src=c,this.g={},this.h=0}ql.prototype.add=function(c,d,f,m,C){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var F=Ug(c,d,m,C);return-1<F?(d=c[F],f||(d.fa=!1)):(d=new $k(d,this.src,A,!!m,C),d.fa=f,c.push(d)),d};function jg(c,d){var f=d.type;if(f in c.g){var m=c.g[f],C=Array.prototype.indexOf.call(m,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(m,C,1),A&&(Hl(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Ug(c,d,f,m){for(var C=0;C<c.length;++C){var A=c[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==m)return C}return-1}var Bg="closure_lm_"+(1e6*Math.random()|0),$g={};function oT(c,d,f,m,C){if(m&&m.once)return aT(c,d,f,m,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)oT(c,d[A],f,m,C);return null}return f=Gg(f),c&&c[lc]?c.K(d,f,l(m)?!!m.capture:!!m,C):sT(c,d,f,!1,m,C)}function sT(c,d,f,m,C,A){if(!d)throw Error("Invalid event type");var F=l(C)?!!C.capture:!!C,Re=qg(c);if(Re||(c[Bg]=Re=new ql(c)),f=Re.add(d,f,m,F,A),f.proxy)return f;if(m=Hk(),f.proxy=m,m.src=c,m.listener=f,c.addEventListener)jk||(C=F),C===void 0&&(C=!1),c.addEventListener(d.toString(),m,C);else if(c.attachEvent)c.attachEvent(uT(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Hk(){function c(f){return d.call(c.src,c.listener,f)}let d=qk;return c}function aT(c,d,f,m,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)aT(c,d[A],f,m,C);return null}return f=Gg(f),c&&c[lc]?c.L(d,f,l(m)?!!m.capture:!!m,C):sT(c,d,f,!0,m,C)}function cT(c,d,f,m,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)cT(c,d[A],f,m,C);else m=l(m)?!!m.capture:!!m,f=Gg(f),c&&c[lc]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=Ug(A,f,m,C),-1<f&&(Hl(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=qg(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Ug(d,f,m,C)),(f=-1<c?d[c]:null)&&Hg(f))}function Hg(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[lc])jg(d.i,c);else{var f=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(f,m,c.capture):d.detachEvent?d.detachEvent(uT(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=qg(d))?(jg(f,c),f.h==0&&(f.src=null,d[Bg]=null)):Hl(c)}}}function uT(c){return c in $g?$g[c]:$g[c]="on"+c}function qk(c,d){if(c.da)c=!0;else{d=new uc(d,this);var f=c.listener,m=c.ha||c.src;c.fa&&Hg(c),c=f.call(m,d)}return c}function qg(c){return c=c[Bg],c instanceof ql?c:null}var zg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gg(c){return typeof c=="function"?c:(c[zg]||(c[zg]=function(d){return c.handleEvent(d)}),c[zg])}function St(){li.call(this),this.i=new ql(this),this.M=this,this.F=null}D(St,li),St.prototype[lc]=!0,St.prototype.removeEventListener=function(c,d,f,m){cT(this,c,d,f,m)};function Vt(c,d){var f,m=c.F;if(m)for(f=[];m;m=m.F)f.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new Ct(d,c);else if(d instanceof Ct)d.target=d.target||c;else{var C=d;d=new Ct(m,c),w(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var F=d.g=f[A];C=zl(F,m,!0,d)&&C}if(F=d.g=c,C=zl(F,m,!0,d)&&C,C=zl(F,m,!1,d)&&C,f)for(A=0;A<f.length;A++)F=d.g=f[A],C=zl(F,m,!1,d)&&C}St.prototype.N=function(){if(St.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],m=0;m<f.length;m++)Hl(f[m]);delete c.g[d],c.h--}}this.F=null},St.prototype.K=function(c,d,f,m){return this.i.add(String(c),d,!1,f,m)},St.prototype.L=function(c,d,f,m){return this.i.add(String(c),d,!0,f,m)};function zl(c,d,f,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var F=d[A];if(F&&!F.da&&F.capture==f){var Re=F.listener,_t=F.ha||F.src;F.fa&&jg(c.i,F),C=Re.call(_t,m)!==!1&&C}}return C&&!m.defaultPrevented}function lT(c,d,f){if(typeof c=="function")f&&(c=g(c,f));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function dT(c){c.g=lT(()=>{c.g=null,c.i&&(c.i=!1,dT(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class zk extends li{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:dT(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dc(c){li.call(this),this.h=c,this.g={}}D(dc,li);var hT=[];function fT(c){be(c.g,function(d,f){this.g.hasOwnProperty(f)&&Hg(d)},c),c.g={}}dc.prototype.N=function(){dc.aa.N.call(this),fT(this)},dc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wg=a.JSON.stringify,Gk=a.JSON.parse,Wk=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Kg(){}Kg.prototype.h=null;function pT(c){return c.h||(c.h=c.i())}function gT(){}var hc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Qg(){Ct.call(this,"d")}D(Qg,Ct);function Yg(){Ct.call(this,"c")}D(Yg,Ct);var ao={},mT=null;function Gl(){return mT=mT||new St}ao.La="serverreachability";function yT(c){Ct.call(this,ao.La,c)}D(yT,Ct);function fc(c){let d=Gl();Vt(d,new yT(d))}ao.STAT_EVENT="statevent";function vT(c,d){Ct.call(this,ao.STAT_EVENT,c),this.stat=d}D(vT,Ct);function jt(c){let d=Gl();Vt(d,new vT(d,c))}ao.Ma="timingevent";function _T(c,d){Ct.call(this,ao.Ma,c),this.size=d}D(_T,Ct);function pc(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function gc(){this.g=!0}gc.prototype.xa=function(){this.g=!1};function Kk(c,d,f,m,C,A){c.info(function(){if(c.g)if(A)for(var F="",Re=A.split("&"),_t=0;_t<Re.length;_t++){var Ie=Re[_t].split("=");if(1<Ie.length){var At=Ie[0];Ie=Ie[1];var Rt=At.split("_");F=2<=Rt.length&&Rt[1]=="type"?F+(At+"="+Ie+"&"):F+(At+"=redacted&")}}else F=null;else F=A;return"XMLHTTP REQ ("+m+") [attempt "+C+"]: "+d+`
`+f+`
`+F})}function Qk(c,d,f,m,C,A,F){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+F})}function ps(c,d,f,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+Zk(c,f)+(m?" "+m:"")})}function Yk(c,d){c.info(function(){return"TIMEOUT: "+d})}gc.prototype.info=function(){};function Zk(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var m=f[c];if(!(2>m.length)){var C=m[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var F=1;F<C.length;F++)C[F]=""}}}}return Wg(f)}catch{return d}}var Wl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ET={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zg;function Kl(){}D(Kl,Kg),Kl.prototype.g=function(){return new XMLHttpRequest},Kl.prototype.i=function(){return{}},Zg=new Kl;function di(c,d,f,m){this.j=c,this.i=d,this.l=f,this.R=m||1,this.U=new dc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new IT}function IT(){this.i=null,this.g="",this.h=!1}var wT={},Jg={};function Xg(c,d,f){c.L=1,c.v=Jl(Ar(d)),c.m=f,c.P=!0,DT(c,null)}function DT(c,d){c.F=Date.now(),Ql(c),c.A=Ar(c.v);var f=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),LT(f.i,"t",m),c.C=0,f=c.j.J,c.h=new IT,c.g=tb(c.j,f?d:null,!c.m),0<c.O&&(c.M=new zk(g(c.Y,c,c.g),c.O)),d=c.U,f=c.g,m=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(hT[0]=C.toString()),C=hT);for(var A=0;A<C.length;A++){var F=oT(f,C[A],m||d.handleEvent,!1,d.h||d);if(!F)break;d.g[F.key]=F}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),fc(),Kk(c.i,c.u,c.A,c.l,c.R,c.m)}di.prototype.ca=function(c){c=c.target;let d=this.M;d&&Rr(c)==3?d.j():this.Y(c)},di.prototype.Y=function(c){try{if(c==this.g)e:{let Rt=Rr(this.g);var d=this.g.Ba();let ys=this.g.Z();if(!(3>Rt)&&(Rt!=3||this.g&&(this.h.h||this.g.oa()||qT(this.g)))){this.J||Rt!=4||d==7||(d==8||0>=ys?fc(3):fc(2)),em(this);var f=this.g.Z();this.X=f;t:if(TT(this)){var m=qT(this.g);c="";var C=m.length,A=Rr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){co(this),mc(this);var F="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(A&&d==C-1)});m.length=0,this.h.g+=c,this.C=0,F=this.h.g}else F=this.g.oa();if(this.o=f==200,Qk(this.i,this.u,this.A,this.l,this.R,Rt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Re,_t=this.g;if((Re=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(Re)){var Ie=Re;break t}}Ie=null}if(f=Ie)ps(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tm(this,f);else{this.o=!1,this.s=3,jt(12),co(this),mc(this);break e}}if(this.P){f=!0;let An;for(;!this.J&&this.C<F.length;)if(An=Jk(this,F),An==Jg){Rt==4&&(this.s=4,jt(14),f=!1),ps(this.i,this.l,null,"[Incomplete Response]");break}else if(An==wT){this.s=4,jt(15),ps(this.i,this.l,F,"[Invalid Chunk]"),f=!1;break}else ps(this.i,this.l,An,null),tm(this,An);if(TT(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rt!=4||F.length!=0||this.h.h||(this.s=1,jt(16),f=!1),this.o=this.o&&f,!f)ps(this.i,this.l,F,"[Invalid Chunked Response]"),co(this),mc(this);else if(0<F.length&&!this.W){this.W=!0;var At=this.j;At.g==this&&At.ba&&!At.M&&(At.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),am(At),At.M=!0,jt(11))}}else ps(this.i,this.l,F,null),tm(this,F);Rt==4&&co(this),this.o&&!this.J&&(Rt==4?ZT(this.j,this):(this.o=!1,Ql(this)))}else gO(this.g),f==400&&0<F.indexOf("Unknown SID")?(this.s=3,jt(12)):(this.s=0,jt(13)),co(this),mc(this)}}}catch{}finally{}};function TT(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Jk(c,d){var f=c.C,m=d.indexOf(`
`,f);return m==-1?Jg:(f=Number(d.substring(f,m)),isNaN(f)?wT:(m+=1,m+f>d.length?Jg:(d=d.slice(m,m+f),c.C=m+f,d)))}di.prototype.cancel=function(){this.J=!0,co(this)};function Ql(c){c.S=Date.now()+c.I,bT(c,c.I)}function bT(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=pc(g(c.ba,c),d)}function em(c){c.B&&(a.clearTimeout(c.B),c.B=null)}di.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(Yk(this.i,this.A),this.L!=2&&(fc(),jt(17)),co(this),this.s=2,mc(this)):bT(this,this.S-c)};function mc(c){c.j.G==0||c.J||ZT(c.j,c)}function co(c){em(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,fT(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function tm(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||nm(f.h,c))){if(!c.K&&nm(f.h,c)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var C=m;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)rd(f),td(f);else break e;sm(f),jt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=pc(g(f.Za,f),6e3));if(1>=AT(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else lo(f,11)}else if((c.K||f.g==c)&&rd(f),!Q(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let Ie=C[d];if(f.T=Ie[0],Ie=Ie[1],f.G==2)if(Ie[0]=="c"){f.K=Ie[1],f.ia=Ie[2];let At=Ie[3];At!=null&&(f.la=At,f.j.info("VER="+f.la));let Rt=Ie[4];Rt!=null&&(f.Aa=Rt,f.j.info("SVER="+f.Aa));let ys=Ie[5];ys!=null&&typeof ys=="number"&&0<ys&&(m=1.5*ys,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let An=c.g;if(An){let od=An.g?An.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(od){var A=m.h;A.g||od.indexOf("spdy")==-1&&od.indexOf("quic")==-1&&od.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(rm(A,A.h),A.h=null))}if(m.D){let cm=An.g?An.g.getResponseHeader("X-HTTP-Session-Id"):null;cm&&(m.ya=cm,Me(m.I,m.D,cm))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var F=c;if(m.qa=eb(m,m.J?m.ia:null,m.W),F.K){RT(m.h,F);var Re=F,_t=m.L;_t&&(Re.I=_t),Re.B&&(em(Re),Ql(Re)),m.g=F}else QT(m);0<f.i.length&&nd(f)}else Ie[0]!="stop"&&Ie[0]!="close"||lo(f,7);else f.G==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?lo(f,7):om(f):Ie[0]!="noop"&&f.l&&f.l.ta(Ie),f.v=0)}}fc(4)}catch{}}var Xk=class{constructor(c,d){this.g=c,this.map=d}};function CT(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ST(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function AT(c){return c.h?1:c.g?c.g.size:0}function nm(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function rm(c,d){c.g?c.g.add(d):c.h=d}function RT(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}CT.prototype.cancel=function(){if(this.i=NT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function NT(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function eO(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,m=0;m<f;m++)d.push(c[m]);return d}d=[],f=0;for(m in c)d[f++]=c[m];return d}function tO(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let m in c)d[f++]=m;return d}}}function MT(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=tO(c),m=eO(c),C=m.length,A=0;A<C;A++)d.call(void 0,m[A],f&&f[A],c)}var PT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nO(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var m=c[f].indexOf("="),C=null;if(0<=m){var A=c[f].substring(0,m);C=c[f].substring(m+1)}else A=c[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function uo(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof uo){this.h=c.h,Yl(this,c.j),this.o=c.o,this.g=c.g,Zl(this,c.s),this.l=c.l;var d=c.i,f=new _c;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),xT(this,f),this.m=c.m}else c&&(d=String(c).match(PT))?(this.h=!1,Yl(this,d[1]||"",!0),this.o=yc(d[2]||""),this.g=yc(d[3]||"",!0),Zl(this,d[4]),this.l=yc(d[5]||"",!0),xT(this,d[6]||"",!0),this.m=yc(d[7]||"")):(this.h=!1,this.i=new _c(null,this.h))}uo.prototype.toString=function(){var c=[],d=this.j;d&&c.push(vc(d,kT,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(vc(d,kT,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(vc(f,f.charAt(0)=="/"?oO:iO,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",vc(f,aO)),c.join("")};function Ar(c){return new uo(c)}function Yl(c,d,f){c.j=f?yc(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Zl(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function xT(c,d,f){d instanceof _c?(c.i=d,cO(c.i,c.h)):(f||(d=vc(d,sO)),c.i=new _c(d,c.h))}function Me(c,d,f){c.i.set(d,f)}function Jl(c){return Me(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function yc(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function vc(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,rO),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function rO(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var kT=/[#\/\?@]/g,iO=/[#\?:]/g,oO=/[#\?]/g,sO=/[#\?@]/g,aO=/#/g;function _c(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function hi(c){c.g||(c.g=new Map,c.h=0,c.i&&nO(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=_c.prototype,t.add=function(c,d){hi(this),this.i=null,c=gs(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function OT(c,d){hi(c),d=gs(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function FT(c,d){return hi(c),d=gs(c,d),c.g.has(d)}t.forEach=function(c,d){hi(this),this.g.forEach(function(f,m){f.forEach(function(C){c.call(d,C,m,this)},this)},this)},t.na=function(){hi(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let C=c[m];for(let A=0;A<C.length;A++)f.push(d[m])}return f},t.V=function(c){hi(this);let d=[];if(typeof c=="string")FT(this,c)&&(d=d.concat(this.g.get(gs(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return hi(this),this.i=null,c=gs(this,c),FT(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function LT(c,d,f){OT(c,d),0<f.length&&(c.i=null,c.g.set(gs(c,d),N(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let A=encodeURIComponent(String(m)),F=this.V(m);for(m=0;m<F.length;m++){var C=A;F[m]!==""&&(C+="="+encodeURIComponent(String(F[m]))),c.push(C)}}return this.i=c.join("&")};function gs(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function cO(c,d){d&&!c.j&&(hi(c),c.i=null,c.g.forEach(function(f,m){var C=m.toLowerCase();m!=C&&(OT(this,m),LT(this,C,f))},c)),c.j=d}function uO(c,d){let f=new gc;if(a.Image){let m=new Image;m.onload=y(fi,f,"TestLoadImage: loaded",!0,d,m),m.onerror=y(fi,f,"TestLoadImage: error",!1,d,m),m.onabort=y(fi,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(fi,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function lO(c,d){let f=new gc,m=new AbortController,C=setTimeout(()=>{m.abort(),fi(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(A=>{clearTimeout(C),A.ok?fi(f,"TestPingServer: ok",!0,d):fi(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),fi(f,"TestPingServer: error",!1,d)})}function fi(c,d,f,m,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),m(f)}catch{}}function dO(){this.g=new Wk}function hO(c,d,f){let m=f||"";try{MT(c,function(C,A){let F=C;l(C)&&(F=Wg(C)),d.push(m+A+"="+encodeURIComponent(F))})}catch(C){throw d.push(m+"type="+encodeURIComponent("_badmap")),C}}function Ec(c){this.l=c.Ub||null,this.j=c.eb||!1}D(Ec,Kg),Ec.prototype.g=function(){return new Xl(this.l,this.j)},Ec.prototype.i=(function(c){return function(){return c}})({});function Xl(c,d){St.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Xl,St),t=Xl.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,wc(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ic(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,wc(this)),this.g&&(this.readyState=3,wc(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;VT(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function VT(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Ic(this):wc(this),this.readyState==3&&VT(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Ic(this))},t.Qa=function(c){this.g&&(this.response=c,Ic(this))},t.ga=function(){this.g&&Ic(this)};function Ic(c){c.readyState=4,c.l=null,c.j=null,c.v=null,wc(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function wc(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Xl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function jT(c){let d="";return be(c,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function im(c,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=jT(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Me(c,d,f))}function Ve(c){St.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Ve,St);var fO=/^https?$/i,pO=["POST","PUT"];t=Ve.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zg.g(),this.v=this.o?pT(this.o):pT(Zg),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){UT(this,A);return}if(c=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var C in m)f.set(C,m[C]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let A of m.keys())f.set(A,m.get(A));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(pO,d,void 0))||m||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,F]of f)this.g.setRequestHeader(A,F);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{HT(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){UT(this,A)}};function UT(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,BT(c),ed(c)}function BT(c){c.A||(c.A=!0,Vt(c,"complete"),Vt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Vt(this,"complete"),Vt(this,"abort"),ed(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ed(this,!0)),Ve.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?$T(this):this.bb())},t.bb=function(){$T(this)};function $T(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Rr(c)!=4||c.Z()!=2)){if(c.u&&Rr(c)==4)lT(c.Ea,0,c);else if(Vt(c,"readystatechange"),Rr(c)==4){c.h=!1;try{let F=c.Z();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=F===0){var C=String(c.D).match(PT)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),m=!fO.test(C?C.toLowerCase():"")}f=m}if(f)Vt(c,"complete"),Vt(c,"success");else{c.m=6;try{var A=2<Rr(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",BT(c)}}finally{ed(c)}}}}function ed(c,d){if(c.g){HT(c);let f=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Vt(c,"ready");try{f.onreadystatechange=m}catch{}}}function HT(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Rr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Rr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),Gk(d)}};function qT(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function gO(c){let d={};c=(c.g&&2<=Rr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(Q(c[m]))continue;var f=b(c[m]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}T(d,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Dc(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function zT(c){this.Aa=0,this.i=[],this.j=new gc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Dc("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Dc("baseRetryDelayMs",5e3,c),this.cb=Dc("retryDelaySeedMs",1e4,c),this.Wa=Dc("forwardChannelMaxRetries",2,c),this.wa=Dc("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new CT(c&&c.concurrentRequestLimit),this.Da=new dO,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=zT.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,m){jt(0),this.W=c,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=eb(this,null,this.W),nd(this)};function om(c){if(GT(c),c.G==3){var d=c.U++,f=Ar(c.I);if(Me(f,"SID",c.K),Me(f,"RID",d),Me(f,"TYPE","terminate"),Tc(c,f),d=new di(c,c.j,d),d.L=2,d.v=Jl(Ar(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=tb(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Ql(d)}XT(c)}function td(c){c.g&&(am(c),c.g.cancel(),c.g=null)}function GT(c){td(c),c.u&&(a.clearTimeout(c.u),c.u=null),rd(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function nd(c){if(!ST(c.h)&&!c.s){c.s=!0;var d=c.Ga;ac||iT(),cc||(ac(),cc=!0),Vg.add(d,c),c.B=0}}function mO(c,d){return AT(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=pc(g(c.Ga,c,d),JT(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new di(this,this.j,c),A=this.o;if(this.S&&(A?(A=v(A),w(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=KT(this,C,d),f=Ar(this.I),Me(f,"RID",c),Me(f,"CVER",22),this.D&&Me(f,"X-HTTP-Session-Id",this.D),Tc(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(jT(A)))+"&"+d:this.m&&im(f,this.m,A)),rm(this.h,C),this.Ua&&Me(f,"TYPE","init"),this.P?(Me(f,"$req",d),Me(f,"SID","null"),C.T=!0,Xg(C,f,null)):Xg(C,f,d),this.G=2}}else this.G==3&&(c?WT(this,c):this.i.length==0||ST(this.h)||WT(this))};function WT(c,d){var f;d?f=d.l:f=c.U++;let m=Ar(c.I);Me(m,"SID",c.K),Me(m,"RID",f),Me(m,"AID",c.T),Tc(c,m),c.m&&c.o&&im(m,c.m,c.o),f=new di(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=KT(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),rm(c.h,f),Xg(f,m,d)}function Tc(c,d){c.H&&be(c.H,function(f,m){Me(d,m,f)}),c.l&&MT({},function(f,m){Me(d,m,f)})}function KT(c,d,f){f=Math.min(c.i.length,f);var m=c.l?g(c.l.Na,c.l,c):null;e:{var C=c.i;let A=-1;for(;;){let F=["count="+f];A==-1?0<f?(A=C[0].g,F.push("ofs="+A)):A=0:F.push("ofs="+A);let Re=!0;for(let _t=0;_t<f;_t++){let Ie=C[_t].g,At=C[_t].map;if(Ie-=A,0>Ie)A=Math.max(0,C[_t].g-100),Re=!1;else try{hO(At,F,"req"+Ie+"_")}catch{m&&m(At)}}if(Re){m=F.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,m}function QT(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;ac||iT(),cc||(ac(),cc=!0),Vg.add(d,c),c.v=0}}function sm(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=pc(g(c.Fa,c),JT(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,YT(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=pc(g(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,jt(10),td(this),YT(this))};function am(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function YT(c){c.g=new di(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Ar(c.qa);Me(d,"RID","rpc"),Me(d,"SID",c.K),Me(d,"AID",c.T),Me(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Me(d,"TO",c.ja),Me(d,"TYPE","xmlhttp"),Tc(c,d),c.m&&c.o&&im(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Jl(Ar(d)),f.m=null,f.P=!0,DT(f,c)}t.Za=function(){this.C!=null&&(this.C=null,td(this),sm(this),jt(19))};function rd(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function ZT(c,d){var f=null;if(c.g==d){rd(c),am(c),c.g=null;var m=2}else if(nm(c.h,d))f=d.D,RT(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;m=Gl(),Vt(m,new _T(m,f)),nd(c)}else QT(c);else if(C=d.s,C==3||C==0&&0<d.X||!(m==1&&mO(c,d)||m==2&&sm(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:lo(c,5);break;case 4:lo(c,10);break;case 3:lo(c,6);break;default:lo(c,2)}}}function JT(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function lo(c,d){if(c.j.info("Error code "+d),d==2){var f=g(c.fb,c),m=c.Xa;let C=!m;m=new uo(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Yl(m,"https"),Jl(m),C?uO(m.toString(),f):lO(m.toString(),f)}else jt(2);c.G=0,c.l&&c.l.sa(d),XT(c),GT(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),jt(2)):(this.j.info("Failed to ping google.com"),jt(1))};function XT(c){if(c.G=0,c.ka=[],c.l){let d=NT(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function eb(c,d,f){var m=f instanceof uo?Ar(f):new uo(f);if(m.g!="")d&&(m.g=d+"."+m.g),Zl(m,m.s);else{var C=a.location;m=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new uo(null);m&&Yl(A,m),d&&(A.g=d),C&&Zl(A,C),f&&(A.l=f),m=A}return f=c.D,d=c.ya,f&&d&&Me(m,f,d),Me(m,"VER",c.la),Tc(c,m),m}function tb(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ve(new Ec({eb:f})):new Ve(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function nb(){}t=nb.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function id(){}id.prototype.g=function(c,d){return new tn(c,d)};function tn(c,d){St.call(this),this.g=new zT(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!Q(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!Q(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new ms(this)}D(tn,St),tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){om(this.g)},tn.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Wg(c),c=f);d.i.push(new Xk(d.Ya++,c)),d.G==3&&nd(d)},tn.prototype.N=function(){this.g.l=null,delete this.j,om(this.g),delete this.g,tn.aa.N.call(this)};function rb(c){Qg.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}D(rb,Qg);function ib(){Yg.call(this),this.status=1}D(ib,Yg);function ms(c){this.g=c}D(ms,nb),ms.prototype.ua=function(){Vt(this.g,"a")},ms.prototype.ta=function(c){Vt(this.g,new rb(c))},ms.prototype.sa=function(c){Vt(this.g,new ib)},ms.prototype.ra=function(){Vt(this.g,"b")},id.prototype.createWebChannel=id.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,_I=ni.createWebChannelTransport=function(){return new id},vI=ni.getStatEventTarget=function(){return Gl()},yI=ni.Event=ao,Ip=ni.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wl.NO_ERROR=0,Wl.TIMEOUT=8,Wl.HTTP_ERROR=6,cl=ni.ErrorCode=Wl,ET.COMPLETE="complete",mI=ni.EventType=ET,gT.EventType=hc,hc.OPEN="a",hc.CLOSE="b",hc.ERROR="c",hc.MESSAGE="d",St.prototype.listen=St.prototype.K,Ma=ni.WebChannel=gT,R3=ni.FetchXmlHttpFactory=Ec,Ve.prototype.listenOnce=Ve.prototype.L,Ve.prototype.getLastError=Ve.prototype.Ka,Ve.prototype.getLastErrorCode=Ve.prototype.Ba,Ve.prototype.getStatus=Ve.prototype.Z,Ve.prototype.getResponseJson=Ve.prototype.Oa,Ve.prototype.getResponseText=Ve.prototype.oa,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Ha,gI=ni.XhrIo=Ve}).apply(typeof Ep<"u"?Ep:typeof self<"u"?self:typeof window<"u"?window:{});var cM="@firebase/firestore",uM="4.8.0";var yt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");var Ya="11.10.0";var is=new vr("@firebase/firestore");function Pa(){return is.logLevel}function $(t,...e){if(is.logLevel<=he.DEBUG){let n=e.map(uD);is.debug(`Firestore (${Ya}): ${t}`,...n)}}function ri(t,...e){if(is.logLevel<=he.ERROR){let n=e.map(uD);is.error(`Firestore (${Ya}): ${t}`,...n)}}function Ji(t,...e){if(is.logLevel<=he.WARN){let n=e.map(uD);is.warn(`Firestore (${Ya}): ${t}`,...n)}}function uD(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function J(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,tP(t,r,n)}function tP(t,e,n){let r=`FIRESTORE (${Ya}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ri(r),new Error(r)}function Te(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||tP(e,i,r)}function se(t,e){return t}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends dn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Qn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Ap=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},bI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yt.UNAUTHENTICATED))}shutdown(){}},CI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},SI=class{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Te(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new Qn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Qn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>_(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Qn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string",31837,{l:r}),new Ap(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string",2055,{h:e}),new yt(e)}},AI=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},RI=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new AI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Rp=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},NI=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Te(this.o===void 0,3512);let r=o=>{o.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,$("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Rp(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Te(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Rp(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function N3(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function nP(){return new TextEncoder}var pl=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=N3(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function le(t,e){return t<e?-1:t>e?1:0}function MI(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return le(r,i);{let o=nP(),s=M3(o.encode(lM(t,n)),o.encode(lM(e,n)));return s!==0?s:le(r,i)}}n+=r>65535?2:1}return le(t.length,e.length)}function lM(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function M3(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return le(t[n],e[n]);return le(t.length,e.length)}function ja(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var dM="__name__",Np=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&J(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return le(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):MI(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ti.fromString(e.substring(4,e.length-2))}},Fe=class t extends Np{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new L(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},P3=/^[_a-zA-Z][_a-zA-Z0-9]*$/,pn=class t extends Np{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return P3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===dM}static keyField(){return new t([dM])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new L(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new L(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new L(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new L(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var K=class t{constructor(e){this.path=e}static fromPath(e){return new t(Fe.fromString(e))}static fromName(e){return new t(Fe.fromString(e).popFirst(5))}static empty(){return new t(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Fe(e.slice()))}};function rP(t,e,n){if(!n)throw new L(P.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function x3(t,e,n,r){if(e===!0&&r===!0)throw new L(P.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function hM(t){if(!K.isDocumentKey(t))throw new L(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fM(t){if(K.isDocumentKey(t))throw new L(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function iP(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function cg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J(12329,{type:typeof t})}function en(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=cg(t);throw new L(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function st(t,e){let n={typeString:t};return e&&(n.value=e),n}function Rl(t,e){if(!iP(t))throw new L(P.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new L(P.INVALID_ARGUMENT,n);return!0}var pM=-62135596800,gM=1e6,at=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*gM);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new L(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<pM)throw new L(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gM}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Rl(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-pM;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};at._jsonSchemaVersion="firestore/timestamp/1.0",at._jsonSchema={type:st("string",at._jsonSchemaVersion),seconds:st("number"),nanoseconds:st("number")};var ce=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new at(0,0))}static max(){return new t(new at(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var gl=-1,PI=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};PI.UNKNOWN_ID=-1;function k3(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ce.fromTimestamp(r===1e9?new at(n+1,0):new at(n,r));return new os(i,K.empty(),e)}function O3(t){return new os(t.readTime,t.key,gl)}var os=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ce.min(),K.empty(),gl)}static max(){return new t(ce.max(),K.empty(),gl)}};function F3(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:le(t.largestBatchId,e.largestBatchId))}var L3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",xI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Za(t){return _(this,null,function*(){if(t.code!==P.FAILED_PRECONDITION||t.message!==L3)throw t;$("LocalStore","Unexpectedly lost primary lease")})}var x=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function V3(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ja(t){return t.name==="IndexedDbTransactionError"}var lD=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),dD=-1;function ug(t){return t==null}function ml(t){return t===0&&1/t==-1/0}function j3(t){return typeof t=="number"&&Number.isInteger(t)&&!ml(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var oP="";function U3(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=mM(e)),e=B3(t.get(n),e);return mM(e)}function B3(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case oP:n+="";break;default:n+=o}}return n}function mM(t){return t+oP+""}var $3="remoteDocuments",sP="owner";var aP="mutationQueues";var cP="mutations";var uP="documentMutations",H3="remoteDocumentsV14";var lP="remoteDocumentGlobal";var dP="targets";var hP="targetDocuments";var fP="targetGlobal",pP="collectionParents";var gP="clientMetadata";var mP="bundles";var yP="namedQueries";var q3="indexConfiguration";var z3="indexState";var G3="indexEntries";var vP="documentOverlays";var W3="globals";var K3=[aP,cP,uP,$3,dP,sP,fP,hP,gP,lP,pP,mP,yP],Bae=[...K3,vP],Q3=[aP,cP,uP,H3,dP,sP,fP,hP,gP,lP,pP,mP,yP,vP],Y3=Q3,Z3=[...Y3,q3,z3,G3];var $ae=[...Z3,W3];function yM(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function io(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function _P(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Be=class t{constructor(e,n){this.comparator=e,this.root=n||wr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fa(this.root,e,this.comparator,!0)}},Fa=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},wr=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw J(43730,{key:this.key,value:this.value});if(this.right.isRed())throw J(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw J(27949);return e+(this.isRed()?0:1)}};wr.EMPTY=null,wr.RED=!0,wr.BLACK=!1;wr.EMPTY=new class{constructor(){this.size=0}get key(){throw J(57766)}get value(){throw J(16141)}get color(){throw J(16727)}get left(){throw J(29726)}get right(){throw J(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new wr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var vt=class t{constructor(e){this.comparator=e,this.data=new Be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Mp(this.data.getIterator())}getIteratorFrom(e){return new Mp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Mp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Cn=class t{constructor(e){this.fields=e,e.sort(pn.comparator)}static empty(){return new t([])}unionWith(e){let n=new vt(pn.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ja(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Pp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ft=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Pp("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ft.EMPTY_BYTE_STRING=new Ft("");var J3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ii(t){if(Te(!!t,39018),typeof t=="string"){let e=0,n=J3.exec(t);if(Te(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(t.seconds),nanos:Oe(t.nanos)}}function Oe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function oi(t){return typeof t=="string"?Ft.fromBase64String(t):Ft.fromUint8Array(t)}var EP="server_timestamp",IP="__type__",wP="__previous_value__",DP="__local_write_time__";function hD(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[IP])===null||n===void 0?void 0:n.stringValue)===EP}function lg(t){let e=t.mapValue.fields[wP];return hD(e)?lg(e):e}function yl(t){let e=ii(t.mapValue.fields[DP].timestampValue);return new at(e.seconds,e.nanos)}var kI=class{constructor(e,n,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},xp="(default)",kp=class t{constructor(e,n){this.projectId=e,this.database=n||xp}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===xp}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var fD="__type__",TP="__max__",wp={mapValue:{fields:{__type__:{stringValue:TP}}}},pD="__vector__",Ua="value";function Xi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?hD(t)?4:CP(t)?9007199254740991:bP(t)?10:11:J(28295,{value:t})}function br(t,e){if(t===e)return!0;let n=Xi(t);if(n!==Xi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return yl(t).isEqual(yl(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=ii(i.timestampValue),a=ii(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return oi(i.bytesValue).isEqual(oi(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return Oe(i.geoPointValue.latitude)===Oe(o.geoPointValue.latitude)&&Oe(i.geoPointValue.longitude)===Oe(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Oe(i.integerValue)===Oe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Oe(i.doubleValue),a=Oe(o.doubleValue);return s===a?ml(s)===ml(a):isNaN(s)&&isNaN(a)}return!1})(t,e);case 9:return ja(t.arrayValue.values||[],e.arrayValue.values||[],br);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(yM(s)!==yM(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!br(s[u],a[u])))return!1;return!0})(t,e);default:return J(52216,{left:t})}}function vl(t,e){return(t.values||[]).find(n=>br(n,e))!==void 0}function Ba(t,e){if(t===e)return 0;let n=Xi(t),r=Xi(e);if(n!==r)return le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return le(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=Oe(o.integerValue||o.doubleValue),u=Oe(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(t,e);case 3:return vM(t.timestampValue,e.timestampValue);case 4:return vM(yl(t),yl(e));case 5:return MI(t.stringValue,e.stringValue);case 6:return(function(o,s){let a=oi(o),u=oi(s);return a.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=le(a[l],u[l]);if(h!==0)return h}return le(a.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=le(Oe(o.latitude),Oe(s.latitude));return a!==0?a:le(Oe(o.longitude),Oe(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return _M(t.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,u,l,h;let p=o.fields||{},g=s.fields||{},y=(a=p[Ua])===null||a===void 0?void 0:a.arrayValue,D=(u=g[Ua])===null||u===void 0?void 0:u.arrayValue,N=le(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=D?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:_M(y,D)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===wp.mapValue&&s===wp.mapValue)return 0;if(o===wp.mapValue)return 1;if(s===wp.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let g=MI(u[p],h[p]);if(g!==0)return g;let y=Ba(a[u[p]],l[h[p]]);if(y!==0)return y}return le(u.length,h.length)})(t.mapValue,e.mapValue);default:throw J(23264,{le:n})}}function vM(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return le(t,e);let n=ii(t),r=ii(e),i=le(n.seconds,r.seconds);return i!==0?i:le(n.nanos,r.nanos)}function _M(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=Ba(n[i],r[i]);if(o)return o}return le(n.length,r.length)}function $a(t){return OI(t)}function OI(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=ii(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return oi(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return K.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=OI(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${OI(n.fields[s])}`;return i+"}"})(t.mapValue):J(61005,{value:t})}function bp(t){switch(Xi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=lg(t);return e?16+bp(e):16;case 5:return 2*t.stringValue.length;case 6:return oi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+bp(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return io(r.fields,(o,s)=>{i+=o.length+bp(s)}),i})(t.mapValue);default:throw J(13486,{value:t})}}function EM(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function FI(t){return!!t&&"integerValue"in t}function gD(t){return!!t&&"arrayValue"in t}function IM(t){return!!t&&"nullValue"in t}function wM(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Cp(t){return!!t&&"mapValue"in t}function bP(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[fD])===null||n===void 0?void 0:n.stringValue)===pD}function ll(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return io(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ll(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ll(t.arrayValue.values[n]);return e}return Object.assign({},t)}function CP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===TP}var qae={mapValue:{fields:{[fD]:{stringValue:pD},[Ua]:{arrayValue:{}}}}};var fn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Cp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ll(n)}setAll(e){let n=pn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=ll(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Cp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return br(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Cp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){io(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(ll(this.value))}};function SP(t){let e=[];return io(t.fields,(n,r)=>{let i=new pn([n]);if(Cp(r)){let o=SP(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Cn(e)}var Yn=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ce.min(),ce.min(),ce.min(),fn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ce.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ce.min(),ce.min(),fn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ce.min(),ce.min(),fn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ha=class{constructor(e,n){this.position=e,this.inclusive=n}};function DM(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=K.comparator(K.fromName(s.referenceValue),n.key):r=Ba(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function TM(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!br(t.position[n],e.position[n]))return!1;return!0}var ss=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function X3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Op=class{},ot=class t extends Op{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new VI(e,n,r):n==="array-contains"?new BI(e,r):n==="in"?new $I(e,r):n==="not-in"?new HI(e,r):n==="array-contains-any"?new qI(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new jI(e,r):new UI(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ba(n,this.value)):n!==null&&Xi(this.value)===Xi(n)&&this.matchesComparison(Ba(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Zn=class t extends Op{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return AP(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function AP(t){return t.op==="and"}function RP(t){return eq(t)&&AP(t)}function eq(t){for(let e of t.filters)if(e instanceof Zn)return!1;return!0}function LI(t){if(t instanceof ot)return t.field.canonicalString()+t.op.toString()+$a(t.value);if(RP(t))return t.filters.map(e=>LI(e)).join(",");{let e=t.filters.map(n=>LI(n)).join(",");return`${t.op}(${e})`}}function NP(t,e){return t instanceof ot?(function(r,i){return i instanceof ot&&r.op===i.op&&r.field.isEqual(i.field)&&br(r.value,i.value)})(t,e):t instanceof Zn?(function(r,i){return i instanceof Zn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&NP(s,i.filters[a]),!0):!1})(t,e):void J(19439)}function MP(t){return t instanceof ot?(function(n){return`${n.field.canonicalString()} ${n.op} ${$a(n.value)}`})(t):t instanceof Zn?(function(n){return n.op.toString()+" {"+n.getFilters().map(MP).join(" ,")+"}"})(t):"Filter"}var VI=class extends ot{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){let n=K.comparator(e.key,this.key);return this.matchesComparison(n)}},jI=class extends ot{constructor(e,n){super(e,"in",n),this.keys=PP("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},UI=class extends ot{constructor(e,n){super(e,"not-in",n),this.keys=PP("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function PP(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}var BI=class extends ot{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return gD(n)&&vl(n.arrayValue,this.value)}},$I=class extends ot{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&vl(this.value.arrayValue,n)}},HI=class extends ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(vl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!vl(this.value.arrayValue,n)}},qI=class extends ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!gD(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>vl(this.value.arrayValue,r))}};var zI=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function bM(t,e=null,n=[],r=[],i=null,o=null,s=null){return new zI(t,e,n,r,i,o,s)}function mD(t){let e=se(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>LI(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),ug(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>$a(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>$a(r)).join(",")),e.Pe=n}return e.Pe}function yD(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!X3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!NP(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!TM(t.startAt,e.startAt)&&TM(t.endAt,e.endAt)}function GI(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var eo=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function tq(t,e,n,r,i,o,s,a){return new eo(t,e,n,r,i,o,s,a)}function dg(t){return new eo(t)}function CM(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xP(t){return t.collectionGroup!==null}function dl(t){let e=se(t);if(e.Te===null){e.Te=[];let n=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new vt(pn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new ss(o,r))}),n.has(pn.keyField().canonicalString())||e.Te.push(new ss(pn.keyField(),r))}return e.Te}function Dr(t){let e=se(t);return e.Ie||(e.Ie=nq(e,dl(t))),e.Ie}function nq(t,e){if(t.limitType==="F")return bM(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ss(i.field,o)});let n=t.endAt?new Ha(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ha(t.startAt.position,t.startAt.inclusive):null;return bM(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function WI(t,e){let n=t.filters.concat([e]);return new eo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function KI(t,e,n){return new eo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function hg(t,e){return yD(Dr(t),Dr(e))&&t.limitType===e.limitType}function kP(t){return`${mD(Dr(t))}|lt:${t.limitType}`}function xa(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>MP(i)).join(", ")}]`),ug(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>$a(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>$a(i)).join(",")),`Target(${r})`})(Dr(t))}; limitType=${t.limitType})`}function fg(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):K.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of dl(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=DM(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,dl(r),i)||r.endAt&&!(function(s,a,u){let l=DM(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,dl(r),i))})(t,e)}function rq(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function OP(t){return(e,n)=>{let r=!1;for(let i of dl(t)){let o=iq(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function iq(t,e,n){let r=t.field.isKeyField()?K.comparator(e.key,n.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Ba(u,l):J(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J(19790,{direction:t.dir})}}var si=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){io(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return _P(this.inner)}size(){return this.innerSize}};var oq=new Be(K.comparator);function ai(){return oq}var FP=new Be(K.comparator);function ul(...t){let e=FP;for(let n of t)e=e.insert(n.key,n);return e}function LP(t){let e=FP;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Xo(){return hl()}function VP(){return hl()}function hl(){return new si(t=>t.toString(),(t,e)=>t.isEqual(e))}var sq=new Be(K.comparator),aq=new vt(K.comparator);function ge(...t){let e=aq;for(let n of t)e=e.add(n);return e}var cq=new vt(le);function uq(){return cq}function vD(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ml(e)?"-0":e}}function jP(t){return{integerValue:""+t}}function lq(t,e){return j3(e)?jP(e):vD(t,e)}var qa=class{constructor(){this._=void 0}};function dq(t,e,n){return t instanceof za?(function(i,o){let s={fields:{[IP]:{stringValue:EP},[DP]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&hD(o)&&(o=lg(o)),o&&(s.fields[wP]=o),{mapValue:s}})(n,e):t instanceof as?BP(t,e):t instanceof cs?$P(t,e):(function(i,o){let s=UP(i,o),a=SM(s)+SM(i.Ee);return FI(s)&&FI(i.Ee)?jP(a):vD(i.serializer,a)})(t,e)}function hq(t,e,n){return t instanceof as?BP(t,e):t instanceof cs?$P(t,e):n}function UP(t,e){return t instanceof Ga?(function(r){return FI(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var za=class extends qa{},as=class extends qa{constructor(e){super(),this.elements=e}};function BP(t,e){let n=HP(e);for(let r of t.elements)n.some(i=>br(i,r))||n.push(r);return{arrayValue:{values:n}}}var cs=class extends qa{constructor(e){super(),this.elements=e}};function $P(t,e){let n=HP(e);for(let r of t.elements)n=n.filter(i=>!br(i,r));return{arrayValue:{values:n}}}var Ga=class extends qa{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function SM(t){return Oe(t.integerValue||t.doubleValue)}function HP(t){return gD(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function fq(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof as&&i instanceof as||r instanceof cs&&i instanceof cs?ja(r.elements,i.elements,br):r instanceof Ga&&i instanceof Ga?br(r.Ee,i.Ee):r instanceof za&&i instanceof za})(t.transform,e.transform)}var QI=class{constructor(e,n){this.version=e,this.transformResults=n}},Sn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Sp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Wa=class{};function qP(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new _l(t.key,Sn.none()):new us(t.key,t.data,Sn.none());{let n=t.data,r=fn.empty(),i=new vt(pn.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Cr(t.key,r,new Cn(i.toArray()),Sn.none())}}function pq(t,e,n){t instanceof us?(function(i,o,s){let a=i.value.clone(),u=RM(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Cr?(function(i,o,s){if(!Sp(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=RM(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(zP(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function fl(t,e,n,r){return t instanceof us?(function(o,s,a,u){if(!Sp(o.precondition,s))return a;let l=o.value.clone(),h=NM(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof Cr?(function(o,s,a,u){if(!Sp(o.precondition,s))return a;let l=NM(o.fieldTransforms,u,s),h=s.data;return h.setAll(zP(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,a){return Sp(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(t,e,n)}function gq(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=UP(r.transform,i||null);o!=null&&(n===null&&(n=fn.empty()),n.set(r.field,o))}return n||null}function AM(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ja(r,i,(o,s)=>fq(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var us=class extends Wa{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Cr=class extends Wa{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function zP(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function RM(t,e,n){let r=new Map;Te(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,hq(s,a,n[i]))}return r}function NM(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,dq(o,s,e))}return r}var _l=class extends Wa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},YI=class extends Wa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var ZI=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&pq(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=fl(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=fl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=VP();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=qP(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&ja(this.mutations,e.mutations,(n,r)=>AM(n,r))&&ja(this.baseMutations,e.baseMutations,(n,r)=>AM(n,r))}},JI=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Te(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return sq})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var XI=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var ew=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var rt,_e;function mq(t){switch(t){case P.OK:return J(64938);case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0;default:return J(15467,{code:t})}}function GP(t){if(t===void 0)return ri("GRPC error has no .code"),P.UNKNOWN;switch(t){case rt.OK:return P.OK;case rt.CANCELLED:return P.CANCELLED;case rt.UNKNOWN:return P.UNKNOWN;case rt.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case rt.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case rt.INTERNAL:return P.INTERNAL;case rt.UNAVAILABLE:return P.UNAVAILABLE;case rt.UNAUTHENTICATED:return P.UNAUTHENTICATED;case rt.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case rt.NOT_FOUND:return P.NOT_FOUND;case rt.ALREADY_EXISTS:return P.ALREADY_EXISTS;case rt.PERMISSION_DENIED:return P.PERMISSION_DENIED;case rt.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case rt.ABORTED:return P.ABORTED;case rt.OUT_OF_RANGE:return P.OUT_OF_RANGE;case rt.UNIMPLEMENTED:return P.UNIMPLEMENTED;case rt.DATA_LOSS:return P.DATA_LOSS;default:return J(39323,{code:t})}}(_e=rt||(rt={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";var MM=null;var yq=new ti([4294967295,4294967295],0);function PM(t){let e=nP().encode(t),n=new pI;return n.update(e),new Uint8Array(n.digest())}function xM(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ti([n,r],0),new ti([i,o],0)]}var tw=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new es(`Invalid padding: ${n}`);if(r<0)throw new es(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new es(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new es(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=ti.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(ti.fromNumber(r)));return i.compare(yq)===1&&(i=new ti([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=PM(e),[r,i]=xM(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let n=PM(e),[r,i]=xM(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},es=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Fp=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,El.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ce.min(),i,new Be(le),ai(),ge())}},El=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ge(),ge(),ge())}};var La=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},Lp=class{constructor(e,n){this.targetId=e,this.De=n}},Vp=class{constructor(e,n,r=Ft.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},jp=class{constructor(){this.ve=0,this.Ce=kM(),this.Fe=Ft.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ge(),n=ge(),r=ge();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:J(38017,{changeType:o})}}),new El(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=kM()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Te(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},nw=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=ai(),this.je=Dp(),this.Je=Dp(),this.He=new Be(le)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:J(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let o=i.target;if(GI(o))if(r===0){let s=new K(o.path);this.Xe(n,s,Yn.newNoDocument(s,ce.min()))}else Te(r===1,20013,{expectedCount:r});else{let s=this.ot(n);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,l)}MM?.ct((function(h,p,g,y,D){var N,R,O,Q,te,Ae;let Lt={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},be=p.unchangedNames;return be&&(Lt.bloomFilter={applied:D===0,hashCount:(N=be?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(Q=(O=(R=be?.bits)===null||R===void 0?void 0:R.bitmap)===null||O===void 0?void 0:O.length)!==null&&Q!==void 0?Q:0,padding:(Ae=(te=be?.bits)===null||te===void 0?void 0:te.padding)!==null&&Ae!==void 0?Ae:0,mightContain:T=>{var v;return(v=y?.mightContain(T))!==null&&v!==void 0&&v}}),Lt})(s,e.De,this.We.lt(),a,u))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=oi(r).toUint8Array()}catch(u){if(u instanceof Pp)return Ji("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new tw(s,i,o)}catch(u){return Ji(u instanceof es?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&GI(a.target)){let u=new K(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,Yn.newNoDocument(u,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=ge();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Fp(e,n,this.He,this.ze,r);return this.ze=ai(),this.je=Dp(),this.Je=Dp(),this.He=new Be(le),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new jp,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new vt(le),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new vt(le),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||$("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new jp),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function Dp(){return new Be(K.comparator)}function kM(){return new Be(K.comparator)}var vq={asc:"ASCENDING",desc:"DESCENDING"},_q={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Eq={and:"AND",or:"OR"},rw=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function iw(t,e){return t.useProto3Json||ug(e)?e:{value:e}}function Up(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Iq(t,e){return Up(t,e.toTimestamp())}function Tr(t){return Te(!!t,49232),ce.fromTimestamp((function(n){let r=ii(n);return new at(r.seconds,r.nanos)})(t))}function _D(t,e){return ow(t,e).canonicalString()}function ow(t,e){let n=(function(i){return new Fe(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function KP(t){let e=Fe.fromString(t);return Te(XP(e),10190,{key:e.toString()}),e}function sw(t,e){return _D(t.databaseId,e.path)}function EI(t,e){let n=KP(e);if(n.get(1)!==t.databaseId.projectId)throw new L(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new L(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(YP(n))}function QP(t,e){return _D(t.databaseId,e)}function wq(t){let e=KP(t);return e.length===4?Fe.emptyPath():YP(e)}function aw(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function YP(t){return Te(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function OM(t,e,n){return{name:sw(t,e),fields:n.value.mapValue.fields}}function Dq(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:J(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(Te(h===void 0||typeof h=="string",58123),Ft.fromBase64String(h||"")):(Te(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Ft.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let h=l.code===void 0?P.UNKNOWN:GP(l.code);return new L(h,l.message||"")})(s);n=new Vp(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=EI(t,r.document.name),o=Tr(r.document.updateTime),s=r.document.createTime?Tr(r.document.createTime):ce.min(),a=new fn({mapValue:{fields:r.document.fields}}),u=Yn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new La(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=EI(t,r.document),o=r.readTime?Tr(r.readTime):ce.min(),s=Yn.newNoDocument(i,o),a=r.removedTargetIds||[];n=new La([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=EI(t,r.document),o=r.removedTargetIds||[];n=new La([],o,i,null)}else{if(!("filter"in e))return J(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new ew(i,o),a=r.targetId;n=new Lp(a,s)}}return n}function Tq(t,e){let n;if(e instanceof us)n={update:OM(t,e.key,e.value)};else if(e instanceof _l)n={delete:sw(t,e.key)};else if(e instanceof Cr)n={update:OM(t,e.key,e.data),updateMask:xq(e.fieldMask)};else{if(!(e instanceof YI))return J(16599,{Rt:e.type});n={verify:sw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof za)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof as)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof cs)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ga)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw J(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:Iq(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:J(27497)})(t,e.precondition)),n}function bq(t,e){return t&&t.length>0?(Te(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?Tr(i.updateTime):Tr(o);return s.isEqual(ce.min())&&(s=Tr(o)),new QI(s,i.transformResults||[])})(n,e))):[]}function Cq(t,e){return{documents:[QP(t,e.path)]}}function Sq(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=QP(t,i);let o=(function(l){if(l.length!==0)return JP(Zn.create(l,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(g){return{field:ka(g.field),direction:Nq(g.dir)}})(h))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=iw(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:n,parent:i}}function Aq(t){let e=wq(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Te(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=(function(p){let g=ZP(p);return g instanceof Zn&&RP(g)?g.getFilters():[g]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(g=>(function(D){return new ss(Oa(D.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(g))})(n.orderBy));let a=null;n.limit&&(a=(function(p){let g;return g=typeof p=="object"?p.value:p,ug(g)?null:g})(n.limit));let u=null;n.startAt&&(u=(function(p){let g=!!p.before,y=p.values||[];return new Ha(y,g)})(n.startAt));let l=null;return n.endAt&&(l=(function(p){let g=!p.before,y=p.values||[];return new Ha(y,g)})(n.endAt)),tq(e,i,s,o,a,"F",u,l)}function Rq(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ZP(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Oa(n.unaryFilter.field);return ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Oa(n.unaryFilter.field);return ot.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Oa(n.unaryFilter.field);return ot.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Oa(n.unaryFilter.field);return ot.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return J(61313);default:return J(60726)}})(t):t.fieldFilter!==void 0?(function(n){return ot.create(Oa(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return J(58110);default:return J(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Zn.create(n.compositeFilter.filters.map(r=>ZP(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return J(1026)}})(n.compositeFilter.op))})(t):J(30097,{filter:t})}function Nq(t){return vq[t]}function Mq(t){return _q[t]}function Pq(t){return Eq[t]}function ka(t){return{fieldPath:t.canonicalString()}}function Oa(t){return pn.fromServerFormat(t.fieldPath)}function JP(t){return t instanceof ot?(function(n){if(n.op==="=="){if(wM(n.value))return{unaryFilter:{field:ka(n.field),op:"IS_NAN"}};if(IM(n.value))return{unaryFilter:{field:ka(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(wM(n.value))return{unaryFilter:{field:ka(n.field),op:"IS_NOT_NAN"}};if(IM(n.value))return{unaryFilter:{field:ka(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ka(n.field),op:Mq(n.op),value:n.value}}})(t):t instanceof Zn?(function(n){let r=n.getFilters().map(i=>JP(i));return r.length===1?r[0]:{compositeFilter:{op:Pq(n.op),filters:r}}})(t):J(54877,{filter:t})}function xq(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function XP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Il=class t{constructor(e,n,r,i,o=ce.min(),s=ce.min(),a=Ft.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var cw=class{constructor(e){this.gt=e}};function kq(t){let e=Aq({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?KI(e,e.limit,"L"):e}var Bp=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(Oe(e.integerValue));else if("doubleValue"in e){let r=Oe(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),ml(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=ii(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(oi(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?CP(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):bP(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):J(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let s=Ua,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(Oe(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),K.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};Bp.Ut=new Bp;var uw=class{constructor(){this.Dn=new lw}addToCollectionParentIndex(e,n){return this.Dn.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return x.resolve()}deleteFieldIndex(e,n){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,n){return x.resolve()}getDocumentsMatchingTarget(e,n){return x.resolve(null)}getIndexType(e,n){return x.resolve(0)}getFieldIndexes(e,n){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,n){return x.resolve(os.min())}getMinOffsetFromCollectionGroup(e,n){return x.resolve(os.min())}updateCollectionGroup(e,n,r){return x.resolve()}updateIndexEntries(e,n){return x.resolve()}},lw=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new vt(Fe.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new vt(Fe.comparator)).toArray()}};var zae=new Uint8Array(0);var FM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ex=41943040,bn=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(ex,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);var wl=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var LM="LruGarbageCollector",Oq=1048576;function VM([t,e],[n,r]){let i=le(t,n);return i===0?le(e,r):i}var dw=class{constructor(e){this.Tr=e,this.buffer=new vt(VM),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();VM(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},hw=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){$(LM,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>_(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ja(n)?$(LM,"Ignoring IndexedDB error during garbage collection: ",n):yield Za(n)}yield this.Rr(3e5)}))}},fw=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return x.resolve(lD.ue);let r=new dw(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?($("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(FM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),FM):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Pa()<=he.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function Fq(t,e){return new fw(t,e)}var pw=class{constructor(){this.changes=new si(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Yn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?x.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var gw=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var mw=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&fl(r.mutation,i,Cn.empty(),at.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){let i=Xo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=ul();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Xo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=ai(),s=hl(),a=(function(){return hl()})();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Cr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),fl(h.mutation,l,h.mutation.getFieldMask(),at.now())):s.set(l.key,Cn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new gw(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=hl(),i=new Be((s,a)=>s-a),o=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Cn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ge()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=VP();h.forEach(g=>{if(!o.has(g)){let y=qP(n.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return K.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xP(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):x.resolve(Xo()),a=gl,u=o;return s.next(l=>x.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ge())).next(h=>({batchId:a,changes:LP(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let i=ul();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=ul();return this.indexManager.getCollectionParents(e,o).next(a=>x.forEach(a,u=>{let l=(function(p,g){return new eo(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Yn.newInvalidDocument(h)))});let a=ul();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&fl(h.mutation,l,Cn.empty(),at.now()),fg(n,l)&&(a=a.insert(u,l))}),a})}};var yw=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return x.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Tr(i.createTime)}})(n)),x.resolve()}getNamedQuery(e,n){return x.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(i){return{name:i.name,query:kq(i.bundledQuery),readTime:Tr(i.readTime)}})(n)),x.resolve()}};var vw=class{constructor(){this.overlays=new Be(K.comparator),this.kr=new Map}getOverlay(e,n){return x.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Xo();return x.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),x.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),x.resolve()}getOverlaysForCollection(e,n,r){let i=Xo(),o=n.length+1,s=new K(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Be((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Xo(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Xo(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return x.resolve(a)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new XI(n,r));let o=this.kr.get(n);o===void 0&&(o=ge(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}};var _w=class{constructor(){this.sessionToken=Ft.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,x.resolve()}};var Dl=class{constructor(){this.qr=new vt(it.Qr),this.$r=new vt(it.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new it(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new it(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new K(new Fe([])),r=new it(n,e),i=new it(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new K(new Fe([])),r=new it(n,e),i=new it(n,e+1),o=ge();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new it(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},it=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return K.comparator(e.key,n.key)||le(e.Hr,n.Hr)}static Ur(e,n){return le(e.Hr,n.Hr)||K.comparator(e.key,n.key)}};var Ew=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new vt(it.Qr)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new ZI(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new it(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(s)}lookupMutationBatch(e,n){return x.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?dD:this.er-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new it(n,0),i=new it(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new vt(le);return n.forEach(i=>{let o=new it(i,0),s=new it(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),x.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;K.isDocumentKey(o)||(o=o.child(""));let s=new it(new K(o),0),a=new vt(le);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),x.resolve(this.ei(a))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Te(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return x.forEach(n.mutations,i=>{let o=new it(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new it(n,0),i=this.Yr.firstAfterOrEqual(r);return x.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Iw=class{constructor(e){this.ni=e,this.docs=(function(){return new Be(K.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():Yn.newInvalidDocument(n))}getEntries(e,n){let r=ai();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Yn.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=ai(),s=n.path,a=new K(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||F3(O3(h),r)<=0||(i.has(h.key)||fg(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(e,n,r,i){J(9500)}ri(e,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ww(this)}getSize(e){return x.resolve(this.size)}},ww=class extends pw{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),x.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var Dw=class{constructor(e){this.persistence=e,this.ii=new si(n=>mD(n),yD),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.si=0,this.oi=new Dl,this.targetCount=0,this._i=wl.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),x.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new wl(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.hr(n),x.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(o).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return x.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),x.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),x.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return x.resolve(r)}containsKey(e,n){return x.resolve(this.oi.containsKey(n))}};var $p=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new lD(0),this.ci=!1,this.ci=!0,this.li=new _w,this.referenceDelegate=e(this),this.hi=new Dw(this),this.indexManager=new uw,this.remoteDocumentCache=(function(i){return new Iw(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new cw(n),this.Ti=new yw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new vw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new Ew(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){$("MemoryPersistence","Starting transaction:",e);let i=new Tw(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return x.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},Tw=class extends xI{constructor(e){super(),this.currentSequenceNumber=e}},bw=class t{constructor(e){this.persistence=e,this.Ai=new Dl,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw J(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),x.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),x.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.mi,r=>{let i=K.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,ce.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return x.or([()=>x.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},Hp=class t{constructor(e,n){this.persistence=e,this.gi=new si(r=>U3(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Fq(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return x.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return x.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?x.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,ce.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),x.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),x.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),x.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),x.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=bp(e.data.value)),n}Sr(e,n,r){return x.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return x.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Cw=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=ge(),i=ge();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var Sw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Aw=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return kR()?8:V3(mt())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Sw;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(Pa()<=he.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",xa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),x.resolve()):(Pa()<=he.DEBUG&&$("QueryEngine","Query:",xa(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Pa()<=he.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",xa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dr(n))):x.resolve())}ps(e,n){if(CM(n))return x.resolve(null);let r=Dr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=KI(n,null,"F"),r=Dr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ge(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(n,a);return this.Ds(n,l,s,u.readTime)?this.ps(e,KI(n,null,"F")):this.vs(e,l,n,u)}))})))}ys(e,n,r,i){return CM(n)||i.isEqual(ce.min())?x.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ds(n,s,r,i)?x.resolve(null):(Pa()<=he.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xa(n)),this.vs(e,s,n,k3(i,gl)).next(a=>a))})}bs(e,n){let r=new vt(OP(e));return n.forEach((i,o)=>{fg(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return Pa()<=he.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",xa(n)),this.gs.getDocumentsMatchingQuery(e,n,os.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var ED="LocalStore",Lq=3e8,Rw=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Be(le),this.Ms=new si(o=>mD(o),yD),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mw(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function Vq(t,e,n,r){return new Rw(t,e,n,r)}function tx(t,e){return _(this,null,function*(){let n=se(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ge();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function jq(t,e){let n=se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,h){let p=l.batch,g=p.keys(),y=x.resolve();return g.forEach(D=>{y=y.next(()=>h.getEntry(u,D)).next(N=>{let R=l.docVersions.get(D);Te(R!==null,48541),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=ge();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function nx(t){let e=se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function Uq(t,e){let n=se(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(n.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Ft.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(N,R,O){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=Lq?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0})(g,y,h)&&a.push(n.hi.updateTargetData(o,y))});let u=ai(),l=ge();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(Bq(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(ce.min())){let h=n.hi.getLastRemoteSnapshotVersion(o).next(p=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return x.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Fs=i,o))}function Bq(t,e,n){let r=ge(),i=ge();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=ai();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ce.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):$(ED,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function $q(t,e){let n=se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=dD),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Hq(t,e){let n=se(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,x.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new Il(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}function Nw(t,e,n){return _(this,null,function*(){let r=se(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ja(s))throw s;$(ED,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function jM(t,e,n){let r=se(t),i=ce.min(),o=ge();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=se(u),g=p.Ms.get(h);return g!==void 0?x.resolve(p.Fs.get(g)):p.hi.getTargetData(l,h)})(r,s,Dr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:ce.min(),n?o:ge())).next(a=>(qq(r,rq(e),a),{documents:a,qs:o})))}function qq(t,e,n){let r=t.xs.get(e)||ce.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}var qp=class{constructor(){this.activeTargetIds=uq()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Mw=class{constructor(){this.Fo=new qp,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new qp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Pw=class{xo(e){}shutdown(){}};var UM="ConnectivityMonitor",zp=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){$(UM,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){$(UM,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Tp=null;function xw(){return Tp===null?Tp=(function(){return 268435456+Math.round(2147483648*Math.random())})():Tp++,"0x"+Tp.toString(16)}var II="RestConnection",zq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},kw=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===xp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=xw(),a=this.Go(e,n.toUriEncodedString());$(II,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=Ui(l);return this.jo(e,a,u,r,h).then(p=>($(II,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Ji(II,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ya})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){let r=zq[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var Ow=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Ot="WebChannelConnection",Fw=class extends kw{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){let s=xw();return new Promise((a,u)=>{let l=new gI;l.setWithCredentials(!0),l.listenOnce(mI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case cl.NO_ERROR:let p=l.getResponseJson();$(Ot,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case cl.TIMEOUT:$(Ot,`RPC '${e}' ${s} timed out`),u(new L(P.DEADLINE_EXCEEDED,"Request time out"));break;case cl.HTTP_ERROR:let g=l.getStatus();if($(Ot,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let D=y?.error;if(D&&D.status&&D.message){let N=(function(O){let Q=O.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(Q)>=0?Q:P.UNKNOWN})(D.status);u(new L(N,D.message))}else u(new L(P.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new L(P.UNAVAILABLE,"Connection failed."));break;default:J(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{$(Ot,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);$(Ot,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}P_(e,n,r){let i=xw(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=_I(),a=vI(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");$(Ot,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let g=!1,y=!1,D=new Ow({Ho:R=>{y?$(Ot,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(g||($(Ot,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),$(Ot,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Yo:()=>p.close()}),N=(R,O,Q)=>{R.listen(O,te=>{try{Q(te)}catch(Ae){setTimeout(()=>{throw Ae},0)}})};return N(p,Ma.EventType.OPEN,()=>{y||($(Ot,`RPC '${e}' stream ${i} transport opened.`),D.s_())}),N(p,Ma.EventType.CLOSE,()=>{y||(y=!0,$(Ot,`RPC '${e}' stream ${i} transport closed`),D.__(),this.I_(p))}),N(p,Ma.EventType.ERROR,R=>{y||(y=!0,Ji(Ot,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),D.__(new L(P.UNAVAILABLE,"The operation could not be completed")))}),N(p,Ma.EventType.MESSAGE,R=>{var O;if(!y){let Q=R.data[0];Te(!!Q,16349);let te=Q,Ae=te?.error||((O=te[0])===null||O===void 0?void 0:O.error);if(Ae){$(Ot,`RPC '${e}' stream ${i} received error:`,Ae);let Lt=Ae.status,be=(function(I){let w=rt[I];if(w!==void 0)return GP(w)})(Lt),T=Ae.message;be===void 0&&(be=P.INTERNAL,T="Unknown error status: "+Lt+" with message "+Ae.message),y=!0,D.__(new L(be,T)),p.close()}else $(Ot,`RPC '${e}' stream ${i} received:`,Q),D.a_(Q)}}),N(a,yI.STAT_EVENT,R=>{R.stat===Ip.PROXY?$(Ot,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Ip.NOPROXY&&$(Ot,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.o_()},0),D}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function wI(){return typeof document<"u"?document:null}function pg(t){return new rw(t,!0)}var Gp=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&$("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var BM="PersistentStream",Wp=class{constructor(e,n,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Gp(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return _(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return _(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){return _(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===P.RESOURCE_EXHAUSTED?(ri(n.toString()),ri("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(n)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new L(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>_(this,null,function*(){this.state=0,this.start()}))}G_(e){return $(BM,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():($(BM,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Lw=class extends Wp{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=Dq(this.serializer,e),r=(function(o){if(!("targetChange"in o))return ce.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ce.min():s.readTime?Tr(s.readTime):ce.min()})(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=aw(this.serializer),n.addTarget=(function(o,s){let a,u=s.target;if(a=GI(u)?{documents:Cq(o,u)}:{query:Sq(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=WP(o,s.resumeToken);let l=iw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ce.min())>0){a.readTime=Up(o,s.snapshotVersion.toTimestamp());let l=iw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=Rq(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=aw(this.serializer),n.removeTarget=e,this.k_(n)}},Vw=class extends Wp{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Te(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Te(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=bq(e.writeResults,e.commitTime),r=Tr(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=aw(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Tq(this.serializer,r))};this.k_(n)}};var jw=class{},Uw=class extends jw{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new L(P.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,ow(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(P.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,ow(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(P.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},Bw=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ri(n),this._a=!1):$("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var ls="RemoteStore",$w=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>_(this,null,function*(){hs(this)&&($(ls,"Restarting streams for network reachability change."),yield(function(u){return _(this,null,function*(){let l=se(u);l.Ia.add(4),yield Nl(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield gg(l)})})(this))}))}),this.Aa=new Bw(r,i)}};function gg(t){return _(this,null,function*(){if(hs(t))for(let e of t.da)yield e(!0)})}function Nl(t){return _(this,null,function*(){for(let e of t.da)yield e(!1)})}function rx(t,e){let n=se(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),TD(n)?DD(n):Xa(n).x_()&&wD(n,e))}function ID(t,e){let n=se(t),r=Xa(n);n.Ta.delete(e),r.x_()&&ix(n,e),n.Ta.size===0&&(r.x_()?r.B_():hs(n)&&n.Aa.set("Unknown"))}function wD(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xa(t).H_(e)}function ix(t,e){t.Ra.$e(e),Xa(t).Y_(e)}function DD(t){t.Ra=new nw({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Xa(t).start(),t.Aa.aa()}function TD(t){return hs(t)&&!Xa(t).M_()&&t.Ta.size>0}function hs(t){return se(t).Ia.size===0}function ox(t){t.Ra=void 0}function Gq(t){return _(this,null,function*(){t.Aa.set("Online")})}function Wq(t){return _(this,null,function*(){t.Ta.forEach((e,n)=>{wD(t,e)})})}function Kq(t,e){return _(this,null,function*(){ox(t),TD(t)?(t.Aa.la(e),DD(t)):t.Aa.set("Unknown")})}function Qq(t,e,n){return _(this,null,function*(){if(t.Aa.set("Online"),e instanceof Vp&&e.state===2&&e.cause)try{yield(function(i,o){return _(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(t,e)}catch(r){$(ls,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Kp(t,r)}else if(e instanceof La?t.Ra.Ye(e):e instanceof Lp?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ce.min()))try{let r=yield nx(t.localStore);n.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(Ft.EMPTY_BYTE_STRING,h.snapshotVersion)),ix(o,u);let p=new Il(h.target,u,l,h.sequenceNumber);wD(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(t,n))}catch(r){$(ls,"Failed to raise snapshot:",r),yield Kp(t,r)}})}function Kp(t,e,n){return _(this,null,function*(){if(!Ja(e))throw e;t.Ia.add(1),yield Nl(t),t.Aa.set("Offline"),n||(n=()=>nx(t.localStore)),t.asyncQueue.enqueueRetryable(()=>_(null,null,function*(){$(ls,"Retrying IndexedDB access"),yield n(),t.Ia.delete(1),yield gg(t)}))})}function sx(t,e){return e().catch(n=>Kp(t,n,e))}function mg(t){return _(this,null,function*(){let e=se(t),n=to(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:dD;for(;Yq(e);)try{let i=yield $q(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,Zq(e,i)}catch(i){yield Kp(e,i)}ax(e)&&cx(e)})}function Yq(t){return hs(t)&&t.Pa.length<10}function Zq(t,e){t.Pa.push(e);let n=to(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function ax(t){return hs(t)&&!to(t).M_()&&t.Pa.length>0}function cx(t){to(t).start()}function Jq(t){return _(this,null,function*(){to(t).na()})}function Xq(t){return _(this,null,function*(){let e=to(t);for(let n of t.Pa)e.X_(n.mutations)})}function ez(t,e,n){return _(this,null,function*(){let r=t.Pa.shift(),i=JI.from(r,e,n);yield sx(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield mg(t)})}function tz(t,e){return _(this,null,function*(){e&&to(t).Z_&&(yield(function(r,i){return _(this,null,function*(){if((function(s){return mq(s)&&s!==P.ABORTED})(i.code)){let o=r.Pa.shift();to(r).N_(),yield sx(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield mg(r)}})})(t,e)),ax(t)&&cx(t)})}function $M(t,e){return _(this,null,function*(){let n=se(t);n.asyncQueue.verifyOperationInProgress(),$(ls,"RemoteStore received new credentials");let r=hs(n);n.Ia.add(3),yield Nl(n),r&&n.Aa.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),yield gg(n)})}function nz(t,e){return _(this,null,function*(){let n=se(t);e?(n.Ia.delete(2),yield gg(n)):e||(n.Ia.add(2),yield Nl(n),n.Aa.set("Unknown"))})}function Xa(t){return t.Va||(t.Va=(function(n,r,i){let o=se(n);return o.ia(),new Lw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:Gq.bind(null,t),e_:Wq.bind(null,t),n_:Kq.bind(null,t),J_:Qq.bind(null,t)}),t.da.push(e=>_(null,null,function*(){e?(t.Va.N_(),TD(t)?DD(t):t.Aa.set("Unknown")):(yield t.Va.stop(),ox(t))}))),t.Va}function to(t){return t.ma||(t.ma=(function(n,r,i){let o=se(n);return o.ia(),new Vw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:Jq.bind(null,t),n_:tz.bind(null,t),ea:Xq.bind(null,t),ta:ez.bind(null,t)}),t.da.push(e=>_(null,null,function*(){e?(t.ma.N_(),yield mg(t)):(yield t.ma.stop(),t.Pa.length>0&&($(ls,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}var Hw=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Qn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function bD(t,e){if(ri("AsyncQueue",`${e}: ${t}`),Ja(t))return new L(P.UNAVAILABLE,`${e}: ${t}`);throw t}var Qp=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=ul(),this.sortedSet=new Be(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Yp=class{constructor(){this.fa=new Be(K.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):J(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},Ka=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Qp.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var qw=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},zw=class{constructor(){this.queries=HM(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=se(n),o=i.queries;i.queries=HM(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new L(P.ABORTED,"Firestore shutting down"))}};function HM(){return new si(t=>kP(t),hg)}function CD(t,e){return _(this,null,function*(){let n=se(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new qw,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield n.onListen(i,!0);break;case 1:o.ya=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=bD(s,`Initialization of query '${xa(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&AD(n)})}function SD(t,e){return _(this,null,function*(){let n=se(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function rz(t,e){let n=se(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&AD(n)}function iz(t,e,n){let r=se(t),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(n);r.queries.delete(e)}function AD(t){t.Da.forEach(e=>{e.next()})}var Gw,qM;(qM=Gw||(Gw={})).Fa="default",qM.Cache="cache";var Tl=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ka(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Ka.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Gw.Cache}};var Zp=class{constructor(e){this.key=e}},Jp=class{constructor(e){this.key=e}},Ww=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ge(),this.mutatedKeys=ge(),this.Xa=OP(e),this.eu=new Qp(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new Yp,i=n?n.eu:this.eu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=fg(this.query,p)?p:null,D=!!g&&this.mutatedKeys.has(g.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;g&&y?g.data.isEqual(y.data)?D!==N&&(r.track({type:3,doc:y}),R=!0):this.iu(g,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),R=!0):g&&!y&&(r.track({type:1,doc:g}),R=!0,(u||l)&&(a=!0)),R&&(y?(s=s.add(y),o=N?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>(function(y,D){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J(20277,{At:R})}};return N(y)-N(D)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new Ka(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Yp,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=ge(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new Jp(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new Zp(r))}),n}uu(e){this.Ha=e.qs,this.Za=ge();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Ka.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},RD="SyncEngine",Kw=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Qw=class{constructor(e){this.key=e,this.lu=!1}},Yw=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new si(a=>kP(a),hg),this.Tu=new Map,this.Iu=new Set,this.du=new Be(K.comparator),this.Eu=new Map,this.Au=new Dl,this.Ru={},this.Vu=new Map,this.mu=wl.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function oz(t,e,n=!0){return _(this,null,function*(){let r=px(t),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield ux(r,e,n,!0),i})}function sz(t,e){return _(this,null,function*(){let n=px(t);yield ux(n,e,!0,!1)})}function ux(t,e,n,r){return _(this,null,function*(){let i=yield Hq(t.localStore,Dr(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=yield az(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&rx(t.remoteStore,i),a})}function az(t,e,n,r,i){return _(this,null,function*(){t.gu=(p,g,y)=>(function(N,R,O,Q){return _(this,null,function*(){let te=R.view.nu(O);te.Ds&&(te=yield jM(N.localStore,R.query,!1).then(({documents:T})=>R.view.nu(T,te)));let Ae=Q&&Q.targetChanges.get(R.targetId),Lt=Q&&Q.targetMismatches.get(R.targetId)!=null,be=R.view.applyChanges(te,N.isPrimaryClient,Ae,Lt);return GM(N,R.targetId,be._u),be.snapshot})})(t,p,g,y);let o=yield jM(t.localStore,e,!0),s=new Ww(e,o.qs),a=s.nu(o.documents),u=El.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);GM(t,n,l._u);let h=new Kw(e,n,s);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),l.snapshot})}function cz(t,e,n){return _(this,null,function*(){let r=se(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!hg(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Nw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ID(r.remoteStore,i.targetId),Zw(r,i.targetId)}).catch(Za))):(Zw(r,i.targetId),yield Nw(r.localStore,i.targetId,!0))})}function uz(t,e){return _(this,null,function*(){let n=se(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ID(n.remoteStore,r.targetId))})}function lz(t,e,n){return _(this,null,function*(){let r=yz(t);try{let i=yield(function(s,a){let u=se(s),l=at.now(),h=a.reduce((y,D)=>y.add(D.key),ge()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=ai(),N=ge();return u.Os.getEntries(y,h).next(R=>{D=R,D.forEach((O,Q)=>{Q.isValidDocument()||(N=N.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,D)).next(R=>{p=R;let O=[];for(let Q of a){let te=gq(Q,p.get(Q.key).overlayedDocument);te!=null&&O.push(new Cr(Q.key,te,SP(te.value.mapValue),Sn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,O,a)}).next(R=>{g=R;let O=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(y,R.batchId,O)})}).then(()=>({batchId:g.batchId,changes:LP(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Be(le)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,n),yield Ml(r,i.changes),yield mg(r.remoteStore)}catch(i){let o=bD(i,"Failed to persist write");n.reject(o)}})}function lx(t,e){return _(this,null,function*(){let n=se(t);try{let r=yield Uq(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(Te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Te(s.lu,14607):i.removedDocuments.size>0&&(Te(s.lu,42227),s.lu=!1))}),yield Ml(n,r,e)}catch(r){yield Za(r)}})}function zM(t,e,n){let r=se(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=se(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let g of p.wa)g.va(a)&&(l=!0)}),l&&AD(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function dz(t,e,n){return _(this,null,function*(){let r=se(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Be(K.comparator);s=s.insert(o,Yn.newNoDocument(o,ce.min()));let a=ge().add(o),u=new Fp(ce.min(),new Map,new Be(le),s,a);yield lx(r,u),r.du=r.du.remove(o),r.Eu.delete(e),ND(r)}else yield Nw(r.localStore,e,!1).then(()=>Zw(r,e,n)).catch(Za)})}function hz(t,e){return _(this,null,function*(){let n=se(t),r=e.batch.batchId;try{let i=yield jq(n.localStore,e);hx(n,r,null),dx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Ml(n,i)}catch(i){yield Za(i)}})}function fz(t,e,n){return _(this,null,function*(){let r=se(t);try{let i=yield(function(s,a){let u=se(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Te(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);hx(r,e,n),dx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Ml(r,i)}catch(i){yield Za(i)}})}function dx(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function hx(t,e,n){let r=se(t),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Zw(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||fx(t,r)})}function fx(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(ID(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),ND(t))}function GM(t,e,n){for(let r of n)r instanceof Zp?(t.Au.addReference(r.key,e),pz(t,r)):r instanceof Jp?($(RD,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||fx(t,r.key)):J(19791,{yu:r})}function pz(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||($(RD,"New document in limbo: "+n),t.Iu.add(r),ND(t))}function ND(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new K(Fe.fromString(e)),r=t.mu.next();t.Eu.set(r,new Qw(n)),t.du=t.du.insert(n,r),rx(t.remoteStore,new Il(Dr(dg(n.path)),r,"TargetPurposeLimboResolution",lD.ue))}}function Ml(t,e,n){return _(this,null,function*(){let r=se(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Cw.Es(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(u,l){return _(this,null,function*(){let h=se(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,g=>x.forEach(g.Is,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>x.forEach(g.ds,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!Ja(p))throw p;$(ED,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.Fs.get(g),D=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(D);h.Fs=h.Fs.insert(g,N)}}})})(r.localStore,o))})}function gz(t,e){return _(this,null,function*(){let n=se(t);if(!n.currentUser.isEqual(e)){$(RD,"User change. New user:",e.toKey());let r=yield tx(n.localStore,e);n.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new L(P.CANCELLED,s))})}),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ml(n,r.Bs)}})}function mz(t,e){let n=se(t),r=n.Eu.get(e);if(r&&r.lu)return ge().add(r.key);{let i=ge(),o=n.Tu.get(e);if(!o)return i;for(let s of o){let a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function px(t){let e=se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=lx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dz.bind(null,e),e.hu.J_=rz.bind(null,e.eventManager),e.hu.pu=iz.bind(null,e.eventManager),e}function yz(t){let e=se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fz.bind(null,e),e}var gx=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return _(this,null,function*(){this.serializer=pg(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),yield this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)})}Cu(n,r){return null}Fu(n,r){return null}vu(n){return Vq(this.persistence,new Aw,n.initialUser,this.serializer)}Du(n){return new $p(bw.Vi,this.serializer)}bu(n){return new Mw}terminate(){return _(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),Jw=class extends gx{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Te(this.persistence.referenceDelegate instanceof Hp,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new hw(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new $p(r=>Hp.Vi(r,n),this.serializer)}};var vz=(()=>{class t{initialize(n,r){return _(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>zM(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=gz.bind(null,this.syncEngine),yield nz(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return(function(){return new zw})()}createDatastore(n){let r=pg(n.databaseInfo.databaseId),i=(function(s){return new Fw(s)})(n.databaseInfo);return(function(s,a,u,l){return new Uw(s,a,u,l)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,a,u){return new $w(i,o,s,a,u)})(this.localStore,this.datastore,n.asyncQueue,r=>zM(this.syncEngine,r,0),(function(){return zp.C()?new zp:new Pw})())}createSyncEngine(n,r){return(function(o,s,a,u,l,h,p){let g=new Yw(o,s,a,u,l,h);return p&&(g.fu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var n,r;yield(function(o){return _(this,null,function*(){let s=se(o);$(ls,"RemoteStore shutting down."),s.Ia.add(5),yield Nl(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var bl=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ri("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var no="FirestoreClient",Xw=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=yt.UNAUTHENTICATED,this.clientId=pl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>_(this,null,function*(){$(no,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>($(no,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Qn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=bD(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function DI(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),$(no,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>_(null,null,function*(){r.isEqual(i)||(yield tx(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Ji("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{$("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Ji("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e})}function WM(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield _z(t);$(no,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>$M(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>$M(e.remoteStore,i)),t._onlineComponents=e})}function _z(t){return _(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$(no,"Using user provided OfflineComponentProvider");try{yield DI(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===P.FAILED_PRECONDITION||i.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Ji("Error using user provided cache. Falling back to memory cache: "+n),yield DI(t,new gx)}}else $(no,"Using default OfflineComponentProvider"),yield DI(t,new Jw(void 0));return t._offlineComponents})}function mx(t){return _(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?($(no,"Using user provided OnlineComponentProvider"),yield WM(t,t._uninitializedComponentsProvider._online)):($(no,"Using default OnlineComponentProvider"),yield WM(t,new vz))),t._onlineComponents})}function Ez(t){return mx(t).then(e=>e.syncEngine)}function Xp(t){return _(this,null,function*(){let e=yield mx(t),n=e.eventManager;return n.onListen=oz.bind(null,e.syncEngine),n.onUnlisten=cz.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=sz.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=uz.bind(null,e.syncEngine),n})}function Iz(t,e,n={}){let r=new Qn;return t.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return(function(o,s,a,u,l){let h=new bl({next:g=>{h.Ou(),s.enqueueAndForget(()=>SD(o,p));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new L(P.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?l.reject(new L(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new Tl(dg(a.path),h,{includeMetadataChanges:!0,ka:!0});return CD(o,p)})(yield Xp(t),t.asyncQueue,e,n,r)})),r.promise}function wz(t,e,n={}){let r=new Qn;return t.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return(function(o,s,a,u,l){let h=new bl({next:g=>{h.Ou(),s.enqueueAndForget(()=>SD(o,p)),g.fromCache&&u.source==="server"?l.reject(new L(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new Tl(a,h,{includeMetadataChanges:!0,ka:!0});return CD(o,p)})(yield Xp(t),t.asyncQueue,e,n,r)})),r.promise}function yx(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var KM=new Map;var vx="firestore.googleapis.com",QM=!0,eg=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new L(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vx,this.ssl=QM}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:QM;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ex;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Oq)throw new L(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}x3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new L(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new L(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new L(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Qa=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new L(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new bI;switch(r.type){case"firstParty":return new RI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=KM.get(n);r&&($("ComponentProvider","Removing Datastore"),KM.delete(n),r.terminate())})(this),Promise.resolve()}};function _x(t,e,n,r={}){var i;t=en(t,Qa);let o=Ui(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(zf(`https://${u}`),Gf("Firestore",!0)),s.host!==vx&&s.host!==u&&Ji("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!yr(l,a)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=yt.MOCK_USER;else{h=AR(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new L(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new yt(g)}t._authCredentials=new CI(new Ap(h,p))}}var ro=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},ht=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ki(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Rl(n,t._jsonSchema))return new t(e,r||null,new K(Fe.fromString(n.referencePath)))}};ht._jsonSchemaVersion="firestore/documentReference/1.0",ht._jsonSchema={type:st("string",ht._jsonSchemaVersion),referencePath:st("string")};var Ki=class t extends ro{constructor(e,n,r){super(e,n,dg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ht(this.firestore,null,new K(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Ex(t,e,...n){if(t=Le(t),rP("collection","path",e),t instanceof Qa){let r=Fe.fromString(e,...n);return fM(r),new Ki(t,null,r)}{if(!(t instanceof ht||t instanceof Ki))throw new L(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Fe.fromString(e,...n));return fM(r),new Ki(t.firestore,null,r)}}function MD(t,e,...n){if(t=Le(t),arguments.length===1&&(e=pl.newId()),rP("doc","path",e),t instanceof Qa){let r=Fe.fromString(e,...n);return hM(r),new ht(t,null,new K(r))}{if(!(t instanceof ht||t instanceof Ki))throw new L(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Fe.fromString(e,...n));return hM(r),new ht(t.firestore,t instanceof Ki?t.converter:null,new K(r))}}var YM="AsyncQueue",tg=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Gp(this,"async_queue_retry"),this.oc=()=>{let r=wI();r&&$(YM,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=wI();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=wI();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new Qn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return _(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ja(e))throw e;$(YM,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,ri("INTERNAL UNHANDLED ERROR: ",ZM(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=Hw.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&J(47125,{hc:ZM(this.tc)})}verifyOperationInProgress(){}Pc(){return _(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function ZM(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function JM(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}var Jn=class extends Qa{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new tg,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new tg(e),this._firestoreClient=void 0,yield e}})}};function Ix(t,e){let n=typeof t=="object"?t:Wo(),r=typeof t=="string"?t:e||xp,i=Ta(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=SR("firestore");o&&_x(i,...o)}return i}function Pl(t){if(t._terminated)throw new L(P.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Dz(t),t._firestoreClient}function Dz(t){var e,n,r;let i=t._freezeSettings(),o=(function(a,u,l,h){return new kI(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,yx(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Xw(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}})(t._componentsProvider))}var Qi=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Ft.fromBase64String(e))}catch(n){throw new L(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Rl(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};Qi._jsonSchemaVersion="firestore/bytes/1.0",Qi._jsonSchema={type:st("string",Qi._jsonSchemaVersion),bytes:st("string")};var ds=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new L(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Cl=class{constructor(e){this._methodName=e}};var Yi=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new L(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new L(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(Rl(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};Yi._jsonSchemaVersion="firestore/geoPoint/1.0",Yi._jsonSchema={type:st("string",Yi._jsonSchemaVersion),latitude:st("number"),longitude:st("number")};var Zi=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Rl(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new L(P.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Zi._jsonSchemaVersion="firestore/vectorValue/1.0",Zi._jsonSchema={type:st("string",Zi._jsonSchemaVersion),vectorValues:st("object")};var Tz=/^__.*__$/,eD=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Cr(e,this.data,this.fieldMask,n,this.fieldTransforms):new us(e,this.data,n,this.fieldTransforms)}},ng=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Cr(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function wx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J(40011,{Ec:t})}}var tD=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return ig(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(wx(this.Ec)&&Tz.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},nD=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||pg(e)}Dc(e,n,r,i=!1){return new tD({Ec:e,methodName:n,bc:r,path:pn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function xl(t){let e=t._freezeSettings(),n=pg(t._databaseId);return new nD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function PD(t,e,n,r,i,o={}){let s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);xD("Data must be an object, but it was:",s,r);let a=bx(r,s),u,l;if(o.merge)u=new Cn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=rD(e,p,n);if(!s.contains(g))throw new L(P.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Sx(h,g)||h.push(g)}u=new Cn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new eD(new fn(a),u,l)}var rg=class t extends Cl{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function Dx(t,e,n,r){let i=t.Dc(1,e,n);xD("Data must be an object, but it was:",i,r);let o=[],s=fn.empty();io(r,(u,l)=>{let h=kD(e,u,n);l=Le(l);let p=i.gc(h);if(l instanceof rg)o.push(h);else{let g=kl(l,p);g!=null&&(o.push(h),s.set(h,g))}});let a=new Cn(o);return new ng(s,a,i.fieldTransforms)}function Tx(t,e,n,r,i,o){let s=t.Dc(1,e,n),a=[rD(e,r,n)],u=[i];if(o.length%2!=0)throw new L(P.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(rD(e,o[g])),u.push(o[g+1]);let l=[],h=fn.empty();for(let g=a.length-1;g>=0;--g)if(!Sx(l,a[g])){let y=a[g],D=u[g];D=Le(D);let N=s.gc(y);if(D instanceof rg)l.push(y);else{let R=kl(D,N);R!=null&&(l.push(y),h.set(y,R))}}let p=new Cn(l);return new ng(h,p,s.fieldTransforms)}function bz(t,e,n,r=!1){return kl(n,t.Dc(r?4:3,e))}function kl(t,e){if(Cx(t=Le(t)))return xD("Unsupported field value:",e,t),bx(t,e);if(t instanceof Cl)return(function(r,i){if(!wx(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=kl(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=Le(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return lq(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=at.fromDate(r);return{timestampValue:Up(i.serializer,o)}}if(r instanceof at){let o=new at(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Up(i.serializer,o)}}if(r instanceof Yi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qi)return{bytesValue:WP(i.serializer,r._byteString)};if(r instanceof ht){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:_D(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Zi)return(function(s,a){return{mapValue:{fields:{[fD]:{stringValue:pD},[Ua]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return vD(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${cg(r)}`)})(t,e)}function bx(t,e){let n={};return _P(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):io(t,(r,i)=>{let o=kl(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function Cx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof at||t instanceof Yi||t instanceof Qi||t instanceof ht||t instanceof Cl||t instanceof Zi)}function xD(t,e,n){if(!Cx(n)||!iP(n)){let r=cg(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function rD(t,e,n){if((e=Le(e))instanceof ds)return e._internalPath;if(typeof e=="string")return kD(t,e);throw ig("Field path arguments must be of type string or ",t,!1,void 0,n)}var Cz=new RegExp("[~\\*/\\[\\]]");function kD(t,e,n){if(e.search(Cz)>=0)throw ig(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ds(...e.split("."))._internalPath}catch{throw ig(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ig(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new L(P.INVALID_ARGUMENT,a+t+u)}function Sx(t,e){return t.some(n=>n.isEqual(e))}var og=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new iD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(yg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},iD=class extends og{data(){return super.data()}};function yg(t,e){return typeof e=="string"?kD(t,e):e instanceof ds?e._internalPath:e._delegate._internalPath}function Ax(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new L(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Sl=class{},sg=class extends Sl{};function Rx(t,e,...n){let r=[];e instanceof Sl&&r.push(e),r=r.concat(n),(function(o){let s=o.filter(u=>u instanceof oD).length,a=o.filter(u=>u instanceof ag).length;if(s>1||s>0&&a>0)throw new L(P.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)t=i._apply(t);return t}var ag=class t extends sg{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return Px(e._query,n),new ro(e.firestore,e.converter,WI(e._query,n))}_parse(e){let n=xl(e.firestore);return(function(o,s,a,u,l,h,p){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new L(P.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){eP(p,h);let D=[];for(let N of p)D.push(XM(u,o,N));g={arrayValue:{values:D}}}else g=XM(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||eP(p,h),g=bz(a,s,p,h==="in"||h==="not-in");return ot.create(l,h,g)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function Nx(t,e,n){let r=e,i=yg("where",t);return ag._create(i,r,n)}var oD=class t extends Sl{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Zn.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)Px(s,u),s=WI(s,u)})(e._query,n),new ro(e.firestore,e.converter,WI(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var sD=class t extends sg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=(function(i,o,s){if(i.startAt!==null)throw new L(P.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new L(P.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ss(o,s)})(e._query,this._field,this._direction);return new ro(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new eo(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}};function Mx(t,e="asc"){let n=e,r=yg("orderBy",t);return sD._create(r,n)}function XM(t,e,n){if(typeof(n=Le(n))=="string"){if(n==="")throw new L(P.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xP(e)&&n.indexOf("/")!==-1)throw new L(P.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Fe.fromString(n));if(!K.isDocumentKey(r))throw new L(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return EM(t,new K(r))}if(n instanceof ht)return EM(t,n._key);throw new L(P.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cg(n)}.`)}function eP(t,e){if(!Array.isArray(t)||t.length===0)throw new L(P.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Px(t,e){let n=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new L(P.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new L(P.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var aD=class{convertValue(e,n="none"){switch(Xi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(oi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw J(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return io(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Ua].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Oe(s.doubleValue));return new Zi(o)}convertGeoPoint(e){return new Yi(Oe(e.latitude),Oe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=lg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(yl(e));default:return null}}convertTimestamp(e){let n=ii(e);return new at(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Fe.fromString(e);Te(XP(r),9688,{name:e});let i=new kp(r.get(1),r.get(3)),o=new K(r.popFirst(5));return i.isEqual(n)||ri(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function OD(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var ts=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ns=class t extends og{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Va(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(yg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new L(P.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};ns._jsonSchemaVersion="firestore/documentSnapshot/1.0",ns._jsonSchema={type:st("string",ns._jsonSchemaVersion),bundleSource:st("string","DocumentSnapshot"),bundleName:st("string"),bundle:st("string")};var Va=class extends ns{data(e={}){return super.data(e)}},rs=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ts(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Va(this._firestore,this._userDataWriter,r.key,r,new ts(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new L(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Va(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ts(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Va(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ts(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:Sz(a.type),doc:u,oldIndex:l,newIndex:h}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new L(P.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=pl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Sz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J(61501,{type:t})}}function xx(t){t=en(t,ht);let e=en(t.firestore,Jn);return Iz(Pl(e),t._key).then(n=>Lx(e,t,n))}rs._jsonSchemaVersion="firestore/querySnapshot/1.0",rs._jsonSchema={type:st("string",rs._jsonSchemaVersion),bundleSource:st("string","QuerySnapshot"),bundleName:st("string"),bundle:st("string")};var Al=class extends aD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qi(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new ht(this.firestore,null,n)}};function kx(t){t=en(t,ro);let e=en(t.firestore,Jn),n=Pl(e),r=new Al(e);return Ax(t._query),wz(n,t._query).then(i=>new rs(e,r,t,i))}function Ox(t,e,n){t=en(t,ht);let r=en(t.firestore,Jn),i=OD(t.converter,e,n);return vg(r,[PD(xl(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Sn.none())])}function Fx(t,e,n,...r){t=en(t,ht);let i=en(t.firestore,Jn),o=xl(i),s;return s=typeof(e=Le(e))=="string"||e instanceof ds?Tx(o,"updateDoc",t._key,e,n,r):Dx(o,"updateDoc",t._key,e),vg(i,[s.toMutation(t._key,Sn.exists(!0))])}function FD(t,e){let n=en(t.firestore,Jn),r=MD(t),i=OD(t.converter,e);return vg(n,[PD(xl(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Sn.exists(!1))]).then(()=>r)}function LD(t,...e){var n,r,i;t=Le(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||JM(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(JM(e[s])){let p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof ht)l=en(t.firestore,Jn),h=dg(t._key.path),u={next:p=>{e[s]&&e[s](Lx(l,t,p))},error:e[s+1],complete:e[s+2]};else{let p=en(t,ro);l=en(p.firestore,Jn),h=p._query;let g=new Al(l);u={next:y=>{e[s]&&e[s](new rs(l,g,p,y))},error:e[s+1],complete:e[s+2]},Ax(t._query)}return(function(g,y,D,N){let R=new bl(N),O=new Tl(y,R,D);return g.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return CD(yield Xp(g),O)})),()=>{R.Ou(),g.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return SD(yield Xp(g),O)}))}})(Pl(l),h,a,u)}function vg(t,e){return(function(r,i){let o=new Qn;return r.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return lz(yield Ez(r),i,o)})),o.promise})(Pl(t),e)}function Lx(t,e,n){let r=n.docs.get(e._key),i=new Al(t);return new ns(t,i,e._key,r,new ts(n.hasPendingWrites,n.fromCache),e.converter)}var cD=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=xl(e)}set(e,n,r){this._verifyNotCommitted();let i=TI(e,this._firestore),o=OD(i.converter,n,r),s=PD(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Sn.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=TI(e,this._firestore),s;return s=typeof(n=Le(n))=="string"||n instanceof ds?Tx(this._dataReader,"WriteBatch.update",o._key,n,r,i):Dx(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Sn.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=TI(e,this._firestore);return this._mutations=this._mutations.concat(new _l(n._key,Sn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new L(P.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function TI(t,e){if((t=Le(t)).firestore!==e)throw new L(P.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Vx(t){return Pl(t=en(t,Jn)),new cD(t,e=>vg(t,e))}(function(e,n=!0){(function(i){Ya=i})($i),zn(new Gt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Jn(new SI(r.getProvider("auth-internal")),new NI(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new L(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kp(l.options.projectId,h)})(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ue(cM,uM,e),Ue(cM,uM,"esm2017")})();var _g=function(){return _g=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_g.apply(this,arguments)};var Nz={includeMetadataChanges:!1};function jx(t,e){return e===void 0&&(e=Nz),new Y(function(n){var r=LD(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function Ux(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:_g(_g({},r),(n={},n[e.idField]=t.id,n))}function Bx(t){return jx(t,{includeMetadataChanges:!0}).pipe(G(function(e){return e.docs}))}function $x(t,e){return e===void 0&&(e={}),Bx(t).pipe(G(function(n){return n.map(function(r){return Ux(r,e)})}))}var Xn=class{constructor(e){return e}},Hx="firestore",VD=class{constructor(){return Ca(Hx)}};var jD=new U("angularfire2.firestore-instances");function Mz(t,e){let n=Yu(Hx,t,e);return n&&new Xn(n)}function Pz(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Xn(r)}}var xz={provide:VD,deps:[[new an,jD]]},kz={provide:Xn,useFactory:Mz,deps:[[new an,jD],Zr]};function qx(t,...e){return Ue("angularfire",Hi.full,"fst"),Mt([kz,xz,{provide:jD,useFactory:Pz(t),multi:!0,deps:[Ee,ke,qi,Qo,[new an,al],[new an,Sa],...e]}])}var zx=Ke($x,!0);var ec=Ke(Ex,!0,2);var ci=Ke(MD,!0,2);var Ol=Ke(xx,!0);var Gx=Ke(kx,!0);var Wx=Ke(Ix,!0);var Kx=Ke(Mx,!0,2),Qx=Ke(Rx,!0,2);var UD=Ke(Ox,!0,2);var BD=Ke(Fx,!0,2);var Yx=Ke(Nx,!0,2),Zx=Ke(Vx,!0,2);var oo=class t{constructor(e){this.firestore=e}thingConverter={fromFirestore:e=>{let n=e.data(),r=n?.createdAt,i=r&&r.toDate?r.toDate():r??null;return{id:e.id,name:n?.name??"",description:n?.description??"",location:n?.location??null,photoURL:n?.photoURL??null,createdAt:i,owner:n?.owner??null,status:n?.status??null,metadata:n?.metadata??null}},toFirestore:e=>({name:e.name,description:e.description,location:e.location,photoURL:e.photoURL,createdAt:e.createdAt,owner:e.owner,status:e.status,metadata:e.metadata})};getThings(){let e=ec(this.firestore,"Things"),n=Qx(e,Yx("status","==","ON"),Kx("createdAt","desc")).withConverter(this.thingConverter);return zx(n).pipe(Bt(r=>Nn(()=>r)))}getThingById(e){let n=ci(this.firestore,"Things",e).withConverter(this.thingConverter);return pe(Ol(n)).pipe(G(r=>r.exists()?r.data():null),Bt(r=>Nn(()=>r)))}getUserById(e){let n=ci(this.firestore,"Users",e);return pe(Ol(n)).pipe(G(r=>r.exists()?r.data():null),Bt(r=>Nn(()=>r)))}updateThingStatus(e,n){let r=ci(this.firestore,"Things",e);return pe(BD(r,{status:n})).pipe(Bt(i=>Nn(()=>i)))}saveThing(e,n,r){let i=ec(this.firestore,"Things");if(e){let o=ci(i,e);return pe(BD(o,n)).pipe(G(()=>e))}else{let o=re(k({},n),{owner:r,status:"ON",createdAt:new Date().toISOString(),metadata:[]});return pe(FD(i,o)).pipe(G(s=>s.id))}}static \u0275fac=function(n){return new(n||t)(z(Xn))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};var Oz=t=>["/view",t],Fz=(t,e)=>e.id;function Lz(t,e){if(t&1&&(B(0,"div",2)(1,"div",4),ye(2,"img",5),B(3,"div",6)(4,"h5",7),q(5),j(),B(6,"p",8),q(7),j(),B(8,"a",9),q(9," Ver Detalhes "),ye(10,"i",10),j()()()()),t&2){let n=e.$implicit;oe(2),Tt("src",n.photoURL,Fn)("alt",n.name),oe(3),qt(n.name),oe(2),qt(n.description),oe(),Tt("routerLink",lu(5,Oz,n.id))}}function Vz(t,e){t&1&&(B(0,"div",3)(1,"div",11),q(2,"Nenhum item em destaque."),j(),B(3,"p"),q(4,"Voc\xEA pode criar itens de teste acessando a rota "),B(5,"a",12),q(6,"/seed-data"),j(),q(7,"."),j()())}function jz(t,e){t&1&&Wv(0,Lz,11,7,"div",2,Fz,!1,Vz,8,0,"div",3),t&2&&Kv(e)}var Eg=class t{constructor(e){this.dataService=e}things$;ngOnInit(){this.things$=this.dataService.getThings()}static \u0275fac=function(n){return new(n||t)(W(oo))};static \u0275cmp=Dt({type:t,selectors:[["app-home"]],decls:5,vars:3,consts:[[1,"mb-4","text-center"],[1,"row"],[1,"col-12","col-sm-6","col-md-4","mb-4"],[1,"col-12","text-center","mt-5"],[1,"card","shadow-sm","h-100"],[1,"card-img-top",2,"height","200px","object-fit","cover",3,"src","alt"],[1,"card-body","d-flex","flex-column"],[1,"card-title","text-primary"],[1,"card-text","text-muted","small","mt-auto"],[1,"btn","btn-sm","btn-outline-secondary",3,"routerLink"],[1,"bi","bi-arrow-right-circle"],[1,"alert","alert-warning"],["href","/seed-data"]],template:function(n,r){if(n&1&&(B(0,"h2",0),q(1,"Coisas em Destaque"),j(),B(2,"div",1),Xe(3,jz,3,1),Pi(4,"async"),j()),n&2){let i;oe(3),et((i=sa(4,1,r.things$))?3:-1,i)}},dependencies:[Dn,ji,Eu],encapsulation:2})};var Ig=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Dt({type:t,selectors:[["app-contacts"]],decls:2,vars:0,template:function(n,r){n&1&&(ia(0,"p"),q(1,"contacts works!"),oa())},encapsulation:2})};var wg=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Dt({type:t,selectors:[["app-about"]],decls:2,vars:0,template:function(n,r){n&1&&(ia(0,"p"),q(1,"about works!"),oa())},encapsulation:2})};var Uz=(t,e,n)=>({"alert-success":t,"alert-info":e,"alert-danger":n});function Bz(t,e){t&1&&(B(0,"div",3)(1,"span",5),q(2,"Loading..."),j()())}function $z(t,e){if(t&1&&(B(0,"div",4),q(1),j()),t&2){let n=Yt();Tt("ngClass",Qv(2,Uz,n.feedbackMessage.includes("sucesso"),n.feedbackMessage.includes("j\xE1 existe"),n.feedbackMessage.includes("erro"))),oe(),Gr(" ",n.feedbackMessage," ")}}var Dg=class t{constructor(e){this.firestore=e;this.checkAndSeedData()}feedbackMessage=null;isLoading=!0;owners=["4j2oIn4DlqbS91MDgHr5l0HRwTf2","t3CQISBwVWP0CAFrNMnVfFSXRaK2"];checkAndSeedData(){return _(this,null,function*(){try{let e=ec(this.firestore,"Things");(yield Gx(e)).empty?(yield this.seedData(),this.feedbackMessage='Cole\xE7\xE3o "Things" criada e populada com 15 itens!'):this.feedbackMessage='A cole\xE7\xE3o "Things" j\xE1 existe. Nenhuma a\xE7\xE3o foi necess\xE1ria.'}catch(e){console.error("Erro ao verificar ou criar dados:",e),this.feedbackMessage="Ocorreu um erro ao processar a solicita\xE7\xE3o."}finally{this.isLoading=!1}})}seedData(){return _(this,null,function*(){let e=Zx(this.firestore),n=ec(this.firestore,"Things");for(let r=1;r<=15;r++){let i=this.getRandomDate(),o=this.owners[Math.floor(Math.random()*this.owners.length)],s={name:`Coisa N\xBA ${r}`,description:`Descri\xE7\xE3o completa e sem embara\xE7os da coisa n\xFAmero ${r}.`,location:`Localiza\xE7\xE3o secreta e bem escondida da coisa ${r}`,photoURL:`https://picsum.photos/400/300?random=${r}`,createdAt:i,owner:o,status:"ON",metadata:{}},a=ci(n);e.set(a,s)}yield e.commit()})}getRandomDate(){let e=new Date,n=new Date;n.setMonth(e.getMonth()-6);let r=n.getTime()+Math.random()*(e.getTime()-n.getTime());return new Date(r).toISOString()}static \u0275fac=function(n){return new(n||t)(W(Xn))};static \u0275cmp=Dt({type:t,selectors:[["app-seed-data"]],decls:7,vars:2,consts:[[1,"container","mt-5"],[1,"row","justify-content-center"],[1,"col-md-8","text-center"],["role","status",1,"spinner-border","text-primary","mt-4"],[1,"alert","mt-4",3,"ngClass"],[1,"visually-hidden"]],template:function(n,r){n&1&&(B(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),q(4,"Popula\xE7\xE3o de Dados"),j(),Xe(5,Bz,3,0,"div",3),Xe(6,$z,2,6,"div",4),j()()()),n&2&&(oe(5),et(r.isLoading?5:-1),oe(),et(r.feedbackMessage?6:-1))},dependencies:[Dn,h_],encapsulation:2})};var Hz=t=>["/edit",t];function qz(t,e){if(t&1){let n=Mi();B(0,"div",8)(1,"div",9)(2,"a",10),q(3," Editar "),ye(4,"i",11),j(),B(5,"button",12),bt("click",function(){jr(n);let i=Yt(2);return Ur(i.onDeleteThing())}),q(6," Apagar "),ye(7,"i",13),j()()()}if(t&2){let n=Yt(2);oe(2),Tt("routerLink",lu(1,Hz,n.thing.id))}}function zz(t,e){if(t&1&&(B(0,"div",0)(1,"div",1)(2,"div",2),ye(3,"img",3),j()(),B(4,"div",1)(5,"div",2)(6,"div",4)(7,"h1",5),q(8),j(),B(9,"p",6),q(10),j(),ye(11,"hr"),B(12,"h5",7),q(13,"Descri\xE7\xE3o"),j(),B(14,"p"),q(15),j(),B(16,"h5",7),q(17,"Localiza\xE7\xE3o"),j(),B(18,"p"),q(19),j(),B(20,"h5",7),q(21,"Propriet\xE1rio"),j(),B(22,"p"),q(23),j(),B(24,"h5",7),q(25,"Criado em"),j(),B(26,"p"),q(27),Pi(28,"date"),j()()()()(),Xe(29,qz,8,3,"div",8)),t&2){let n=Yt();oe(3),Tt("src",n.thing.photoURL,Fn)("alt",n.thing.name),oe(5),qt(n.thing.name),oe(2),Gr("ID: ",n.thing.id),oe(5),qt(n.thing.description),oe(4),qt(n.thing.location),oe(4),qt(n.ownerDisplayName),oe(4),qt(Zv(28,9,n.thing.createdAt,"dd/MM/yyyy HH:mm")),oe(2),et(n.isOwner?29:-1)}}var Tg=class t{constructor(e,n,r,i,o){this.route=e;this.router=n;this.dataService=r;this.auth=i;this.titleService=o}thing=null;ownerDisplayName="Carregando...";currentUser=null;isOwner=!1;siteName="NgCRUD";ngOnInit(){let e=this.route.snapshot.paramMap.get("id");if(!e){this.router.navigate(["/home"]);return}Na(this.auth).subscribe(n=>{this.currentUser=n}),this.dataService.getThingById(e).subscribe(n=>{if(this.thing=n,!this.thing||this.thing.status!=="ON"){this.router.navigate(["/home"]);return}this.titleService.setTitle(`${this.siteName} - ${this.thing.name}`),this.currentUser&&this.thing.owner===this.currentUser.uid&&(this.isOwner=!0),this.dataService.getUserById(this.thing.owner).subscribe(r=>{r?this.ownerDisplayName=r.displayName:this.ownerDisplayName="Usu\xE1rio n\xE3o encontrado"})})}onDeleteThing(){confirm("Tem certeza que deseja apagar este item?")&&this.thing&&this.isOwner&&this.dataService.updateThingStatus(this.thing.id,"OFF").subscribe({next:()=>{console.log("Item apagado com sucesso."),this.router.navigate(["/home"])},error:e=>{console.error("Erro ao apagar o item:",e),alert("Erro ao apagar o item. Tente novamente.")}})}static \u0275fac=function(n){return new(n||t)(W(Jt),W(Xt),W(oo),W(Kn),W(ua))};static \u0275cmp=Dt({type:t,selectors:[["app-view"]],decls:1,vars:1,consts:[[1,"row"],[1,"col-md-6","mb-4"],[1,"card","shadow-sm","h-100"],[1,"card-img-top",3,"src","alt"],[1,"card-body"],[1,"card-title","text-primary"],[1,"card-text","text-muted"],[1,"mt-4"],[1,"row","mt-4"],[1,"col-12","text-center"],[1,"btn","btn-warning","me-2",3,"routerLink"],[1,"bi","bi-pencil-square"],[1,"btn","btn-danger",3,"click"],[1,"bi","bi-trash-fill"]],template:function(n,r){n&1&&Xe(0,zz,30,12),n&2&&et(r.thing?0:-1)},dependencies:[Dn,ji,f_],encapsulation:2})};var sk=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(W(Hr),W(lr))};static \u0275dir=xt({type:t})}return t})(),Gz=(()=>{class t extends sk{static \u0275fac=(()=>{let n;return function(i){return(n||(n=ea(t)))(i||t)}})();static \u0275dir=xt({type:t,features:[qr]})}return t})(),ak=new U("");var Wz={provide:ak,useExisting:Ti(()=>kg),multi:!0};function Kz(){let t=In()?In().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var Qz=new U(""),kg=(()=>{class t extends sk{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!Kz())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(W(Hr),W(lr),W(Qz,8))};static \u0275dir=xt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&bt("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[uu([Wz]),qr]})}return t})();function QD(t){return t==null||YD(t)===0}function YD(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var ck=new U(""),uk=new U(""),Yz=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ui=class{static min(e){return Zz(e)}static max(e){return Jz(e)}static required(e){return Xz(e)}static requiredTrue(e){return e6(e)}static email(e){return t6(e)}static minLength(e){return n6(e)}static maxLength(e){return r6(e)}static pattern(e){return i6(e)}static nullValidator(e){return lk()}static compose(e){return mk(e)}static composeAsync(e){return vk(e)}};function Zz(t){return e=>{if(e.value==null||t==null)return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function Jz(t){return e=>{if(e.value==null||t==null)return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function Xz(t){return QD(t.value)?{required:!0}:null}function e6(t){return t.value===!0?null:{required:!0}}function t6(t){return QD(t.value)||Yz.test(t.value)?null:{email:!0}}function n6(t){return e=>{let n=e.value?.length??YD(e.value);return n===null||n===0?null:n<t?{minlength:{requiredLength:t,actualLength:n}}:null}}function r6(t){return e=>{let n=e.value?.length??YD(e.value);return n!==null&&n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}function i6(t){if(!t)return lk;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(QD(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function lk(t){return null}function dk(t){return t!=null}function hk(t){return zr(t)?pe(t):t}function fk(t){let e={};return t.forEach(n=>{e=n!=null?k(k({},e),n):e}),Object.keys(e).length===0?null:e}function pk(t,e){return e.map(n=>n(t))}function o6(t){return!t.validate}function gk(t){return t.map(e=>o6(e)?e:n=>e.validate(n))}function mk(t){if(!t)return null;let e=t.filter(dk);return e.length==0?null:function(n){return fk(pk(n,e))}}function yk(t){return t!=null?mk(gk(t)):null}function vk(t){if(!t)return null;let e=t.filter(dk);return e.length==0?null:function(n){let r=pk(n,e).map(hk);return Rm(r).pipe(G(fk))}}function _k(t){return t!=null?vk(gk(t)):null}function Jx(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Ek(t){return t._rawValidators}function Ik(t){return t._rawAsyncValidators}function qD(t){return t?Array.isArray(t)?t:[t]:[]}function Sg(t,e){return Array.isArray(t)?t.includes(e):t===e}function Xx(t,e){let n=qD(e);return qD(t).forEach(i=>{Sg(n,i)||n.push(i)}),n}function ek(t,e){return qD(e).filter(n=>!Sg(t,n))}var Ag=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=yk(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=_k(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},rc=class extends Ag{name;get formDirective(){return null}get path(){return null}},Ul=class extends Ag{_parent=null;name=null;valueAccessor=null},Rg=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},s6={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Wue=re(k({},s6),{"[class.ng-submitted]":"isSubmitted"}),wk=(()=>{class t extends Rg{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(W(Ul,2))};static \u0275dir=xt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&hr("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[qr]})}return t})(),Dk=(()=>{class t extends Rg{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(W(rc,10))};static \u0275dir=xt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&hr("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[qr]})}return t})();var Fl="VALID",bg="INVALID",tc="PENDING",Ll="DISABLED",so=class{},Ng=class extends so{value;source;constructor(e,n){super(),this.value=e,this.source=n}},Vl=class extends so{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},jl=class extends so{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},nc=class extends so{status;source;constructor(e,n){super(),this.status=e,this.source=n}},zD=class extends so{source;constructor(e){super(),this.source=e}},GD=class extends so{source;constructor(e){super(),this.source=e}};function ZD(t){return(Og(t)?t.validators:t)||null}function a6(t){return Array.isArray(t)?yk(t):t||null}function JD(t,e){return(Og(e)?e.asyncValidators:t)||null}function c6(t){return Array.isArray(t)?_k(t):t||null}function Og(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function Tk(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new V(1e3,"");if(!r[n])throw new V(1001,"")}function bk(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new V(1002,"")})}var ic=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return tt(this.statusReactive)}set status(e){tt(()=>this.statusReactive.set(e))}_status=aa(()=>this.statusReactive());statusReactive=En(void 0);get valid(){return this.status===Fl}get invalid(){return this.status===bg}get pending(){return this.status==tc}get disabled(){return this.status===Ll}get enabled(){return this.status!==Ll}errors;get pristine(){return tt(this.pristineReactive)}set pristine(e){tt(()=>this.pristineReactive.set(e))}_pristine=aa(()=>this.pristineReactive());pristineReactive=En(!0);get dirty(){return!this.pristine}get touched(){return tt(this.touchedReactive)}set touched(e){tt(()=>this.touchedReactive.set(e))}_touched=aa(()=>this.touchedReactive());touchedReactive=En(!1);get untouched(){return!this.touched}_events=new Pe;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Xx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Xx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ek(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ek(e,this._rawAsyncValidators))}hasValidator(e){return Sg(this._rawValidators,e)}hasAsyncValidator(e){return Sg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(re(k({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new jl(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new jl(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(re(k({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Vl(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Vl(!0,r))}markAsPending(e={}){this.status=tc;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new nc(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(re(k({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ll,this.errors=null,this._forEachChild(i=>{i.disable(re(k({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ng(this.value,r)),this._events.next(new nc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(re(k({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Fl,this._forEachChild(r=>{r.enable(re(k({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(re(k({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Fl||this.status===tc)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ng(this.value,n)),this._events.next(new nc(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(re(k({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ll:Fl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=tc,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=hk(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new nc(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Je,this.statusChanges=new Je}_calculateStatus(){return this._allControlsDisabled()?Ll:this.errors?bg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(tc)?tc:this._anyControlsHaveStatus(bg)?bg:Fl}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Vl(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new jl(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Og(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=a6(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=c6(this._rawAsyncValidators)}},Mg=class extends ic{constructor(e,n,r){super(ZD(n),JD(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){bk(this,!0,e),Object.keys(e).forEach(r=>{Tk(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var WD=class extends Mg{};var Ck=new U("",{providedIn:"root",factory:()=>XD}),XD="always";function u6(t,e){return[...e.path,t]}function tk(t,e,n=XD){eT(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),d6(t,e),f6(t,e),h6(t,e),l6(t,e)}function nk(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),xg(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Pg(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function l6(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function eT(t,e){let n=Ek(t);e.validator!==null?t.setValidators(Jx(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=Ik(t);e.asyncValidator!==null?t.setAsyncValidators(Jx(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Pg(e._rawValidators,i),Pg(e._rawAsyncValidators,i)}function xg(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=Ek(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let i=Ik(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}let r=()=>{};return Pg(e._rawValidators,r),Pg(e._rawAsyncValidators,r),n}function d6(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&Sk(t,e)})}function h6(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&Sk(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function Sk(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function f6(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function p6(t,e){t==null,eT(t,e)}function g6(t,e){return xg(t,e)}function m6(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function y6(t){return Object.getPrototypeOf(t.constructor)===Gz}function v6(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function _6(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===kg?n=o:y6(o)?r=o:i=o}),i||r||n||null}function E6(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function rk(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function ik(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Cg=class extends ic{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(ZD(n),JD(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Og(n)&&(n.nonNullable||n.initialValueIsDefault)&&(ik(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){rk(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){rk(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){ik(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var I6=t=>t instanceof Cg;var Ak=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=xt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})();var Rk=new U("");var w6={provide:rc,useExisting:Ti(()=>tT)},tT=(()=>{class t extends rc{callSetDisabledState;get submitted(){return tt(this._submittedReactive)}set submitted(n){this._submittedReactive.set(n)}_submitted=aa(()=>this._submittedReactive());_submittedReactive=En(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Je;constructor(n,r,i){super(),this.callSetDisabledState=i,this._setValidators(n),this._setAsyncValidators(r)}ngOnChanges(n){n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(xg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){let r=this.form.get(n.path);return tk(r,n,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),r}getControl(n){return this.form.get(n.path)}removeControl(n){nk(n.control||null,n,!1),E6(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,r){this.form.get(n.path).setValue(r)}onSubmit(n){return this._submittedReactive.set(!0),v6(this.form,this.directives),this.ngSubmit.emit(n),this.form._events.next(new zD(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0,r={}){this.form.reset(n,r),this._submittedReactive.set(!1),r?.emitEvent!==!1&&this.form._events.next(new GD(this.form))}_updateDomValue(){this.directives.forEach(n=>{let r=n.control,i=this.form.get(n.path);r!==i&&(nk(r||null,n),I6(i)&&(tk(i,n,this.callSetDisabledState),n.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){let r=this.form.get(n.path);p6(r,n),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){let r=this.form.get(n.path);r&&g6(r,n)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){eT(this.form,this),this._oldForm&&xg(this._oldForm,this)}static \u0275fac=function(r){return new(r||t)(W(ck,10),W(uk,10),W(Ck,8))};static \u0275dir=xt({type:t,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&bt("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[uu([w6]),qr,$r]})}return t})();var D6={provide:Ul,useExisting:Ti(()=>nT)},nT=(()=>{class t extends Ul{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(n){}model;update=new Je;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(n,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=_6(this,o)}ngOnChanges(n){this._added||this._setUpControl(),m6(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return u6(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||t)(W(rc,13),W(ck,10),W(uk,10),W(ak,10),W(Rk,8))};static \u0275dir=xt({type:t,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[uu([D6]),qr,$r]})}return t})();var T6=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Vn({type:t});static \u0275inj=gn({})}return t})(),KD=class extends ic{constructor(e,n,r){super(ZD(n),JD(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){Array.isArray(e)?e.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){bk(this,!1,e),e.forEach((r,i)=>{Tk(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>r._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function ok(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var Nk=(()=>{class t{useNonNullable=!1;get nonNullable(){let n=new t;return n.useNonNullable=!0,n}group(n,r=null){let i=this._reduceControls(n),o={};return ok(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Mg(i,o)}record(n,r=null){let i=this._reduceControls(n);return new WD(i,r)}control(n,r,i){let o={};return this.useNonNullable?(ok(r)?o=r:(o.validators=r,o.asyncValidators=i),new Cg(n,re(k({},o),{nonNullable:!0}))):new Cg(n,r,i)}array(n,r,i){let o=n.map(s=>this._createControl(s));return new KD(o,r,i)}_reduceControls(n){let r={};return Object.keys(n).forEach(i=>{r[i]=this._createControl(n[i])}),r}_createControl(n){if(n instanceof Cg)return n;if(n instanceof ic)return n;if(Array.isArray(n)){let r=n[0],i=n.length>1?n[1]:null,o=n.length>2?n[2]:null;return this.control(r,i,o)}else return this.control(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Mk=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Rk,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:Ck,useValue:n.callSetDisabledState??XD}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Vn({type:t});static \u0275inj=gn({imports:[T6]})}return t})();function C6(t,e){t&1&&(B(0,"div",9),q(1,"O nome \xE9 obrigat\xF3rio."),j())}function S6(t,e){t&1&&(B(0,"div",9),q(1,"O nome deve ter pelo menos 3 caracteres."),j())}function A6(t,e){t&1&&(B(0,"div",9),q(1,"A descri\xE7\xE3o \xE9 obrigat\xF3ria."),j())}function R6(t,e){t&1&&(B(0,"div",9),q(1,"A localiza\xE7\xE3o \xE9 obrigat\xF3ria."),j())}function N6(t,e){t&1&&(B(0,"div",9),q(1,"A URL da foto \xE9 obrigat\xF3ria."),j())}function M6(t,e){t&1&&(B(0,"div",9),q(1,"Insira um URL v\xE1lido (come\xE7ando com http:// ou https://)."),j())}function P6(t,e){if(t&1&&(B(0,"div",16),ye(1,"img",22),j()),t&2){let n,r=Yt();oe(),Tt("src",(n=r.thingForm.get("photoURL"))==null?null:n.value,Fn)}}var Bl=class t{constructor(e,n,r,i,o,s){this.fb=e;this.route=n;this.router=r;this.dataService=i;this.titleService=o;this.auth=s;this.initForm()}thingForm;isEditMode=!1;thingId=null;currentUser=null;formTitle="Cadastrar Nova Coisa";ngOnInit(){Na(this.auth).pipe(ct(1)).subscribe(e=>{this.currentUser=e}),this.thingId=this.route.snapshot.paramMap.get("id"),this.isEditMode=!!this.thingId,this.isEditMode&&this.thingId?(this.loadThingData(this.thingId),this.formTitle="Editar Coisa",this.titleService.setTitle("Editar Item | NGCRUD")):this.titleService.setTitle("Novo Item | NGCRUD")}initForm(){this.thingForm=this.fb.group({name:["",[ui.required,ui.minLength(3)]],description:["",[ui.required]],location:["",[ui.required]],photoURL:["",[ui.required,ui.pattern("https?://.+")]]})}loadThingData(e){this.dataService.getThingById(e).pipe(ct(1)).subscribe(n=>{if(n){if(this.currentUser&&n.owner!==this.currentUser.uid){alert("Voc\xEA n\xE3o tem permiss\xE3o para editar este item."),this.router.navigate(["/home"]);return}this.thingForm.patchValue({name:n.name,description:n.description,location:n.location,photoURL:n.photoURL})}else this.router.navigate(["/home"])})}onSubmit(){if(this.thingForm.invalid||!this.currentUser){alert("Formul\xE1rio inv\xE1lido ou usu\xE1rio n\xE3o autenticado.");return}let e=this.thingForm.value,n=k({},e),r=this.currentUser.uid,i=this.isEditMode?this.thingId:null;this.dataService.saveThing(i,n,r).subscribe({next:o=>{alert(`Item ${this.isEditMode?"atualizado":"cadastrado"} com sucesso! ID: ${o}`),this.router.navigate(["/view",o])},error:o=>{console.error("Erro ao salvar o item:",o),alert("Ocorreu um erro ao salvar o item.")}})}static \u0275fac=function(n){return new(n||t)(W(Nk),W(Jt),W(Xt),W(oo),W(ua),W(Kn))};static \u0275cmp=Dt({type:t,selectors:[["app-save-thing"]],decls:37,vars:19,consts:[[1,"container","mt-5"],[1,"text-center","mb-4"],[1,"row","justify-content-center"],[1,"col-md-8"],[1,"card","shadow-sm","p-4"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name",1,"form-control"],[1,"invalid-feedback"],["for","description",1,"form-label"],["id","description","formControlName","description","rows","3",1,"form-control"],["for","location",1,"form-label"],["type","text","id","location","formControlName","location",1,"form-control"],["for","photoURL",1,"form-label"],["type","url","id","photoURL","formControlName","photoURL",1,"form-control"],[1,"mt-2","text-center"],[1,"d-flex","justify-content-between","mt-4"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"bi","bi-arrow-left"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"bi","bi-save"],["alt","Pr\xE9-visualiza\xE7\xE3o",2,"max-width","100%","max-height","200px","object-fit","cover",3,"src"]],template:function(n,r){if(n&1&&(B(0,"div",0)(1,"h2",1),q(2),j(),B(3,"div",2)(4,"div",3)(5,"div",4)(6,"form",5),bt("ngSubmit",function(){return r.onSubmit()}),B(7,"div",6)(8,"label",7),q(9,"Nome da Coisa"),j(),ye(10,"input",8),Xe(11,C6,2,0,"div",9),Xe(12,S6,2,0,"div",9),j(),B(13,"div",6)(14,"label",10),q(15,"Descri\xE7\xE3o"),j(),ye(16,"textarea",11),Xe(17,A6,2,0,"div",9),j(),B(18,"div",6)(19,"label",12),q(20,"Localiza\xE7\xE3o"),j(),ye(21,"input",13),Xe(22,R6,2,0,"div",9),j(),B(23,"div",6)(24,"label",14),q(25,"URL da Foto"),j(),ye(26,"input",15),Xe(27,N6,2,0,"div",9),Xe(28,M6,2,0,"div",9),Xe(29,P6,2,1,"div",16),j(),B(30,"div",17)(31,"button",18),bt("click",function(){return r.router.navigate(["/home"])}),ye(32,"i",19),q(33," Voltar "),j(),B(34,"button",20),ye(35,"i",21),q(36),j()()()()()()()),n&2){let i,o,s,a,u,l,h,p,g,y,D;oe(2),qt(r.formTitle),oe(4),Tt("formGroup",r.thingForm),oe(4),hr("is-invalid",((i=r.thingForm.get("name"))==null?null:i.invalid)&&((i=r.thingForm.get("name"))==null?null:i.touched)),oe(),et((o=r.thingForm.get("name"))!=null&&o.hasError("required")&&((o=r.thingForm.get("name"))!=null&&o.touched)?11:-1),oe(),et((s=r.thingForm.get("name"))!=null&&s.hasError("minlength")?12:-1),oe(4),hr("is-invalid",((a=r.thingForm.get("description"))==null?null:a.invalid)&&((a=r.thingForm.get("description"))==null?null:a.touched)),oe(),et((u=r.thingForm.get("description"))!=null&&u.hasError("required")&&((u=r.thingForm.get("description"))!=null&&u.touched)?17:-1),oe(4),hr("is-invalid",((l=r.thingForm.get("location"))==null?null:l.invalid)&&((l=r.thingForm.get("location"))==null?null:l.touched)),oe(),et((h=r.thingForm.get("location"))!=null&&h.hasError("required")&&((h=r.thingForm.get("location"))!=null&&h.touched)?22:-1),oe(4),hr("is-invalid",((p=r.thingForm.get("photoURL"))==null?null:p.invalid)&&((p=r.thingForm.get("photoURL"))==null?null:p.touched)),oe(),et((g=r.thingForm.get("photoURL"))!=null&&g.hasError("required")&&((g=r.thingForm.get("photoURL"))!=null&&g.touched)?27:-1),oe(),et((y=r.thingForm.get("photoURL"))!=null&&y.hasError("pattern")?28:-1),oe(),et((D=r.thingForm.get("photoURL"))!=null&&D.valid?29:-1),oe(5),Tt("disabled",r.thingForm.invalid),oe(2),Gr(" ",r.isEditMode?"Salvar Altera\xE7\xF5es":"Cadastrar"," ")}},dependencies:[Dn,Mk,Ak,kg,wk,Dk,tT,nT],encapsulation:2})};var fs="NgCRUD",Pk=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:Eg,title:fs},{path:"contacts",component:Ig,title:`${fs} - Fa\xE7a Contato`},{path:"about",component:wg,title:`${fs} - Sobre`},{path:"seed-data",component:Dg,title:`${fs} - Cadastro de Coisas`},{path:"view/:id",component:Tg,title:`${fs} - Ver Item`},{path:"edit/:id",component:Bl,title:`${fs} - Editar Item`},{path:"new",component:Bl,title:`${fs} - Cadastrar Item`},{path:"**",redirectTo:"/home"}];var rT="Service workers are disabled or not supported by this browser",oc=class{serviceWorker;worker;registration;events;constructor(e,n){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new Y(r=>r.error(new V(5601,!1)));else{let r=null,i=new Pe;this.worker=new Y(l=>(r!==null&&l.next(r),i.subscribe(h=>l.next(h))));let o=()=>{let{controller:l}=e;l!==null&&(r=l,i.next(r))};e.addEventListener("controllerchange",o),o(),this.registration=this.worker.pipe(xe(()=>e.getRegistration().then(l=>{if(!l)throw new V(5601,!1);return l})));let s=new Pe;this.events=s.asObservable();let a=l=>{let{data:h}=l;h?.type&&s.next(h)};e.addEventListener("message",a),n?.get(jn,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",o),e.removeEventListener("message",a)})}}postMessage(e,n){return new Promise(r=>{this.worker.pipe(ct(1)).subscribe(i=>{i.postMessage(k({action:e},n)),r()})})}postMessageWithOperation(e,n,r){let i=this.waitForOperationCompleted(r),o=this.postMessage(e,n);return Promise.all([o,i]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let n;return typeof e=="string"?n=r=>r.type===e:n=r=>e.includes(r.type),this.events.pipe(ft(n))}nextEventOfType(e){return this.eventsOfType(e).pipe(ct(1))}waitForOperationCompleted(e){return new Promise((n,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(ft(i=>i.nonce===e),ct(1),G(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:n,error:r})})}get isEnabled(){return!!this.serviceWorker}},x6=(()=>{class t{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new Pe;constructor(n){if(this.sw=n,!n.isEnabled){this.messages=Mr,this.notificationClicks=Mr,this.notificationCloses=Mr,this.pushSubscriptionChanges=Mr,this.subscription=Mr;return}this.messages=this.sw.eventsOfType("PUSH").pipe(G(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(G(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(G(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(G(i=>i.data)),this.pushManager=this.sw.registration.pipe(G(i=>i.pushManager));let r=this.pushManager.pipe(xe(i=>i.getSubscription()));this.subscription=new Y(i=>{let o=r.subscribe(i),s=this.subscriptionChanges.subscribe(i);return()=>{o.unsubscribe(),s.unsubscribe()}})}requestSubscription(n){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(rT));let r={userVisibleOnly:!0},i=this.decodeBase64(n.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return r.applicationServerKey=o,new Promise((s,a)=>{this.pushManager.pipe(xe(u=>u.subscribe(r)),ct(1)).subscribe({next:u=>{this.subscriptionChanges.next(u),s(u)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(rT));let n=r=>{if(r===null)throw new V(5602,!1);return r.unsubscribe().then(i=>{if(!i)throw new V(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,i)=>{this.subscription.pipe(ct(1),xe(n)).subscribe({next:r,error:i})})}decodeBase64(n){return atob(n)}static \u0275fac=function(r){return new(r||t)(z(oc))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),k6=(()=>{class t{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(n){if(this.sw=n,!n.isEnabled){this.versionUpdates=Mr,this.unrecoverable=Mr;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED","VERSION_FAILED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(rT));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let n=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:n},n).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new V(5601,!1));let n=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:n},n)}static \u0275fac=function(r){return new(r||t)(z(oc))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})();var kk=new U("");function O6(){let t=M($l);if(!("serviceWorker"in navigator&&t.enabled!==!1))return;let e=M(kk),n=M(Ee),r=M(jn);n.runOutsideAngular(()=>{let i=navigator.serviceWorker,o=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",o),r.onDestroy(()=>{i.removeEventListener("controllerchange",o)})}),n.runOutsideAngular(()=>{let i,{registrationStrategy:o}=t;if(typeof o=="function")i=new Promise(s=>o().subscribe(()=>s()));else{let[s,...a]=(o||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=xk(+a[0]||0);break;case"registerWhenStable":i=Promise.race([r.whenStable(),xk(+a[0])]);break;default:throw new V(5600,!1)}}i.then(()=>{r.destroyed||navigator.serviceWorker.register(e,{scope:t.scope,updateViaCache:t.updateViaCache,type:t.type}).catch(s=>console.error(Di(5604,!1)))})})}function xk(t){return new Promise(e=>setTimeout(e,t))}function F6(t,e){return new oc(t.enabled!==!1?navigator.serviceWorker:void 0,e)}var $l=class{enabled;updateViaCache;type;scope;registrationStrategy};function Ok(t,e={}){return Mt([x6,k6,{provide:kk,useValue:t},{provide:$l,useValue:e},{provide:oc,useFactory:F6,deps:[$l,ke]},na(O6)])}var Fk={providers:[Ny(),e_({eventCoalescing:!0}),X_(Pk),tN(()=>nN({projectId:"ngcrud-93a6f",appId:"1:1043187476281:web:777f337c87a8d171d22ae8",storageBucket:"ngcrud-93a6f.firebasestorage.app",apiKey:"AIzaSyDHQPWxYc2Xc2xXwW2dh6bg1Bup7vjYNrk",authDomain:"ngcrud-93a6f.firebaseapp.com",messagingSenderId:"1043187476281"})),nM(()=>rM()),qx(()=>Wx()),Ok("ngsw-worker.js",{enabled:!fu(),registrationStrategy:"registerWhenStable:30000"})]};var Fg=class t{constructor(e,n){this.auth=e;this.firestore=n;this.user$=yo(()=>Na(this.auth)).pipe(xe(r=>{if(!r)return new Y(o=>o.next(null));let i=ci(this.firestore,"Users",r.uid);return pe(Ol(i)).pipe(xe(o=>{let s=new Date().toISOString();if(o.exists())return pe(UD(i,{lastLoginAt:s},{merge:!0})).pipe(G(()=>r));{let a={displayName:r.displayName,email:r.email,photoURL:r.photoURL,uid:r.uid,lastLoginAt:s,role:"user",status:"ON",createdAt:s};return pe(UD(i,a)).pipe(G(()=>r))}}))}))}user$;loginWithGoogle(){return iM(this.auth,new oI)}logout(){return oM(this.auth)}static \u0275fac=function(n){return new(n||t)(z(Kn),z(Xn))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};function V6(t,e){if(t&1){let n=Mi();B(0,"a",33),bt("click",function(){jr(n);let i=Yt();return Ur(i.confirmLogout())}),ye(1,"img",34),j()}if(t&2){let n=e;oe(),Tt("src",n.photoURL,Fn)("alt",n.displayName)("title",n.displayName)}}function j6(t,e){if(t&1){let n=Mi();B(0,"a",33),bt("click",function(){jr(n);let i=Yt();return Ur(i.authService.loginWithGoogle())}),ye(1,"i",35),j()}}function U6(t,e){if(t&1){let n=Mi();B(0,"a",36),bt("click",function(){jr(n);let i=Yt();return Ur(i.confirmLogout())}),ye(1,"img",37),B(2,"span"),q(3),j()()}if(t&2){let n=e;oe(),Tt("src",n.photoURL,Fn)("alt",n.displayName)("title",n.displayName),oe(2),qt(n.displayName)}}function B6(t,e){if(t&1){let n=Mi();B(0,"a",36),bt("click",function(){jr(n);let i=Yt();return Ur(i.authService.loginWithGoogle())}),ye(1,"i",38),B(2,"span"),q(3,"Login"),j()()}}var Lg=class t{constructor(e){this.authService=e}title="ngcrud";confirmLogout(){confirm("Tem certeza que deseja sair?")&&this.authService.logout()}static \u0275fac=function(n){return new(n||t)(W(Fg))};static \u0275cmp=Dt({type:t,selectors:[["app-root"]],decls:63,vars:6,consts:[[1,"d-flex","flex-column","min-vh-100"],[1,"navbar","navbar-expand-sm","bg-dark","navbar-dark"],[1,"container"],["routerLink","/home",1,"navbar-brand"],[1,"bi","bi-database"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#offcanvasNavbar","aria-controls","offcanvasNavbar",1,"navbar-toggler","d-sm-none"],[1,"navbar-toggler-icon"],["id","collapsibleNavbar",1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto","align-items-center"],[1,"nav-item"],["routerLink","/home",1,"nav-link"],["routerLink","/new",1,"nav-link"],["routerLink","/contacts",1,"nav-link"],["routerLink","/about",1,"nav-link"],[1,"nav-link"],["tabindex","-1","id","offcanvasNavbar","aria-labelledby","offcanvasNavbarLabel",1,"offcanvas","offcanvas-end","text-bg-dark","d-sm-none"],[1,"offcanvas-header"],["id","offcanvasNavbarLabel",1,"offcanvas-title"],[1,"bi","bi-database-fill"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close","btn-close-white"],[1,"offcanvas-body"],[1,"navbar-nav","justify-content-end","flex-grow-1","pe-3"],["routerLink","/home",1,"nav-link","ps-2"],[1,"bi","bi-house-fill","pe-2",2,"font-size","1.2rem"],["routerLink","/new",1,"nav-link","ps-2"],["routerLink","/contacts",1,"nav-link","ps-2"],[1,"bi","bi-chat-dots-fill","pe-2",2,"font-size","1.2rem"],["routerLink","/about",1,"nav-link","ps-2"],[1,"bi","bi-info-circle-fill","pe-2",2,"font-size","1.2rem"],["data-bs-dismiss","offcanvas",1,"nav-link","ps-2","d-flex","align-items-center"],[1,"container","flex-grow-1","mt-3"],[1,"bg-dark","text-white","text-center","p-3","mt-4"],[1,"mb-0"],[1,"nav-link",3,"click"],["width","32","height","32","referrerpolicy","no-referrer",1,"rounded-circle",3,"src","alt","title"],[1,"bi","bi-person-circle",2,"font-size","1.5rem"],["data-bs-dismiss","offcanvas",1,"nav-link","ps-2","d-flex","align-items-center",3,"click"],["width","32","height","32","referrerpolicy","no-referrer",1,"rounded-circle","me-2",3,"src","alt","title"],[1,"bi","bi-person-circle","me-2",2,"font-size","2rem"]],template:function(n,r){if(n&1&&(B(0,"div",0)(1,"nav",1)(2,"div",2)(3,"a",3),q(4,"NG"),ye(5,"i",4),q(6,"CRUD"),j(),B(7,"button",5),ye(8,"span",6),j(),B(9,"div",7)(10,"ul",8)(11,"li",9)(12,"a",10),q(13,"In\xEDcio"),j()(),B(14,"li",9)(15,"a",11),q(16,"Novo"),j()(),B(17,"li",9)(18,"a",12),q(19,"Contatos"),j()(),B(20,"li",9)(21,"a",13),q(22,"Sobre"),j()(),B(23,"li",9),Xe(24,V6,2,3,"a",14),Pi(25,"async"),ra(26,j6,2,0,"a",14),j()()()()(),B(27,"div",15)(28,"div",16)(29,"h1",17),q(30,"NG"),ye(31,"i",18),q(32,"CRUD"),j(),ye(33,"button",19),j(),B(34,"div",20)(35,"ul",21)(36,"li",9)(37,"a",22),ye(38,"i",23),q(39,"In\xEDcio"),j()(),B(40,"li",9)(41,"a",24),ye(42,"i",23),q(43,"Novo"),j()(),B(44,"li",9)(45,"a",25),ye(46,"i",26),q(47,"Contatos"),j()(),B(48,"li",9)(49,"a",27),ye(50,"i",28),q(51,"Sobre"),j()(),B(52,"li",9),ye(53,"hr"),j(),B(54,"li",9),Xe(55,U6,4,4,"a",29),Pi(56,"async"),ra(57,B6,4,0,"a",29),j()()()(),B(58,"main",30),ye(59,"router-outlet"),j(),B(60,"footer",31)(61,"p",32),q(62,"\xA9 Copyright 2025 Joca da Silva"),j()()()),n&2){let i,o;oe(24),et((i=sa(25,2,r.authService.user$))?24:26,i),oe(31),et((o=sa(56,4,r.authService.user$))?55:57,o)}},dependencies:[Dn,Uu,tE,ji,Eu],styles:["@media (max-width: 575.98px){.offcanvas[_ngcontent-%COMP%]{max-width:280px}}a[_ngcontent-%COMP%]{cursor:pointer}.nav-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}"]})};T_(Lg,Fk).catch(t=>console.error(t));
